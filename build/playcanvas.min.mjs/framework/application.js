import{platform as s}from"../core/platform.js";import{WebglGraphicsDevice as r}from"../graphics/webgl/webgl-graphics-device.js";import{SoundManager as o}from"../sound/manager.js";import{Lightmapper as e}from"../scene/lightmapper/lightmapper.js";import{BatchManager as m}from"../scene/batching/batch-manager.js";import{AppBase as t}from"./app-base.js";import{AppOptions as p}from"./app-options.js";import{script as i}from"./script.js";import{AnimationComponentSystem as n}from"./components/animation/system.js";import{AnimComponentSystem as c}from"./components/anim/system.js";import{AudioListenerComponentSystem as a}from"./components/audio-listener/system.js";import{AudioSourceComponentSystem as f}from"./components/audio-source/system.js";import{ButtonComponentSystem as j}from"./components/button/system.js";import{CollisionComponentSystem as u}from"./components/collision/system.js";import{ElementComponentSystem as l}from"./components/element/system.js";import{JointComponentSystem as y}from"./components/joint/system.js";import{LayoutChildComponentSystem as d}from"./components/layout-child/system.js";import{LayoutGroupComponentSystem as h}from"./components/layout-group/system.js";import{ModelComponentSystem as g}from"./components/model/system.js";import{ParticleSystemComponentSystem as b}from"./components/particle-system/system.js";import{RenderComponentSystem as x}from"./components/render/system.js";import{RigidBodyComponentSystem as v}from"./components/rigid-body/system.js";import{ScreenComponentSystem as D}from"./components/screen/system.js";import{ScriptLegacyComponentSystem as O}from"./components/script-legacy/system.js";import{ScrollViewComponentSystem as w}from"./components/scroll-view/system.js";import{ScrollbarComponentSystem as P}from"./components/scrollbar/system.js";import{SoundComponentSystem as C}from"./components/sound/system.js";import{SpriteComponentSystem as H}from"./components/sprite/system.js";import{ZoneComponentSystem as S}from"./components/zone/system.js";import{CameraComponentSystem as k}from"./components/camera/system.js";import{LightComponentSystem as I}from"./components/light/system.js";import{ScriptComponentSystem as M}from"./components/script/system.js";import{RenderHandler as R}from"../resources/render.js";import{AnimationHandler as z}from"../resources/animation.js";import{AnimClipHandler as q}from"../resources/anim-clip.js";import{AnimStateGraphHandler as A}from"../resources/anim-state-graph.js";import{AudioHandler as B}from"../resources/audio.js";import{BinaryHandler as E}from"../resources/binary.js";import{ContainerHandler as F}from"../resources/container.js";import{CssHandler as G}from"../resources/css.js";import{CubemapHandler as J}from"../resources/cubemap.js";import{FolderHandler as K}from"../resources/folder.js";import{FontHandler as L}from"../resources/font.js";import{HierarchyHandler as N}from"../resources/hierarchy.js";import{HtmlHandler as Q}from"../resources/html.js";import{JsonHandler as T}from"../resources/json.js";import{MaterialHandler as U}from"../resources/material.js";import{ModelHandler as V}from"../resources/model.js";import{SceneHandler as W}from"../resources/scene.js";import{ScriptHandler as X}from"../resources/script.js";import{ShaderHandler as Y}from"../resources/shader.js";import{SpriteHandler as Z}from"../resources/sprite.js";import{TemplateHandler as $}from"../resources/template.js";import{TextHandler as _}from"../resources/text.js";import{TextureAtlasHandler as ss}from"../resources/texture-atlas.js";import{TextureHandler as rs}from"../resources/texture.js";import{XrManager as os}from"../xr/xr-manager.js";class es extends t{constructor(s,r={}){super(s);const t=new p;t.graphicsDevice=this.createDevice(s,r),this.addComponentSystems(t),this.addResourceHandles(t),t.elementInput=r.elementInput,t.keyboard=r.keyboard,t.mouse=r.mouse,t.touch=r.touch,t.gamepads=r.gamepads,t.scriptPrefix=r.scriptPrefix,t.assetPrefix=r.assetPrefix,t.scriptsOrder=r.scriptsOrder,t.soundManager=new o(r),t.lightmapper=e,t.batchManager=m,t.xr=os,this.init(t)}createDevice(o,e){return e.graphicsDeviceOptions||(e.graphicsDeviceOptions={}),s.browser&&navigator.xr&&(e.graphicsDeviceOptions.xrCompatible=!0),e.graphicsDeviceOptions.alpha=e.graphicsDeviceOptions.alpha||!1,new r(o,e.graphicsDeviceOptions)}addComponentSystems(s){s.componentSystems=[v,u,y,n,c,g,x,k,I,i.legacy?O:M,f,C,a,b,D,l,j,w,P,H,h,d,S]}addResourceHandles(s){s.resourceHandlers=[R,z,q,A,V,U,rs,_,T,B,X,W,J,Q,G,Y,N,K,L,E,ss,Z,$,F]}}export{es as Application};
