import{ADDRESS_CLAMP_TO_EDGE as s,ADDRESS_REPEAT as e}from"../../../platform/graphics/constants.js";import{Texture as t}from"../../../platform/graphics/texture.js";import{Asset as a}from"../../asset/asset.js";import{basisTranscode as r}from"../../handlers/basis.js";class o{constructor(s,e){this.device=e,this.maxRetries=0}load(s,e,t){const o=this.device;a.fetchArrayBuffer(s.load,((a,i)=>{var l,m,n,d;a?e(a):(l=i,r(o,s.load,l,e,{isGGGR:0!=(8&(null==t||null==(m=t.file)||null==(n=m.variants)||null==(d=n.basis)?void 0:d.opt))})||e(`Basis module not found. Asset '${t.name}' basis texture variant will not be loaded.`))}),t,this.maxRetries)}open(a,r,o){const i=new t(o,{name:a,addressU:r.cubemap?s:e,addressV:r.cubemap?s:e,width:r.width,height:r.height,format:r.format,cubemap:r.cubemap,levels:r.levels});return i.upload(),i}}export{o as BasisParser};
