import"../../core/tracing.js";import{Vec4 as e}from"../../core/math/vec4.js";import{CULLFACE_NONE as t,DEVICETYPE_WEBGPU as r}from"../../platform/graphics/constants.js";import{RenderPass as o}from"../../platform/graphics/render-pass.js";import{QuadRender as s}from"./quad-render.js";const i=new e;function p(e,p,n,c,h,l=!1){const d=e.getDepthTest(),a=e.getDepthWrite(),m=e.getCullMode(),g=e.writeRed,w=e.writeGreen,u=e.writeBlue,f=e.writeAlpha;e.setDepthTest(!1),e.setDepthWrite(!1),e.setCullMode(t),e.setColorWrite(!0,!0,!0,!0),l||e.setBlending(!1);const D=new s(n);c||((c=i).x=0,c.y=0,c.z=p?p.width:e.width,c.w=p?p.height:e.height);const C=new o(e,(()=>{D.render(c,h)}));C.init(p),C.colorOps.clear=!1,C.depthStencilOps.clearDepth=!1,e.deviceType===r&&(C.depthStencilOps.clearDepth=!0),C.render(),D.destroy(),e.setDepthTest(d),e.setDepthWrite(a),e.setCullMode(m),e.setColorWrite(g,w,u,f)}function n(e,t,r,o,s,i,n=!1){o=o||e.getCopyShader(),e.constantTexSource.setValue(t),p(e,r,o,s,i,n)}export{p as drawQuadWithShader,n as drawTexture};
