import{version as e,revision as t}from"../core/core.js";import{string as r}from"../core/string.js";import{now as o}from"../core/time.js";import"../core/tracing.js";import{math as n}from"../core/math/math.js";import{Color as s}from"../core/math/color.js";import{Mat4 as i}from"../core/math/mat4.js";import{Vec2 as a}from"../core/math/vec2.js";import{Vec3 as p}from"../core/math/vec3.js";import{Vec4 as c}from"../core/math/vec4.js";import{BoundingBox as m}from"../core/shape/bounding-box.js";import{BoundingSphere as f}from"../core/shape/bounding-sphere.js";import{Frustum as l}from"../core/shape/frustum.js";import{Plane as u}from"../core/shape/plane.js";import{TYPE_INT8 as d,TYPE_UINT8 as h,TYPE_INT16 as y,TYPE_UINT16 as g,TYPE_INT32 as E,TYPE_UINT32 as _,TYPE_FLOAT32 as T,PIXELFORMAT_LA8 as I,PIXELFORMAT_RGB565 as b,PIXELFORMAT_RGBA5551 as j,PIXELFORMAT_RGBA4 as L,PIXELFORMAT_RGB8 as S,PIXELFORMAT_RGBA8 as A,ADDRESS_CLAMP_TO_EDGE as C,ADDRESS_MIRRORED_REPEAT as O,ADDRESS_REPEAT as M,BLENDMODE_ZERO as R,BLENDMODE_ONE as N,BLENDMODE_SRC_COLOR as P,BLENDMODE_ONE_MINUS_SRC_COLOR as D,BLENDMODE_DST_COLOR as w,BLENDMODE_ONE_MINUS_DST_COLOR as v,BLENDMODE_SRC_ALPHA as F,BLENDMODE_SRC_ALPHA_SATURATE as x,BLENDMODE_ONE_MINUS_SRC_ALPHA as B,BLENDMODE_DST_ALPHA as k,BLENDMODE_ONE_MINUS_DST_ALPHA as V,BUFFER_STATIC as U,BUFFER_DYNAMIC as G,BUFFER_STREAM as X,CULLFACE_NONE as H,CULLFACE_BACK as K,CULLFACE_FRONT as W,CULLFACE_FRONTANDBACK as Y,FILTER_NEAREST as z,FILTER_LINEAR as q,FILTER_NEAREST_MIPMAP_NEAREST as Q,FILTER_NEAREST_MIPMAP_LINEAR as J,FILTER_LINEAR_MIPMAP_NEAREST as Z,FILTER_LINEAR_MIPMAP_LINEAR as $,INDEXFORMAT_UINT8 as ee,INDEXFORMAT_UINT16 as te,INDEXFORMAT_UINT32 as re,PRIMITIVE_POINTS as oe,PRIMITIVE_LINES as ne,PRIMITIVE_LINELOOP as se,PRIMITIVE_LINESTRIP as ie,PRIMITIVE_TRIANGLES as ae,PRIMITIVE_TRISTRIP as pe,PRIMITIVE_TRIFAN as ce,SEMANTIC_POSITION as me,SEMANTIC_NORMAL as fe,SEMANTIC_COLOR as le,SEMANTIC_TEXCOORD as ue,SEMANTIC_TEXCOORD0 as de,SEMANTIC_TEXCOORD1 as he,SEMANTIC_ATTR0 as ye,SEMANTIC_ATTR1 as ge,SEMANTIC_ATTR2 as Ee,SEMANTIC_ATTR3 as _e,TEXTURELOCK_READ as Te,TEXTURELOCK_WRITE as Ie,TEXTURETYPE_RGBM as be,TEXTURETYPE_DEFAULT as je,TEXTURETYPE_SWIZZLEGGGR as Le}from"../platform/graphics/constants.js";import{begin as Se,end as Ae,fogCode as Ce,gammaCode as Oe,skinCode as Me,tonemapCode as Re}from"../scene/shader-lib/programs/common.js";import{drawQuadWithShader as Ne}from"../scene/graphics/quad-render-utils.js";import{shaderChunks as Pe}from"../scene/shader-lib/chunks/chunks.js";import{GraphicsDevice as De}from"../platform/graphics/graphics-device.js";import{IndexBuffer as we}from"../platform/graphics/index-buffer.js";import{PostEffect as ve}from"../scene/graphics/post-effect.js";import{PostEffectQueue as Fe}from"../framework/components/camera/post-effect-queue.js";import{ProgramLibrary as xe}from"../scene/shader-lib/program-library.js";import{getProgramLibrary as Be,setProgramLibrary as ke}from"../scene/shader-lib/get-program-library.js";import{RenderTarget as Ve}from"../platform/graphics/render-target.js";import{ScopeId as Ue}from"../platform/graphics/scope-id.js";import{Shader as Ge}from"../platform/graphics/shader.js";import{WebglShaderInput as Xe}from"../platform/graphics/webgl/webgl-shader-input.js";import{Texture as He}from"../platform/graphics/texture.js";import{VertexBuffer as Ke}from"../platform/graphics/vertex-buffer.js";import{VertexFormat as We}from"../platform/graphics/vertex-format.js";import{VertexIterator as Ye}from"../platform/graphics/vertex-iterator.js";import{ShaderUtils as ze}from"../platform/graphics/shader-utils.js";import{GraphicsDeviceAccess as qe}from"../platform/graphics/graphics-device-access.js";import{LAYERID_WORLD as Qe,LAYERID_IMMEDIATE as Je,LINEBATCH_OVERLAY as Ze,PROJECTION_ORTHOGRAPHIC as $e,PROJECTION_PERSPECTIVE as et}from"../scene/constants.js";import{calculateTangents as tt,createMesh as rt,createTorus as ot,createCylinder as nt,createCapsule as st,createCone as it,createSphere as at,createPlane as pt,createBox as ct}from"../scene/procedural.js";import{partitionSkin as mt}from"../scene/skin-partition.js";import{BasicMaterial as ft}from"../scene/materials/basic-material.js";import{ForwardRenderer as lt}from"../scene/renderer/forward-renderer.js";import{GraphNode as ut}from"../scene/graph-node.js";import{Material as dt}from"../scene/materials/material.js";import{Mesh as ht}from"../scene/mesh.js";import{Morph as yt}from"../scene/morph.js";import{Command as gt,MeshInstance as Et}from"../scene/mesh-instance.js";import{Model as _t}from"../scene/model.js";import{ParticleEmitter as Tt}from"../scene/particle-system/particle-emitter.js";import{Picker as It}from"../framework/graphics/picker.js";import{Scene as bt}from"../scene/scene.js";import{Skin as jt}from"../scene/skin.js";import{SkinInstance as Lt}from"../scene/skin-instance.js";import{StandardMaterial as St}from"../scene/materials/standard-material.js";import{Batch as At}from"../scene/batching/batch.js";import{getDefaultMaterial as Ct}from"../scene/materials/default-material.js";import{StandardMaterialOptions as Ot}from"../scene/materials/standard-material-options.js";import{LitOptions as Mt}from"../scene/materials/lit-options.js";import{Layer as Rt}from"../scene/layer.js";import{Animation as Nt,Key as Pt,Node as Dt}from"../scene/animation/animation.js";import{Skeleton as wt}from"../scene/animation/skeleton.js";import{Channel as vt}from"../platform/audio/channel.js";import{Channel3d as Ft}from"../platform/audio/channel3d.js";import{Listener as xt}from"../platform/sound/listener.js";import{Sound as Bt}from"../platform/sound/sound.js";import{SoundManager as kt}from"../platform/sound/manager.js";import{AssetRegistry as Vt}from"../framework/asset/asset-registry.js";import{XrInputSource as Ut}from"../framework/xr/xr-input-source.js";import{Controller as Gt}from"../platform/input/controller.js";import{ElementInput as Xt}from"../framework/input/element-input.js";import{GamePads as Ht}from"../platform/input/game-pads.js";import{Keyboard as Kt}from"../platform/input/keyboard.js";import{KeyboardEvent as Wt}from"../platform/input/keyboard-event.js";import{Mouse as Yt}from"../platform/input/mouse.js";import{MouseEvent as zt}from"../platform/input/mouse-event.js";import{TouchDevice as qt}from"../platform/input/touch-device.js";import{getTouchTargetCoords as Qt,Touch as Jt,TouchEvent as Zt}from"../platform/input/touch-event.js";import{AppBase as $t}from"../framework/app-base.js";import{getApplication as er}from"../framework/globals.js";import{CameraComponent as tr}from"../framework/components/camera/component.js";import{LightComponent as rr}from"../framework/components/light/component.js";import{ModelComponent as or}from"../framework/components/model/component.js";import{RenderComponent as nr}from"../framework/components/render/component.js";import{BODYTYPE_STATIC as sr,BODYTYPE_DYNAMIC as ir,BODYTYPE_KINEMATIC as ar,BODYFLAG_STATIC_OBJECT as pr,BODYFLAG_KINEMATIC_OBJECT as cr,BODYFLAG_NORESPONSE_OBJECT as mr,BODYSTATE_ACTIVE_TAG as fr,BODYSTATE_ISLAND_SLEEPING as lr,BODYSTATE_WANTS_DEACTIVATION as ur,BODYSTATE_DISABLE_DEACTIVATION as dr,BODYSTATE_DISABLE_SIMULATION as hr}from"../framework/components/rigid-body/constants.js";import{RigidBodyComponent as yr}from"../framework/components/rigid-body/component.js";import{RigidBodyComponentSystem as gr}from"../framework/components/rigid-body/system.js";import{basisInitialize as Er}from"../framework/handlers/basis.js";const _r={write:function(e){console.log(e)},open:function(){_r.write("Powered by PlayCanvas "+e+" "+t)},info:function(e){console.info("INFO:    "+e)},debug:function(e){console.debug("DEBUG:   "+e)},error:function(e){console.error("ERROR:   "+e)},warning:function(e){console.warn("WARNING: "+e)},alert:function(e){_r.write("ALERT:   "+e),alert(e)},assert:function(e,t){!1===e&&_r.write("ASSERT:  "+t)}};r.endsWith=function(e,t){return e.endsWith(t)},r.startsWith=function(e,t){return e.startsWith(t)};const Tr={now:o,Timer:class{constructor(){this._isRunning=!1,this._a=0,this._b=0}start(){this._isRunning=!0,this._a=o()}stop(){this._isRunning=!1,this._b=o()}getMilliseconds(){return this._b-this._a}}};function Ir(e,t){const r=function(){},o=function(r,o,n,s,i,a,p,c){t.call(this,r,o,n,s,i,a,p,c),e.call(this,r,o,n,s,i,a,p,c)};return o._super=t.prototype,r.prototype=t.prototype,o.prototype=new r,o}function br(e){return Array.prototype.slice.call(e)}function jr(e){const t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),t}Object.defineProperty(s.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.r,this._data[1]=this.g,this._data[2]=this.b,this._data[3]=this.a,this._data}}),Object.defineProperty(s.prototype,"data3",{get:function(){return this._data3||(this._data3=new Float32Array(3)),this._data3[0]=this.r,this._data3[1]=this.g,this._data3[2]=this.b,this._data3}}),n.INV_LOG2=Math.LOG2E,n.intToBytes=n.intToBytes32,n.bytesToInt=n.bytesToInt32,Object.defineProperty(a.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(2)),this._data[0]=this.x,this._data[1]=this.y,this._data}}),a.prototype.scale=a.prototype.mulScalar,Object.defineProperty(p.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(3)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data}}),p.prototype.scale=p.prototype.mulScalar,Object.defineProperty(c.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data[3]=this.w,this._data}}),c.prototype.scale=c.prototype.mulScalar;const Lr={Aabb:m,Sphere:f,Plane:u};f.prototype.intersectRay=f.prototype.intersectsRay,l.prototype.update=function(e,t){const r=new i;r.mul2(e,t),this.setFromMat4(r)};const Sr=d,Ar=h,Cr=y,Or=g,Mr=E,Rr=_,Nr=T,Pr=I,Dr=b,wr=j,vr=L,Fr=S,xr=A;function Br(e){this.name="UnsupportedBrowserError",this.message=e||""}function kr(e){this.name="ContextCreationError",this.message=e||""}Br.prototype=Error.prototype,kr.prototype=Error.prototype;const Vr={begin:Se,dummyFragmentCode:ze.dummyFragmentCode,end:Ae,fogCode:Ce,gammaCode:Oe,precisionCode:ze.precisionCode,skinCode:Me,tonemapCode:Re,versionCode:ze.versionCode},Ur={ADDRESS_CLAMP_TO_EDGE:C,ADDRESS_MIRRORED_REPEAT:O,ADDRESS_REPEAT:M,BLENDMODE_ZERO:R,BLENDMODE_ONE:N,BLENDMODE_SRC_COLOR:P,BLENDMODE_ONE_MINUS_SRC_COLOR:D,BLENDMODE_DST_COLOR:w,BLENDMODE_ONE_MINUS_DST_COLOR:v,BLENDMODE_SRC_ALPHA:F,BLENDMODE_SRC_ALPHA_SATURATE:x,BLENDMODE_ONE_MINUS_SRC_ALPHA:B,BLENDMODE_DST_ALPHA:k,BLENDMODE_ONE_MINUS_DST_ALPHA:V,BUFFER_STATIC:U,BUFFER_DYNAMIC:G,BUFFER_STREAM:X,CULLFACE_NONE:H,CULLFACE_BACK:K,CULLFACE_FRONT:W,CULLFACE_FRONTANDBACK:Y,ELEMENTTYPE_INT8:d,ELEMENTTYPE_UINT8:h,ELEMENTTYPE_INT16:y,ELEMENTTYPE_UINT16:g,ELEMENTTYPE_INT32:E,ELEMENTTYPE_UINT32:_,ELEMENTTYPE_FLOAT32:T,FILTER_NEAREST:z,FILTER_LINEAR:q,FILTER_NEAREST_MIPMAP_NEAREST:Q,FILTER_NEAREST_MIPMAP_LINEAR:J,FILTER_LINEAR_MIPMAP_NEAREST:Z,FILTER_LINEAR_MIPMAP_LINEAR:$,INDEXFORMAT_UINT8:ee,INDEXFORMAT_UINT16:te,INDEXFORMAT_UINT32:re,PIXELFORMAT_RGB565:b,PIXELFORMAT_RGB8:S,PIXELFORMAT_RGBA8:A,PRIMITIVE_POINTS:oe,PRIMITIVE_LINES:ne,PRIMITIVE_LINELOOP:se,PRIMITIVE_LINESTRIP:ie,PRIMITIVE_TRIANGLES:ae,PRIMITIVE_TRISTRIP:pe,PRIMITIVE_TRIFAN:ce,SEMANTIC_POSITION:me,SEMANTIC_NORMAL:fe,SEMANTIC_COLOR:le,SEMANTIC_TEXCOORD:ue,SEMANTIC_TEXCOORD0:de,SEMANTIC_TEXCOORD1:he,SEMANTIC_ATTR0:ye,SEMANTIC_ATTR1:ge,SEMANTIC_ATTR2:Ee,SEMANTIC_ATTR3:_e,TEXTURELOCK_READ:Te,TEXTURELOCK_WRITE:Ie,drawQuadWithShader:Ne,programlib:Vr,shaderChunks:Pe,ContextCreationError:kr,Device:De,IndexBuffer:we,ProgramLibrary:xe,RenderTarget:Ve,ScopeId:Ue,Shader:Ge,ShaderInput:Xe,Texture:He,UnsupportedBrowserError:Br,VertexBuffer:Ke,VertexFormat:We,VertexIterator:Ye},Gr=new c;function Xr(e,t,r,o,n){let s;if(n){const r=t?t.width:e.width,o=t?t.height:e.height;s=Gr.set(n.x*r,n.y*o,n.z*r,n.w*o)}Ne(e,t,o,s)}const Hr={createFullscreenQuad:e=>e.quadVertexBuffer,drawFullscreenQuad:Xr,PostEffect:ve,PostEffectQueue:Fe};Object.defineProperty(Pe,"transformSkinnedVS",{get:function(){return"#define SKIN\n"+Pe.transformVS}});const Kr={"ambientPrefilteredCube.frag":"ambientEnv.frag","ambientPrefilteredCubeLod.frag":"ambientEnv.frag","dpAtlasQuad.frag":null,"genParaboloid.frag":null,"prefilterCubemap.frag":null,"reflectionDpAtlas.frag":"reflectionEnv.frag","reflectionPrefilteredCube.frag":"reflectionEnv.frag","reflectionPrefilteredCubeLod.frag":"reflectionEnv.frag"};Object.keys(Kr).forEach((e=>{Object.defineProperty(Pe,e,{get:function(){return null},set:function(){}})})),Object.defineProperties(Ve.prototype,{_glFrameBuffer:{get:function(){return this.impl._glFrameBuffer},set:function(e){}}}),Object.defineProperty(We,"defaultInstancingFormat",{get:function(){return We.getDefaultInstancingFormat(qe.get())}}),Object.defineProperties(He.prototype,{rgbm:{get:function(){return this.type===be},set:function(e){this.type=e?be:je}},swizzleGGGR:{get:function(){return this.type===Le},set:function(e){this.type=e?Le:je}},_glTexture:{get:function(){return this.impl._glTexture}}}),De.prototype.getProgramLibrary=function(){return Be(this)},De.prototype.setProgramLibrary=function(e){ke(this,e)},De.prototype.removeShaderFromCache=function(e){Be(this).removeFromCache(e)};const Wr=St,Yr={partitionSkin:mt,procedural:{calculateTangents:tt,createMesh:rt,createTorus:ot,createCylinder:nt,createCapsule:st,createCone:it,createSphere:at,createPlane:pt,createBox:ct},BasicMaterial:ft,Command:gt,ForwardRenderer:lt,GraphNode:ut,Material:dt,Mesh:ht,MeshInstance:Et,Model:_t,ParticleEmitter:Tt,PhongMaterial:St,Picker:It,Projection:{ORTHOGRAPHIC:$e,PERSPECTIVE:et},Scene:bt,Skin:jt,SkinInstance:Lt};function zr(e,t){Object.defineProperty(St.prototype,t,{get:function(){return this[e]},set:function(t){this[e]=t}})}function qr(e,t){"chunks"!==e&&"_pass"!==e&&Object.defineProperty(Ot.prototype,e,{get:function(){return this.litOptions[t||e]},set:function(r){this.litOptions[t||e]=r}})}Object.defineProperty(bt.prototype,"defaultMaterial",{get:function(){return Ct(er().graphicsDevice)}}),["128","64","32","16","8","4"].forEach(((e,t)=>{Object.defineProperty(bt.prototype,`skyboxPrefiltered${e}`,{get:function(){return this._prefilteredCubemaps[t]},set:function(e){this._prefilteredCubemaps[t]=e,this.updateShaders=!0}})})),Object.defineProperty(bt.prototype,"models",{get:function(){return this._models||(this._models=[]),this._models}}),Object.defineProperty(Rt.prototype,"renderTarget",{set:function(e){this._renderTarget=e,this._dirtyCameras=!0},get:function(){return this._renderTarget}}),bt.prototype._updateSkybox=function(e){this._updateSky(e)},bt.prototype.addModel=function(e){if(this.containsModel(e))return;const t=this.layers.getLayerById(Qe);t&&(t.addMeshInstances(e.meshInstances),this.models.push(e))},bt.prototype.addShadowCaster=function(e){const t=this.layers.getLayerById(Qe);t&&t.addShadowCasters(e.meshInstances)},bt.prototype.removeModel=function(e){const t=this.models.indexOf(e);if(-1!==t){const r=this.layers.getLayerById(Qe);if(!r)return;r.removeMeshInstances(e.meshInstances),this.models.splice(t,1)}},bt.prototype.removeShadowCasters=function(e){const t=this.layers.getLayerById(Qe);t&&t.removeShadowCasters(e.meshInstances)},bt.prototype.containsModel=function(e){return this.models.indexOf(e)>=0},bt.prototype.getModels=function(e){return this.models},Object.defineProperty(At.prototype,"model",{get:function(){return null}}),lt.prototype.renderComposition=function(e){er().renderComposition(e)},lt.prototype.updateShader=function(e,t,r,o,n){const s=e.material._scene||er().scene;return e.updatePassShader(s,o,r,n)},Et.prototype.syncAabb=function(){},yt.prototype.getTarget=function(e){return this.targets[e]},ut.prototype._dirtify=function(e){e?this._dirtifyLocal():this._dirtifyWorld()},ut.prototype.addLabel=function(e){this._labels[e]=!0},ut.prototype.getLabels=function(){return Object.keys(this._labels)},ut.prototype.hasLabel=function(e){return!!this._labels[e]},ut.prototype.removeLabel=function(e){delete this._labels[e]},ut.prototype.findByLabel=function(e,t=[]){this.hasLabel(e)&&t.push(this);for(let r=0;r<this._children.length;++r)t=this._children[r].findByLabel(e,t);return t},ut.prototype.getChildren=function(){return this.children},ut.prototype.getName=function(){return this.name},ut.prototype.getPath=function(){return this.path},ut.prototype.getRoot=function(){return this.root},ut.prototype.getParent=function(){return this.parent},ut.prototype.setName=function(e){this.name=e},dt.prototype.getName=function(){return this.name},dt.prototype.setName=function(e){this.name=e},dt.prototype.getShader=function(){return this.shader},dt.prototype.setShader=function(e){this.shader=e},zr("diffuseTint","diffuseMapTint"),zr("specularTint","specularMapTint"),zr("emissiveTint","emissiveMapTint"),zr("aoVertexColor","aoMapVertexColor"),zr("diffuseVertexColor","diffuseMapVertexColor"),zr("specularVertexColor","specularMapVertexColor"),zr("emissiveVertexColor","emissiveMapVertexColor"),zr("metalnessVertexColor","metalnessMapVertexColor"),zr("glossVertexColor","glossMapVertexColor"),zr("opacityVertexColor","opacityMapVertexColor"),zr("lightVertexColor","lightMapVertexColor"),zr("sheenGloss","sheenGlossiess"),zr("clearCoatGloss","clearCostGlossiness"),qr("refraction","useRefraction");const Qr=new Mt,Jr=Object.getOwnPropertyNames(Qr);for(const e in Jr)qr(Jr[e]);const Zr={Animation:Nt,Key:Pt,Node:Dt,Skeleton:wt};Nt.prototype.getDuration=function(){return this.duration},Nt.prototype.getName=function(){return this.name},Nt.prototype.getNodes=function(){return this.nodes},Nt.prototype.setDuration=function(e){this.duration=e},Nt.prototype.setName=function(e){this.name=e},wt.prototype.getAnimation=function(){return this.animation},wt.prototype.getCurrentTime=function(){return this.currentTime},wt.prototype.getLooping=function(){return this.looping},wt.prototype.getNumNodes=function(){return this.numNodes},wt.prototype.setAnimation=function(e){this.animation=e},wt.prototype.setCurrentTime=function(e){this.currentTime=e},wt.prototype.setLooping=function(e){this.looping=e};const $r={AudioManager:kt,Channel:vt,Channel3d:Ft,Listener:xt,Sound:Bt};kt.prototype.getListener=function(){return this.listener},kt.prototype.getVolume=function(){return this.volume},kt.prototype.setVolume=function(e){this.volume=e};const eo={ASSET_ANIMATION:"animation",ASSET_AUDIO:"audio",ASSET_IMAGE:"image",ASSET_JSON:"json",ASSET_MODEL:"model",ASSET_MATERIAL:"material",ASSET_TEXT:"text",ASSET_TEXTURE:"texture",ASSET_CUBEMAP:"cubemap",ASSET_SCRIPT:"script"};Vt.prototype.getAssetById=function(e){return this.get(e)},Object.defineProperty(Ut.prototype,"ray",{get:function(){return this._rayLocal}}),Object.defineProperty(Ut.prototype,"position",{get:function(){return this._localPosition}}),Object.defineProperty(Ut.prototype,"rotation",{get:function(){return this._localRotation}});const to={getTouchTargetCoords:Qt,Controller:Gt,GamePads:Ht,Keyboard:Kt,KeyboardEvent:Wt,Mouse:Yt,MouseEvent:zt,Touch:Jt,TouchDevice:qt,TouchEvent:Zt};Object.defineProperty(Xt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}}),Object.defineProperty(zt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}});const ro=sr,oo=ir,no=ar,so=pr,io=cr,ao=mr,po=fr,co=lr,mo=ur,fo=dr,lo=hr;function uo(e,t,r){Er({glueUrl:e,wasmUrl:t,fallbackUrl:r,lazyInit:!0})}function ho(e){}$t.prototype.isFullscreen=function(){return!!document.fullscreenElement},$t.prototype.enableFullscreen=function(e,t,r){e=e||this.graphicsDevice.canvas;const o=function e(){t(),document.removeEventListener("fullscreenchange",e)},n=function e(){r(),document.removeEventListener("fullscreenerror",e)};t&&document.addEventListener("fullscreenchange",o,!1),r&&document.addEventListener("fullscreenerror",n,!1),e.requestFullscreen?e.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT):r()},$t.prototype.disableFullscreen=function(e){const t=function t(){e(),document.removeEventListener("fullscreenchange",t)};e&&document.addEventListener("fullscreenchange",t,!1),document.exitFullscreen()},$t.prototype.getSceneUrl=function(e){const t=this.scenes.find(e);return t?t.url:null},$t.prototype.loadScene=function(e,t){this.scenes.loadScene(e,t)},$t.prototype.loadSceneHierarchy=function(e,t){this.scenes.loadSceneHierarchy(e,t)},$t.prototype.loadSceneSettings=function(e,t){this.scenes.loadSceneSettings(e,t)},$t.prototype.renderMeshInstance=function(e,t){const r=null!=t&&t.layer?t.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(null,null,null,e,r)},$t.prototype.renderMesh=function(e,t,r,o){const n=null!=o&&o.layer?o.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(t,r,e,null,n)},$t.prototype._addLines=function(e,t,r){const o=r&&r.layer?r.layer:this.scene.layers.getLayerById(Je),n=!r||void 0===r.depthTest||r.depthTest;this.scene.immediate.getBatch(o,n).addLines(e,t)},$t.prototype.renderLine=function(e,t,r){let o,n=r;const i=arguments[3],a=arguments[4];i instanceof s?(n=i,o="number"==typeof a?a===Ze?{layer:this.scene.layers.getLayerById(Je),depthTest:!1}:{layer:this.scene.layers.getLayerById(Je),depthTest:!0}:a):"number"==typeof i?(n=r,o=i===Ze?{layer:this.scene.layers.getLayerById(Je),depthTest:!1}:{layer:this.scene.layers.getLayerById(Je),depthTest:!0}):i&&(o=i),this._addLines([e,t],[r,n],o)},$t.prototype.renderLines=function(e,t,r){r?"number"==typeof r&&(r=r===Ze?{layer:this.scene.layers.getLayerById(Je),depthTest:!1}:{layer:this.scene.layers.getLayerById(Je),depthTest:!0}):r={layer:this.scene.layers.getLayerById(Je),depthTest:!0};!t.length||e.length===t.length?e.length%2==0?this._addLines(e,t,r):console.error("renderLines: array length is not divisible by 2"):console.error("renderLines: position/color arrays have different lengths")},$t.prototype.enableVr=function(){},Object.defineProperty(tr.prototype,"node",{get:function(){return this.entity}}),Object.defineProperty(rr.prototype,"enable",{get:function(){return this.enabled},set:function(e){this.enabled=e}}),or.prototype.setVisible=function(e){this.enabled=e},Object.defineProperty(or.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(nr.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(yr.prototype,"bodyType",{get:function(){return this.type},set:function(e){this.type=e}}),yr.prototype.syncBodyToEntity=function(){this._updateDynamic()},gr.prototype.setGravity=function(){1===arguments.length?this.gravity.copy(arguments[0]):this.gravity.set(arguments[0],arguments[1],arguments[2])};export{kr as ContextCreationError,Nr as ELEMENTTYPE_FLOAT32,Cr as ELEMENTTYPE_INT16,Mr as ELEMENTTYPE_INT32,Sr as ELEMENTTYPE_INT8,Or as ELEMENTTYPE_UINT16,Rr as ELEMENTTYPE_UINT32,Ar as ELEMENTTYPE_UINT8,Pr as PIXELFORMAT_L8_A8,vr as PIXELFORMAT_R4_G4_B4_A4,wr as PIXELFORMAT_R5_G5_B5_A1,Dr as PIXELFORMAT_R5_G6_B5,Fr as PIXELFORMAT_R8_G8_B8,xr as PIXELFORMAT_R8_G8_B8_A8,Wr as PhongMaterial,po as RIGIDBODY_ACTIVE_TAG,io as RIGIDBODY_CF_KINEMATIC_OBJECT,ao as RIGIDBODY_CF_NORESPONSE_OBJECT,so as RIGIDBODY_CF_STATIC_OBJECT,fo as RIGIDBODY_DISABLE_DEACTIVATION,lo as RIGIDBODY_DISABLE_SIMULATION,co as RIGIDBODY_ISLAND_SLEEPING,oo as RIGIDBODY_TYPE_DYNAMIC,no as RIGIDBODY_TYPE_KINEMATIC,ro as RIGIDBODY_TYPE_STATIC,mo as RIGIDBODY_WANTS_DEACTIVATION,Br as UnsupportedBrowserError,Zr as anim,eo as asset,$r as audio,uo as basisSetDownloadConfig,jr as createStyle,Xr as drawFullscreenQuad,Ur as gfx,Ir as inherits,to as input,_r as log,br as makeArray,Hr as posteffect,ho as prefilterCubemap,Vr as programlib,Yr as scene,Lr as shape,Tr as time};
