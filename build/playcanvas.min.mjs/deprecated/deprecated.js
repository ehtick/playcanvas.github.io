import{version as e,revision as t}from"../core/core.js";import{string as r}from"../core/string.js";import{now as o,Timer as n}from"../core/time.js";import"../core/tracing.js";import{math as i}from"../math/math.js";import{Color as s}from"../math/color.js";import{Mat4 as a}from"../math/mat4.js";import{Vec2 as p}from"../math/vec2.js";import{Vec3 as c}from"../math/vec3.js";import{Vec4 as m}from"../math/vec4.js";import{BoundingBox as u}from"../shape/bounding-box.js";import{BoundingSphere as f}from"../shape/bounding-sphere.js";import{Frustum as l}from"../shape/frustum.js";import{Plane as d}from"../shape/plane.js";import{TYPE_INT8 as h,TYPE_UINT8 as y,TYPE_INT16 as E,TYPE_UINT16 as _,TYPE_INT32 as g,TYPE_UINT32 as T,TYPE_FLOAT32 as I,ADDRESS_CLAMP_TO_EDGE as L,ADDRESS_MIRRORED_REPEAT as j,ADDRESS_REPEAT as A,BLENDMODE_ZERO as S,BLENDMODE_ONE as b,BLENDMODE_SRC_COLOR as M,BLENDMODE_ONE_MINUS_SRC_COLOR as C,BLENDMODE_DST_COLOR as N,BLENDMODE_ONE_MINUS_DST_COLOR as O,BLENDMODE_SRC_ALPHA as R,BLENDMODE_SRC_ALPHA_SATURATE as P,BLENDMODE_ONE_MINUS_SRC_ALPHA as D,BLENDMODE_DST_ALPHA as v,BLENDMODE_ONE_MINUS_DST_ALPHA as w,BUFFER_STATIC as B,BUFFER_DYNAMIC as F,BUFFER_STREAM as x,CULLFACE_NONE as k,CULLFACE_BACK as V,CULLFACE_FRONT as U,CULLFACE_FRONTANDBACK as G,FILTER_NEAREST as X,FILTER_LINEAR as W,FILTER_NEAREST_MIPMAP_NEAREST as K,FILTER_NEAREST_MIPMAP_LINEAR as H,FILTER_LINEAR_MIPMAP_NEAREST as Y,FILTER_LINEAR_MIPMAP_LINEAR as z,INDEXFORMAT_UINT8 as Q,INDEXFORMAT_UINT16 as q,INDEXFORMAT_UINT32 as J,PIXELFORMAT_R5_G6_B5 as Z,PIXELFORMAT_R8_G8_B8 as $,PIXELFORMAT_R8_G8_B8_A8 as ee,PRIMITIVE_POINTS as te,PRIMITIVE_LINES as re,PRIMITIVE_LINELOOP as oe,PRIMITIVE_LINESTRIP as ne,PRIMITIVE_TRIANGLES as ie,PRIMITIVE_TRISTRIP as se,PRIMITIVE_TRIFAN as ae,SEMANTIC_POSITION as pe,SEMANTIC_NORMAL as ce,SEMANTIC_COLOR as me,SEMANTIC_TEXCOORD as ue,SEMANTIC_TEXCOORD0 as fe,SEMANTIC_TEXCOORD1 as le,SEMANTIC_ATTR0 as de,SEMANTIC_ATTR1 as he,SEMANTIC_ATTR2 as ye,SEMANTIC_ATTR3 as Ee,TEXTURELOCK_READ as _e,TEXTURELOCK_WRITE as ge,TEXTURETYPE_RGBM as Te,TEXTURETYPE_DEFAULT as Ie,TEXTURETYPE_SWIZZLEGGGR as Le}from"../graphics/constants.js";import{begin as je,dummyFragmentCode as Ae,end as Se,fogCode as be,gammaCode as Me,precisionCode as Ce,skinCode as Ne,tonemapCode as Oe,versionCode as Re}from"../graphics/program-lib/programs/common.js";import{drawQuadWithShader as Pe}from"../graphics/simple-post-effect.js";import{shaderChunks as De}from"../graphics/program-lib/chunks/chunks.js";import{GraphicsDevice as ve}from"../graphics/graphics-device.js";import{IndexBuffer as we}from"../graphics/index-buffer.js";import{createFullscreenQuad as Be,drawFullscreenQuad as Fe,PostEffect as xe}from"../graphics/post-effect.js";import{PostEffectQueue as ke}from"../framework/components/camera/post-effect-queue.js";import{ProgramLibrary as Ve}from"../graphics/program-library.js";import{RenderTarget as Ue}from"../graphics/render-target.js";import{ScopeId as Ge}from"../graphics/scope-id.js";import{Shader as Xe}from"../graphics/shader.js";import{ShaderInput as We}from"../graphics/shader-input.js";import{Texture as Ke}from"../graphics/texture.js";import{VertexBuffer as He}from"../graphics/vertex-buffer.js";import{VertexFormat as Ye}from"../graphics/vertex-format.js";import{VertexIterator as ze}from"../graphics/vertex-iterator.js";import{LAYERID_WORLD as Qe,LAYERID_IMMEDIATE as qe,LINEBATCH_OVERLAY as Je,PROJECTION_ORTHOGRAPHIC as Ze,PROJECTION_PERSPECTIVE as $e}from"../scene/constants.js";import{calculateTangents as et,createMesh as tt,createTorus as rt,createCylinder as ot,createCapsule as nt,createCone as it,createSphere as st,createPlane as at,createBox as pt}from"../scene/procedural.js";import{partitionSkin as ct}from"../scene/skin-partition.js";import{BasicMaterial as mt}from"../scene/materials/basic-material.js";import{ForwardRenderer as ut}from"../scene/renderer/forward-renderer.js";import{GraphNode as ft}from"../scene/graph-node.js";import{Material as lt}from"../scene/materials/material.js";import{Mesh as dt}from"../scene/mesh.js";import{Morph as ht}from"../scene/morph.js";import{Command as yt,MeshInstance as Et}from"../scene/mesh-instance.js";import{Model as _t}from"../scene/model.js";import{ParticleEmitter as gt}from"../scene/particle-system/particle-emitter.js";import{Picker as Tt}from"../scene/picker.js";import{Scene as It}from"../scene/scene.js";import{Skin as Lt}from"../scene/skin.js";import{SkinInstance as jt}from"../scene/skin-instance.js";import{StandardMaterial as At}from"../scene/materials/standard-material.js";import{Batch as St}from"../scene/batching/batch.js";import{getDefaultMaterial as bt}from"../scene/materials/default-material.js";import{Animation as Mt,Key as Ct,Node as Nt}from"../animation/animation.js";import{Skeleton as Ot}from"../animation/skeleton.js";import{Channel as Rt}from"../audio/channel.js";import{Channel3d as Pt}from"../audio/channel3d.js";import{Listener as Dt}from"../sound/listener.js";import{Sound as vt}from"../sound/sound.js";import{SoundManager as wt}from"../sound/manager.js";import{AssetRegistry as Bt}from"../asset/asset-registry.js";import{XrInputSource as Ft}from"../xr/xr-input-source.js";import{Controller as xt}from"../input/controller.js";import{ElementInput as kt}from"../input/element-input.js";import{GamePads as Vt}from"../input/game-pads.js";import{Keyboard as Ut}from"../input/keyboard.js";import{KeyboardEvent as Gt}from"../input/keyboard-event.js";import{Mouse as Xt}from"../input/mouse.js";import{MouseEvent as Wt}from"../input/mouse-event.js";import{TouchDevice as Kt}from"../input/touch-device.js";import{getTouchTargetCoords as Ht,Touch as Yt,TouchEvent as zt}from"../input/touch-event.js";import{FILLMODE_NONE as Qt,FILLMODE_FILL_WINDOW as qt,FILLMODE_KEEP_ASPECT as Jt,RESOLUTION_AUTO as Zt,RESOLUTION_FIXED as $t}from"../framework/constants.js";import{Application as er}from"../framework/application.js";import{getApplication as tr}from"../framework/globals.js";import{CameraComponent as rr}from"../framework/components/camera/component.js";import{Component as or}from"../framework/components/component.js";import{ComponentSystem as nr}from"../framework/components/system.js";import{Entity as ir}from"../framework/entity.js";import{LightComponent as sr}from"../framework/components/light/component.js";import{ModelComponent as ar}from"../framework/components/model/component.js";import{RenderComponent as pr}from"../framework/components/render/component.js";import{BODYTYPE_STATIC as cr,BODYTYPE_DYNAMIC as mr,BODYTYPE_KINEMATIC as ur,BODYFLAG_STATIC_OBJECT as fr,BODYFLAG_KINEMATIC_OBJECT as lr,BODYFLAG_NORESPONSE_OBJECT as dr,BODYSTATE_ACTIVE_TAG as hr,BODYSTATE_ISLAND_SLEEPING as yr,BODYSTATE_WANTS_DEACTIVATION as Er,BODYSTATE_DISABLE_DEACTIVATION as _r,BODYSTATE_DISABLE_SIMULATION as gr}from"../framework/components/rigid-body/constants.js";import{RigidBodyComponent as Tr}from"../framework/components/rigid-body/component.js";import{RigidBodyComponentSystem as Ir}from"../framework/components/rigid-body/system.js";import{basisInitialize as Lr}from"../resources/basis.js";const jr={write:function(e){console.log(e)},open:function(){jr.write("Powered by PlayCanvas "+e+" "+t)},info:function(e){console.info("INFO:    "+e)},debug:function(e){console.debug("DEBUG:   "+e)},error:function(e){console.error("ERROR:   "+e)},warning:function(e){console.warn("WARNING: "+e)},alert:function(e){jr.write("ALERT:   "+e),alert(e)},assert:function(e,t){!1===e&&jr.write("ASSERT:  "+t)}};r.endsWith=function(e,t){return e.endsWith(t)},r.startsWith=function(e,t){return e.startsWith(t)};const Ar={now:o,Timer:n};function Sr(e,t){const r=function(){},o=function(r,o,n,i,s,a,p,c){t.call(this,r,o,n,i,s,a,p,c),e.call(this,r,o,n,i,s,a,p,c)};return o._super=t.prototype,r.prototype=t.prototype,o.prototype=new r,o}function br(e){return Array.prototype.slice.call(e)}Object.defineProperty(s.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.r,this._data[1]=this.g,this._data[2]=this.b,this._data[3]=this.a,this._data}}),Object.defineProperty(s.prototype,"data3",{get:function(){return this._data3||(this._data3=new Float32Array(3)),this._data3[0]=this.r,this._data3[1]=this.g,this._data3[2]=this.b,this._data3}}),i.INV_LOG2=Math.LOG2E,i.intToBytes=i.intToBytes32,i.bytesToInt=i.bytesToInt32,Object.defineProperty(p.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(2)),this._data[0]=this.x,this._data[1]=this.y,this._data}}),p.prototype.scale=p.prototype.mulScalar,Object.defineProperty(c.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(3)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data}}),c.prototype.scale=c.prototype.mulScalar,Object.defineProperty(m.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data[3]=this.w,this._data}}),m.prototype.scale=m.prototype.mulScalar;const Mr={Aabb:u,Sphere:f,Plane:d};f.prototype.intersectRay=f.prototype.intersectsRay,l.prototype.update=function(e,t){const r=new a;r.mul2(e,t),this.setFromMat4(r)};const Cr=h,Nr=y,Or=E,Rr=_,Pr=g,Dr=T,vr=I;function wr(e){this.name="UnsupportedBrowserError",this.message=e||""}function Br(e){this.name="ContextCreationError",this.message=e||""}wr.prototype=Error.prototype,Br.prototype=Error.prototype;const Fr={begin:je,dummyFragmentCode:Ae,end:Se,fogCode:be,gammaCode:Me,precisionCode:Ce,skinCode:Ne,tonemapCode:Oe,versionCode:Re},xr={ADDRESS_CLAMP_TO_EDGE:L,ADDRESS_MIRRORED_REPEAT:j,ADDRESS_REPEAT:A,BLENDMODE_ZERO:S,BLENDMODE_ONE:b,BLENDMODE_SRC_COLOR:M,BLENDMODE_ONE_MINUS_SRC_COLOR:C,BLENDMODE_DST_COLOR:N,BLENDMODE_ONE_MINUS_DST_COLOR:O,BLENDMODE_SRC_ALPHA:R,BLENDMODE_SRC_ALPHA_SATURATE:P,BLENDMODE_ONE_MINUS_SRC_ALPHA:D,BLENDMODE_DST_ALPHA:v,BLENDMODE_ONE_MINUS_DST_ALPHA:w,BUFFER_STATIC:B,BUFFER_DYNAMIC:F,BUFFER_STREAM:x,CULLFACE_NONE:k,CULLFACE_BACK:V,CULLFACE_FRONT:U,CULLFACE_FRONTANDBACK:G,ELEMENTTYPE_INT8:h,ELEMENTTYPE_UINT8:y,ELEMENTTYPE_INT16:E,ELEMENTTYPE_UINT16:_,ELEMENTTYPE_INT32:g,ELEMENTTYPE_UINT32:T,ELEMENTTYPE_FLOAT32:I,FILTER_NEAREST:X,FILTER_LINEAR:W,FILTER_NEAREST_MIPMAP_NEAREST:K,FILTER_NEAREST_MIPMAP_LINEAR:H,FILTER_LINEAR_MIPMAP_NEAREST:Y,FILTER_LINEAR_MIPMAP_LINEAR:z,INDEXFORMAT_UINT8:Q,INDEXFORMAT_UINT16:q,INDEXFORMAT_UINT32:J,PIXELFORMAT_R5_G6_B5:Z,PIXELFORMAT_R8_G8_B8:$,PIXELFORMAT_R8_G8_B8_A8:ee,PRIMITIVE_POINTS:te,PRIMITIVE_LINES:re,PRIMITIVE_LINELOOP:oe,PRIMITIVE_LINESTRIP:ne,PRIMITIVE_TRIANGLES:ie,PRIMITIVE_TRISTRIP:se,PRIMITIVE_TRIFAN:ae,SEMANTIC_POSITION:pe,SEMANTIC_NORMAL:ce,SEMANTIC_COLOR:me,SEMANTIC_TEXCOORD:ue,SEMANTIC_TEXCOORD0:fe,SEMANTIC_TEXCOORD1:le,SEMANTIC_ATTR0:de,SEMANTIC_ATTR1:he,SEMANTIC_ATTR2:ye,SEMANTIC_ATTR3:Ee,TEXTURELOCK_READ:_e,TEXTURELOCK_WRITE:ge,drawQuadWithShader:Pe,programlib:Fr,shaderChunks:De,ContextCreationError:Br,Device:ve,IndexBuffer:we,ProgramLibrary:Ve,RenderTarget:Ue,ScopeId:Ge,Shader:Xe,ShaderInput:We,Texture:Ke,UnsupportedBrowserError:wr,VertexBuffer:He,VertexFormat:Ye,VertexIterator:ze},kr={createFullscreenQuad:Be,drawFullscreenQuad:Fe,PostEffect:xe,PostEffectQueue:ke};Object.defineProperty(De,"transformSkinnedVS",{get:function(){return"#define SKIN\n"+De.transformVS}});const Vr={"ambientPrefilteredCube.frag":"ambientEnv.frag","ambientPrefilteredCubeLod.frag":"ambientEnv.frag","dpAtlasQuad.frag":null,"genParaboloid.frag":null,"prefilterCubemap.frag":null,"reflectionDpAtlas.frag":"reflectionEnv.frag","reflectionPrefilteredCube.frag":"reflectionEnv.frag","reflectionPrefilteredCubeLod.frag":"reflectionEnv.frag"};Object.keys(Vr).forEach((e=>{Object.defineProperty(De,e,{get:function(){return null},set:function(){}})})),Object.defineProperties(Ue.prototype,{_glFrameBuffer:{get:function(){return this.impl._glFrameBuffer},set:function(e){}}}),Ye.prototype.update=function(){},Object.defineProperties(Ke.prototype,{rgbm:{get:function(){return this.type===Te},set:function(e){this.type=e?Te:Ie}},swizzleGGGR:{get:function(){return this.type===Le},set:function(e){this.type=e?Le:Ie}},_glTexture:{get:function(){return this.impl._glTexture}}});const Ur=At,Gr={partitionSkin:ct,procedural:{calculateTangents:et,createMesh:tt,createTorus:rt,createCylinder:ot,createCapsule:nt,createCone:it,createSphere:st,createPlane:at,createBox:pt},BasicMaterial:mt,Command:yt,ForwardRenderer:ut,GraphNode:ft,Material:lt,Mesh:dt,MeshInstance:Et,Model:_t,ParticleEmitter:gt,PhongMaterial:At,Picker:Tt,Projection:{ORTHOGRAPHIC:Ze,PERSPECTIVE:$e},Scene:It,Skin:Lt,SkinInstance:jt};function Xr(e,t){Object.defineProperty(At.prototype,t,{get:function(){return this[e]},set:function(t){this[e]=t}})}Object.defineProperty(It.prototype,"defaultMaterial",{get:function(){return bt(tr().graphicsDevice)}}),["128","64","32","16","8","4"].forEach(((e,t)=>{Object.defineProperty(It.prototype,`skyboxPrefiltered${e}`,{get:function(){return this._prefilteredCubemaps[t]},set:function(e){this._prefilteredCubemaps[t]=e,this.updateShaders=!0}})})),Object.defineProperty(It.prototype,"models",{get:function(){return this._models||(this._models=[]),this._models}}),It.prototype._updateSkybox=function(e){this._updateSky(e)},It.prototype.addModel=function(e){if(this.containsModel(e))return;const t=this.layers.getLayerById(Qe);t&&(t.addMeshInstances(e.meshInstances),this.models.push(e))},It.prototype.addShadowCaster=function(e){const t=this.layers.getLayerById(Qe);t&&t.addShadowCasters(e.meshInstances)},It.prototype.removeModel=function(e){const t=this.models.indexOf(e);if(-1!==t){const r=this.layers.getLayerById(Qe);if(!r)return;r.removeMeshInstances(e.meshInstances),this.models.splice(t,1)}},It.prototype.removeShadowCasters=function(e){const t=this.layers.getLayerById(Qe);t&&t.removeShadowCasters(e.meshInstances)},It.prototype.containsModel=function(e){return this.models.indexOf(e)>=0},It.prototype.getModels=function(e){return this.models},Object.defineProperty(St.prototype,"model",{get:function(){return null}}),ut.prototype.renderComposition=function(e){tr().renderComposition(e)},ut.prototype.updateShader=function(e,t,r,o,n){const i=e.material._scene||tr().scene;return e.updatePassShader(i,o,r,n)},Et.prototype.syncAabb=function(){},ht.prototype.getTarget=function(e){return this.targets[e]},ft.prototype._dirtify=function(e){e?this._dirtifyLocal():this._dirtifyWorld()},ft.prototype.addLabel=function(e){this._labels[e]=!0},ft.prototype.getLabels=function(){return Object.keys(this._labels)},ft.prototype.hasLabel=function(e){return!!this._labels[e]},ft.prototype.removeLabel=function(e){delete this._labels[e]},ft.prototype.findByLabel=function(e,t=[]){this.hasLabel(e)&&t.push(this);for(let r=0;r<this._children.length;++r)t=this._children[r].findByLabel(e,t);return t},ft.prototype.getChildren=function(){return this.children},ft.prototype.getName=function(){return this.name},ft.prototype.getPath=function(){return this.path},ft.prototype.getRoot=function(){return this.root},ft.prototype.getParent=function(){return this.parent},ft.prototype.setName=function(e){this.name=e},lt.prototype.getName=function(){return this.name},lt.prototype.setName=function(e){this.name=e},lt.prototype.getShader=function(){return this.shader},lt.prototype.setShader=function(e){this.shader=e},Xr("diffuseTint","diffuseMapTint"),Xr("specularTint","specularMapTint"),Xr("emissiveTint","emissiveMapTint"),Xr("aoVertexColor","aoMapVertexColor"),Xr("diffuseVertexColor","diffuseMapVertexColor"),Xr("specularVertexColor","specularMapVertexColor"),Xr("emissiveVertexColor","emissiveMapVertexColor"),Xr("metalnessVertexColor","metalnessMapVertexColor"),Xr("glossVertexColor","glossMapVertexColor"),Xr("opacityVertexColor","opacityMapVertexColor"),Xr("lightVertexColor","lightMapVertexColor");const Wr={Animation:Mt,Key:Ct,Node:Nt,Skeleton:Ot};Mt.prototype.getDuration=function(){return this.duration},Mt.prototype.getName=function(){return this.name},Mt.prototype.getNodes=function(){return this.nodes},Mt.prototype.setDuration=function(e){this.duration=e},Mt.prototype.setName=function(e){this.name=e},Ot.prototype.getAnimation=function(){return this.animation},Ot.prototype.getCurrentTime=function(){return this.currentTime},Ot.prototype.getLooping=function(){return this.looping},Ot.prototype.getNumNodes=function(){return this.numNodes},Ot.prototype.setAnimation=function(e){this.animation=e},Ot.prototype.setCurrentTime=function(e){this.currentTime=e},Ot.prototype.setLooping=function(e){this.looping=e};const Kr={AudioManager:wt,Channel:Rt,Channel3d:Pt,Listener:Dt,Sound:vt};wt.prototype.getListener=function(){return this.listener},wt.prototype.getVolume=function(){return this.volume},wt.prototype.setVolume=function(e){this.volume=e};const Hr={ASSET_ANIMATION:"animation",ASSET_AUDIO:"audio",ASSET_IMAGE:"image",ASSET_JSON:"json",ASSET_MODEL:"model",ASSET_MATERIAL:"material",ASSET_TEXT:"text",ASSET_TEXTURE:"texture",ASSET_CUBEMAP:"cubemap",ASSET_SCRIPT:"script"};Bt.prototype.getAssetById=function(e){return this.get(e)},Object.defineProperty(Ft.prototype,"ray",{get:function(){return this._rayLocal}}),Object.defineProperty(Ft.prototype,"position",{get:function(){return this._localPosition}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return this._localRotation}});const Yr={getTouchTargetCoords:Ht,Controller:xt,GamePads:Vt,Keyboard:Ut,KeyboardEvent:Gt,Mouse:Xt,MouseEvent:Wt,Touch:Yt,TouchDevice:Kt,TouchEvent:zt};Object.defineProperty(kt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}}),Object.defineProperty(Wt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}});const zr=cr,Qr=mr,qr=ur,Jr=fr,Zr=lr,$r=dr,eo=hr,to=yr,ro=Er,oo=_r,no=gr,io={Application:er,Component:or,ComponentSystem:nr,Entity:ir,FillMode:{NONE:Qt,FILL_WINDOW:qt,KEEP_ASPECT:Jt},ResolutionMode:{AUTO:Zt,FIXED:$t}};function so(e,t,r){Lr({glueUrl:e,wasmUrl:t,fallbackUrl:r,lazyInit:!0})}function ao(e){}er.prototype.isFullscreen=function(){return!!document.fullscreenElement},er.prototype.enableFullscreen=function(e,t,r){e=e||this.graphicsDevice.canvas;const o=function e(){t(),document.removeEventListener("fullscreenchange",e)},n=function e(){r(),document.removeEventListener("fullscreenerror",e)};t&&document.addEventListener("fullscreenchange",o,!1),r&&document.addEventListener("fullscreenerror",n,!1),e.requestFullscreen?e.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT):r()},er.prototype.disableFullscreen=function(e){const t=function t(){e(),document.removeEventListener("fullscreenchange",t)};e&&document.addEventListener("fullscreenchange",t,!1),document.exitFullscreen()},er.prototype.getSceneUrl=function(e){const t=this.scenes.find(e);return t?t.url:null},er.prototype.loadScene=function(e,t){this.scenes.loadScene(e,t)},er.prototype.loadSceneHierarchy=function(e,t){this.scenes.loadSceneHierarchy(e,t)},er.prototype.loadSceneSettings=function(e,t){this.scenes.loadSceneSettings(e,t)},er.prototype.renderMeshInstance=function(e,t){const r=null!=t&&t.layer?t.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(null,null,null,e,r)},er.prototype.renderMesh=function(e,t,r,o){const n=null!=o&&o.layer?o.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(t,r,e,null,n)},er.prototype._addLines=function(e,t,r){const o=r&&r.layer?r.layer:this.scene.layers.getLayerById(qe),n=!r||void 0===r.depthTest||r.depthTest;this.scene.immediate.getBatch(o,n).addLines(e,t)},er.prototype.renderLine=function(e,t,r){let o,n=r;const i=arguments[3],a=arguments[4];i instanceof s?(n=i,o="number"==typeof a?a===Je?{layer:this.scene.layers.getLayerById(qe),depthTest:!1}:{layer:this.scene.layers.getLayerById(qe),depthTest:!0}:a):"number"==typeof i?(n=r,o=i===Je?{layer:this.scene.layers.getLayerById(qe),depthTest:!1}:{layer:this.scene.layers.getLayerById(qe),depthTest:!0}):i&&(o=i),this._addLines([e,t],[r,n],o)},er.prototype.renderLines=function(e,t,r){r?"number"==typeof r&&(r=r===Je?{layer:this.scene.layers.getLayerById(qe),depthTest:!1}:{layer:this.scene.layers.getLayerById(qe),depthTest:!0}):r={layer:this.scene.layers.getLayerById(qe),depthTest:!0};!t.length||e.length===t.length?e.length%2==0?this._addLines(e,t,r):console.error("renderLines: array length is not divisible by 2"):console.error("renderLines: position/color arrays have different lengths")},er.prototype.enableVr=function(){},Object.defineProperty(rr.prototype,"node",{get:function(){return this.entity}}),Object.defineProperty(sr.prototype,"enable",{get:function(){return this.enabled},set:function(e){this.enabled=e}}),ar.prototype.setVisible=function(e){this.enabled=e},Object.defineProperty(ar.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(pr.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(Tr.prototype,"bodyType",{get:function(){return this.type},set:function(e){this.type=e}}),Tr.prototype.syncBodyToEntity=function(){this._updateDynamic()},Ir.prototype.setGravity=function(){1===arguments.length?this.gravity.copy(arguments[0]):this.gravity.set(arguments[0],arguments[1],arguments[2])};export{Br as ContextCreationError,vr as ELEMENTTYPE_FLOAT32,Or as ELEMENTTYPE_INT16,Pr as ELEMENTTYPE_INT32,Cr as ELEMENTTYPE_INT8,Rr as ELEMENTTYPE_UINT16,Dr as ELEMENTTYPE_UINT32,Nr as ELEMENTTYPE_UINT8,Ur as PhongMaterial,eo as RIGIDBODY_ACTIVE_TAG,Zr as RIGIDBODY_CF_KINEMATIC_OBJECT,$r as RIGIDBODY_CF_NORESPONSE_OBJECT,Jr as RIGIDBODY_CF_STATIC_OBJECT,oo as RIGIDBODY_DISABLE_DEACTIVATION,no as RIGIDBODY_DISABLE_SIMULATION,to as RIGIDBODY_ISLAND_SLEEPING,Qr as RIGIDBODY_TYPE_DYNAMIC,qr as RIGIDBODY_TYPE_KINEMATIC,zr as RIGIDBODY_TYPE_STATIC,ro as RIGIDBODY_WANTS_DEACTIVATION,wr as UnsupportedBrowserError,Wr as anim,Hr as asset,Kr as audio,so as basisSetDownloadConfig,io as fw,xr as gfx,Sr as inherits,Yr as input,jr as log,br as makeArray,kr as posteffect,ao as prefilterCubemap,Fr as programlib,Gr as scene,Mr as shape,Ar as time};
