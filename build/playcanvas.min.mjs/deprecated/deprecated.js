import{version as e,revision as t}from"../core/core.js";import{string as r}from"../core/string.js";import{now as o,Timer as n}from"../core/time.js";import"../core/tracing.js";import{math as i}from"../core/math/math.js";import{Color as s}from"../core/math/color.js";import{Mat4 as a}from"../core/math/mat4.js";import{Vec2 as p}from"../core/math/vec2.js";import{Vec3 as c}from"../core/math/vec3.js";import{Vec4 as m}from"../core/math/vec4.js";import{BoundingBox as f}from"../core/shape/bounding-box.js";import{BoundingSphere as u}from"../core/shape/bounding-sphere.js";import{Frustum as l}from"../core/shape/frustum.js";import{Plane as d}from"../core/shape/plane.js";import{TYPE_INT8 as h,TYPE_UINT8 as y,TYPE_INT16 as E,TYPE_UINT16 as g,TYPE_INT32 as _,TYPE_UINT32 as T,TYPE_FLOAT32 as I,PIXELFORMAT_LA8 as b,PIXELFORMAT_RGB565 as j,PIXELFORMAT_RGBA5551 as L,PIXELFORMAT_RGBA4 as S,PIXELFORMAT_RGB8 as A,PIXELFORMAT_RGBA8 as C,ADDRESS_CLAMP_TO_EDGE as O,ADDRESS_MIRRORED_REPEAT as M,ADDRESS_REPEAT as R,BLENDMODE_ZERO as N,BLENDMODE_ONE as P,BLENDMODE_SRC_COLOR as D,BLENDMODE_ONE_MINUS_SRC_COLOR as v,BLENDMODE_DST_COLOR as w,BLENDMODE_ONE_MINUS_DST_COLOR as F,BLENDMODE_SRC_ALPHA as B,BLENDMODE_SRC_ALPHA_SATURATE as x,BLENDMODE_ONE_MINUS_SRC_ALPHA as k,BLENDMODE_DST_ALPHA as V,BLENDMODE_ONE_MINUS_DST_ALPHA as U,BUFFER_STATIC as G,BUFFER_DYNAMIC as X,BUFFER_STREAM as H,CULLFACE_NONE as K,CULLFACE_BACK as W,CULLFACE_FRONT as Y,CULLFACE_FRONTANDBACK as z,FILTER_NEAREST as Q,FILTER_LINEAR as q,FILTER_NEAREST_MIPMAP_NEAREST as J,FILTER_NEAREST_MIPMAP_LINEAR as Z,FILTER_LINEAR_MIPMAP_NEAREST as $,FILTER_LINEAR_MIPMAP_LINEAR as ee,INDEXFORMAT_UINT8 as te,INDEXFORMAT_UINT16 as re,INDEXFORMAT_UINT32 as oe,PRIMITIVE_POINTS as ne,PRIMITIVE_LINES as ie,PRIMITIVE_LINELOOP as se,PRIMITIVE_LINESTRIP as ae,PRIMITIVE_TRIANGLES as pe,PRIMITIVE_TRISTRIP as ce,PRIMITIVE_TRIFAN as me,SEMANTIC_POSITION as fe,SEMANTIC_NORMAL as ue,SEMANTIC_COLOR as le,SEMANTIC_TEXCOORD as de,SEMANTIC_TEXCOORD0 as he,SEMANTIC_TEXCOORD1 as ye,SEMANTIC_ATTR0 as Ee,SEMANTIC_ATTR1 as ge,SEMANTIC_ATTR2 as _e,SEMANTIC_ATTR3 as Te,TEXTURELOCK_READ as Ie,TEXTURELOCK_WRITE as be,TEXTURETYPE_RGBM as je,TEXTURETYPE_DEFAULT as Le,TEXTURETYPE_SWIZZLEGGGR as Se}from"../platform/graphics/constants.js";import{begin as Ae,end as Ce,fogCode as Oe,gammaCode as Me,skinCode as Re,tonemapCode as Ne}from"../scene/shader-lib/programs/common.js";import{drawQuadWithShader as Pe}from"../platform/graphics/simple-post-effect.js";import{shaderChunks as De}from"../scene/shader-lib/chunks/chunks.js";import{GraphicsDevice as ve}from"../platform/graphics/graphics-device.js";import{IndexBuffer as we}from"../platform/graphics/index-buffer.js";import{createFullscreenQuad as Fe,drawFullscreenQuad as Be,PostEffect as xe}from"../scene/graphics/post-effect.js";import{PostEffectQueue as ke}from"../framework/components/camera/post-effect-queue.js";import{ProgramLibrary as Ve}from"../scene/shader-lib/program-library.js";import{getProgramLibrary as Ue,setProgramLibrary as Ge}from"../scene/shader-lib/get-program-library.js";import{RenderTarget as Xe}from"../platform/graphics/render-target.js";import{ScopeId as He}from"../platform/graphics/scope-id.js";import{Shader as Ke}from"../platform/graphics/shader.js";import{ShaderInput as We}from"../platform/graphics/shader-input.js";import{Texture as Ye}from"../platform/graphics/texture.js";import{VertexBuffer as ze}from"../platform/graphics/vertex-buffer.js";import{VertexFormat as Qe}from"../platform/graphics/vertex-format.js";import{VertexIterator as qe}from"../platform/graphics/vertex-iterator.js";import{ShaderUtils as Je}from"../platform/graphics/shader-utils.js";import{GraphicsDeviceAccess as Ze}from"../platform/graphics/graphics-device-access.js";import{LAYERID_WORLD as $e,LAYERID_IMMEDIATE as et,LINEBATCH_OVERLAY as tt,PROJECTION_ORTHOGRAPHIC as rt,PROJECTION_PERSPECTIVE as ot}from"../scene/constants.js";import{calculateTangents as nt,createMesh as it,createTorus as st,createCylinder as at,createCapsule as pt,createCone as ct,createSphere as mt,createPlane as ft,createBox as ut}from"../scene/procedural.js";import{partitionSkin as lt}from"../scene/skin-partition.js";import{BasicMaterial as dt}from"../scene/materials/basic-material.js";import{ForwardRenderer as ht}from"../scene/renderer/forward-renderer.js";import{GraphNode as yt}from"../scene/graph-node.js";import{Material as Et}from"../scene/materials/material.js";import{Mesh as gt}from"../scene/mesh.js";import{Morph as _t}from"../scene/morph.js";import{Command as Tt,MeshInstance as It}from"../scene/mesh-instance.js";import{Model as bt}from"../scene/model.js";import{ParticleEmitter as jt}from"../scene/particle-system/particle-emitter.js";import{Picker as Lt}from"../framework/graphics/picker.js";import{Scene as St}from"../scene/scene.js";import{Skin as At}from"../scene/skin.js";import{SkinInstance as Ct}from"../scene/skin-instance.js";import{StandardMaterial as Ot}from"../scene/materials/standard-material.js";import{Batch as Mt}from"../scene/batching/batch.js";import{getDefaultMaterial as Rt}from"../scene/materials/default-material.js";import{StandardMaterialOptions as Nt}from"../scene/materials/standard-material-options.js";import{LitOptions as Pt}from"../scene/materials/lit-options.js";import{Animation as Dt,Key as vt,Node as wt}from"../scene/animation/animation.js";import{Skeleton as Ft}from"../scene/animation/skeleton.js";import{Channel as Bt}from"../platform/audio/channel.js";import{Channel3d as xt}from"../platform/audio/channel3d.js";import{Listener as kt}from"../platform/sound/listener.js";import{Sound as Vt}from"../platform/sound/sound.js";import{SoundManager as Ut}from"../platform/sound/manager.js";import{AssetRegistry as Gt}from"../framework/asset/asset-registry.js";import{XrInputSource as Xt}from"../framework/xr/xr-input-source.js";import{Controller as Ht}from"../platform/input/controller.js";import{ElementInput as Kt}from"../framework/input/element-input.js";import{GamePads as Wt}from"../platform/input/game-pads.js";import{Keyboard as Yt}from"../platform/input/keyboard.js";import{KeyboardEvent as zt}from"../platform/input/keyboard-event.js";import{Mouse as Qt}from"../platform/input/mouse.js";import{MouseEvent as qt}from"../platform/input/mouse-event.js";import{TouchDevice as Jt}from"../platform/input/touch-device.js";import{getTouchTargetCoords as Zt,Touch as $t,TouchEvent as er}from"../platform/input/touch-event.js";import{AppBase as tr}from"../framework/app-base.js";import{getApplication as rr}from"../framework/globals.js";import{CameraComponent as or}from"../framework/components/camera/component.js";import{LightComponent as nr}from"../framework/components/light/component.js";import{ModelComponent as ir}from"../framework/components/model/component.js";import{RenderComponent as sr}from"../framework/components/render/component.js";import{BODYTYPE_STATIC as ar,BODYTYPE_DYNAMIC as pr,BODYTYPE_KINEMATIC as cr,BODYFLAG_STATIC_OBJECT as mr,BODYFLAG_KINEMATIC_OBJECT as fr,BODYFLAG_NORESPONSE_OBJECT as ur,BODYSTATE_ACTIVE_TAG as lr,BODYSTATE_ISLAND_SLEEPING as dr,BODYSTATE_WANTS_DEACTIVATION as hr,BODYSTATE_DISABLE_DEACTIVATION as yr,BODYSTATE_DISABLE_SIMULATION as Er}from"../framework/components/rigid-body/constants.js";import{RigidBodyComponent as gr}from"../framework/components/rigid-body/component.js";import{RigidBodyComponentSystem as _r}from"../framework/components/rigid-body/system.js";import{basisInitialize as Tr}from"../framework/handlers/basis.js";const Ir={write:function(e){console.log(e)},open:function(){Ir.write("Powered by PlayCanvas "+e+" "+t)},info:function(e){console.info("INFO:    "+e)},debug:function(e){console.debug("DEBUG:   "+e)},error:function(e){console.error("ERROR:   "+e)},warning:function(e){console.warn("WARNING: "+e)},alert:function(e){Ir.write("ALERT:   "+e),alert(e)},assert:function(e,t){!1===e&&Ir.write("ASSERT:  "+t)}};r.endsWith=function(e,t){return e.endsWith(t)},r.startsWith=function(e,t){return e.startsWith(t)};const br={now:o,Timer:n};function jr(e,t){const r=function(){},o=function(r,o,n,i,s,a,p,c){t.call(this,r,o,n,i,s,a,p,c),e.call(this,r,o,n,i,s,a,p,c)};return o._super=t.prototype,r.prototype=t.prototype,o.prototype=new r,o}function Lr(e){return Array.prototype.slice.call(e)}Object.defineProperty(s.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.r,this._data[1]=this.g,this._data[2]=this.b,this._data[3]=this.a,this._data}}),Object.defineProperty(s.prototype,"data3",{get:function(){return this._data3||(this._data3=new Float32Array(3)),this._data3[0]=this.r,this._data3[1]=this.g,this._data3[2]=this.b,this._data3}}),i.INV_LOG2=Math.LOG2E,i.intToBytes=i.intToBytes32,i.bytesToInt=i.bytesToInt32,Object.defineProperty(p.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(2)),this._data[0]=this.x,this._data[1]=this.y,this._data}}),p.prototype.scale=p.prototype.mulScalar,Object.defineProperty(c.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(3)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data}}),c.prototype.scale=c.prototype.mulScalar,Object.defineProperty(m.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data[3]=this.w,this._data}}),m.prototype.scale=m.prototype.mulScalar;const Sr={Aabb:f,Sphere:u,Plane:d};u.prototype.intersectRay=u.prototype.intersectsRay,l.prototype.update=function(e,t){const r=new a;r.mul2(e,t),this.setFromMat4(r)};const Ar=h,Cr=y,Or=E,Mr=g,Rr=_,Nr=T,Pr=I,Dr=b,vr=j,wr=L,Fr=S,Br=A,xr=C;function kr(e){this.name="UnsupportedBrowserError",this.message=e||""}function Vr(e){this.name="ContextCreationError",this.message=e||""}kr.prototype=Error.prototype,Vr.prototype=Error.prototype;const Ur={begin:Ae,dummyFragmentCode:Je.dummyFragmentCode,end:Ce,fogCode:Oe,gammaCode:Me,precisionCode:Je.precisionCode,skinCode:Re,tonemapCode:Ne,versionCode:Je.versionCode},Gr={ADDRESS_CLAMP_TO_EDGE:O,ADDRESS_MIRRORED_REPEAT:M,ADDRESS_REPEAT:R,BLENDMODE_ZERO:N,BLENDMODE_ONE:P,BLENDMODE_SRC_COLOR:D,BLENDMODE_ONE_MINUS_SRC_COLOR:v,BLENDMODE_DST_COLOR:w,BLENDMODE_ONE_MINUS_DST_COLOR:F,BLENDMODE_SRC_ALPHA:B,BLENDMODE_SRC_ALPHA_SATURATE:x,BLENDMODE_ONE_MINUS_SRC_ALPHA:k,BLENDMODE_DST_ALPHA:V,BLENDMODE_ONE_MINUS_DST_ALPHA:U,BUFFER_STATIC:G,BUFFER_DYNAMIC:X,BUFFER_STREAM:H,CULLFACE_NONE:K,CULLFACE_BACK:W,CULLFACE_FRONT:Y,CULLFACE_FRONTANDBACK:z,ELEMENTTYPE_INT8:h,ELEMENTTYPE_UINT8:y,ELEMENTTYPE_INT16:E,ELEMENTTYPE_UINT16:g,ELEMENTTYPE_INT32:_,ELEMENTTYPE_UINT32:T,ELEMENTTYPE_FLOAT32:I,FILTER_NEAREST:Q,FILTER_LINEAR:q,FILTER_NEAREST_MIPMAP_NEAREST:J,FILTER_NEAREST_MIPMAP_LINEAR:Z,FILTER_LINEAR_MIPMAP_NEAREST:$,FILTER_LINEAR_MIPMAP_LINEAR:ee,INDEXFORMAT_UINT8:te,INDEXFORMAT_UINT16:re,INDEXFORMAT_UINT32:oe,PIXELFORMAT_RGB565:j,PIXELFORMAT_RGB8:A,PIXELFORMAT_RGBA8:C,PRIMITIVE_POINTS:ne,PRIMITIVE_LINES:ie,PRIMITIVE_LINELOOP:se,PRIMITIVE_LINESTRIP:ae,PRIMITIVE_TRIANGLES:pe,PRIMITIVE_TRISTRIP:ce,PRIMITIVE_TRIFAN:me,SEMANTIC_POSITION:fe,SEMANTIC_NORMAL:ue,SEMANTIC_COLOR:le,SEMANTIC_TEXCOORD:de,SEMANTIC_TEXCOORD0:he,SEMANTIC_TEXCOORD1:ye,SEMANTIC_ATTR0:Ee,SEMANTIC_ATTR1:ge,SEMANTIC_ATTR2:_e,SEMANTIC_ATTR3:Te,TEXTURELOCK_READ:Ie,TEXTURELOCK_WRITE:be,drawQuadWithShader:Pe,programlib:Ur,shaderChunks:De,ContextCreationError:Vr,Device:ve,IndexBuffer:we,ProgramLibrary:Ve,RenderTarget:Xe,ScopeId:He,Shader:Ke,ShaderInput:We,Texture:Ye,UnsupportedBrowserError:kr,VertexBuffer:ze,VertexFormat:Qe,VertexIterator:qe},Xr={createFullscreenQuad:Fe,drawFullscreenQuad:Be,PostEffect:xe,PostEffectQueue:ke};Object.defineProperty(De,"transformSkinnedVS",{get:function(){return"#define SKIN\n"+De.transformVS}});const Hr={"ambientPrefilteredCube.frag":"ambientEnv.frag","ambientPrefilteredCubeLod.frag":"ambientEnv.frag","dpAtlasQuad.frag":null,"genParaboloid.frag":null,"prefilterCubemap.frag":null,"reflectionDpAtlas.frag":"reflectionEnv.frag","reflectionPrefilteredCube.frag":"reflectionEnv.frag","reflectionPrefilteredCubeLod.frag":"reflectionEnv.frag"};Object.keys(Hr).forEach((e=>{Object.defineProperty(De,e,{get:function(){return null},set:function(){}})})),Object.defineProperties(Xe.prototype,{_glFrameBuffer:{get:function(){return this.impl._glFrameBuffer},set:function(e){}}}),Object.defineProperty(Qe,"defaultInstancingFormat",{get:function(){return Qe.getDefaultInstancingFormat(Ze.get())}}),Qe.prototype.update=function(){},Object.defineProperties(Ye.prototype,{rgbm:{get:function(){return this.type===je},set:function(e){this.type=e?je:Le}},swizzleGGGR:{get:function(){return this.type===Se},set:function(e){this.type=e?Se:Le}},_glTexture:{get:function(){return this.impl._glTexture}}}),ve.prototype.getProgramLibrary=function(){return Ue(this)},ve.prototype.setProgramLibrary=function(e){Ge(this,e)},ve.prototype.removeShaderFromCache=function(e){Ue(this).removeFromCache(e)};const Kr=Ot,Wr={partitionSkin:lt,procedural:{calculateTangents:nt,createMesh:it,createTorus:st,createCylinder:at,createCapsule:pt,createCone:ct,createSphere:mt,createPlane:ft,createBox:ut},BasicMaterial:dt,Command:Tt,ForwardRenderer:ht,GraphNode:yt,Material:Et,Mesh:gt,MeshInstance:It,Model:bt,ParticleEmitter:jt,PhongMaterial:Ot,Picker:Lt,Projection:{ORTHOGRAPHIC:rt,PERSPECTIVE:ot},Scene:St,Skin:At,SkinInstance:Ct};function Yr(e,t){Object.defineProperty(Ot.prototype,t,{get:function(){return this[e]},set:function(t){this[e]=t}})}function zr(e,t){"chunks"!==e&&"_pass"!==e&&Object.defineProperty(Nt.prototype,e,{get:function(){return this.litOptions[t||e]},set:function(r){this.litOptions[t||e]=r}})}Object.defineProperty(St.prototype,"defaultMaterial",{get:function(){return Rt(rr().graphicsDevice)}}),["128","64","32","16","8","4"].forEach(((e,t)=>{Object.defineProperty(St.prototype,`skyboxPrefiltered${e}`,{get:function(){return this._prefilteredCubemaps[t]},set:function(e){this._prefilteredCubemaps[t]=e,this.updateShaders=!0}})})),Object.defineProperty(St.prototype,"models",{get:function(){return this._models||(this._models=[]),this._models}}),St.prototype._updateSkybox=function(e){this._updateSky(e)},St.prototype.addModel=function(e){if(this.containsModel(e))return;const t=this.layers.getLayerById($e);t&&(t.addMeshInstances(e.meshInstances),this.models.push(e))},St.prototype.addShadowCaster=function(e){const t=this.layers.getLayerById($e);t&&t.addShadowCasters(e.meshInstances)},St.prototype.removeModel=function(e){const t=this.models.indexOf(e);if(-1!==t){const r=this.layers.getLayerById($e);if(!r)return;r.removeMeshInstances(e.meshInstances),this.models.splice(t,1)}},St.prototype.removeShadowCasters=function(e){const t=this.layers.getLayerById($e);t&&t.removeShadowCasters(e.meshInstances)},St.prototype.containsModel=function(e){return this.models.indexOf(e)>=0},St.prototype.getModels=function(e){return this.models},Object.defineProperty(Mt.prototype,"model",{get:function(){return null}}),ht.prototype.renderComposition=function(e){rr().renderComposition(e)},ht.prototype.updateShader=function(e,t,r,o,n){const i=e.material._scene||rr().scene;return e.updatePassShader(i,o,r,n)},It.prototype.syncAabb=function(){},_t.prototype.getTarget=function(e){return this.targets[e]},yt.prototype._dirtify=function(e){e?this._dirtifyLocal():this._dirtifyWorld()},yt.prototype.addLabel=function(e){this._labels[e]=!0},yt.prototype.getLabels=function(){return Object.keys(this._labels)},yt.prototype.hasLabel=function(e){return!!this._labels[e]},yt.prototype.removeLabel=function(e){delete this._labels[e]},yt.prototype.findByLabel=function(e,t=[]){this.hasLabel(e)&&t.push(this);for(let r=0;r<this._children.length;++r)t=this._children[r].findByLabel(e,t);return t},yt.prototype.getChildren=function(){return this.children},yt.prototype.getName=function(){return this.name},yt.prototype.getPath=function(){return this.path},yt.prototype.getRoot=function(){return this.root},yt.prototype.getParent=function(){return this.parent},yt.prototype.setName=function(e){this.name=e},Et.prototype.getName=function(){return this.name},Et.prototype.setName=function(e){this.name=e},Et.prototype.getShader=function(){return this.shader},Et.prototype.setShader=function(e){this.shader=e},Yr("diffuseTint","diffuseMapTint"),Yr("specularTint","specularMapTint"),Yr("emissiveTint","emissiveMapTint"),Yr("aoVertexColor","aoMapVertexColor"),Yr("diffuseVertexColor","diffuseMapVertexColor"),Yr("specularVertexColor","specularMapVertexColor"),Yr("emissiveVertexColor","emissiveMapVertexColor"),Yr("metalnessVertexColor","metalnessMapVertexColor"),Yr("glossVertexColor","glossMapVertexColor"),Yr("opacityVertexColor","opacityMapVertexColor"),Yr("lightVertexColor","lightMapVertexColor"),zr("refraction","useRefraction");const Qr=new Pt,qr=Object.getOwnPropertyNames(Qr);for(const e in qr)zr(qr[e]);const Jr={Animation:Dt,Key:vt,Node:wt,Skeleton:Ft};Dt.prototype.getDuration=function(){return this.duration},Dt.prototype.getName=function(){return this.name},Dt.prototype.getNodes=function(){return this.nodes},Dt.prototype.setDuration=function(e){this.duration=e},Dt.prototype.setName=function(e){this.name=e},Ft.prototype.getAnimation=function(){return this.animation},Ft.prototype.getCurrentTime=function(){return this.currentTime},Ft.prototype.getLooping=function(){return this.looping},Ft.prototype.getNumNodes=function(){return this.numNodes},Ft.prototype.setAnimation=function(e){this.animation=e},Ft.prototype.setCurrentTime=function(e){this.currentTime=e},Ft.prototype.setLooping=function(e){this.looping=e};const Zr={AudioManager:Ut,Channel:Bt,Channel3d:xt,Listener:kt,Sound:Vt};Ut.prototype.getListener=function(){return this.listener},Ut.prototype.getVolume=function(){return this.volume},Ut.prototype.setVolume=function(e){this.volume=e};const $r={ASSET_ANIMATION:"animation",ASSET_AUDIO:"audio",ASSET_IMAGE:"image",ASSET_JSON:"json",ASSET_MODEL:"model",ASSET_MATERIAL:"material",ASSET_TEXT:"text",ASSET_TEXTURE:"texture",ASSET_CUBEMAP:"cubemap",ASSET_SCRIPT:"script"};Gt.prototype.getAssetById=function(e){return this.get(e)},Object.defineProperty(Xt.prototype,"ray",{get:function(){return this._rayLocal}}),Object.defineProperty(Xt.prototype,"position",{get:function(){return this._localPosition}}),Object.defineProperty(Xt.prototype,"rotation",{get:function(){return this._localRotation}});const eo={getTouchTargetCoords:Zt,Controller:Ht,GamePads:Wt,Keyboard:Yt,KeyboardEvent:zt,Mouse:Qt,MouseEvent:qt,Touch:$t,TouchDevice:Jt,TouchEvent:er};Object.defineProperty(Kt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}}),Object.defineProperty(qt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}});const to=ar,ro=pr,oo=cr,no=mr,io=fr,so=ur,ao=lr,po=dr,co=hr,mo=yr,fo=Er;function uo(e,t,r){Tr({glueUrl:e,wasmUrl:t,fallbackUrl:r,lazyInit:!0})}function lo(e){}tr.prototype.isFullscreen=function(){return!!document.fullscreenElement},tr.prototype.enableFullscreen=function(e,t,r){e=e||this.graphicsDevice.canvas;const o=function e(){t(),document.removeEventListener("fullscreenchange",e)},n=function e(){r(),document.removeEventListener("fullscreenerror",e)};t&&document.addEventListener("fullscreenchange",o,!1),r&&document.addEventListener("fullscreenerror",n,!1),e.requestFullscreen?e.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT):r()},tr.prototype.disableFullscreen=function(e){const t=function t(){e(),document.removeEventListener("fullscreenchange",t)};e&&document.addEventListener("fullscreenchange",t,!1),document.exitFullscreen()},tr.prototype.getSceneUrl=function(e){const t=this.scenes.find(e);return t?t.url:null},tr.prototype.loadScene=function(e,t){this.scenes.loadScene(e,t)},tr.prototype.loadSceneHierarchy=function(e,t){this.scenes.loadSceneHierarchy(e,t)},tr.prototype.loadSceneSettings=function(e,t){this.scenes.loadSceneSettings(e,t)},tr.prototype.renderMeshInstance=function(e,t){const r=null!=t&&t.layer?t.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(null,null,null,e,r)},tr.prototype.renderMesh=function(e,t,r,o){const n=null!=o&&o.layer?o.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(t,r,e,null,n)},tr.prototype._addLines=function(e,t,r){const o=r&&r.layer?r.layer:this.scene.layers.getLayerById(et),n=!r||void 0===r.depthTest||r.depthTest;this.scene.immediate.getBatch(o,n).addLines(e,t)},tr.prototype.renderLine=function(e,t,r){let o,n=r;const i=arguments[3],a=arguments[4];i instanceof s?(n=i,o="number"==typeof a?a===tt?{layer:this.scene.layers.getLayerById(et),depthTest:!1}:{layer:this.scene.layers.getLayerById(et),depthTest:!0}:a):"number"==typeof i?(n=r,o=i===tt?{layer:this.scene.layers.getLayerById(et),depthTest:!1}:{layer:this.scene.layers.getLayerById(et),depthTest:!0}):i&&(o=i),this._addLines([e,t],[r,n],o)},tr.prototype.renderLines=function(e,t,r){r?"number"==typeof r&&(r=r===tt?{layer:this.scene.layers.getLayerById(et),depthTest:!1}:{layer:this.scene.layers.getLayerById(et),depthTest:!0}):r={layer:this.scene.layers.getLayerById(et),depthTest:!0};!t.length||e.length===t.length?e.length%2==0?this._addLines(e,t,r):console.error("renderLines: array length is not divisible by 2"):console.error("renderLines: position/color arrays have different lengths")},tr.prototype.enableVr=function(){},Object.defineProperty(or.prototype,"node",{get:function(){return this.entity}}),Object.defineProperty(nr.prototype,"enable",{get:function(){return this.enabled},set:function(e){this.enabled=e}}),ir.prototype.setVisible=function(e){this.enabled=e},Object.defineProperty(ir.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(sr.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(gr.prototype,"bodyType",{get:function(){return this.type},set:function(e){this.type=e}}),gr.prototype.syncBodyToEntity=function(){this._updateDynamic()},_r.prototype.setGravity=function(){1===arguments.length?this.gravity.copy(arguments[0]):this.gravity.set(arguments[0],arguments[1],arguments[2])};export{Vr as ContextCreationError,Pr as ELEMENTTYPE_FLOAT32,Or as ELEMENTTYPE_INT16,Rr as ELEMENTTYPE_INT32,Ar as ELEMENTTYPE_INT8,Mr as ELEMENTTYPE_UINT16,Nr as ELEMENTTYPE_UINT32,Cr as ELEMENTTYPE_UINT8,Dr as PIXELFORMAT_L8_A8,Fr as PIXELFORMAT_R4_G4_B4_A4,wr as PIXELFORMAT_R5_G5_B5_A1,vr as PIXELFORMAT_R5_G6_B5,Br as PIXELFORMAT_R8_G8_B8,xr as PIXELFORMAT_R8_G8_B8_A8,Kr as PhongMaterial,ao as RIGIDBODY_ACTIVE_TAG,io as RIGIDBODY_CF_KINEMATIC_OBJECT,so as RIGIDBODY_CF_NORESPONSE_OBJECT,no as RIGIDBODY_CF_STATIC_OBJECT,mo as RIGIDBODY_DISABLE_DEACTIVATION,fo as RIGIDBODY_DISABLE_SIMULATION,po as RIGIDBODY_ISLAND_SLEEPING,ro as RIGIDBODY_TYPE_DYNAMIC,oo as RIGIDBODY_TYPE_KINEMATIC,to as RIGIDBODY_TYPE_STATIC,co as RIGIDBODY_WANTS_DEACTIVATION,kr as UnsupportedBrowserError,Jr as anim,$r as asset,Zr as audio,uo as basisSetDownloadConfig,Gr as gfx,jr as inherits,eo as input,Ir as log,Lr as makeArray,Xr as posteffect,lo as prefilterCubemap,Ur as programlib,Wr as scene,Sr as shape,br as time};
