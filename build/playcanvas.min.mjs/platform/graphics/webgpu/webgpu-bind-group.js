import"../../../core/debug.js";import"./webgpu-debug.js";class e{constructor(){this.bindGroup=void 0}update(e){this.destroy();const r=e.device,t=this.createDescriptor(r,e);this.bindGroup=r.wgpu.createBindGroup(t)}destroy(){this.bindGroup=null}createDescriptor(e,r){const t=[],o=r.format;let s=0;r.uniformBuffers.forEach((e=>{const r=e.persistent?e.impl.buffer:e.allocation.gpuBuffer.buffer;t.push({binding:s++,resource:{buffer:r,offset:0,size:e.format.byteSize}})})),r.textures.forEach(((r,i)=>{const u=r.impl,p=o.textureFormats[i],n=u.getView(e);t.push({binding:s++,resource:n});const c=u.getSampler(e,p.sampleType);t.push({binding:s++,resource:c})}));return{layout:r.format.impl.bindGroupLayout,entries:t}}}export{e as WebgpuBindGroup};
