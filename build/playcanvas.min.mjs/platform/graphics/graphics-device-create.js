import"../../core/tracing.js";import{WebgpuGraphicsDevice as e}from"./webgpu/webgpu-graphics-device.js";import{DEVICETYPE_WEBGL2 as r,DEVICETYPE_WEBGL1 as i,DEVICETYPE_WEBGPU as l}from"./constants.js";import{WebglGraphicsDevice as n}from"./webgl/webgl-graphics-device.js";function t(t,o={}){var s;const c=null!=(s=o.deviceTypes)?s:[];let p;c.includes(r)||c.push(r),c.includes(i)||c.push(i);for(let i=0;i<c.length;i++){var u,g;const s=c[i];if(s===l&&null!=(u=window)&&null!=(g=u.navigator)&&g.gpu)return p=new e(t,o),p.initWebGpu(o.glslangUrl,o.twgslUrl);if(s!==l)return o.preferWebGl2=s===r,p=new n(t,o),Promise.resolve(p)}return Promise.reject(new Error("Failed to allocate graphics device"))}export{t as createGraphicsDevice};
