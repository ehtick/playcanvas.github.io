import { WebglBuffer } from './webgl-buffer.js';

/**
 * A WebGL implementation of the VertexBuffer.
 *
 * @ignore
 */
class WebglVertexBuffer extends WebglBuffer {
  constructor(...args) {
    super(...args);
    this.vao = null;
  }
  destroy(device) {
    super.destroy(device);

    // clear up bound vertex buffers
    device.boundVao = null;
    device.gl.bindVertexArray(null);
  }
  loseContext() {
    super.loseContext();
    this.vao = null;
  }
  unlock(vertexBuffer) {
    const device = vertexBuffer.device;
    super.unlock(device, vertexBuffer.usage, device.gl.ARRAY_BUFFER, vertexBuffer.storage);
  }
}

export { WebglVertexBuffer };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ2wtdmVydGV4LWJ1ZmZlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3dlYmdsL3dlYmdsLXZlcnRleC1idWZmZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV2ViZ2xCdWZmZXIgfSBmcm9tIFwiLi93ZWJnbC1idWZmZXIuanNcIjtcblxuLyoqXG4gKiBBIFdlYkdMIGltcGxlbWVudGF0aW9uIG9mIHRoZSBWZXJ0ZXhCdWZmZXIuXG4gKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBXZWJnbFZlcnRleEJ1ZmZlciBleHRlbmRzIFdlYmdsQnVmZmVyIHtcbiAgICAvLyB2ZXJ0ZXggYXJyYXkgb2JqZWN0XG4gICAgdmFvID0gbnVsbDtcblxuICAgIGRlc3Ryb3koZGV2aWNlKSB7XG5cbiAgICAgICAgc3VwZXIuZGVzdHJveShkZXZpY2UpO1xuXG4gICAgICAgIC8vIGNsZWFyIHVwIGJvdW5kIHZlcnRleCBidWZmZXJzXG4gICAgICAgIGRldmljZS5ib3VuZFZhbyA9IG51bGw7XG4gICAgICAgIGRldmljZS5nbC5iaW5kVmVydGV4QXJyYXkobnVsbCk7XG4gICAgfVxuXG4gICAgbG9zZUNvbnRleHQoKSB7XG4gICAgICAgIHN1cGVyLmxvc2VDb250ZXh0KCk7XG4gICAgICAgIHRoaXMudmFvID0gbnVsbDtcbiAgICB9XG5cbiAgICB1bmxvY2sodmVydGV4QnVmZmVyKSB7XG5cbiAgICAgICAgY29uc3QgZGV2aWNlID0gdmVydGV4QnVmZmVyLmRldmljZTtcbiAgICAgICAgc3VwZXIudW5sb2NrKGRldmljZSwgdmVydGV4QnVmZmVyLnVzYWdlLCBkZXZpY2UuZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhCdWZmZXIuc3RvcmFnZSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBXZWJnbFZlcnRleEJ1ZmZlciB9O1xuIl0sIm5hbWVzIjpbIldlYmdsVmVydGV4QnVmZmVyIiwiV2ViZ2xCdWZmZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3MiLCJ2YW8iLCJkZXN0cm95IiwiZGV2aWNlIiwiYm91bmRWYW8iLCJnbCIsImJpbmRWZXJ0ZXhBcnJheSIsImxvc2VDb250ZXh0IiwidW5sb2NrIiwidmVydGV4QnVmZmVyIiwidXNhZ2UiLCJBUlJBWV9CVUZGRVIiLCJzdG9yYWdlIl0sIm1hcHBpbmdzIjoiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxpQkFBaUIsU0FBU0MsV0FBVyxDQUFDO0FBQUFDLEVBQUFBLFdBQUFBLENBQUEsR0FBQUMsSUFBQSxFQUFBO0FBQUEsSUFBQSxLQUFBLENBQUEsR0FBQUEsSUFBQSxDQUFBLENBQUE7SUFBQSxJQUV4Q0MsQ0FBQUEsR0FBRyxHQUFHLElBQUksQ0FBQTtBQUFBLEdBQUE7RUFFVkMsT0FBT0EsQ0FBQ0MsTUFBTSxFQUFFO0FBRVosSUFBQSxLQUFLLENBQUNELE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUE7O0FBRXJCO0lBQ0FBLE1BQU0sQ0FBQ0MsUUFBUSxHQUFHLElBQUksQ0FBQTtBQUN0QkQsSUFBQUEsTUFBTSxDQUFDRSxFQUFFLENBQUNDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUNuQyxHQUFBO0FBRUFDLEVBQUFBLFdBQVdBLEdBQUc7SUFDVixLQUFLLENBQUNBLFdBQVcsRUFBRSxDQUFBO0lBQ25CLElBQUksQ0FBQ04sR0FBRyxHQUFHLElBQUksQ0FBQTtBQUNuQixHQUFBO0VBRUFPLE1BQU1BLENBQUNDLFlBQVksRUFBRTtBQUVqQixJQUFBLE1BQU1OLE1BQU0sR0FBR00sWUFBWSxDQUFDTixNQUFNLENBQUE7QUFDbEMsSUFBQSxLQUFLLENBQUNLLE1BQU0sQ0FBQ0wsTUFBTSxFQUFFTSxZQUFZLENBQUNDLEtBQUssRUFBRVAsTUFBTSxDQUFDRSxFQUFFLENBQUNNLFlBQVksRUFBRUYsWUFBWSxDQUFDRyxPQUFPLENBQUMsQ0FBQTtBQUMxRixHQUFBO0FBQ0o7Ozs7In0=
