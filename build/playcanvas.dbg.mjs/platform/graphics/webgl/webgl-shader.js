/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../../core/debug.js';
import { TRACEID_SHADER_COMPILE } from '../../../core/constants.js';
import { now } from '../../../core/time.js';
import { ShaderInput } from '../shader-input.js';
import { semanticToLocation, SHADERTAG_MATERIAL } from '../constants.js';

let _totalCompileTime = 0;
const _vertexShaderBuiltins = ['gl_VertexID', 'gl_InstanceID', 'gl_DrawID', 'gl_BaseVertex', 'gl_BaseInstance'];

class WebglShader {
  constructor(shader) {
    this.compileDuration = 0;
    this.init();
    this.compileAndLink(shader.device, shader);
    shader.device.shaders.push(shader);
  }

  destroy(shader) {
    if (this.glProgram) {
      shader.device.gl.deleteProgram(this.glProgram);
      this.glProgram = null;
    }
  }
  init() {
    this.uniforms = [];
    this.samplers = [];
    this.attributes = [];
    this.glProgram = null;
    this.glVertexShader = null;
    this.glFragmentShader = null;
  }

  loseContext() {
    this.init();
  }

  restoreContext(device, shader) {
    this.compileAndLink(device, shader);
  }

  compileAndLink(device, shader) {
    let startTime = 0;
    Debug.call(() => {
      this.compileDuration = 0;
      startTime = now();
    });
    const definition = shader.definition;
    const glVertexShader = this._compileShaderSource(device, definition.vshader, true);
    const glFragmentShader = this._compileShaderSource(device, definition.fshader, false);
    const gl = device.gl;
    const glProgram = gl.createProgram();
    gl.attachShader(glProgram, glVertexShader);
    gl.attachShader(glProgram, glFragmentShader);
    const attrs = definition.attributes;
    if (device.webgl2 && definition.useTransformFeedback) {
      const outNames = [];
      for (const attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          outNames.push("out_" + attr);
        }
      }
      gl.transformFeedbackVaryings(glProgram, outNames, gl.INTERLEAVED_ATTRIBS);
    }

    const locations = {};
    for (const attr in attrs) {
      if (attrs.hasOwnProperty(attr)) {
        const semantic = attrs[attr];
        const loc = semanticToLocation[semantic];
        Debug.assert(!locations.hasOwnProperty(loc), `WARNING: Two attributes are mapped to the same location in a shader: ${locations[loc]} and ${attr}`);
        locations[loc] = attr;
        gl.bindAttribLocation(glProgram, loc, attr);
      }
    }
    gl.linkProgram(glProgram);

    this.glVertexShader = glVertexShader;
    this.glFragmentShader = glFragmentShader;
    this.glProgram = glProgram;
    Debug.call(() => {
      this.compileDuration = now() - startTime;
    });
    device._shaderStats.linked++;
    if (definition.tag === SHADERTAG_MATERIAL) {
      device._shaderStats.materialShaders++;
    }
  }

  _compileShaderSource(device, src, isVertexShader) {
    const gl = device.gl;
    const shaderCache = isVertexShader ? device.vertexShaderCache : device.fragmentShaderCache;
    let glShader = shaderCache[src];
    if (!glShader) {
      const startTime = now();
      device.fire('shader:compile:start', {
        timestamp: startTime,
        target: device
      });
      glShader = gl.createShader(isVertexShader ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);
      gl.shaderSource(glShader, src);
      gl.compileShader(glShader);
      shaderCache[src] = glShader;
      const endTime = now();
      device.fire('shader:compile:end', {
        timestamp: endTime,
        target: device
      });
      device._shaderStats.compileTime += endTime - startTime;
      if (isVertexShader) {
        device._shaderStats.vsCompiled++;
      } else {
        device._shaderStats.fsCompiled++;
      }
    }
    return glShader;
  }

  postLink(device, shader) {
    const gl = device.gl;
    const glProgram = this.glProgram;
    const definition = shader.definition;
    const startTime = now();
    device.fire('shader:link:start', {
      timestamp: startTime,
      target: device
    });
    let linkStartTime = 0;
    Debug.call(() => {
      linkStartTime = now();
    });

    if (!this._isCompiled(device, shader, this.glVertexShader, definition.vshader, "vertex")) return false;
    if (!this._isCompiled(device, shader, this.glFragmentShader, definition.fshader, "fragment")) return false;
    if (!gl.getProgramParameter(glProgram, gl.LINK_STATUS)) {
      var _gl$getExtension, _gl$getExtension2;
      const message = "Failed to link shader program. Error: " + gl.getProgramInfoLog(glProgram);

      definition.translatedFrag = (_gl$getExtension = gl.getExtension('WEBGL_debug_shaders')) == null ? void 0 : _gl$getExtension.getTranslatedShaderSource(this.glFragmentShader);
      definition.translatedVert = (_gl$getExtension2 = gl.getExtension('WEBGL_debug_shaders')) == null ? void 0 : _gl$getExtension2.getTranslatedShaderSource(this.glVertexShader);
      console.error(message, definition);
      return false;
    }

    let i = 0;
    const numAttributes = gl.getProgramParameter(glProgram, gl.ACTIVE_ATTRIBUTES);
    while (i < numAttributes) {
      const info = gl.getActiveAttrib(glProgram, i++);
      const location = gl.getAttribLocation(glProgram, info.name);

      if (_vertexShaderBuiltins.indexOf(info.name) !== -1) continue;

      if (definition.attributes[info.name] === undefined) {
        console.error(`Vertex shader attribute "${info.name}" is not mapped to a semantic in shader definition.`);
      }
      const shaderInput = new ShaderInput(device, definition.attributes[info.name], device.pcUniformType[info.type], location);
      this.attributes.push(shaderInput);
    }

    i = 0;
    const numUniforms = gl.getProgramParameter(glProgram, gl.ACTIVE_UNIFORMS);
    while (i < numUniforms) {
      const info = gl.getActiveUniform(glProgram, i++);
      const location = gl.getUniformLocation(glProgram, info.name);
      const shaderInput = new ShaderInput(device, info.name, device.pcUniformType[info.type], location);
      if (info.type === gl.SAMPLER_2D || info.type === gl.SAMPLER_CUBE || device.webgl2 && (info.type === gl.SAMPLER_2D_SHADOW || info.type === gl.SAMPLER_CUBE_SHADOW || info.type === gl.SAMPLER_3D)) {
        this.samplers.push(shaderInput);
      } else {
        this.uniforms.push(shaderInput);
      }
    }
    shader.ready = true;
    const endTime = now();
    device.fire('shader:link:end', {
      timestamp: endTime,
      target: device
    });
    device._shaderStats.compileTime += endTime - startTime;
    Debug.call(() => {
      const duration = now() - linkStartTime;
      this.compileDuration += duration;
      _totalCompileTime += this.compileDuration;
      Debug.trace(TRACEID_SHADER_COMPILE, `[id: ${shader.id}] ${shader.name}: ${this.compileDuration.toFixed(1)}ms, TOTAL: ${_totalCompileTime.toFixed(1)}ms`);
    });
    return true;
  }

  _isCompiled(device, shader, glShader, source, shaderType) {
    const gl = device.gl;
    if (!gl.getShaderParameter(glShader, gl.COMPILE_STATUS)) {
      const infoLog = gl.getShaderInfoLog(glShader);
      const [code, error] = this._processError(source, infoLog);
      const message = `Failed to compile ${shaderType} shader:\n\n${infoLog}\n${code}`;
      error.shader = shader;
      console.error(message, error);
      return false;
    }
    return true;
  }

  _processError(src, infoLog) {
    const error = {};
    let code = '';
    if (src) {
      const lines = src.split('\n');
      let from = 0;
      let to = lines.length;

      if (infoLog && infoLog.startsWith('ERROR:')) {
        const match = infoLog.match(/^ERROR:\s([0-9]+):([0-9]+):\s*(.+)/);
        if (match) {
          error.message = match[3];
          error.line = parseInt(match[2], 10);
          from = Math.max(0, error.line - 6);
          to = Math.min(lines.length, error.line + 5);
        }
      }

      for (let i = from; i < to; i++) {
        code += i + 1 + ":\t" + lines[i] + '\n';
      }
      error.source = src;
    }
    return [code, error];
  }
}

export { WebglShader };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ2wtc2hhZGVyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvcGxhdGZvcm0vZ3JhcGhpY3Mvd2ViZ2wvd2ViZ2wtc2hhZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9kZWJ1Zy5qcyc7XG5pbXBvcnQgeyBUUkFDRUlEX1NIQURFUl9DT01QSUxFIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgbm93IH0gZnJvbSAnLi4vLi4vLi4vY29yZS90aW1lLmpzJztcblxuaW1wb3J0IHsgU2hhZGVySW5wdXQgfSBmcm9tICcuLi9zaGFkZXItaW5wdXQuanMnO1xuaW1wb3J0IHsgU0hBREVSVEFHX01BVEVSSUFMLCBzZW1hbnRpY1RvTG9jYXRpb24gfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuXG5sZXQgX3RvdGFsQ29tcGlsZVRpbWUgPSAwO1xuXG5jb25zdCBfdmVydGV4U2hhZGVyQnVpbHRpbnMgPSBbXG4gICAgJ2dsX1ZlcnRleElEJyxcbiAgICAnZ2xfSW5zdGFuY2VJRCcsXG4gICAgJ2dsX0RyYXdJRCcsXG4gICAgJ2dsX0Jhc2VWZXJ0ZXgnLFxuICAgICdnbF9CYXNlSW5zdGFuY2UnXG5dO1xuXG4vKipcbiAqIEEgV2ViR0wgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNoYWRlci5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIFdlYmdsU2hhZGVyIHtcbiAgICBjb21waWxlRHVyYXRpb24gPSAwO1xuXG4gICAgY29uc3RydWN0b3Ioc2hhZGVyKSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB0aGlzLmNvbXBpbGVBbmRMaW5rKHNoYWRlci5kZXZpY2UsIHNoYWRlcik7XG4gICAgICAgIHNoYWRlci5kZXZpY2Uuc2hhZGVycy5wdXNoKHNoYWRlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnJlZSB0aGUgV2ViR0wgcmVzb3VyY2VzIGFzc29jaWF0ZWQgd2l0aCBhIHNoYWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9zaGFkZXIuanMnKS5TaGFkZXJ9IHNoYWRlciAtIFRoZSBzaGFkZXIgdG8gZnJlZS5cbiAgICAgKi9cbiAgICBkZXN0cm95KHNoYWRlcikge1xuICAgICAgICBpZiAodGhpcy5nbFByb2dyYW0pIHtcbiAgICAgICAgICAgIHNoYWRlci5kZXZpY2UuZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLmdsUHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLmdsUHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLnVuaWZvcm1zID0gW107XG4gICAgICAgIHRoaXMuc2FtcGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gW107XG5cbiAgICAgICAgdGhpcy5nbFByb2dyYW0gPSBudWxsO1xuICAgICAgICB0aGlzLmdsVmVydGV4U2hhZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5nbEZyYWdtZW50U2hhZGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIHRoZSBzaGFkZXIgd2hlbiB0aGUgY29udGV4dCBoYXMgYmVlbiBsb3N0LlxuICAgICAqL1xuICAgIGxvc2VDb250ZXh0KCkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXN0b3JlIHNoYWRlciBhZnRlciB0aGUgY29udGV4dCBoYXMgYmVlbiBvYnRhaW5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL3dlYmdsLWdyYXBoaWNzLWRldmljZS5qcycpLldlYmdsR3JhcGhpY3NEZXZpY2V9IGRldmljZSAtIFRoZSBncmFwaGljcyBkZXZpY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL3NoYWRlci5qcycpLlNoYWRlcn0gc2hhZGVyIC0gVGhlIHNoYWRlciB0byByZXN0b3JlLlxuICAgICAqL1xuICAgIHJlc3RvcmVDb250ZXh0KGRldmljZSwgc2hhZGVyKSB7XG4gICAgICAgIHRoaXMuY29tcGlsZUFuZExpbmsoZGV2aWNlLCBzaGFkZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBpbGUgYW5kIGxpbmsgYSBzaGFkZXIgcHJvZ3JhbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL3dlYmdsLWdyYXBoaWNzLWRldmljZS5qcycpLldlYmdsR3JhcGhpY3NEZXZpY2V9IGRldmljZSAtIFRoZSBncmFwaGljcyBkZXZpY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL3NoYWRlci5qcycpLlNoYWRlcn0gc2hhZGVyIC0gVGhlIHNoYWRlciB0byBjb21waWxlLlxuICAgICAqL1xuICAgIGNvbXBpbGVBbmRMaW5rKGRldmljZSwgc2hhZGVyKSB7XG5cbiAgICAgICAgbGV0IHN0YXJ0VGltZSA9IDA7XG4gICAgICAgIERlYnVnLmNhbGwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb21waWxlRHVyYXRpb24gPSAwO1xuICAgICAgICAgICAgc3RhcnRUaW1lID0gbm93KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBzaGFkZXIuZGVmaW5pdGlvbjtcbiAgICAgICAgY29uc3QgZ2xWZXJ0ZXhTaGFkZXIgPSB0aGlzLl9jb21waWxlU2hhZGVyU291cmNlKGRldmljZSwgZGVmaW5pdGlvbi52c2hhZGVyLCB0cnVlKTtcbiAgICAgICAgY29uc3QgZ2xGcmFnbWVudFNoYWRlciA9IHRoaXMuX2NvbXBpbGVTaGFkZXJTb3VyY2UoZGV2aWNlLCBkZWZpbml0aW9uLmZzaGFkZXIsIGZhbHNlKTtcblxuICAgICAgICBjb25zdCBnbCA9IGRldmljZS5nbDtcbiAgICAgICAgY29uc3QgZ2xQcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuXG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihnbFByb2dyYW0sIGdsVmVydGV4U2hhZGVyKTtcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKGdsUHJvZ3JhbSwgZ2xGcmFnbWVudFNoYWRlcik7XG5cbiAgICAgICAgY29uc3QgYXR0cnMgPSBkZWZpbml0aW9uLmF0dHJpYnV0ZXM7XG4gICAgICAgIGlmIChkZXZpY2Uud2ViZ2wyICYmIGRlZmluaXRpb24udXNlVHJhbnNmb3JtRmVlZGJhY2spIHtcbiAgICAgICAgICAgIC8vIENvbGxlY3QgYWxsIFwib3V0X1wiIGF0dHJpYnV0ZXMgYW5kIHVzZSB0aGVtIGZvciBvdXRwdXRcbiAgICAgICAgICAgIGNvbnN0IG91dE5hbWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0TmFtZXMucHVzaChcIm91dF9cIiArIGF0dHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MoZ2xQcm9ncmFtLCBvdXROYW1lcywgZ2wuSU5URVJMRUFWRURfQVRUUklCUyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYXAgYWxsIHZlcnRleCBpbnB1dCBhdHRyaWJ1dGVzIHRvIGZpeGVkIGxvY2F0aW9uc1xuICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBhdHRyIGluIGF0dHJzKSB7XG4gICAgICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZW1hbnRpYyA9IGF0dHJzW2F0dHJdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvYyA9IHNlbWFudGljVG9Mb2NhdGlvbltzZW1hbnRpY107XG4gICAgICAgICAgICAgICAgRGVidWcuYXNzZXJ0KCFsb2NhdGlvbnMuaGFzT3duUHJvcGVydHkobG9jKSwgYFdBUk5JTkc6IFR3byBhdHRyaWJ1dGVzIGFyZSBtYXBwZWQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gYSBzaGFkZXI6ICR7bG9jYXRpb25zW2xvY119IGFuZCAke2F0dHJ9YCk7XG5cbiAgICAgICAgICAgICAgICBsb2NhdGlvbnNbbG9jXSA9IGF0dHI7XG4gICAgICAgICAgICAgICAgZ2wuYmluZEF0dHJpYkxvY2F0aW9uKGdsUHJvZ3JhbSwgbG9jLCBhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGdsLmxpbmtQcm9ncmFtKGdsUHJvZ3JhbSk7XG5cbiAgICAgICAgLy8gQ2FjaGUgdGhlIFdlYkdMIG9iamVjdHMgb24gdGhlIHNoYWRlclxuICAgICAgICB0aGlzLmdsVmVydGV4U2hhZGVyID0gZ2xWZXJ0ZXhTaGFkZXI7XG4gICAgICAgIHRoaXMuZ2xGcmFnbWVudFNoYWRlciA9IGdsRnJhZ21lbnRTaGFkZXI7XG4gICAgICAgIHRoaXMuZ2xQcm9ncmFtID0gZ2xQcm9ncmFtO1xuXG4gICAgICAgIERlYnVnLmNhbGwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb21waWxlRHVyYXRpb24gPSBub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gI2lmIF9QUk9GSUxFUlxuICAgICAgICBkZXZpY2UuX3NoYWRlclN0YXRzLmxpbmtlZCsrO1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi50YWcgPT09IFNIQURFUlRBR19NQVRFUklBTCkge1xuICAgICAgICAgICAgZGV2aWNlLl9zaGFkZXJTdGF0cy5tYXRlcmlhbFNoYWRlcnMrKztcbiAgICAgICAgfVxuICAgICAgICAvLyAjZW5kaWZcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21waWxlcyBhbiBpbmRpdmlkdWFsIHNoYWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL3dlYmdsLWdyYXBoaWNzLWRldmljZS5qcycpLldlYmdsR3JhcGhpY3NEZXZpY2V9IGRldmljZSAtIFRoZSBncmFwaGljcyBkZXZpY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyAtIFRoZSBzaGFkZXIgc291cmNlIGNvZGUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc1ZlcnRleFNoYWRlciAtIFRydWUgaWYgdGhlIHNoYWRlciBpcyBhIHZlcnRleCBzaGFkZXIsIGZhbHNlIGlmIGl0IGlzIGFcbiAgICAgKiBmcmFnbWVudCBzaGFkZXIuXG4gICAgICogQHJldHVybnMge1dlYkdMU2hhZGVyfSBUaGUgY29tcGlsZWQgc2hhZGVyLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NvbXBpbGVTaGFkZXJTb3VyY2UoZGV2aWNlLCBzcmMsIGlzVmVydGV4U2hhZGVyKSB7XG4gICAgICAgIGNvbnN0IGdsID0gZGV2aWNlLmdsO1xuICAgICAgICBjb25zdCBzaGFkZXJDYWNoZSA9IGlzVmVydGV4U2hhZGVyID8gZGV2aWNlLnZlcnRleFNoYWRlckNhY2hlIDogZGV2aWNlLmZyYWdtZW50U2hhZGVyQ2FjaGU7XG4gICAgICAgIGxldCBnbFNoYWRlciA9IHNoYWRlckNhY2hlW3NyY107XG5cbiAgICAgICAgaWYgKCFnbFNoYWRlcikge1xuICAgICAgICAgICAgLy8gI2lmIF9QUk9GSUxFUlxuICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gbm93KCk7XG4gICAgICAgICAgICBkZXZpY2UuZmlyZSgnc2hhZGVyOmNvbXBpbGU6c3RhcnQnLCB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBzdGFydFRpbWUsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBkZXZpY2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gI2VuZGlmXG5cbiAgICAgICAgICAgIGdsU2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGlzVmVydGV4U2hhZGVyID8gZ2wuVkVSVEVYX1NIQURFUiA6IGdsLkZSQUdNRU5UX1NIQURFUik7XG5cbiAgICAgICAgICAgIGdsLnNoYWRlclNvdXJjZShnbFNoYWRlciwgc3JjKTtcbiAgICAgICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoZ2xTaGFkZXIpO1xuXG4gICAgICAgICAgICBzaGFkZXJDYWNoZVtzcmNdID0gZ2xTaGFkZXI7XG5cbiAgICAgICAgICAgIC8vICNpZiBfUFJPRklMRVJcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBub3coKTtcbiAgICAgICAgICAgIGRldmljZS5maXJlKCdzaGFkZXI6Y29tcGlsZTplbmQnLCB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBlbmRUaW1lLFxuICAgICAgICAgICAgICAgIHRhcmdldDogZGV2aWNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRldmljZS5fc2hhZGVyU3RhdHMuY29tcGlsZVRpbWUgKz0gZW5kVGltZSAtIHN0YXJ0VGltZTtcblxuICAgICAgICAgICAgaWYgKGlzVmVydGV4U2hhZGVyKSB7XG4gICAgICAgICAgICAgICAgZGV2aWNlLl9zaGFkZXJTdGF0cy52c0NvbXBpbGVkKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRldmljZS5fc2hhZGVyU3RhdHMuZnNDb21waWxlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gI2VuZGlmXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2xTaGFkZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdCBhdHRyaWJ1dGUgYW5kIHVuaWZvcm0gaW5mb3JtYXRpb24gZnJvbSBhIHN1Y2Nlc3NmdWxseSBsaW5rZWQgc2hhZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vd2ViZ2wtZ3JhcGhpY3MtZGV2aWNlLmpzJykuV2ViZ2xHcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlIGdyYXBoaWNzIGRldmljZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vc2hhZGVyLmpzJykuU2hhZGVyfSBzaGFkZXIgLSBUaGUgc2hhZGVyIHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzaGFkZXIgd2FzIHN1Y2Nlc3NmdWxseSBxdWVyaWVkIGFuZCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgcG9zdExpbmsoZGV2aWNlLCBzaGFkZXIpIHtcbiAgICAgICAgY29uc3QgZ2wgPSBkZXZpY2UuZ2w7XG5cbiAgICAgICAgY29uc3QgZ2xQcm9ncmFtID0gdGhpcy5nbFByb2dyYW07XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBzaGFkZXIuZGVmaW5pdGlvbjtcblxuICAgICAgICAvLyAjaWYgX1BST0ZJTEVSXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5vdygpO1xuICAgICAgICBkZXZpY2UuZmlyZSgnc2hhZGVyOmxpbms6c3RhcnQnLCB7XG4gICAgICAgICAgICB0aW1lc3RhbXA6IHN0YXJ0VGltZSxcbiAgICAgICAgICAgIHRhcmdldDogZGV2aWNlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyAjZW5kaWZcblxuICAgICAgICBsZXQgbGlua1N0YXJ0VGltZSA9IDA7XG4gICAgICAgIERlYnVnLmNhbGwoKCkgPT4ge1xuICAgICAgICAgICAgbGlua1N0YXJ0VGltZSA9IG5vdygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgY29tcGlsYXRpb24gZXJyb3JzXG4gICAgICAgIGlmICghdGhpcy5faXNDb21waWxlZChkZXZpY2UsIHNoYWRlciwgdGhpcy5nbFZlcnRleFNoYWRlciwgZGVmaW5pdGlvbi52c2hhZGVyLCBcInZlcnRleFwiKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICBpZiAoIXRoaXMuX2lzQ29tcGlsZWQoZGV2aWNlLCBzaGFkZXIsIHRoaXMuZ2xGcmFnbWVudFNoYWRlciwgZGVmaW5pdGlvbi5mc2hhZGVyLCBcImZyYWdtZW50XCIpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihnbFByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gXCJGYWlsZWQgdG8gbGluayBzaGFkZXIgcHJvZ3JhbS4gRXJyb3I6IFwiICsgZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coZ2xQcm9ncmFtKTtcblxuICAgICAgICAgICAgLy8gI2lmIF9ERUJVR1xuXG4gICAgICAgICAgICAvLyBsb2cgdHJhbnNsYXRlZCBzaGFkZXJzXG4gICAgICAgICAgICBkZWZpbml0aW9uLnRyYW5zbGF0ZWRGcmFnID0gZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZWJ1Z19zaGFkZXJzJyk/LmdldFRyYW5zbGF0ZWRTaGFkZXJTb3VyY2UodGhpcy5nbEZyYWdtZW50U2hhZGVyKTtcbiAgICAgICAgICAgIGRlZmluaXRpb24udHJhbnNsYXRlZFZlcnQgPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RlYnVnX3NoYWRlcnMnKT8uZ2V0VHJhbnNsYXRlZFNoYWRlclNvdXJjZSh0aGlzLmdsVmVydGV4U2hhZGVyKTtcblxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlLCBkZWZpbml0aW9uKTtcbiAgICAgICAgICAgIC8vICNlbHNlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgLy8gI2VuZGlmXG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFF1ZXJ5IHRoZSBwcm9ncmFtIGZvciBlYWNoIHZlcnRleCBidWZmZXIgaW5wdXQgKEdMU0wgJ2F0dHJpYnV0ZScpXG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgbnVtQXR0cmlidXRlcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIoZ2xQcm9ncmFtLCBnbC5BQ1RJVkVfQVRUUklCVVRFUyk7XG4gICAgICAgIHdoaWxlIChpIDwgbnVtQXR0cmlidXRlcykge1xuICAgICAgICAgICAgY29uc3QgaW5mbyA9IGdsLmdldEFjdGl2ZUF0dHJpYihnbFByb2dyYW0sIGkrKyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKGdsUHJvZ3JhbSwgaW5mby5uYW1lKTtcblxuICAgICAgICAgICAgLy8gYSBidWlsdC1pbiBhdHRyaWJ1dGVzIGZvciB3aGljaCB3ZSBkbyBub3QgbmVlZCB0byBwcm92aWRlIGFueSBkYXRhXG4gICAgICAgICAgICBpZiAoX3ZlcnRleFNoYWRlckJ1aWx0aW5zLmluZGV4T2YoaW5mby5uYW1lKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGF0dHJpYnV0ZXMgYXJlIGNvcnJlY3RseSBsaW5rZWQgdXBcbiAgICAgICAgICAgIGlmIChkZWZpbml0aW9uLmF0dHJpYnV0ZXNbaW5mby5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgVmVydGV4IHNoYWRlciBhdHRyaWJ1dGUgXCIke2luZm8ubmFtZX1cIiBpcyBub3QgbWFwcGVkIHRvIGEgc2VtYW50aWMgaW4gc2hhZGVyIGRlZmluaXRpb24uYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNoYWRlcklucHV0ID0gbmV3IFNoYWRlcklucHV0KGRldmljZSwgZGVmaW5pdGlvbi5hdHRyaWJ1dGVzW2luZm8ubmFtZV0sIGRldmljZS5wY1VuaWZvcm1UeXBlW2luZm8udHlwZV0sIGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnB1c2goc2hhZGVySW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUXVlcnkgdGhlIHByb2dyYW0gZm9yIGVhY2ggc2hhZGVyIHN0YXRlIChHTFNMICd1bmlmb3JtJylcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIGNvbnN0IG51bVVuaWZvcm1zID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihnbFByb2dyYW0sIGdsLkFDVElWRV9VTklGT1JNUyk7XG4gICAgICAgIHdoaWxlIChpIDwgbnVtVW5pZm9ybXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZm8gPSBnbC5nZXRBY3RpdmVVbmlmb3JtKGdsUHJvZ3JhbSwgaSsrKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGdsUHJvZ3JhbSwgaW5mby5uYW1lKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hhZGVySW5wdXQgPSBuZXcgU2hhZGVySW5wdXQoZGV2aWNlLCBpbmZvLm5hbWUsIGRldmljZS5wY1VuaWZvcm1UeXBlW2luZm8udHlwZV0sIGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgaWYgKGluZm8udHlwZSA9PT0gZ2wuU0FNUExFUl8yRCB8fCBpbmZvLnR5cGUgPT09IGdsLlNBTVBMRVJfQ1VCRSB8fFxuICAgICAgICAgICAgICAgIChkZXZpY2Uud2ViZ2wyICYmIChpbmZvLnR5cGUgPT09IGdsLlNBTVBMRVJfMkRfU0hBRE9XIHx8IGluZm8udHlwZSA9PT0gZ2wuU0FNUExFUl9DVUJFX1NIQURPVyB8fCBpbmZvLnR5cGUgPT09IGdsLlNBTVBMRVJfM0QpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVycy5wdXNoKHNoYWRlcklucHV0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmlmb3Jtcy5wdXNoKHNoYWRlcklucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNoYWRlci5yZWFkeSA9IHRydWU7XG5cbiAgICAgICAgLy8gI2lmIF9QUk9GSUxFUlxuICAgICAgICBjb25zdCBlbmRUaW1lID0gbm93KCk7XG4gICAgICAgIGRldmljZS5maXJlKCdzaGFkZXI6bGluazplbmQnLCB7XG4gICAgICAgICAgICB0aW1lc3RhbXA6IGVuZFRpbWUsXG4gICAgICAgICAgICB0YXJnZXQ6IGRldmljZVxuICAgICAgICB9KTtcbiAgICAgICAgZGV2aWNlLl9zaGFkZXJTdGF0cy5jb21waWxlVGltZSArPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgICAvLyAjZW5kaWZcblxuICAgICAgICBEZWJ1Zy5jYWxsKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gbm93KCkgLSBsaW5rU3RhcnRUaW1lO1xuICAgICAgICAgICAgdGhpcy5jb21waWxlRHVyYXRpb24gKz0gZHVyYXRpb247XG4gICAgICAgICAgICBfdG90YWxDb21waWxlVGltZSArPSB0aGlzLmNvbXBpbGVEdXJhdGlvbjtcbiAgICAgICAgICAgIERlYnVnLnRyYWNlKFRSQUNFSURfU0hBREVSX0NPTVBJTEUsIGBbaWQ6ICR7c2hhZGVyLmlkfV0gJHtzaGFkZXIubmFtZX06ICR7dGhpcy5jb21waWxlRHVyYXRpb24udG9GaXhlZCgxKX1tcywgVE9UQUw6ICR7X3RvdGFsQ29tcGlsZVRpbWUudG9GaXhlZCgxKX1tc2ApO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGUgY29tcGlsYXRpb24gc3RhdHVzIG9mIGEgc2hhZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vd2ViZ2wtZ3JhcGhpY3MtZGV2aWNlLmpzJykuV2ViZ2xHcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlIGdyYXBoaWNzIGRldmljZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vc2hhZGVyLmpzJykuU2hhZGVyfSBzaGFkZXIgLSBUaGUgc2hhZGVyIHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7V2ViR0xTaGFkZXJ9IGdsU2hhZGVyIC0gVGhlIFdlYkdMIHNoYWRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc291cmNlIC0gVGhlIHNoYWRlciBzb3VyY2UgY29kZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2hhZGVyVHlwZSAtIFRoZSBzaGFkZXIgdHlwZS4gQ2FuIGJlICd2ZXJ0ZXgnIG9yICdmcmFnbWVudCcuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNoYWRlciBjb21waWxlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9pc0NvbXBpbGVkKGRldmljZSwgc2hhZGVyLCBnbFNoYWRlciwgc291cmNlLCBzaGFkZXJUeXBlKSB7XG4gICAgICAgIGNvbnN0IGdsID0gZGV2aWNlLmdsO1xuXG4gICAgICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGdsU2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZm9Mb2cgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKGdsU2hhZGVyKTtcbiAgICAgICAgICAgIGNvbnN0IFtjb2RlLCBlcnJvcl0gPSB0aGlzLl9wcm9jZXNzRXJyb3Ioc291cmNlLCBpbmZvTG9nKTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgRmFpbGVkIHRvIGNvbXBpbGUgJHtzaGFkZXJUeXBlfSBzaGFkZXI6XFxuXFxuJHtpbmZvTG9nfVxcbiR7Y29kZX1gO1xuICAgICAgICAgICAgLy8gI2lmIF9ERUJVR1xuICAgICAgICAgICAgZXJyb3Iuc2hhZGVyID0gc2hhZGVyO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlLCBlcnJvcik7XG4gICAgICAgICAgICAvLyAjZWxzZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgIC8vICNlbmRpZlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRydW5jYXRlIHRoZSBXZWJHTCBzaGFkZXIgY29tcGlsYXRpb24gbG9nIHRvIGp1c3QgaW5jbHVkZSB0aGUgZXJyb3IgbGluZSBwbHVzIHRoZSA1IGxpbmVzXG4gICAgICogYmVmb3JlIGFuZCBhZnRlciBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgLSBUaGUgc2hhZGVyIHNvdXJjZSBjb2RlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbmZvTG9nIC0gVGhlIGluZm8gbG9nIHJldHVybmVkIGZyb20gV2ViR0wgb24gYSBmYWlsZWQgc2hhZGVyIGNvbXBpbGF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gQW4gYXJyYXkgd2hlcmUgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIDEwIGxpbmVzIG9mIGNvZGUgYXJvdW5kIHRoZSBmaXJzdFxuICAgICAqIGRldGVjdGVkIGVycm9yLCBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGFuIG9iamVjdCBzdG9yaW5nIHRoZSBlcnJvciBtZXNzYWdlLCBsaW5lIG51bWJlciBhbmRcbiAgICAgKiBjb21wbGV0ZSBzaGFkZXIgc291cmNlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3Byb2Nlc3NFcnJvcihzcmMsIGluZm9Mb2cpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSB7IH07XG4gICAgICAgIGxldCBjb2RlID0gJyc7XG5cbiAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBzcmMuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgbGV0IGZyb20gPSAwO1xuICAgICAgICAgICAgbGV0IHRvID0gbGluZXMubGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyBpZiBlcnJvciBpcyBpbiB0aGUgY29kZSwgb25seSBzaG93IG5lYXJieSBsaW5lcyBpbnN0ZWFkIG9mIHdob2xlIHNoYWRlciBjb2RlXG4gICAgICAgICAgICBpZiAoaW5mb0xvZyAmJiBpbmZvTG9nLnN0YXJ0c1dpdGgoJ0VSUk9SOicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBpbmZvTG9nLm1hdGNoKC9eRVJST1I6XFxzKFswLTldKyk6KFswLTldKyk6XFxzKiguKykvKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IG1hdGNoWzNdO1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5saW5lID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcblxuICAgICAgICAgICAgICAgICAgICBmcm9tID0gTWF0aC5tYXgoMCwgZXJyb3IubGluZSAtIDYpO1xuICAgICAgICAgICAgICAgICAgICB0byA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgZXJyb3IubGluZSArIDUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hyb21lIHJlcG9ydHMgc2hhZGVyIGVycm9ycyBvbiBsaW5lcyBpbmRleGVkIGZyb20gMVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSAoaSArIDEpICsgXCI6XFx0XCIgKyBsaW5lc1tpXSArICdcXG4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlcnJvci5zb3VyY2UgPSBzcmM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW2NvZGUsIGVycm9yXTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFdlYmdsU2hhZGVyIH07XG4iXSwibmFtZXMiOlsiX3RvdGFsQ29tcGlsZVRpbWUiLCJfdmVydGV4U2hhZGVyQnVpbHRpbnMiLCJXZWJnbFNoYWRlciIsImNvbnN0cnVjdG9yIiwic2hhZGVyIiwiY29tcGlsZUR1cmF0aW9uIiwiaW5pdCIsImNvbXBpbGVBbmRMaW5rIiwiZGV2aWNlIiwic2hhZGVycyIsInB1c2giLCJkZXN0cm95IiwiZ2xQcm9ncmFtIiwiZ2wiLCJkZWxldGVQcm9ncmFtIiwidW5pZm9ybXMiLCJzYW1wbGVycyIsImF0dHJpYnV0ZXMiLCJnbFZlcnRleFNoYWRlciIsImdsRnJhZ21lbnRTaGFkZXIiLCJsb3NlQ29udGV4dCIsInJlc3RvcmVDb250ZXh0Iiwic3RhcnRUaW1lIiwiRGVidWciLCJjYWxsIiwibm93IiwiZGVmaW5pdGlvbiIsIl9jb21waWxlU2hhZGVyU291cmNlIiwidnNoYWRlciIsImZzaGFkZXIiLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwiYXR0cnMiLCJ3ZWJnbDIiLCJ1c2VUcmFuc2Zvcm1GZWVkYmFjayIsIm91dE5hbWVzIiwiYXR0ciIsImhhc093blByb3BlcnR5IiwidHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncyIsIklOVEVSTEVBVkVEX0FUVFJJQlMiLCJsb2NhdGlvbnMiLCJzZW1hbnRpYyIsImxvYyIsInNlbWFudGljVG9Mb2NhdGlvbiIsImFzc2VydCIsImJpbmRBdHRyaWJMb2NhdGlvbiIsImxpbmtQcm9ncmFtIiwiX3NoYWRlclN0YXRzIiwibGlua2VkIiwidGFnIiwiU0hBREVSVEFHX01BVEVSSUFMIiwibWF0ZXJpYWxTaGFkZXJzIiwic3JjIiwiaXNWZXJ0ZXhTaGFkZXIiLCJzaGFkZXJDYWNoZSIsInZlcnRleFNoYWRlckNhY2hlIiwiZnJhZ21lbnRTaGFkZXJDYWNoZSIsImdsU2hhZGVyIiwiZmlyZSIsInRpbWVzdGFtcCIsInRhcmdldCIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVIiLCJzaGFkZXJTb3VyY2UiLCJjb21waWxlU2hhZGVyIiwiZW5kVGltZSIsImNvbXBpbGVUaW1lIiwidnNDb21waWxlZCIsImZzQ29tcGlsZWQiLCJwb3N0TGluayIsImxpbmtTdGFydFRpbWUiLCJfaXNDb21waWxlZCIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsIm1lc3NhZ2UiLCJnZXRQcm9ncmFtSW5mb0xvZyIsInRyYW5zbGF0ZWRGcmFnIiwiZ2V0RXh0ZW5zaW9uIiwiZ2V0VHJhbnNsYXRlZFNoYWRlclNvdXJjZSIsInRyYW5zbGF0ZWRWZXJ0IiwiY29uc29sZSIsImVycm9yIiwiaSIsIm51bUF0dHJpYnV0ZXMiLCJBQ1RJVkVfQVRUUklCVVRFUyIsImluZm8iLCJnZXRBY3RpdmVBdHRyaWIiLCJsb2NhdGlvbiIsImdldEF0dHJpYkxvY2F0aW9uIiwibmFtZSIsImluZGV4T2YiLCJ1bmRlZmluZWQiLCJzaGFkZXJJbnB1dCIsIlNoYWRlcklucHV0IiwicGNVbmlmb3JtVHlwZSIsInR5cGUiLCJudW1Vbmlmb3JtcyIsIkFDVElWRV9VTklGT1JNUyIsImdldEFjdGl2ZVVuaWZvcm0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJTQU1QTEVSXzJEIiwiU0FNUExFUl9DVUJFIiwiU0FNUExFUl8yRF9TSEFET1ciLCJTQU1QTEVSX0NVQkVfU0hBRE9XIiwiU0FNUExFUl8zRCIsInJlYWR5IiwiZHVyYXRpb24iLCJ0cmFjZSIsIlRSQUNFSURfU0hBREVSX0NPTVBJTEUiLCJpZCIsInRvRml4ZWQiLCJzb3VyY2UiLCJzaGFkZXJUeXBlIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJpbmZvTG9nIiwiZ2V0U2hhZGVySW5mb0xvZyIsImNvZGUiLCJfcHJvY2Vzc0Vycm9yIiwibGluZXMiLCJzcGxpdCIsImZyb20iLCJ0byIsImxlbmd0aCIsInN0YXJ0c1dpdGgiLCJtYXRjaCIsImxpbmUiLCJwYXJzZUludCIsIk1hdGgiLCJtYXgiLCJtaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBT0EsSUFBSUEsaUJBQWlCLEdBQUcsQ0FBQyxDQUFBO0FBRXpCLE1BQU1DLHFCQUFxQixHQUFHLENBQzFCLGFBQWEsRUFDYixlQUFlLEVBQ2YsV0FBVyxFQUNYLGVBQWUsRUFDZixpQkFBaUIsQ0FDcEIsQ0FBQTs7QUFPRCxNQUFNQyxXQUFXLENBQUM7RUFHZEMsV0FBVyxDQUFDQyxNQUFNLEVBQUU7SUFBQSxJQUZwQkMsQ0FBQUEsZUFBZSxHQUFHLENBQUMsQ0FBQTtJQUdmLElBQUksQ0FBQ0MsSUFBSSxFQUFFLENBQUE7SUFDWCxJQUFJ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
