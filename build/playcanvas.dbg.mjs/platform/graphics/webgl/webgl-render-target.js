import { Debug } from '../../../core/debug.js';
import { DebugGraphics } from '../debug-graphics.js';

/**
 * A private class representing a pair of framebuffers, when MSAA is used.
 *
 * @ignore
 */
class FramebufferPair {
  constructor(msaaFB, resolveFB) {
    /** Multi-sampled rendering framebuffer */
    this.msaaFB = void 0;
    /** Single-sampled resolve framebuffer */
    this.resolveFB = void 0;
    this.msaaFB = msaaFB;
    this.resolveFB = resolveFB;
  }
  destroy(gl) {
    if (this.msaaFB) {
      gl.deleteRenderbuffer(this.msaaFB);
      this.msaaFB = null;
    }
    if (this.resolveFB) {
      gl.deleteRenderbuffer(this.resolveFB);
      this.resolveFB = null;
    }
  }
}

/**
 * A WebGL implementation of the RenderTarget.
 *
 * @ignore
 */
class WebglRenderTarget {
  constructor() {
    this._glFrameBuffer = null;
    this._glDepthBuffer = null;
    this._glResolveFrameBuffer = null;
    /**
     * A list of framebuffers created When MSAA and MRT are used together, one for each color buffer.
     * This allows color buffers to be resolved separately.
     *
     * @type {FramebufferPair[]}
     */
    this.colorMrtFramebuffers = null;
    this._glMsaaColorBuffers = [];
    this._glMsaaDepthBuffer = null;
  }
  destroy(device) {
    var _this$colorMrtFramebu;
    const gl = device.gl;
    if (this._glFrameBuffer) {
      gl.deleteFramebuffer(this._glFrameBuffer);
      this._glFrameBuffer = null;
    }
    if (this._glDepthBuffer) {
      gl.deleteRenderbuffer(this._glDepthBuffer);
      this._glDepthBuffer = null;
    }
    if (this._glResolveFrameBuffer) {
      gl.deleteFramebuffer(this._glResolveFrameBuffer);
      this._glResolveFrameBuffer = null;
    }
    this._glMsaaColorBuffers.forEach(buffer => {
      gl.deleteRenderbuffer(buffer);
    });
    this._glMsaaColorBuffers.length = 0;
    (_this$colorMrtFramebu = this.colorMrtFramebuffers) == null ? void 0 : _this$colorMrtFramebu.forEach(framebuffer => {
      framebuffer.destroy(gl);
    });
    this.colorMrtFramebuffers = null;
    if (this._glMsaaDepthBuffer) {
      gl.deleteRenderbuffer(this._glMsaaDepthBuffer);
      this._glMsaaDepthBuffer = null;
    }
  }
  get initialized() {
    return this._glFrameBuffer !== null;
  }
  init(device, target) {
    var _target$_colorBuffers, _target$_colorBuffers2;
    const gl = device.gl;

    // ##### Create main FBO #####
    this._glFrameBuffer = gl.createFramebuffer();
    device.setFramebuffer(this._glFrameBuffer);

    // --- Init the provided color buffer (optional) ---
    const colorBufferCount = (_target$_colorBuffers = (_target$_colorBuffers2 = target._colorBuffers) == null ? void 0 : _target$_colorBuffers2.length) != null ? _target$_colorBuffers : 0;
    const attachmentBaseConstant = device.webgl2 ? gl.COLOR_ATTACHMENT0 : device.extDrawBuffers.COLOR_ATTACHMENT0_WEBGL;
    const buffers = [];
    for (let i = 0; i < colorBufferCount; ++i) {
      const colorBuffer = target.getColorBuffer(i);
      if (colorBuffer) {
        if (!colorBuffer.impl._glTexture) {
          // Clamp the render buffer size to the maximum supported by the device
          colorBuffer._width = Math.min(colorBuffer.width, device.maxRenderBufferSize);
          colorBuffer._height = Math.min(colorBuffer.height, device.maxRenderBufferSize);
          device.setTexture(colorBuffer, 0);
        }
        // Attach the color buffer
        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentBaseConstant + i, colorBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, colorBuffer.impl._glTexture, 0);
        buffers.push(attachmentBaseConstant + i);
      }
    }
    if (device.drawBuffers) {
      device.drawBuffers(buffers);
    }
    const depthBuffer = target._depthBuffer;
    if (depthBuffer) {
      // --- Init the provided depth/stencil buffer (optional, WebGL2 only) ---
      if (!depthBuffer.impl._glTexture) {
        // Clamp the render buffer size to the maximum supported by the device
        depthBuffer._width = Math.min(depthBuffer.width, device.maxRenderBufferSize);
        depthBuffer._height = Math.min(depthBuffer.height, device.maxRenderBufferSize);
        device.setTexture(depthBuffer, 0);
      }
      // Attach
      if (target._stencil) {
        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, depthBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, target._depthBuffer.impl._glTexture, 0);
      } else {
        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, depthBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, target._depthBuffer.impl._glTexture, 0);
      }
    } else if (target._depth) {
      // --- Init a new depth/stencil buffer (optional) ---
      // if device is a MSAA RT, and no buffer to resolve to, skip creating non-MSAA depth
      const willRenderMsaa = target._samples > 1 && device.webgl2;
      if (!willRenderMsaa) {
        if (!this._glDepthBuffer) {
          this._glDepthBuffer = gl.createRenderbuffer();
        }
        gl.bindRenderbuffer(gl.RENDERBUFFER, this._glDepthBuffer);
        if (target._stencil) {
          gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, target.width, target.height);
          gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, this._glDepthBuffer);
        } else {
          const depthFormat = device.webgl2 ? gl.DEPTH_COMPONENT32F : gl.DEPTH_COMPONENT16;
          gl.renderbufferStorage(gl.RENDERBUFFER, depthFormat, target.width, target.height);
          gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this._glDepthBuffer);
        }
        gl.bindRenderbuffer(gl.RENDERBUFFER, null);
      }
    }
    Debug.call(() => this._checkFbo(device, target));

    // ##### Create MSAA FBO (WebGL2 only) #####
    if (device.webgl2 && target._samples > 1) {
      var _target$_colorBuffers3, _target$_colorBuffers4;
      // Use previous FBO for resolves
      this._glResolveFrameBuffer = this._glFrameBuffer;

      // Actual FBO will be MSAA
      this._glFrameBuffer = gl.createFramebuffer();
      device.setFramebuffer(this._glFrameBuffer);

      // Create an optional MSAA color buffers

      const _colorBufferCount = (_target$_colorBuffers3 = (_target$_colorBuffers4 = target._colorBuffers) == null ? void 0 : _target$_colorBuffers4.length) != null ? _target$_colorBuffers3 : 0;
      for (let i = 0; i < _colorBufferCount; ++i) {
        const colorBuffer = target.getColorBuffer(i);
        if (colorBuffer) {
          const buffer = gl.createRenderbuffer();
          this._glMsaaColorBuffers.push(buffer);
          gl.bindRenderbuffer(gl.RENDERBUFFER, buffer);
          gl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, colorBuffer.impl._glInternalFormat, target.width, target.height);
          gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, gl.RENDERBUFFER, buffer);
        }
      }

      // Optionally add a MSAA depth/stencil buffer
      if (target._depth) {
        if (!this._glMsaaDepthBuffer) {
          this._glMsaaDepthBuffer = gl.createRenderbuffer();
        }
        gl.bindRenderbuffer(gl.RENDERBUFFER, this._glMsaaDepthBuffer);
        if (target._stencil) {
          gl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, gl.DEPTH24_STENCIL8, target.width, target.height);
          gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, this._glMsaaDepthBuffer);
        } else {
          gl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, gl.DEPTH_COMPONENT32F, target.width, target.height);
          gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this._glMsaaDepthBuffer);
        }
      }
      Debug.call(() => this._checkFbo(device, target, 'MSAA'));
      if (_colorBufferCount > 1) {
        // create framebuffers allowing us to individually resolve each color buffer
        this._createMsaaMrtFramebuffers(device, target, _colorBufferCount);

        // restore rendering back to the main framebuffer
        device.setFramebuffer(this._glFrameBuffer);
        device.drawBuffers(buffers);
      }
    }
  }
  _createMsaaMrtFramebuffers(device, target, colorBufferCount) {
    const gl = device.gl;
    this.colorMrtFramebuffers = [];
    for (let i = 0; i < colorBufferCount; ++i) {
      const colorBuffer = target.getColorBuffer(i);

      // src
      const srcFramebuffer = gl.createFramebuffer();
      device.setFramebuffer(srcFramebuffer);
      const buffer = this._glMsaaColorBuffers[i];
      gl.bindRenderbuffer(gl.RENDERBUFFER, buffer);
      gl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, colorBuffer.impl._glInternalFormat, target.width, target.height);
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, buffer);
      device.drawBuffers([gl.COLOR_ATTACHMENT0]);
      Debug.call(() => this._checkFbo(device, target, `MSAA-MRT-src${i}`));

      // dst
      const dstFramebuffer = gl.createFramebuffer();
      device.setFramebuffer(dstFramebuffer);
      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, colorBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, colorBuffer.impl._glTexture, 0);
      this.colorMrtFramebuffers[i] = new FramebufferPair(srcFramebuffer, dstFramebuffer);
      Debug.call(() => this._checkFbo(device, target, `MSAA-MRT-dst${i}`));
    }
  }

  /**
   * Checks the completeness status of the currently bound WebGLFramebuffer object.
   *
   * @private
   */
  _checkFbo(device, target, type = '') {
    const gl = device.gl;
    const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);
    let errorCode;
    switch (status) {
      case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:
        errorCode = 'FRAMEBUFFER_INCOMPLETE_ATTACHMENT';
        break;
      case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:
        errorCode = 'FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT';
        break;
      case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:
        errorCode = 'FRAMEBUFFER_INCOMPLETE_DIMENSIONS';
        break;
      case gl.FRAMEBUFFER_UNSUPPORTED:
        errorCode = 'FRAMEBUFFER_UNSUPPORTED';
        break;
    }
    Debug.assert(!errorCode, `Framebuffer creation failed with error code ${errorCode}, render target: ${target.name} ${type}`, target);
  }
  loseContext() {
    this._glFrameBuffer = null;
    this._glDepthBuffer = null;
    this._glResolveFrameBuffer = null;
    this._glMsaaColorBuffers.length = 0;
    this._glMsaaDepthBuffer = null;
    this.colorMrtFramebuffers = null;
  }
  internalResolve(device, src, dst, target, mask) {
    const gl = device.gl;
    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, src);
    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, dst);
    gl.blitFramebuffer(0, 0, target.width, target.height, 0, 0, target.width, target.height, mask, gl.NEAREST);
  }
  resolve(device, target, color, depth) {
    if (device.webgl2) {
      const gl = device.gl;

      // if MRT is used, we need to resolve each buffer individually
      if (this.colorMrtFramebuffers) {
        // color
        if (color) {
          for (let i = 0; i < this.colorMrtFramebuffers.length; i++) {
            const fbPair = this.colorMrtFramebuffers[i];
            DebugGraphics.pushGpuMarker(device, `RESOLVE-MRT${i}`);
            this.internalResolve(device, fbPair.msaaFB, fbPair.resolveFB, target, gl.COLOR_BUFFER_BIT);
            DebugGraphics.popGpuMarker(device);
          }
        }

        // depth
        if (depth) {
          DebugGraphics.pushGpuMarker(device, `RESOLVE-MRT-DEPTH`);
          this.internalResolve(device, this._glFrameBuffer, this._glResolveFrameBuffer, target, gl.DEPTH_BUFFER_BIT);
          DebugGraphics.popGpuMarker(device);
        }
      } else {
        DebugGraphics.pushGpuMarker(device, `RESOLVE`);
        this.internalResolve(device, this._glFrameBuffer, this._glResolveFrameBuffer, target, (color ? gl.COLOR_BUFFER_BIT : 0) | (depth ? gl.DEPTH_BUFFER_BIT : 0));
        DebugGraphics.popGpuMarker(device);
      }
      gl.bindFramebuffer(gl.FRAMEBUFFER, this._glFrameBuffer);
    }
  }
}

export { WebglRenderTarget };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ2wtcmVuZGVyLXRhcmdldC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3dlYmdsL3dlYmdsLXJlbmRlci10YXJnZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS9kZWJ1Zy5qc1wiO1xuaW1wb3J0IHsgRGVidWdHcmFwaGljcyB9IGZyb20gXCIuLi9kZWJ1Zy1ncmFwaGljcy5qc1wiO1xuXG4vKipcbiAqIEEgcHJpdmF0ZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwYWlyIG9mIGZyYW1lYnVmZmVycywgd2hlbiBNU0FBIGlzIHVzZWQuXG4gKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBGcmFtZWJ1ZmZlclBhaXIge1xuICAgIC8qKiBNdWx0aS1zYW1wbGVkIHJlbmRlcmluZyBmcmFtZWJ1ZmZlciAqL1xuICAgIG1zYWFGQjtcblxuICAgIC8qKiBTaW5nbGUtc2FtcGxlZCByZXNvbHZlIGZyYW1lYnVmZmVyICovXG4gICAgcmVzb2x2ZUZCO1xuXG4gICAgY29uc3RydWN0b3IobXNhYUZCLCByZXNvbHZlRkIpIHtcbiAgICAgICAgdGhpcy5tc2FhRkIgPSBtc2FhRkI7XG4gICAgICAgIHRoaXMucmVzb2x2ZUZCID0gcmVzb2x2ZUZCO1xuICAgIH1cblxuICAgIGRlc3Ryb3koZ2wpIHtcbiAgICAgICAgaWYgKHRoaXMubXNhYUZCKSB7XG4gICAgICAgICAgICBnbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5tc2FhRkIpO1xuICAgICAgICAgICAgdGhpcy5tc2FhRkIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZUZCKSB7XG4gICAgICAgICAgICBnbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5yZXNvbHZlRkIpO1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlRkIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgV2ViR0wgaW1wbGVtZW50YXRpb24gb2YgdGhlIFJlbmRlclRhcmdldC5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIFdlYmdsUmVuZGVyVGFyZ2V0IHtcbiAgICBfZ2xGcmFtZUJ1ZmZlciA9IG51bGw7XG5cbiAgICBfZ2xEZXB0aEJ1ZmZlciA9IG51bGw7XG5cbiAgICBfZ2xSZXNvbHZlRnJhbWVCdWZmZXIgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIGZyYW1lYnVmZmVycyBjcmVhdGVkIFdoZW4gTVNBQSBhbmQgTVJUIGFyZSB1c2VkIHRvZ2V0aGVyLCBvbmUgZm9yIGVhY2ggY29sb3IgYnVmZmVyLlxuICAgICAqIFRoaXMgYWxsb3dzIGNvbG9yIGJ1ZmZlcnMgdG8gYmUgcmVzb2x2ZWQgc2VwYXJhdGVseS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtGcmFtZWJ1ZmZlclBhaXJbXX1cbiAgICAgKi9cbiAgICBjb2xvck1ydEZyYW1lYnVmZmVycyA9IG51bGw7XG5cbiAgICBfZ2xNc2FhQ29sb3JCdWZmZXJzID0gW107XG5cbiAgICBfZ2xNc2FhRGVwdGhCdWZmZXIgPSBudWxsO1xuXG4gICAgZGVzdHJveShkZXZpY2UpIHtcbiAgICAgICAgY29uc3QgZ2wgPSBkZXZpY2UuZ2w7XG4gICAgICAgIGlmICh0aGlzLl9nbEZyYW1lQnVmZmVyKSB7XG4gICAgICAgICAgICBnbC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLl9nbEZyYW1lQnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuX2dsRnJhbWVCdWZmZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2dsRGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVJlbmRlcmJ1ZmZlcih0aGlzLl9nbERlcHRoQnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuX2dsRGVwdGhCdWZmZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2dsUmVzb2x2ZUZyYW1lQnVmZmVyKSB7XG4gICAgICAgICAgICBnbC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLl9nbFJlc29sdmVGcmFtZUJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLl9nbFJlc29sdmVGcmFtZUJ1ZmZlciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9nbE1zYWFDb2xvckJ1ZmZlcnMuZm9yRWFjaCgoYnVmZmVyKSA9PiB7XG4gICAgICAgICAgICBnbC5kZWxldGVSZW5kZXJidWZmZXIoYnVmZmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2dsTXNhYUNvbG9yQnVmZmVycy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHRoaXMuY29sb3JNcnRGcmFtZWJ1ZmZlcnM/LmZvckVhY2goKGZyYW1lYnVmZmVyKSA9PiB7XG4gICAgICAgICAgICBmcmFtZWJ1ZmZlci5kZXN0cm95KGdsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29sb3JNcnRGcmFtZWJ1ZmZlcnMgPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLl9nbE1zYWFEZXB0aEJ1ZmZlcikge1xuICAgICAgICAgICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMuX2dsTXNhYURlcHRoQnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuX2dsTXNhYURlcHRoQnVmZmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBpbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsRnJhbWVCdWZmZXIgIT09IG51bGw7XG4gICAgfVxuXG4gICAgaW5pdChkZXZpY2UsIHRhcmdldCkge1xuICAgICAgICBjb25zdCBnbCA9IGRldmljZS5nbDtcblxuICAgICAgICAvLyAjIyMjIyBDcmVhdGUgbWFpbiBGQk8gIyMjIyNcbiAgICAgICAgdGhpcy5fZ2xGcmFtZUJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgICAgIGRldmljZS5zZXRGcmFtZWJ1ZmZlcih0aGlzLl9nbEZyYW1lQnVmZmVyKTtcblxuICAgICAgICAvLyAtLS0gSW5pdCB0aGUgcHJvdmlkZWQgY29sb3IgYnVmZmVyIChvcHRpb25hbCkgLS0tXG4gICAgICAgIGNvbnN0IGNvbG9yQnVmZmVyQ291bnQgPSB0YXJnZXQuX2NvbG9yQnVmZmVycz8ubGVuZ3RoID8/IDA7XG4gICAgICAgIGNvbnN0IGF0dGFjaG1lbnRCYXNlQ29uc3RhbnQgPSBkZXZpY2Uud2ViZ2wyID8gZ2wuQ09MT1JfQVRUQUNITUVOVDAgOiBkZXZpY2UuZXh0RHJhd0J1ZmZlcnMuQ09MT1JfQVRUQUNITUVOVDBfV0VCR0w7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvckJ1ZmZlckNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yQnVmZmVyID0gdGFyZ2V0LmdldENvbG9yQnVmZmVyKGkpO1xuICAgICAgICAgICAgaWYgKGNvbG9yQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xvckJ1ZmZlci5pbXBsLl9nbFRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xhbXAgdGhlIHJlbmRlciBidWZmZXIgc2l6ZSB0byB0aGUgbWF4aW11bSBzdXBwb3J0ZWQgYnkgdGhlIGRldmljZVxuICAgICAgICAgICAgICAgICAgICBjb2xvckJ1ZmZlci5fd2lkdGggPSBNYXRoLm1pbihjb2xvckJ1ZmZlci53aWR0aCwgZGV2aWNlLm1heFJlbmRlckJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgICAgICAgICBjb2xvckJ1ZmZlci5faGVpZ2h0ID0gTWF0aC5taW4oY29sb3JCdWZmZXIuaGVpZ2h0LCBkZXZpY2UubWF4UmVuZGVyQnVmZmVyU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGRldmljZS5zZXRUZXh0dXJlKGNvbG9yQnVmZmVyLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoIHRoZSBjb2xvciBidWZmZXJcbiAgICAgICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgICAgICAgICAgICAgICAgZ2wuRlJBTUVCVUZGRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRCYXNlQ29uc3RhbnQgKyBpLFxuICAgICAgICAgICAgICAgICAgICBjb2xvckJ1ZmZlci5fY3ViZW1hcCA/IGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCArIHRhcmdldC5fZmFjZSA6IGdsLlRFWFRVUkVfMkQsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yQnVmZmVyLmltcGwuX2dsVGV4dHVyZSxcbiAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBidWZmZXJzLnB1c2goYXR0YWNobWVudEJhc2VDb25zdGFudCArIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRldmljZS5kcmF3QnVmZmVycykge1xuICAgICAgICAgICAgZGV2aWNlLmRyYXdCdWZmZXJzKGJ1ZmZlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVwdGhCdWZmZXIgPSB0YXJnZXQuX2RlcHRoQnVmZmVyO1xuICAgICAgICBpZiAoZGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgIC8vIC0tLSBJbml0IHRoZSBwcm92aWRlZCBkZXB0aC9zdGVuY2lsIGJ1ZmZlciAob3B0aW9uYWwsIFdlYkdMMiBvbmx5KSAtLS1cbiAgICAgICAgICAgIGlmICghZGVwdGhCdWZmZXIuaW1wbC5fZ2xUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xhbXAgdGhlIHJlbmRlciBidWZmZXIgc2l6ZSB0byB0aGUgbWF4aW11bSBzdXBwb3J0ZWQgYnkgdGhlIGRldmljZVxuICAgICAgICAgICAgICAgIGRlcHRoQnVmZmVyLl93aWR0aCA9IE1hdGgubWluKGRlcHRoQnVmZmVyLndpZHRoLCBkZXZpY2UubWF4UmVuZGVyQnVmZmVyU2l6ZSk7XG4gICAgICAgICAgICAgICAgZGVwdGhCdWZmZXIuX2hlaWdodCA9IE1hdGgubWluKGRlcHRoQnVmZmVyLmhlaWdodCwgZGV2aWNlLm1heFJlbmRlckJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgICAgIGRldmljZS5zZXRUZXh0dXJlKGRlcHRoQnVmZmVyLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEF0dGFjaFxuICAgICAgICAgICAgaWYgKHRhcmdldC5fc3RlbmNpbCkge1xuICAgICAgICAgICAgICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGhCdWZmZXIuX2N1YmVtYXAgPyBnbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyB0YXJnZXQuX2ZhY2UgOiBnbC5URVhUVVJFXzJELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5fZGVwdGhCdWZmZXIuaW1wbC5fZ2xUZXh0dXJlLCAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkRFUFRIX0FUVEFDSE1FTlQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGhCdWZmZXIuX2N1YmVtYXAgPyBnbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyB0YXJnZXQuX2ZhY2UgOiBnbC5URVhUVVJFXzJELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5fZGVwdGhCdWZmZXIuaW1wbC5fZ2xUZXh0dXJlLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQuX2RlcHRoKSB7XG4gICAgICAgICAgICAvLyAtLS0gSW5pdCBhIG5ldyBkZXB0aC9zdGVuY2lsIGJ1ZmZlciAob3B0aW9uYWwpIC0tLVxuICAgICAgICAgICAgLy8gaWYgZGV2aWNlIGlzIGEgTVNBQSBSVCwgYW5kIG5vIGJ1ZmZlciB0byByZXNvbHZlIHRvLCBza2lwIGNyZWF0aW5nIG5vbi1NU0FBIGRlcHRoXG4gICAgICAgICAgICBjb25zdCB3aWxsUmVuZGVyTXNhYSA9IHRhcmdldC5fc2FtcGxlcyA+IDEgJiYgZGV2aWNlLndlYmdsMjtcbiAgICAgICAgICAgIGlmICghd2lsbFJlbmRlck1zYWEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2dsRGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2xEZXB0aEJ1ZmZlciA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgdGhpcy5fZ2xEZXB0aEJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5fc3RlbmNpbCkge1xuICAgICAgICAgICAgICAgICAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKGdsLlJFTkRFUkJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTCwgdGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCwgZ2wuUkVOREVSQlVGRkVSLCB0aGlzLl9nbERlcHRoQnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXB0aEZvcm1hdCA9IGRldmljZS53ZWJnbDIgPyBnbC5ERVBUSF9DT01QT05FTlQzMkYgOiBnbC5ERVBUSF9DT01QT05FTlQxNjtcbiAgICAgICAgICAgICAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShnbC5SRU5ERVJCVUZGRVIsIGRlcHRoRm9ybWF0LCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfQVRUQUNITUVOVCwgZ2wuUkVOREVSQlVGRkVSLCB0aGlzLl9nbERlcHRoQnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgRGVidWcuY2FsbCgoKSA9PiB0aGlzLl9jaGVja0ZibyhkZXZpY2UsIHRhcmdldCkpO1xuXG4gICAgICAgIC8vICMjIyMjIENyZWF0ZSBNU0FBIEZCTyAoV2ViR0wyIG9ubHkpICMjIyMjXG4gICAgICAgIGlmIChkZXZpY2Uud2ViZ2wyICYmIHRhcmdldC5fc2FtcGxlcyA+IDEpIHtcblxuICAgICAgICAgICAgLy8gVXNlIHByZXZpb3VzIEZCTyBmb3IgcmVzb2x2ZXNcbiAgICAgICAgICAgIHRoaXMuX2dsUmVzb2x2ZUZyYW1lQnVmZmVyID0gdGhpcy5fZ2xGcmFtZUJ1ZmZlcjtcblxuICAgICAgICAgICAgLy8gQWN0dWFsIEZCTyB3aWxsIGJlIE1TQUFcbiAgICAgICAgICAgIHRoaXMuX2dsRnJhbWVCdWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgICAgICAgICAgZGV2aWNlLnNldEZyYW1lYnVmZmVyKHRoaXMuX2dsRnJhbWVCdWZmZXIpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYW4gb3B0aW9uYWwgTVNBQSBjb2xvciBidWZmZXJzXG5cbiAgICAgICAgICAgIGNvbnN0IGNvbG9yQnVmZmVyQ291bnQgPSB0YXJnZXQuX2NvbG9yQnVmZmVycz8ubGVuZ3RoID8/IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9yQnVmZmVyQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yQnVmZmVyID0gdGFyZ2V0LmdldENvbG9yQnVmZmVyKGkpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xvckJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBnbC5jcmVhdGVSZW5kZXJidWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2xNc2FhQ29sb3JCdWZmZXJzLnB1c2goYnVmZmVyKTtcblxuICAgICAgICAgICAgICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKGdsLlJFTkRFUkJVRkZFUiwgdGFyZ2V0Ll9zYW1wbGVzLCBjb2xvckJ1ZmZlci5pbXBsLl9nbEludGVybmFsRm9ybWF0LCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAgKyBpLCBnbC5SRU5ERVJCVUZGRVIsIGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5IGFkZCBhIE1TQUEgZGVwdGgvc3RlbmNpbCBidWZmZXJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuX2RlcHRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9nbE1zYWFEZXB0aEJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9nbE1zYWFEZXB0aEJ1ZmZlciA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgdGhpcy5fZ2xNc2FhRGVwdGhCdWZmZXIpO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuX3N0ZW5jaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKGdsLlJFTkRFUkJVRkZFUiwgdGFyZ2V0Ll9zYW1wbGVzLCBnbC5ERVBUSDI0X1NURU5DSUw4LCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULCBnbC5SRU5ERVJCVUZGRVIsIHRoaXMuX2dsTXNhYURlcHRoQnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlTXVsdGlzYW1wbGUoZ2wuUkVOREVSQlVGRkVSLCB0YXJnZXQuX3NhbXBsZXMsIGdsLkRFUFRIX0NPTVBPTkVOVDMyRiwgdGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkRFUFRIX0FUVEFDSE1FTlQsIGdsLlJFTkRFUkJVRkZFUiwgdGhpcy5fZ2xNc2FhRGVwdGhCdWZmZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgRGVidWcuY2FsbCgoKSA9PiB0aGlzLl9jaGVja0ZibyhkZXZpY2UsIHRhcmdldCwgJ01TQUEnKSk7XG5cbiAgICAgICAgICAgIGlmIChjb2xvckJ1ZmZlckNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBmcmFtZWJ1ZmZlcnMgYWxsb3dpbmcgdXMgdG8gaW5kaXZpZHVhbGx5IHJlc29sdmUgZWFjaCBjb2xvciBidWZmZXJcbiAgICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVNc2FhTXJ0RnJhbWVidWZmZXJzKGRldmljZSwgdGFyZ2V0LCBjb2xvckJ1ZmZlckNvdW50KTtcblxuICAgICAgICAgICAgICAgIC8vIHJlc3RvcmUgcmVuZGVyaW5nIGJhY2sgdG8gdGhlIG1haW4gZnJhbWVidWZmZXJcbiAgICAgICAgICAgICAgICBkZXZpY2Uuc2V0RnJhbWVidWZmZXIodGhpcy5fZ2xGcmFtZUJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgZGV2aWNlLmRyYXdCdWZmZXJzKGJ1ZmZlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NyZWF0ZU1zYWFNcnRGcmFtZWJ1ZmZlcnMoZGV2aWNlLCB0YXJnZXQsIGNvbG9yQnVmZmVyQ291bnQpIHtcblxuICAgICAgICBjb25zdCBnbCA9IGRldmljZS5nbDtcbiAgICAgICAgdGhpcy5jb2xvck1ydEZyYW1lYnVmZmVycyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JCdWZmZXJDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvckJ1ZmZlciA9IHRhcmdldC5nZXRDb2xvckJ1ZmZlcihpKTtcblxuICAgICAgICAgICAgLy8gc3JjXG4gICAgICAgICAgICBjb25zdCBzcmNGcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgICAgICAgICBkZXZpY2Uuc2V0RnJhbWVidWZmZXIoc3JjRnJhbWVidWZmZXIpO1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5fZ2xNc2FhQ29sb3JCdWZmZXJzW2ldO1xuXG4gICAgICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgYnVmZmVyKTtcbiAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShnbC5SRU5ERVJCVUZGRVIsIHRhcmdldC5fc2FtcGxlcywgY29sb3JCdWZmZXIuaW1wbC5fZ2xJbnRlcm5hbEZvcm1hdCwgdGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0KTtcbiAgICAgICAgICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuUkVOREVSQlVGRkVSLCBidWZmZXIpO1xuXG4gICAgICAgICAgICBkZXZpY2UuZHJhd0J1ZmZlcnMoW2dsLkNPTE9SX0FUVEFDSE1FTlQwXSk7XG5cbiAgICAgICAgICAgIERlYnVnLmNhbGwoKCkgPT4gdGhpcy5fY2hlY2tGYm8oZGV2aWNlLCB0YXJnZXQsIGBNU0FBLU1SVC1zcmMke2l9YCkpO1xuXG4gICAgICAgICAgICAvLyBkc3RcbiAgICAgICAgICAgIGNvbnN0IGRzdEZyYW1lYnVmZmVyID0gZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICAgICAgICAgIGRldmljZS5zZXRGcmFtZWJ1ZmZlcihkc3RGcmFtZWJ1ZmZlcik7XG4gICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvckJ1ZmZlci5fY3ViZW1hcCA/IGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCArIHRhcmdldC5fZmFjZSA6IGdsLlRFWFRVUkVfMkQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvckJ1ZmZlci5pbXBsLl9nbFRleHR1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLmNvbG9yTXJ0RnJhbWVidWZmZXJzW2ldID0gbmV3IEZyYW1lYnVmZmVyUGFpcihzcmNGcmFtZWJ1ZmZlciwgZHN0RnJhbWVidWZmZXIpO1xuXG4gICAgICAgICAgICBEZWJ1Zy5jYWxsKCgpID0+IHRoaXMuX2NoZWNrRmJvKGRldmljZSwgdGFyZ2V0LCBgTVNBQS1NUlQtZHN0JHtpfWApKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgY29tcGxldGVuZXNzIHN0YXR1cyBvZiB0aGUgY3VycmVudGx5IGJvdW5kIFdlYkdMRnJhbWVidWZmZXIgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY2hlY2tGYm8oZGV2aWNlLCB0YXJnZXQsIHR5cGUgPSAnJykge1xuICAgICAgICBjb25zdCBnbCA9IGRldmljZS5nbDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhnbC5GUkFNRUJVRkZFUik7XG4gICAgICAgIGxldCBlcnJvckNvZGU7XG4gICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIGdsLkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfQVRUQUNITUVOVDpcbiAgICAgICAgICAgICAgICBlcnJvckNvZGUgPSAnRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZ2wuRlJBTUVCVUZGRVJfSU5DT01QTEVURV9NSVNTSU5HX0FUVEFDSE1FTlQ6XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gJ0ZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZ2wuRlJBTUVCVUZGRVJfSU5DT01QTEVURV9ESU1FTlNJT05TOlxuICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9ICdGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0RJTUVOU0lPTlMnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBnbC5GUkFNRUJVRkZFUl9VTlNVUFBPUlRFRDpcbiAgICAgICAgICAgICAgICBlcnJvckNvZGUgPSAnRlJBTUVCVUZGRVJfVU5TVVBQT1JURUQnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgRGVidWcuYXNzZXJ0KCFlcnJvckNvZGUsIGBGcmFtZWJ1ZmZlciBjcmVhdGlvbiBmYWlsZWQgd2l0aCBlcnJvciBjb2RlICR7ZXJyb3JDb2RlfSwgcmVuZGVyIHRhcmdldDogJHt0YXJnZXQubmFtZX0gJHt0eXBlfWAsIHRhcmdldCk7XG4gICAgfVxuXG4gICAgbG9zZUNvbnRleHQoKSB7XG4gICAgICAgIHRoaXMuX2dsRnJhbWVCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9nbERlcHRoQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZ2xSZXNvbHZlRnJhbWVCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9nbE1zYWFDb2xvckJ1ZmZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fZ2xNc2FhRGVwdGhCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbG9yTXJ0RnJhbWVidWZmZXJzID0gbnVsbDtcbiAgICB9XG5cbiAgICBpbnRlcm5hbFJlc29sdmUoZGV2aWNlLCBzcmMsIGRzdCwgdGFyZ2V0LCBtYXNrKSB7XG5cbiAgICAgICAgY29uc3QgZ2wgPSBkZXZpY2UuZ2w7XG4gICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5SRUFEX0ZSQU1FQlVGRkVSLCBzcmMpO1xuICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRFJBV19GUkFNRUJVRkZFUiwgZHN0KTtcbiAgICAgICAgZ2wuYmxpdEZyYW1lYnVmZmVyKDAsIDAsIHRhcmdldC53aWR0aCwgdGFyZ2V0LmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIDAsIHRhcmdldC53aWR0aCwgdGFyZ2V0LmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5ORUFSRVNUKTtcbiAgICB9XG5cbiAgICByZXNvbHZlKGRldmljZSwgdGFyZ2V0LCBjb2xvciwgZGVwdGgpIHtcbiAgICAgICAgaWYgKGRldmljZS53ZWJnbDIpIHtcblxuICAgICAgICAgICAgY29uc3QgZ2wgPSBkZXZpY2UuZ2w7XG5cbiAgICAgICAgICAgIC8vIGlmIE1SVCBpcyB1c2VkLCB3ZSBuZWVkIHRvIHJlc29sdmUgZWFjaCBidWZmZXIgaW5kaXZpZHVhbGx5XG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvck1ydEZyYW1lYnVmZmVycykge1xuXG4gICAgICAgICAgICAgICAgLy8gY29sb3JcbiAgICAgICAgICAgICAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbG9yTXJ0RnJhbWVidWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYlBhaXIgPSB0aGlzLmNvbG9yTXJ0RnJhbWVidWZmZXJzW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIoZGV2aWNlLCBgUkVTT0xWRS1NUlQke2l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVybmFsUmVzb2x2ZShkZXZpY2UsIGZiUGFpci5tc2FhRkIsIGZiUGFpci5yZXNvbHZlRkIsIHRhcmdldCwgZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBEZWJ1Z0dyYXBoaWNzLnBvcEdwdU1hcmtlcihkZXZpY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZGVwdGhcbiAgICAgICAgICAgICAgICBpZiAoZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgRGVidWdHcmFwaGljcy5wdXNoR3B1TWFya2VyKGRldmljZSwgYFJFU09MVkUtTVJULURFUFRIYCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxSZXNvbHZlKGRldmljZSwgdGhpcy5fZ2xGcmFtZUJ1ZmZlciwgdGhpcy5fZ2xSZXNvbHZlRnJhbWVCdWZmZXIsIHRhcmdldCwgZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG4gICAgICAgICAgICAgICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKGRldmljZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsIGBSRVNPTFZFYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbFJlc29sdmUoZGV2aWNlLCB0aGlzLl9nbEZyYW1lQnVmZmVyLCB0aGlzLl9nbFJlc29sdmVGcmFtZUJ1ZmZlciwgdGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjb2xvciA/IGdsLkNPTE9SX0JVRkZFUl9CSVQgOiAwKSB8IChkZXB0aCA/IGdsLkRFUFRIX0JVRkZFUl9CSVQgOiAwKSk7XG4gICAgICAgICAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIoZGV2aWNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLl9nbEZyYW1lQnVmZmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHsgV2ViZ2xSZW5kZXJUYXJnZXQgfTtcbiJdLCJuYW1lcyI6WyJGcmFtZWJ1ZmZlclBhaXIiLCJjb25zdHJ1Y3RvciIsIm1zYWFGQiIsInJlc29sdmVGQiIsImRlc3Ryb3kiLCJnbCIsImRlbGV0ZVJlbmRlcmJ1ZmZlciIsIldlYmdsUmVuZGVyVGFyZ2V0IiwiX2dsRnJhbWVCdWZmZXIiLCJfZ2xEZXB0aEJ1ZmZlciIsIl9nbFJlc29sdmVGcmFtZUJ1ZmZlciIsImNvbG9yTXJ0RnJhbWVidWZmZXJzIiwiX2dsTXNhYUNvbG9yQnVmZmVycyIsIl9nbE1zYWFEZXB0aEJ1ZmZlciIsImRldmljZSIsIl90aGlzJGNvbG9yTXJ0RnJhbWVidSIsImRlbGV0ZUZyYW1lYnVmZmVyIiwiZm9yRWFjaCIsImJ1ZmZlciIsImxlbmd0aCIsImZyYW1lYnVmZmVyIiwiaW5pdGlhbGl6ZWQiLCJpbml0IiwidGFyZ2V0IiwiX3RhcmdldCRfY29sb3JCdWZmZXJzIiwiX3RhcmdldCRfY29sb3JCdWZmZXJzMiIsImNyZWF0ZUZyYW1lYnVmZmVyIiwic2V0RnJhbWVidWZmZXIiLCJjb2xvckJ1ZmZlckNvdW50IiwiX2NvbG9yQnVmZmVycyIsImF0dGFjaG1lbnRCYXNlQ29uc3RhbnQiLCJ3ZWJnbDIiLCJDT0xPUl9BVFRBQ0hNRU5UMCIsImV4dERyYXdCdWZmZXJzIiwiQ09MT1JfQVRUQUNITUVOVDBfV0VCR0wiLCJidWZmZXJzIiwiaSIsImNvbG9yQnVmZmVyIiwiZ2V0Q29sb3JCdWZmZXIiLCJpbXBsIiwiX2dsVGV4dHVyZSIsIl93aWR0aCIsIk1hdGgiLCJtaW4iLCJ3aWR0aCIsIm1heFJlbmRlckJ1ZmZlclNpemUiLCJfaGVpZ2h0IiwiaGVpZ2h0Iiwic2V0VGV4dHVyZSIsImZyYW1lYnVmZmVyVGV4dHVyZTJEIiwiRlJBTUVCVUZGRVIiLCJfY3ViZW1hcCIsIlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCIsIl9mYWNlIiwiVEVYVFVSRV8yRCIsInB1c2giLCJkcmF3QnVmZmVycyIsImRlcHRoQnVmZmVyIiwiX2RlcHRoQnVmZmVyIiwiX3N0ZW5jaWwiLCJERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQiLCJERVBUSF9BVFRBQ0hNRU5UIiwiX2RlcHRoIiwid2lsbFJlbmRlck1zYWEiLCJfc2FtcGxlcyIsImNyZWF0ZVJlbmRlcmJ1ZmZlciIsImJpbmRSZW5kZXJidWZmZXIiLCJSRU5ERVJCVUZGRVIiLCJyZW5kZXJidWZmZXJTdG9yYWdlIiwiREVQVEhfU1RFTkNJTCIsImZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyIiwiZGVwdGhGb3JtYXQiLCJERVBUSF9DT01QT05FTlQzMkYiLCJERVBUSF9DT01QT05FTlQxNiIsIkRlYnVnIiwiY2FsbCIsIl9jaGVja0ZibyIsIl90YXJnZXQkX2NvbG9yQnVmZmVyczMiLCJfdGFyZ2V0JF9jb2xvckJ1ZmZlcnM0IiwicmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlIiwiX2dsSW50ZXJuYWxGb3JtYXQiLCJERVBUSDI0X1NURU5DSUw4IiwiX2NyZWF0ZU1zYWFNcnRGcmFtZWJ1ZmZlcnMiLCJzcmNGcmFtZWJ1ZmZlciIsImRzdEZyYW1lYnVmZmVyIiwidHlwZSIsInN0YXR1cyIsImNoZWNrRnJhbWVidWZmZXJTdGF0dXMiLCJlcnJvckNvZGUiLCJGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0FUVEFDSE1FTlQiLCJGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX01JU1NJTkdfQVRUQUNITUVOVCIsIkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUyIsIkZSQU1FQlVGRkVSX1VOU1VQUE9SVEVEIiwiYXNzZXJ0IiwibmFtZSIsImxvc2VDb250ZXh0IiwiaW50ZXJuYWxSZXNvbHZlIiwic3JjIiwiZHN0IiwibWFzayIsImJpbmRGcmFtZWJ1ZmZlciIsIlJFQURfRlJBTUVCVUZGRVIiLCJEUkFXX0ZSQU1FQlVGRkVSIiwiYmxpdEZyYW1lYnVmZmVyIiwiTkVBUkVTVCIsInJlc29sdmUiLCJjb2xvciIsImRlcHRoIiwiZmJQYWlyIiwiRGVidWdHcmFwaGljcyIsInB1c2hHcHVNYXJrZXIiLCJDT0xPUl9CVUZGRVJfQklUIiwicG9wR3B1TWFya2VyIiwiREVQVEhfQlVGRkVSX0JJVCJdLCJtYXBwaW5ncyI6Ijs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLGVBQWUsQ0FBQztBQU9sQkMsRUFBQUEsV0FBV0EsQ0FBQ0MsTUFBTSxFQUFFQyxTQUFTLEVBQUU7QUFOL0I7QUFBQSxJQUFBLElBQUEsQ0FDQUQsTUFBTSxHQUFBLEtBQUEs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
