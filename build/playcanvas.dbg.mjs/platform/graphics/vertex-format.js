/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../core/debug.js';
import { hashCode } from '../../core/hash.js';
import { math } from '../../core/math/math.js';
import { typedArrayTypesByteSize, DEVICETYPE_WEBGPU, vertexTypesNames, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1, SEMANTIC_COLOR, SEMANTIC_TANGENT, SEMANTIC_ATTR12, TYPE_FLOAT32, SEMANTIC_ATTR13, SEMANTIC_ATTR14, SEMANTIC_ATTR15 } from './constants.js';

class VertexFormat {
  constructor(graphicsDevice, description, vertexCount) {
    this._elements = [];
    this.hasUv0 = false;
    this.hasUv1 = false;
    this.hasColor = false;
    this.hasTangents = false;
    this.verticesByteSize = 0;
    this.vertexCount = vertexCount;
    this.interleaved = vertexCount === undefined;

    this.instancing = false;

    this.size = description.reduce((total, desc) => {
      return total + Math.ceil(desc.components * typedArrayTypesByteSize[desc.type] / 4) * 4;
    }, 0);
    let offset = 0,
      elementSize;
    for (let i = 0, len = description.length; i < len; i++) {
      const elementDesc = description[i];
      elementSize = elementDesc.components * typedArrayTypesByteSize[elementDesc.type];

      Debug.assert(graphicsDevice.deviceType !== DEVICETYPE_WEBGPU || [2, 4, 8, 12, 16].includes(elementSize), `WebGPU does not support the format of vertex element ${elementDesc.semantic} : ${vertexTypesNames[elementDesc.type]} x ${elementDesc.components}`);

      if (vertexCount) {
        offset = math.roundUp(offset, elementSize);

        Debug.assert(elementSize % 4 === 0, `Non-interleaved vertex format with element size not multiple of 4 can have performance impact on some platforms. Element size: ${elementSize}`);
      }
      const element = {
        name: elementDesc.semantic,
        offset: vertexCount ? offset : elementDesc.hasOwnProperty('offset') ? elementDesc.offset : offset,
        stride: vertexCount ? elementSize : elementDesc.hasOwnProperty('stride') ? elementDesc.stride : this.size,
        dataType: elementDesc.type,
        numComponents: elementDesc.components,
        normalize: elementDesc.normalize === undefined ? false : elementDesc.normalize,
        size: elementSize
      };
      this._elements.push(element);
      if (vertexCount) {
        offset += elementSize * vertexCount;
      } else {
        offset += Math.ceil(elementSize / 4) * 4;
      }
      if (elementDesc.semantic === SEMANTIC_TEXCOORD0) {
        this.hasUv0 = true;
      } else if (elementDesc.semantic === SEMANTIC_TEXCOORD1) {
        this.hasUv1 = true;
      } else if (elementDesc.semantic === SEMANTIC_COLOR) {
        this.hasColor = true;
      } else if (elementDesc.semantic === SEMANTIC_TANGENT) {
        this.hasTangents = true;
      }
    }
    if (vertexCount) {
      this.verticesByteSize = offset;
    }
    this._evaluateHash();
  }
  get elements() {
    return this._elements;
  }

  static getDefaultInstancingFormat(graphicsDevice) {
    if (!VertexFormat._defaultInstancingFormat) {
      VertexFormat._defaultInstancingFormat = new VertexFormat(graphicsDevice, [{
        semantic: SEMANTIC_ATTR12,
        components: 4,
        type: TYPE_FLOAT32
      }, {
        semantic: SEMANTIC_ATTR13,
        components: 4,
        type: TYPE_FLOAT32
      }, {
        semantic: SEMANTIC_ATTR14,
        components: 4,
        type: TYPE_FLOAT32
      }, {
        semantic: SEMANTIC_ATTR15,
        components: 4,
        type: TYPE_FLOAT32
      }]);
    }
    return VertexFormat._defaultInstancingFormat;
  }

  _evaluateHash() {
    let stringElementBatch;
    const stringElementsBatch = [];
    let stringElementRender;
    const stringElementsRender = [];
    const len = this._elements.length;
    for (let i = 0; i < len; i++) {
      const element = this._elements[i];

      stringElementBatch = element.name;
      stringElementBatch += element.dataType;
      stringElementBatch += element.numComponents;
      stringElementBatch += element.normalize;
      stringElementsBatch.push(stringElementBatch);

      stringElementRender = stringElementBatch;
      stringElementRender += element.offset;
      stringElementRender += element.stride;
      stringElementRender += element.size;
      stringElementsRender.push(stringElementRender);
    }

    stringElementsBatch.sort();
    this.batchingHash = hashCode(stringElementsBatch.join());

    this.renderingingHashString = stringElementsRender.join('_');
    this.renderingingHash = hashCode(this.renderingingHashString);
  }
}
VertexFormat._defaultInstancingFormat = null;

export { VertexFormat };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVydGV4LWZvcm1hdC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3ZlcnRleC1mb3JtYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IGhhc2hDb2RlIH0gZnJvbSAnLi4vLi4vY29yZS9oYXNoLmpzJztcblxuaW1wb3J0IHsgbWF0aCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9tYXRoLmpzJztcblxuaW1wb3J0IHtcbiAgICBTRU1BTlRJQ19URVhDT09SRDAsIFNFTUFOVElDX1RFWENPT1JEMSwgU0VNQU5USUNfQVRUUjEyLCBTRU1BTlRJQ19BVFRSMTMsIFNFTUFOVElDX0FUVFIxNCwgU0VNQU5USUNfQVRUUjE1LFxuICAgIFNFTUFOVElDX0NPTE9SLCBTRU1BTlRJQ19UQU5HRU5ULCBUWVBFX0ZMT0FUMzIsIHR5cGVkQXJyYXlUeXBlc0J5dGVTaXplLCB2ZXJ0ZXhUeXBlc05hbWVzLCBERVZJQ0VUWVBFX1dFQkdQVVxufSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbi8qKlxuICogQSB2ZXJ0ZXggZm9ybWF0IGlzIGEgZGVzY3JpcHRvciB0aGF0IGRlZmluZXMgdGhlIGxheW91dCBvZiB2ZXJ0ZXggZGF0YSBpbnNpZGUgYVxuICoge0BsaW5rIFZlcnRleEJ1ZmZlcn0uXG4gKlxuICogQHByb3BlcnR5IHtvYmplY3RbXX0gZWxlbWVudHMgVGhlIHZlcnRleCBhdHRyaWJ1dGUgZWxlbWVudHMuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZWxlbWVudHNbXS5uYW1lIFRoZSBtZWFuaW5nIG9mIHRoZSB2ZXJ0ZXggZWxlbWVudC4gVGhpcyBpcyB1c2VkIHRvIGxpbmsgdGhlXG4gKiB2ZXJ0ZXggZGF0YSB0byBhIHNoYWRlciBpbnB1dC4gQ2FuIGJlOlxuICpcbiAqIC0ge0BsaW5rIFNFTUFOVElDX1BPU0lUSU9OfVxuICogLSB7QGxpbmsgU0VNQU5USUNfTk9STUFMfVxuICogLSB7QGxpbmsgU0VNQU5USUNfVEFOR0VOVH1cbiAqIC0ge0BsaW5rIFNFTUFOVElDX0JMRU5EV0VJR0hUfVxuICogLSB7QGxpbmsgU0VNQU5USUNfQkxFTkRJTkRJQ0VTfVxuICogLSB7QGxpbmsgU0VNQU5USUNfQ09MT1J9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDB9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDF9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDJ9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDN9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDR9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDV9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDZ9XG4gKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDd9XG4gKlxuICogSWYgdmVydGV4IGRhdGEgaGFzIGEgbWVhbmluZyBvdGhlciB0aGF0IG9uZSBvZiB0aG9zZSBsaXN0ZWQgYWJvdmUsIHVzZSB0aGUgdXNlci1kZWZpbmVkXG4gKiBzZW1hbnRpY3M6IHtAbGluayBTRU1BTlRJQ19BVFRSMH0gdG8ge0BsaW5rIFNFTUFOVElDX0FUVFIxNX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gZWxlbWVudHNbXS5udW1Db21wb25lbnRzIFRoZSBudW1iZXIgb2YgY29tcG9uZW50cyBvZiB0aGUgdmVydGV4IGF0dHJpYnV0ZS5cbiAqIENhbiBiZSAxLCAyLCAzIG9yIDQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZWxlbWVudHNbXS5kYXRhVHlwZSBUaGUgZGF0YSB0eXBlIG9mIHRoZSBhdHRyaWJ1dGUuIENhbiBiZTpcbiAqXG4gKiAtIHtAbGluayBUWVBFX0lOVDh9XG4gKiAtIHtAbGluayBUWVBFX1VJTlQ4fVxuICogLSB7QGxpbmsgVFlQRV9JTlQxNn1cbiAqIC0ge0BsaW5rIFRZUEVfVUlOVDE2fVxuICogLSB7QGxpbmsgVFlQRV9JTlQzMn1cbiAqIC0ge0BsaW5rIFRZUEVfVUlOVDMyfVxuICogLSB7QGxpbmsgVFlQRV9GTE9BVDMyfVxuICogQHByb3BlcnR5IHtib29sZWFufSBlbGVtZW50c1tdLm5vcm1hbGl6ZSBJZiB0cnVlLCB2ZXJ0ZXggYXR0cmlidXRlIGRhdGEgd2lsbCBiZSBtYXBwZWQgZnJvbSBhIDBcbiAqIHRvIDI1NSByYW5nZSBkb3duIHRvIDAgdG8gMSB3aGVuIGZlZCB0byBhIHNoYWRlci4gSWYgZmFsc2UsIHZlcnRleCBhdHRyaWJ1dGUgZGF0YSBpcyBsZWZ0XG4gKiB1bmNoYW5nZWQuIElmIHRoaXMgcHJvcGVydHkgaXMgdW5zcGVjaWZpZWQsIGZhbHNlIGlzIGFzc3VtZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZWxlbWVudHNbXS5vZmZzZXQgVGhlIG51bWJlciBvZiBpbml0aWFsIGJ5dGVzIGF0IHRoZSBzdGFydCBvZiBhIHZlcnRleCB0aGF0XG4gKiBhcmUgbm90IHJlbGV2YW50IHRvIHRoaXMgYXR0cmlidXRlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGVsZW1lbnRzW10uc3RyaWRlIFRoZSBudW1iZXIgb2YgdG90YWwgYnl0ZXMgdGhhdCBhcmUgYmV0d2VlbiB0aGUgc3RhcnQgb2Ygb25lXG4gKiB2ZXJ0ZXgsIGFuZCB0aGUgc3RhcnQgb2YgdGhlIG5leHQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZWxlbWVudHNbXS5zaXplIFRoZSBzaXplIG9mIHRoZSBhdHRyaWJ1dGUgaW4gYnl0ZXMuXG4gKi9cbmNsYXNzIFZlcnRleEZvcm1hdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFZlcnRleEZvcm1hdCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBncmFwaGljc0RldmljZSAtIFRoZSBncmFwaGljcyBkZXZpY2VcbiAgICAgKiB1c2VkIHRvIG1hbmFnZSB0aGlzIHZlcnRleCBmb3JtYXQuXG4gICAgICogQHBhcmFtIHtvYmplY3RbXX0gZGVzY3JpcHRpb24gLSBBbiBhcnJheSBvZiB2ZXJ0ZXggYXR0cmlidXRlIGRlc2NyaXB0aW9ucy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzY3JpcHRpb25bXS5zZW1hbnRpYyAtIFRoZSBtZWFuaW5nIG9mIHRoZSB2ZXJ0ZXggZWxlbWVudC4gVGhpcyBpcyB1c2VkIHRvXG4gICAgICogbGluayB0aGUgdmVydGV4IGRhdGEgdG8gYSBzaGFkZXIgaW5wdXQuIENhbiBiZTpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIFNFTUFOVElDX1BPU0lUSU9OfVxuICAgICAqIC0ge0BsaW5rIFNFTUFOVElDX05PUk1BTH1cbiAgICAgKiAtIHtAbGluayBTRU1BTlRJQ19UQU5HRU5UfVxuICAgICAqIC0ge0BsaW5rIFNFTUFOVElDX0JMRU5EV0VJR0hUfVxuICAgICAqIC0ge0BsaW5rIFNFTUFOVElDX0JMRU5ESU5ESUNFU31cbiAgICAgKiAtIHtAbGluayBTRU1BTlRJQ19DT0xPUn1cbiAgICAgKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDB9XG4gICAgICogLSB7QGxpbmsgU0VNQU5USUNfVEVYQ09PUkQxfVxuICAgICAqIC0ge0BsaW5rIFNFTUFOVElDX1RFWENPT1JEMn1cbiAgICAgKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDN9XG4gICAgICogLSB7QGxpbmsgU0VNQU5USUNfVEVYQ09PUkQ0fVxuICAgICAqIC0ge0BsaW5rIFNFTUFOVElDX1RFWENPT1JENX1cbiAgICAgKiAtIHtAbGluayBTRU1BTlRJQ19URVhDT09SRDZ9XG4gICAgICogLSB7QGxpbmsgU0VNQU5USUNfVEVYQ09PUkQ3fVxuICAgICAqXG4gICAgICogSWYgdmVydGV4IGRhdGEgaGFzIGEgbWVhbmluZyBvdGhlciB0aGF0IG9uZSBvZiB0aG9zZSBsaXN0ZWQgYWJvdmUsIHVzZSB0aGUgdXNlci1kZWZpbmVkXG4gICAgICogc2VtYW50aWNzOiB7QGxpbmsgU0VNQU5USUNfQVRUUjB9IHRvIHtAbGluayBTRU1BTlRJQ19BVFRSMTV9LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZXNjcmlwdGlvbltdLmNvbXBvbmVudHMgLSBUaGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgb2YgdGhlIHZlcnRleCBhdHRyaWJ1dGUuXG4gICAgICogQ2FuIGJlIDEsIDIsIDMgb3IgNC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVzY3JpcHRpb25bXS50eXBlIC0gVGhlIGRhdGEgdHlwZSBvZiB0aGUgYXR0cmlidXRlLiBDYW4gYmU6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBUWVBFX0lOVDh9XG4gICAgICogLSB7QGxpbmsgVFlQRV9VSU5UOH1cbiAgICAgKiAtIHtAbGluayBUWVBFX0lOVDE2fVxuICAgICAqIC0ge0BsaW5rIFRZUEVfVUlOVDE2fVxuICAgICAqIC0ge0BsaW5rIFRZUEVfSU5UMzJ9XG4gICAgICogLSB7QGxpbmsgVFlQRV9VSU5UMzJ9XG4gICAgICogLSB7QGxpbmsgVFlQRV9GTE9BVDMyfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZGVzY3JpcHRpb25bXS5ub3JtYWxpemVdIC0gSWYgdHJ1ZSwgdmVydGV4IGF0dHJpYnV0ZSBkYXRhIHdpbGwgYmUgbWFwcGVkXG4gICAgICogZnJvbSBhIDAgdG8gMjU1IHJhbmdlIGRvd24gdG8gMCB0byAxIHdoZW4gZmVkIHRvIGEgc2hhZGVyLiBJZiBmYWxzZSwgdmVydGV4IGF0dHJpYnV0ZSBkYXRhXG4gICAgICogaXMgbGVmdCB1bmNoYW5nZWQuIElmIHRoaXMgcHJvcGVydHkgaXMgdW5zcGVjaWZpZWQsIGZhbHNlIGlzIGFzc3VtZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt2ZXJ0ZXhDb3VudF0gLSBXaGVuIHNwZWNpZmllZCwgdmVydGV4IGZvcm1hdCB3aWxsIGJlIHNldCB1cCBmb3JcbiAgICAgKiBub24taW50ZXJsZWF2ZWQgZm9ybWF0IHdpdGggYSBzcGVjaWZpZWQgbnVtYmVyIG9mIHZlcnRpY2VzLiAoZXhhbXBsZTogUFBQUE5OTk5DQ0NDKSwgd2hlcmVcbiAgICAgKiBhcnJheXMgb2YgaW5kaXZpZHVhbCBhdHRyaWJ1dGVzIHdpbGwgYmUgc3RvcmVkIG9uZSByaWdodCBhZnRlciB0aGUgb3RoZXIgKHN1YmplY3QgdG9cbiAgICAgKiBhbGlnbm1lbnQgcmVxdWlyZW1lbnRzKS4gTm90ZSB0aGF0IGluIHRoaXMgY2FzZSwgdGhlIGZvcm1hdCBkZXBlbmRzIG9uIHRoZSBudW1iZXIgb2ZcbiAgICAgKiB2ZXJ0aWNlcywgYW5kIG5lZWRzIHRvIGNoYW5nZSB3aGVuIHRoZSBudW1iZXIgb2YgdmVydGljZXMgY2hhbmdlcy4gV2hlbiBub3Qgc3BlY2lmaWVkLFxuICAgICAqIHZlcnRleCBmb3JtYXQgd2lsbCBiZSBpbnRlcmxlYXZlZC4gKGV4YW1wbGU6IFBOQ1BOQ1BOQ1BOQykuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBTcGVjaWZ5IDMtY29tcG9uZW50IHBvc2l0aW9ucyAoeCwgeSwgeilcbiAgICAgKiB2YXIgdmVydGV4Rm9ybWF0ID0gbmV3IHBjLlZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgW1xuICAgICAqICAgICB7IHNlbWFudGljOiBwYy5TRU1BTlRJQ19QT1NJVElPTiwgY29tcG9uZW50czogMywgdHlwZTogcGMuVFlQRV9GTE9BVDMyIH1cbiAgICAgKiBdKTtcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIFNwZWNpZnkgMi1jb21wb25lbnQgcG9zaXRpb25zICh4LCB5KSwgYSB0ZXh0dXJlIGNvb3JkaW5hdGUgKHUsIHYpIGFuZCBhIHZlcnRleCBjb2xvciAociwgZywgYiwgYSlcbiAgICAgKiB2YXIgdmVydGV4Rm9ybWF0ID0gbmV3IHBjLlZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgW1xuICAgICAqICAgICB7IHNlbWFudGljOiBwYy5TRU1BTlRJQ19QT1NJVElPTiwgY29tcG9uZW50czogMiwgdHlwZTogcGMuVFlQRV9GTE9BVDMyIH0sXG4gICAgICogICAgIHsgc2VtYW50aWM6IHBjLlNFTUFOVElDX1RFWENPT1JEMCwgY29tcG9uZW50czogMiwgdHlwZTogcGMuVFlQRV9GTE9BVDMyIH0sXG4gICAgICogICAgIHsgc2VtYW50aWM6IHBjLlNFTUFOVElDX0NPTE9SLCBjb21wb25lbnRzOiA0LCB0eXBlOiBwYy5UWVBFX1VJTlQ4LCBub3JtYWxpemU6IHRydWUgfVxuICAgICAqIF0pO1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGdyYXBoaWNzRGV2aWNlLCBkZXNjcmlwdGlvbiwgdmVydGV4Q291bnQpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5oYXNVdjAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oYXNVdjEgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oYXNDb2xvciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc1RhbmdlbnRzID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmVydGljZXNCeXRlU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMudmVydGV4Q291bnQgPSB2ZXJ0ZXhDb3VudDtcbiAgICAgICAgdGhpcy5pbnRlcmxlYXZlZCA9IHZlcnRleENvdW50ID09PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gdHJ1ZSBpZiB0aGUgdmVydGV4IGZvcm1hdCByZXByZXNlbnRzIGFuIGluc3RhbmNpbmcgdmVydGV4IGJ1ZmZlclxuICAgICAgICB0aGlzLmluc3RhbmNpbmcgPSBmYWxzZTtcblxuICAgICAgICAvLyBjYWxjdWxhdGUgdG90YWwgc2l6ZSBvZiB0aGUgdmVydGV4XG4gICAgICAgIHRoaXMuc2l6ZSA9IGRlc2NyaXB0aW9uLnJlZHVjZSgodG90YWwsIGRlc2MpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0b3RhbCArIE1hdGguY2VpbChkZXNjLmNvbXBvbmVudHMgKiB0eXBlZEFycmF5VHlwZXNCeXRlU2l6ZVtkZXNjLnR5cGVdIC8gNCkgKiA0O1xuICAgICAgICB9LCAwKTtcblxuICAgICAgICBsZXQgb2Zmc2V0ID0gMCwgZWxlbWVudFNpemU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBkZXNjcmlwdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudERlc2MgPSBkZXNjcmlwdGlvbltpXTtcblxuICAgICAgICAgICAgZWxlbWVudFNpemUgPSBlbGVtZW50RGVzYy5jb21wb25lbnRzICogdHlwZWRBcnJheVR5cGVzQnl0ZVNpemVbZWxlbWVudERlc2MudHlwZV07XG5cbiAgICAgICAgICAgIC8vIFdlYkdQVSBoYXMgbGltaXRlZCBlbGVtZW50IHNpemUgc3VwcG9ydCAoZm9yIGV4YW1wbGUgdWludDE2eDMgaXMgbm90IHN1cHBvcnRlZClcbiAgICAgICAgICAgIERlYnVnLmFzc2VydChncmFwaGljc0RldmljZS5kZXZpY2VUeXBlICE9PSBERVZJQ0VUWVBFX1dFQkdQVSB8fCBbMiwgNCwgOCwgMTIsIDE2XS5pbmNsdWRlcyhlbGVtZW50U2l6ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgYFdlYkdQVSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBmb3JtYXQgb2YgdmVydGV4IGVsZW1lbnQgJHtlbGVtZW50RGVzYy5zZW1hbnRpY30gOiAke3ZlcnRleFR5cGVzTmFtZXNbZWxlbWVudERlc2MudHlwZV19IHggJHtlbGVtZW50RGVzYy5jb21wb25lbnRzfWApO1xuXG4gICAgICAgICAgICAvLyBhbGlnbiB1cCB0aGUgb2Zmc2V0IHRvIGVsZW1lbnRTaXplICh3aGVuIHZlcnRleENvdW50IGlzIHNwZWNpZmllZCBvbmx5IC0gY2FzZSBvZiBub24taW50ZXJsZWF2ZWQgZm9ybWF0KVxuICAgICAgICAgICAgaWYgKHZlcnRleENvdW50KSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gbWF0aC5yb3VuZFVwKG9mZnNldCwgZWxlbWVudFNpemUpO1xuXG4gICAgICAgICAgICAgICAgLy8gbm9uLWludGVybGVhdmVkIGZvcm1hdCB3aXRoIGVsZW1lbnRTaXplIG5vdCBtdWx0aXBsZSBvZiA0IG1pZ2h0IGJlIHNsb3dlciBvbiBzb21lIHBsYXRmb3JtcyAtIHBhZGRpbmcgaXMgcmVjb21tZW5kZWQgdG8gYWxpZ24gaXRzIHNpemVcbiAgICAgICAgICAgICAgICAvLyBleGFtcGxlOiB1c2UgNCB4IFRZUEVfVUlOVDggaW5zdGVhZCBvZiAzIHggVFlQRV9VSU5UOFxuICAgICAgICAgICAgICAgIERlYnVnLmFzc2VydCgoZWxlbWVudFNpemUgJSA0KSA9PT0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYE5vbi1pbnRlcmxlYXZlZCB2ZXJ0ZXggZm9ybWF0IHdpdGggZWxlbWVudCBzaXplIG5vdCBtdWx0aXBsZSBvZiA0IGNhbiBoYXZlIHBlcmZvcm1hbmNlIGltcGFjdCBvbiBzb21lIHBsYXRmb3Jtcy4gRWxlbWVudCBzaXplOiAke2VsZW1lbnRTaXplfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGVsZW1lbnREZXNjLnNlbWFudGljLFxuICAgICAgICAgICAgICAgIG9mZnNldDogKHZlcnRleENvdW50ID8gb2Zmc2V0IDogKGVsZW1lbnREZXNjLmhhc093blByb3BlcnR5KCdvZmZzZXQnKSA/IGVsZW1lbnREZXNjLm9mZnNldCA6IG9mZnNldCkpLFxuICAgICAgICAgICAgICAgIHN0cmlkZTogKHZlcnRleENvdW50ID8gZWxlbWVudFNpemUgOiAoZWxlbWVudERlc2MuaGFzT3duUHJvcGVydHkoJ3N0cmlkZScpID8gZWxlbWVudERlc2Muc3RyaWRlIDogdGhpcy5zaXplKSksXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IGVsZW1lbnREZXNjLnR5cGUsXG4gICAgICAgICAgICAgICAgbnVtQ29tcG9uZW50czogZWxlbWVudERlc2MuY29tcG9uZW50cyxcbiAgICAgICAgICAgICAgICBub3JtYWxpemU6IChlbGVtZW50RGVzYy5ub3JtYWxpemUgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IGVsZW1lbnREZXNjLm5vcm1hbGl6ZSxcbiAgICAgICAgICAgICAgICBzaXplOiBlbGVtZW50U2l6ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRzLnB1c2goZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmICh2ZXJ0ZXhDb3VudCkge1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBlbGVtZW50U2l6ZSAqIHZlcnRleENvdW50O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gTWF0aC5jZWlsKGVsZW1lbnRTaXplIC8gNCkgKiA0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudERlc2Muc2VtYW50aWMgPT09IFNFTUFOVElDX1RFWENPT1JEMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzVXYwID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudERlc2Muc2VtYW50aWMgPT09IFNFTUFOVElDX1RFWENPT1JEMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzVXYxID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudERlc2Muc2VtYW50aWMgPT09IFNFTUFOVElDX0NPTE9SKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYXNDb2xvciA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnREZXNjLnNlbWFudGljID09PSBTRU1BTlRJQ19UQU5HRU5UKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYXNUYW5nZW50cyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmVydGV4Q291bnQpIHtcbiAgICAgICAgICAgIHRoaXMudmVydGljZXNCeXRlU2l6ZSA9IG9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2V2YWx1YXRlSGFzaCgpO1xuICAgIH1cblxuICAgIGdldCBlbGVtZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtWZXJ0ZXhGb3JtYXR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgX2RlZmF1bHRJbnN0YW5jaW5nRm9ybWF0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgVmVydGV4Rm9ybWF0fSB1c2VkIHRvIHN0b3JlIG1hdHJpY2VzIG9mIHR5cGUge0BsaW5rIE1hdDR9IGZvciBoYXJkd2FyZSBpbnN0YW5jaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vZ3JhcGhpY3MtZGV2aWNlLmpzJykuR3JhcGhpY3NEZXZpY2V9IGdyYXBoaWNzRGV2aWNlIC0gVGhlIGdyYXBoaWNzIGRldmljZVxuICAgICAqIHVzZWQgdG8gY3JlYXRlIHRoaXMgdmVydGV4IGZvcm1hdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtWZXJ0ZXhGb3JtYXR9IFRoZSBkZWZhdWx0IGluc3RhbmNpbmcgdmVydGV4IGZvcm1hdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0RGVmYXVsdEluc3RhbmNpbmdGb3JtYXQoZ3JhcGhpY3NEZXZpY2UpIHtcblxuICAgICAgICBpZiAoIVZlcnRleEZvcm1hdC5fZGVmYXVsdEluc3RhbmNpbmdGb3JtYXQpIHtcbiAgICAgICAgICAgIFZlcnRleEZvcm1hdC5fZGVmYXVsdEluc3RhbmNpbmdGb3JtYXQgPSBuZXcgVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCBbXG4gICAgICAgICAgICAgICAgeyBzZW1hbnRpYzogU0VNQU5USUNfQVRUUjEyLCBjb21wb25lbnRzOiA0LCB0eXBlOiBUWVBFX0ZMT0FUMzIgfSxcbiAgICAgICAgICAgICAgICB7IHNlbWFudGljOiBTRU1BTlRJQ19BVFRSMTMsIGNvbXBvbmVudHM6IDQsIHR5cGU6IFRZUEVfRkxPQVQzMiB9LFxuICAgICAgICAgICAgICAgIHsgc2VtYW50aWM6IFNFTUFOVElDX0FUVFIxNCwgY29tcG9uZW50czogNCwgdHlwZTogVFlQRV9GTE9BVDMyIH0sXG4gICAgICAgICAgICAgICAgeyBzZW1hbnRpYzogU0VNQU5USUNfQVRUUjE1LCBjb21wb25lbnRzOiA0LCB0eXBlOiBUWVBFX0ZMT0FUMzIgfVxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVmVydGV4Rm9ybWF0Ll9kZWZhdWx0SW5zdGFuY2luZ0Zvcm1hdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZXMgaGFzaCB2YWx1ZXMgZm9yIHRoZSBmb3JtYXQgYWxsb3dpbmcgZmFzdCBjb21wYXJlIG9mIGJhdGNoaW5nIC8gcmVuZGVyaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9ldmFsdWF0ZUhhc2goKSB7XG4gICAgICAgIGxldCBzdHJpbmdFbGVtZW50QmF0Y2g7XG4gICAgICAgIGNvbnN0IHN0cmluZ0VsZW1lbnRzQmF0Y2ggPSBbXTtcbiAgICAgICAgbGV0IHN0cmluZ0VsZW1lbnRSZW5kZXI7XG4gICAgICAgIGNvbnN0IHN0cmluZ0VsZW1lbnRzUmVuZGVyID0gW107XG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMuX2VsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2VsZW1lbnRzW2ldO1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgc3RyaW5nIGRlc2NyaXB0aW9uIG9mIGVhY2ggZWxlbWVudCB0aGF0IGlzIHJlbGV2YW50IGZvciBiYXRjaGluZ1xuICAgICAgICAgICAgc3RyaW5nRWxlbWVudEJhdGNoID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgc3RyaW5nRWxlbWVudEJhdGNoICs9IGVsZW1lbnQuZGF0YVR5cGU7XG4gICAgICAgICAgICBzdHJpbmdFbGVtZW50QmF0Y2ggKz0gZWxlbWVudC5udW1Db21wb25lbnRzO1xuICAgICAgICAgICAgc3RyaW5nRWxlbWVudEJhdGNoICs9IGVsZW1lbnQubm9ybWFsaXplO1xuICAgICAgICAgICAgc3RyaW5nRWxlbWVudHNCYXRjaC5wdXNoKHN0cmluZ0VsZW1lbnRCYXRjaCk7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBzdHJpbmcgZGVzY3JpcHRpb24gb2YgZWFjaCBlbGVtZW50IHRoYXQgaXMgcmVsZXZhbnQgZm9yIHJlbmRlcmluZ1xuICAgICAgICAgICAgc3RyaW5nRWxlbWVudFJlbmRlciA9IHN0cmluZ0VsZW1lbnRCYXRjaDtcbiAgICAgICAgICAgIHN0cmluZ0VsZW1lbnRSZW5kZXIgKz0gZWxlbWVudC5vZmZzZXQ7XG4gICAgICAgICAgICBzdHJpbmdFbGVtZW50UmVuZGVyICs9IGVsZW1lbnQuc3RyaWRlO1xuICAgICAgICAgICAgc3RyaW5nRWxlbWVudFJlbmRlciArPSBlbGVtZW50LnNpemU7XG4gICAgICAgICAgICBzdHJpbmdFbGVtZW50c1JlbmRlci5wdXNoKHN0cmluZ0VsZW1lbnRSZW5kZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc29ydCBiYXRjaGluZyBvbmVzIGFscGhhYmV0aWNhbGx5IHRvIG1ha2UgdGhlIGhhc2ggb3JkZXIgaW5kZXBlbmRlbnRcbiAgICAgICAgc3RyaW5nRWxlbWVudHNCYXRjaC5zb3J0KCk7XG4gICAgICAgIHRoaXMuYmF0Y2hpbmdIYXNoID0gaGFzaENvZGUoc3RyaW5nRWxlbWVudHNCYXRjaC5qb2luKCkpO1xuXG4gICAgICAgIC8vIHJlbmRlcmluZyBoYXNoXG4gICAgICAgIHRoaXMucmVuZGVyaW5naW5nSGFzaFN0cmluZyA9IHN0cmluZ0VsZW1lbnRzUmVuZGVyLmpvaW4oJ18nKTtcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdpbmdIYXNoID0gaGFzaENvZGUodGhpcy5yZW5kZXJpbmdpbmdIYXNoU3RyaW5nKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFZlcnRleEZvcm1hdCB9O1xuIl0sIm5hbWVzIjpbIlZlcnRleEZvcm1hdCIsImNvbnN0cnVjdG9yIiwiZ3JhcGhpY3NEZXZpY2UiLCJkZXNjcmlwdGlvbiIsInZlcnRleENvdW50IiwiX2VsZW1lbnRzIiwiaGFzVXYwIiwiaGFzVXYxIiwiaGFzQ29sb3IiLCJoYXNUYW5nZW50cyIsInZlcnRpY2VzQnl0ZVNpemUiLCJpbnRlcmxlYXZlZCIsInVuZGVmaW5lZCIsImluc3RhbmNpbmciLCJzaXplIiwicmVkdWNlIiwidG90YWwiLCJkZXNjIiwiTWF0aCIsImNlaWwiLCJjb21wb25lbnRzIiwidHlwZWRBcnJheVR5cGVzQnl0ZVNpemUiLCJ0eXBlIiwib2Zmc2V0IiwiZWxlbWVudFNpemUiLCJpIiwibGVuIiwibGVuZ3RoIiwiZWxlbWVudERlc2MiLCJEZWJ1ZyIsImFzc2VydCIsImRldmljZVR5cGUiLCJERVZJQ0VUWVBFX1dFQkdQVSIsImluY2x1ZGVzIiwic2VtYW50aWMiLCJ2ZXJ0ZXhUeXBlc05hbWVzIiwibWF0aCIsInJvdW5kVXAiLCJlbGVtZW50IiwibmFtZSIsImhhc093blByb3BlcnR5Iiwic3RyaWRlIiwiZGF0YVR5cGUiLCJudW1Db21wb25lbnRzIiwibm9ybWFsaXplIiwicHVzaCIsIlNFTUFOVElDX1RFWENPT1JEMCIsIlNFTUFOVElDX1RFWENPT1JEMSIsIlNFTUFOVElDX0NPTE9SIiwiU0VNQU5USUNfVEFOR0VOVCIsIl9ldmFsdWF0ZUhhc2giLCJlbGVtZW50cyIsImdldERlZmF1bHRJbnN0YW5jaW5nRm9ybWF0IiwiX2RlZmF1bHRJbnN0YW5jaW5nRm9ybWF0IiwiU0VNQU5USUNfQVRUUjEyIiwiVFlQRV9GTE9BVDMyIiwiU0VNQU5USUNfQVRUUjEzIiwiU0VNQU5USUNfQVRUUjE0IiwiU0VNQU5USUNfQVRUUjE1Iiwic3RyaW5nRWxlbWVudEJhdGNoIiwic3RyaW5nRWxlbWVudHNCYXRjaCIsInN0cmluZ0VsZW1lbnRSZW5kZXIiLCJzdHJpbmdFbGVtZW50c1JlbmRlciIsInNvcnQiLCJiYXRjaGluZ0hhc2giLCJoYXNoQ29kZSIsImpvaW4iLCJyZW5kZXJpbmdpbmdIYXNoU3RyaW5nIiwicmVuZGVyaW5naW5nSGFzaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQXVEQSxNQUFNQSxZQUFZLENBQUM7QUE2RGZDLEVBQUFBLFdBQVcsQ0FBQ0MsY0FBYyxFQUFFQyxXQUFXLEVBQUVDLFdBQVcsRUFBRTtJQUNsRCxJQUFJLENBQUNDLFNBQVMsR0FBRyxFQUFFLENBQUE7SUFDbkIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsS0FBSyxDQUFBO0lBQ25CLElBQUksQ0FBQ0MsTUFBTSxHQUFHLEtBQUssQ0FBQTtJQUNuQixJQUFJLENBQUNDLFFBQVEsR0FBRyxLQUFLLENBQUE7SUFDckIsSUFBSSxDQUFDQyxXQUFXLEdBQUcsS0FBSyxDQUFBO0lBQ3hCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFBO0lBQ3pCLElBQUksQ0FBQ04sV0FBVyxHQUFHQSxXQUFXLENBQUE7QUFDOUIsSUFBQSxJQUFJLENBQUNPLFdBQVcsR0FBR1AsV0FBVyxLQUFLUSxTQUFTLENBQUE7O0lBRzVDLElBQUksQ0FBQ0MsVUFBVSxHQUFHLEtBQUssQ0FBQTs7SUFHdkIsSUFBSSxDQUFDQyxJQUFJLEdBQUdYLFdBQVcsQ0FBQ1ksTUFBTSxDQUFDLENBQUNDLEtBQUssRUFBRUMsSUFBSSxLQUFLO01BQzVDLE9BQU9ELEtBQUssR0FBR0UsSUFBSSxDQUFDQyxJQUFJLENBQUNGLElBQUksQ0FBQ0csVUFBVSxHQUFHQyx1QkFBdUIsQ0FBQ0osSUFBSSxDQUFDSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUE7S0FDekYsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUVMLElBQUlDLE1BQU0sR0FBRyxDQUFDO01BQUVDLFdBQVcsQ0FBQTtBQUMzQixJQUFBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUMsR0FB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
