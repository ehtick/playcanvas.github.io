/**
 * @license
 * PlayCanvas Engine v1.62.0-dev revision 7d088032c (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { Debug, DebugHelper } from '../../../core/debug.js';
import { PIXELFORMAT_DEPTHSTENCIL, PIXELFORMAT_RGBA32F, PIXELFORMAT_RGBA16F, pixelFormatByteSizes, PIXELFORMAT_A8, PIXELFORMAT_L8, PIXELFORMAT_LA8, PIXELFORMAT_RGB565, PIXELFORMAT_RGBA5551, PIXELFORMAT_RGBA4, PIXELFORMAT_RGB8, PIXELFORMAT_RGBA8, PIXELFORMAT_DXT1, PIXELFORMAT_DXT3, PIXELFORMAT_DXT5, PIXELFORMAT_RGB16F, PIXELFORMAT_RGB32F, PIXELFORMAT_R32F, PIXELFORMAT_DEPTH, PIXELFORMAT_111110F, PIXELFORMAT_SRGB, PIXELFORMAT_SRGBA, PIXELFORMAT_ETC1, PIXELFORMAT_ETC2_RGB, PIXELFORMAT_ETC2_RGBA, PIXELFORMAT_PVRTC_2BPP_RGB_1, PIXELFORMAT_PVRTC_2BPP_RGBA_1, PIXELFORMAT_PVRTC_4BPP_RGB_1, PIXELFORMAT_PVRTC_4BPP_RGBA_1, PIXELFORMAT_ASTC_4x4, PIXELFORMAT_ATC_RGB, PIXELFORMAT_ATC_RGBA, PIXELFORMAT_BGRA8, ADDRESS_REPEAT, ADDRESS_CLAMP_TO_EDGE, ADDRESS_MIRRORED_REPEAT } from '../constants.js';

// map of PIXELFORMAT_*** to GPUTextureFormat
const gpuTextureFormats = [];
gpuTextureFormats[PIXELFORMAT_A8] = '';
gpuTextureFormats[PIXELFORMAT_L8] = 'r8unorm';
gpuTextureFormats[PIXELFORMAT_LA8] = 'rg8unorm';
gpuTextureFormats[PIXELFORMAT_RGB565] = '';
gpuTextureFormats[PIXELFORMAT_RGBA5551] = '';
gpuTextureFormats[PIXELFORMAT_RGBA4] = '';
gpuTextureFormats[PIXELFORMAT_RGB8] = 'rgba8unorm';
gpuTextureFormats[PIXELFORMAT_RGBA8] = 'rgba8unorm';
gpuTextureFormats[PIXELFORMAT_DXT1] = '';
gpuTextureFormats[PIXELFORMAT_DXT3] = '';
gpuTextureFormats[PIXELFORMAT_DXT5] = '';
gpuTextureFormats[PIXELFORMAT_RGB16F] = '';
gpuTextureFormats[PIXELFORMAT_RGBA16F] = 'rgba16float';
gpuTextureFormats[PIXELFORMAT_RGB32F] = '';
gpuTextureFormats[PIXELFORMAT_RGBA32F] = 'rgba32float';
gpuTextureFormats[PIXELFORMAT_R32F] = 'r32float';
gpuTextureFormats[PIXELFORMAT_DEPTH] = 'depth32float';
gpuTextureFormats[PIXELFORMAT_DEPTHSTENCIL] = 'depth24plus-stencil8';
gpuTextureFormats[PIXELFORMAT_111110F] = 'rg11b10ufloat';
gpuTextureFormats[PIXELFORMAT_SRGB] = '';
gpuTextureFormats[PIXELFORMAT_SRGBA] = '';
gpuTextureFormats[PIXELFORMAT_ETC1] = '';
gpuTextureFormats[PIXELFORMAT_ETC2_RGB] = '';
gpuTextureFormats[PIXELFORMAT_ETC2_RGBA] = '';
gpuTextureFormats[PIXELFORMAT_PVRTC_2BPP_RGB_1] = '';
gpuTextureFormats[PIXELFORMAT_PVRTC_2BPP_RGBA_1] = '';
gpuTextureFormats[PIXELFORMAT_PVRTC_4BPP_RGB_1] = '';
gpuTextureFormats[PIXELFORMAT_PVRTC_4BPP_RGBA_1] = '';
gpuTextureFormats[PIXELFORMAT_ASTC_4x4] = '';
gpuTextureFormats[PIXELFORMAT_ATC_RGB] = '';
gpuTextureFormats[PIXELFORMAT_ATC_RGBA] = '';
gpuTextureFormats[PIXELFORMAT_BGRA8] = 'bgra8unorm';

// map of ADDRESS_*** to GPUAddressMode
const gpuAddressModes = [];
gpuAddressModes[ADDRESS_REPEAT] = 'repeat';
gpuAddressModes[ADDRESS_CLAMP_TO_EDGE] = 'clamp-to-edge';
gpuAddressModes[ADDRESS_MIRRORED_REPEAT] = 'mirror-repeat';

/**
 * A WebGPU implementation of the Texture.
 *
 * @ignore
 */
class WebgpuTexture {
  /**
   * @type {GPUTexture}
   * @private
   */

  /**
   * @type {GPUTextureView}
   * @private
   */

  /**
   * @type {GPUSampler}
   * @private
   */

  /**
   * @type {GPUTextureDescriptor}
   * @private
   */

  /**
   * @type {GPUTextureFormat}
   * @private
   */

  constructor(texture) {
    this.gpuTexture = void 0;
    this.view = void 0;
    this.sampler = void 0;
    this.descr = void 0;
    this.format = void 0;
    /** @type {import('../texture.js').Texture} */
    this.texture = texture;
    this.format = gpuTextureFormats[texture.format];
    Debug.assert(this.format !== '', `WebGPU does not support texture format ${texture.format} for texture ${texture.name}`, texture);
    this.create(texture.device);
  }
  create(device) {
    const texture = this.texture;
    const wgpu = device.wgpu;
    this.descr = {
      size: {
        width: texture.width,
        height: texture.height,
        depthOrArrayLayers: texture.cubemap ? 6 : 1
      },
      format: this.format,
      mipLevelCount: 1,
      sampleCount: 1,
      dimension: texture.volume ? '3d' : '2d',
      // TODO: use only required usage flags
      // COPY_SRC - probably only needed on render target textures, to support copyRenderTarget (grab pass needs it)
      usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC
    };
    this.gpuTexture = wgpu.createTexture(this.descr);
    DebugHelper.setLabel(this.gpuTexture, `${texture.name}${texture.cubemap ? '[cubemap]' : ''}${texture.volume ? '[3d]' : ''}`);

    // default texture view descriptor
    let viewDescr;

    // some format require custom default texture view
    if (this.texture.format === PIXELFORMAT_DEPTHSTENCIL) {
      // we expose the depth part of the format
      viewDescr = {
        format: 'depth24plus',
        aspect: 'depth-only'
      };
    }
    this.view = this.createView(viewDescr);
  }
  destroy(device) {}

  /**
   * @param {any} device - The Graphics Device.
   * @returns {any} - Returns the view.
   */
  getView(device) {
    this.uploadImmediate(device, this.texture);
    Debug.assert(this.view);
    return this.view;
  }
  createView(viewDescr) {
    var _options$format, _options$dimension, _options$aspect, _options$baseMipLevel, _options$mipLevelCoun, _options$baseArrayLay, _options$arrayLayerCo;
    const options = viewDescr != null ? viewDescr : {};
    const textureDescr = this.descr;
    const texture = this.texture;

    // '1d', '2d', '2d-array', 'cube', 'cube-array', '3d'
    const defaultViewDimension = () => {
      if (texture.cubemap) return 'cube';
      if (texture.volume) return '3d';
      return '2d';
    };

    /** @type {GPUTextureViewDescriptor} */
    const descr = {
      format: (_options$format = options.format) != null ? _options$format : textureDescr.format,
      dimension: (_options$dimension = options.dimension) != null ? _options$dimension : defaultViewDimension(),
      aspect: (_options$aspect = options.aspect) != null ? _options$aspect : 'all',
      baseMipLevel: (_options$baseMipLevel = options.baseMipLevel) != null ? _options$baseMipLevel : 0,
      mipLevelCount: (_options$mipLevelCoun = options.mipLevelCount) != null ? _options$mipLevelCoun : textureDescr.mipLevelCount,
      baseArrayLayer: (_options$baseArrayLay = options.baseArrayLayer) != null ? _options$baseArrayLay : 0,
      arrayLayerCount: (_options$arrayLayerCo = options.arrayLayerCount) != null ? _options$arrayLayerCo : textureDescr.depthOrArrayLayers
    };
    const view = this.gpuTexture.createView(descr);
    DebugHelper.setLabel(view, `${viewDescr ? `CustomView${JSON.stringify(viewDescr)}` : 'DefaultView'}:${this.texture.name}`);
    return view;
  }

  // TODO: handle the case where those properties get changed

  /**
   * @param {any} device - The Graphics Device.
   * @returns {any} - Returns the sampler.
   */
  getSampler(device) {
    if (!this.sampler) {
      const texture = this.texture;

      /** @type GPUSamplerDescriptor */
      const descr = {
        addressModeU: gpuAddressModes[texture.addressU],
        addressModeV: gpuAddressModes[texture.addressV],
        addressModeW: gpuAddressModes[texture.addressW]
      };

      // TODO: this is temporary and needs to be made generic
      if (this.texture.format === PIXELFORMAT_RGBA32F || this.texture.format === PIXELFORMAT_DEPTHSTENCIL || this.texture.format === PIXELFORMAT_RGBA16F) {
        descr.magFilter = 'nearest';
        descr.minFilter = 'nearest';
        descr.mipmapFilter = 'nearest';
      } else if (texture.compareOnRead) {
        // depth compare sampler
        // TODO: depth texture can be exposed for sampling, not only compare sampling (for example debug
        // rendering of depth). Find some good way to expose this, perhaps based on what sampling shader needs.
        descr.compare = 'less';
        descr.magFilter = 'linear';
        descr.minFilter = 'linear';
      } else {
        descr.magFilter = 'linear';
        descr.minFilter = 'linear';
        descr.mipmapFilter = 'linear';
      }
      this.sampler = device.wgpu.createSampler(descr);
      DebugHelper.setLabel(this.sampler, `LinearSampler`);
    }
    return this.sampler;
  }
  loseContext() {}

  /**
   * @param {import('./webgpu-graphics-device.js').WebgpuGraphicsDevice} device - The graphics
   * device.
   * @param {import('../texture.js').Texture} texture - The texture.
   */
  uploadImmediate(device, texture) {
    if (texture._needsUpload || texture._needsMipmapsUpload) {
      this.uploadData(device);
      texture._needsUpload = false;
      texture._needsMipmapsUpload = false;
    }
  }

  /**
   * @param {import('./webgpu-graphics-device.js').WebgpuGraphicsDevice} device - The graphics
   * device.
   */
  uploadData(device) {
    const texture = this.texture;
    const wgpu = device.wgpu;
    if (this.texture.cubemap) {
      Debug.warn('Cubemap texture data upload is not supported yet', this.texture);
      return;
    }

    // upload texture data if any
    const mipLevel = 0;
    const mipObject = texture._levels[mipLevel];
    if (mipObject) {
      if (mipObject instanceof ImageBitmap) {
        wgpu.queue.copyExternalImageToTexture({
          source: mipObject
        }, {
          texture: this.gpuTexture
        }, this.descr.size);
      } else if (ArrayBuffer.isView(mipObject)) {
        // typed array

        this.uploadTypedArrayData(wgpu, mipObject);
      } else {
        Debug.error('Unsupported texture source data', mipObject);
      }
    }
  }
  uploadTypedArrayData(wgpu, data) {
    var _pixelFormatByteSizes;
    const texture = this.texture;

    /** @type {GPUImageCopyTexture} */
    const dest = {
      texture: this.gpuTexture,
      mipLevel: 0
    };

    // TODO: handle update to mipmap levels other than 0
    const pixelSize = (_pixelFormatByteSizes = pixelFormatByteSizes[texture.format]) != null ? _pixelFormatByteSizes : 0;
    Debug.assert(pixelSize);
    const bytesPerRow = texture.width * pixelSize;
    const byteSize = bytesPerRow * texture.height;
    Debug.assert(byteSize === data.byteLength, `Error uploading data to texture, the data byte size of ${data.byteLength} does not match required ${byteSize}`, texture);

    /** @type {GPUImageDataLayout} */
    const dataLayout = {
      offset: 0,
      bytesPerRow: bytesPerRow,
      rowsPerImage: texture.height
    };
    const size = {
      width: texture.width,
      height: texture.height,
      depthOrArrayLayers: 1
    };
    wgpu.queue.writeTexture(dest, data, dataLayout, size);
  }
}

export { WebgpuTexture };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1LXRleHR1cmUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9wbGF0Zm9ybS9ncmFwaGljcy93ZWJncHUvd2ViZ3B1LXRleHR1cmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcsIERlYnVnSGVscGVyIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9kZWJ1Zy5qcyc7XG5cbmltcG9ydCB7XG4gICAgcGl4ZWxGb3JtYXRCeXRlU2l6ZXMsXG4gICAgQUREUkVTU19SRVBFQVQsIEFERFJFU1NfQ0xBTVBfVE9fRURHRSwgQUREUkVTU19NSVJST1JFRF9SRVBFQVQsXG4gICAgUElYRUxGT1JNQVRfQTgsIFBJWEVMRk9STUFUX0w4LCBQSVhFTEZPUk1BVF9MQTgsIFBJWEVMRk9STUFUX1JHQjU2NSwgUElYRUxGT1JNQVRfUkdCQTU1NTEsIFBJWEVMRk9STUFUX1JHQkE0LFxuICAgIFBJWEVMRk9STUFUX1JHQjgsIFBJWEVMRk9STUFUX1JHQkE4LCBQSVhFTEZPUk1BVF9EWFQxLCBQSVhFTEZPUk1BVF9EWFQzLCBQSVhFTEZPUk1BVF9EWFQ1LFxuICAgIFBJWEVMRk9STUFUX1JHQjE2RiwgUElYRUxGT1JNQVRfUkdCQTE2RiwgUElYRUxGT1JNQVRfUkdCMzJGLCBQSVhFTEZPUk1BVF9SR0JBMzJGLCBQSVhFTEZPUk1BVF9SMzJGLCBQSVhFTEZPUk1BVF9ERVBUSCxcbiAgICBQSVhFTEZPUk1BVF9ERVBUSFNURU5DSUwsIFBJWEVMRk9STUFUXzExMTExMEYsIFBJWEVMRk9STUFUX1NSR0IsIFBJWEVMRk9STUFUX1NSR0JBLCBQSVhFTEZPUk1BVF9FVEMxLFxuICAgIFBJWEVMRk9STUFUX0VUQzJfUkdCLCBQSVhFTEZPUk1BVF9FVEMyX1JHQkEsIFBJWEVMRk9STUFUX1BWUlRDXzJCUFBfUkdCXzEsIFBJWEVMRk9STUFUX1BWUlRDXzJCUFBfUkdCQV8xLFxuICAgIFBJWEVMRk9STUFUX1BWUlRDXzRCUFBfUkdCXzEsIFBJWEVMRk9STUFUX1BWUlRDXzRCUFBfUkdCQV8xLCBQSVhFTEZPUk1BVF9BU1RDXzR4NCwgUElYRUxGT1JNQVRfQVRDX1JHQixcbiAgICBQSVhFTEZPUk1BVF9BVENfUkdCQSwgUElYRUxGT1JNQVRfQkdSQThcbn0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcblxuLy8gbWFwIG9mIFBJWEVMRk9STUFUXyoqKiB0byBHUFVUZXh0dXJlRm9ybWF0XG5jb25zdCBncHVUZXh0dXJlRm9ybWF0cyA9IFtdO1xuZ3B1VGV4dHVyZUZvcm1hdHNbUElYRUxGT1JNQVRfQThdID0gJyc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9MOF0gPSAncjh1bm9ybSc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9MQThdID0gJ3JnOHVub3JtJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1JHQjU2NV0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1JHQkE1NTUxXSA9ICcnO1xuZ3B1VGV4dHVyZUZvcm1hdHNbUElYRUxGT1JNQVRfUkdCQTRdID0gJyc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9SR0I4XSA9ICdyZ2JhOHVub3JtJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1JHQkE4XSA9ICdyZ2JhOHVub3JtJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX0RYVDFdID0gJyc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9EWFQzXSA9ICcnO1xuZ3B1VGV4dHVyZUZvcm1hdHNbUElYRUxGT1JNQVRfRFhUNV0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1JHQjE2Rl0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1JHQkExNkZdID0gJ3JnYmExNmZsb2F0JztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1JHQjMyRl0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1JHQkEzMkZdID0gJ3JnYmEzMmZsb2F0JztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1IzMkZdID0gJ3IzMmZsb2F0JztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX0RFUFRIXSA9ICdkZXB0aDMyZmxvYXQnO1xuZ3B1VGV4dHVyZUZvcm1hdHNbUElYRUxGT1JNQVRfREVQVEhTVEVOQ0lMXSA9ICdkZXB0aDI0cGx1cy1zdGVuY2lsOCc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF8xMTExMTBGXSA9ICdyZzExYjEwdWZsb2F0JztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1NSR0JdID0gJyc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9TUkdCQV0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX0VUQzFdID0gJyc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9FVEMyX1JHQl0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX0VUQzJfUkdCQV0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1BWUlRDXzJCUFBfUkdCXzFdID0gJyc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9QVlJUQ18yQlBQX1JHQkFfMV0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX1BWUlRDXzRCUFBfUkdCXzFdID0gJyc7XG5ncHVUZXh0dXJlRm9ybWF0c1tQSVhFTEZPUk1BVF9QVlJUQ180QlBQX1JHQkFfMV0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX0FTVENfNHg0XSA9ICcnO1xuZ3B1VGV4dHVyZUZvcm1hdHNbUElYRUxGT1JNQVRfQVRDX1JHQl0gPSAnJztcbmdwdVRleHR1cmVGb3JtYXRzW1BJWEVMRk9STUFUX0FUQ19SR0JBXSA9ICcnO1xuZ3B1VGV4dHVyZUZvcm1hdHNbUElYRUxGT1JNQVRfQkdSQThdID0gJ2JncmE4dW5vcm0nO1xuXG4vLyBtYXAgb2YgQUREUkVTU18qKiogdG8gR1BVQWRkcmVzc01vZGVcbmNvbnN0IGdwdUFkZHJlc3NNb2RlcyA9IFtdO1xuZ3B1QWRkcmVzc01vZGVzW0FERFJFU1NfUkVQRUFUXSA9ICdyZXBlYXQnO1xuZ3B1QWRkcmVzc01vZGVzW0FERFJFU1NfQ0xBTVBfVE9fRURHRV0gPSAnY2xhbXAtdG8tZWRnZSc7XG5ncHVBZGRyZXNzTW9kZXNbQUREUkVTU19NSVJST1JFRF9SRVBFQVRdID0gJ21pcnJvci1yZXBlYXQnO1xuXG4vKipcbiAqIEEgV2ViR1BVIGltcGxlbWVudGF0aW9uIG9mIHRoZSBUZXh0dXJlLlxuICpcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgV2ViZ3B1VGV4dHVyZSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0dQVVRleHR1cmV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBncHVUZXh0dXJlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0dQVVRleHR1cmVWaWV3fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdmlldztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtHUFVTYW1wbGVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc2FtcGxlcjtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtHUFVUZXh0dXJlRGVzY3JpcHRvcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGRlc2NyO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0dQVVRleHR1cmVGb3JtYXR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBmb3JtYXQ7XG5cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KCcuLi90ZXh0dXJlLmpzJykuVGV4dHVyZX0gKi9cbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblxuICAgICAgICB0aGlzLmZvcm1hdCA9IGdwdVRleHR1cmVGb3JtYXRzW3RleHR1cmUuZm9ybWF0XTtcbiAgICAgICAgRGVidWcuYXNzZXJ0KHRoaXMuZm9ybWF0ICE9PSAnJywgYFdlYkdQVSBkb2VzIG5vdCBzdXBwb3J0IHRleHR1cmUgZm9ybWF0ICR7dGV4dHVyZS5mb3JtYXR9IGZvciB0ZXh0dXJlICR7dGV4dHVyZS5uYW1lfWAsIHRleHR1cmUpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlKHRleHR1cmUuZGV2aWNlKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoZGV2aWNlKSB7XG5cbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IHRoaXMudGV4dHVyZTtcbiAgICAgICAgY29uc3Qgd2dwdSA9IGRldmljZS53Z3B1O1xuXG4gICAgICAgIHRoaXMuZGVzY3IgPSB7XG4gICAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHRleHR1cmUud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0ZXh0dXJlLmhlaWdodCxcbiAgICAgICAgICAgICAgICBkZXB0aE9yQXJyYXlMYXllcnM6IHRleHR1cmUuY3ViZW1hcCA/IDYgOiAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiB0aGlzLmZvcm1hdCxcbiAgICAgICAgICAgIG1pcExldmVsQ291bnQ6IDEsXG4gICAgICAgICAgICBzYW1wbGVDb3VudDogMSxcbiAgICAgICAgICAgIGRpbWVuc2lvbjogdGV4dHVyZS52b2x1bWUgPyAnM2QnIDogJzJkJyxcblxuICAgICAgICAgICAgLy8gVE9ETzogdXNlIG9ubHkgcmVxdWlyZWQgdXNhZ2UgZmxhZ3NcbiAgICAgICAgICAgIC8vIENPUFlfU1JDIC0gcHJvYmFibHkgb25seSBuZWVkZWQgb24gcmVuZGVyIHRhcmdldCB0ZXh0dXJlcywgdG8gc3VwcG9ydCBjb3B5UmVuZGVyVGFyZ2V0IChncmFiIHBhc3MgbmVlZHMgaXQpXG4gICAgICAgICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlRFWFRVUkVfQklORElORyB8IEdQVVRleHR1cmVVc2FnZS5DT1BZX0RTVCB8IEdQVVRleHR1cmVVc2FnZS5SRU5ERVJfQVRUQUNITUVOVCB8IEdQVVRleHR1cmVVc2FnZS5DT1BZX1NSQ1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ3B1VGV4dHVyZSA9IHdncHUuY3JlYXRlVGV4dHVyZSh0aGlzLmRlc2NyKTtcbiAgICAgICAgRGVidWdIZWxwZXIuc2V0TGFiZWwodGhpcy5ncHVUZXh0dXJlLCBgJHt0ZXh0dXJlLm5hbWV9JHt0ZXh0dXJlLmN1YmVtYXAgPyAnW2N1YmVtYXBdJyA6ICcnfSR7dGV4dHVyZS52b2x1bWUgPyAnWzNkXScgOiAnJ31gKTtcblxuICAgICAgICAvLyBkZWZhdWx0IHRleHR1cmUgdmlldyBkZXNjcmlwdG9yXG4gICAgICAgIGxldCB2aWV3RGVzY3I7XG5cbiAgICAgICAgLy8gc29tZSBmb3JtYXQgcmVxdWlyZSBjdXN0b20gZGVmYXVsdCB0ZXh0dXJlIHZpZXdcbiAgICAgICAgaWYgKHRoaXMudGV4dHVyZS5mb3JtYXQgPT09IFBJWEVMRk9STUFUX0RFUFRIU1RFTkNJTCkge1xuICAgICAgICAgICAgLy8gd2UgZXhwb3NlIHRoZSBkZXB0aCBwYXJ0IG9mIHRoZSBmb3JtYXRcbiAgICAgICAgICAgIHZpZXdEZXNjciA9IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdkZXB0aDI0cGx1cycsXG4gICAgICAgICAgICAgICAgYXNwZWN0OiAnZGVwdGgtb25seSdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmNyZWF0ZVZpZXcodmlld0Rlc2NyKTtcbiAgICB9XG5cbiAgICBkZXN0cm95KGRldmljZSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YW55fSBkZXZpY2UgLSBUaGUgR3JhcGhpY3MgRGV2aWNlLlxuICAgICAqIEByZXR1cm5zIHthbnl9IC0gUmV0dXJucyB0aGUgdmlldy5cbiAgICAgKi9cbiAgICBnZXRWaWV3KGRldmljZSkge1xuXG4gICAgICAgIHRoaXMudXBsb2FkSW1tZWRpYXRlKGRldmljZSwgdGhpcy50ZXh0dXJlKTtcblxuICAgICAgICBEZWJ1Zy5hc3NlcnQodGhpcy52aWV3KTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldztcbiAgICB9XG5cbiAgICBjcmVhdGVWaWV3KHZpZXdEZXNjcikge1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB2aWV3RGVzY3IgPz8ge307XG4gICAgICAgIGNvbnN0IHRleHR1cmVEZXNjciA9IHRoaXMuZGVzY3I7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLnRleHR1cmU7XG5cbiAgICAgICAgLy8gJzFkJywgJzJkJywgJzJkLWFycmF5JywgJ2N1YmUnLCAnY3ViZS1hcnJheScsICczZCdcbiAgICAgICAgY29uc3QgZGVmYXVsdFZpZXdEaW1lbnNpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGV4dHVyZS5jdWJlbWFwKSByZXR1cm4gJ2N1YmUnO1xuICAgICAgICAgICAgaWYgKHRleHR1cmUudm9sdW1lKSByZXR1cm4gJzNkJztcbiAgICAgICAgICAgIHJldHVybiAnMmQnO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKiBAdHlwZSB7R1BVVGV4dHVyZVZpZXdEZXNjcmlwdG9yfSAqL1xuICAgICAgICBjb25zdCBkZXNjciA9IHtcbiAgICAgICAgICAgIGZvcm1hdDogb3B0aW9ucy5mb3JtYXQgPz8gdGV4dHVyZURlc2NyLmZvcm1hdCxcbiAgICAgICAgICAgIGRpbWVuc2lvbjogb3B0aW9ucy5kaW1lbnNpb24gPz8gZGVmYXVsdFZpZXdEaW1lbnNpb24oKSxcbiAgICAgICAgICAgIGFzcGVjdDogb3B0aW9ucy5hc3BlY3QgPz8gJ2FsbCcsXG4gICAgICAgICAgICBiYXNlTWlwTGV2ZWw6IG9wdGlvbnMuYmFzZU1pcExldmVsID8/IDAsXG4gICAgICAgICAgICBtaXBMZXZlbENvdW50OiBvcHRpb25zLm1pcExldmVsQ291bnQgPz8gdGV4dHVyZURlc2NyLm1pcExldmVsQ291bnQsXG4gICAgICAgICAgICBiYXNlQXJyYXlMYXllcjogb3B0aW9ucy5iYXNlQXJyYXlMYXllciA/PyAwLFxuICAgICAgICAgICAgYXJyYXlMYXllckNvdW50OiBvcHRpb25zLmFycmF5TGF5ZXJDb3VudCA/PyB0ZXh0dXJlRGVzY3IuZGVwdGhPckFycmF5TGF5ZXJzXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuZ3B1VGV4dHVyZS5jcmVhdGVWaWV3KGRlc2NyKTtcbiAgICAgICAgRGVidWdIZWxwZXIuc2V0TGFiZWwodmlldywgYCR7dmlld0Rlc2NyID8gYEN1c3RvbVZpZXcke0pTT04uc3RyaW5naWZ5KHZpZXdEZXNjcil9YCA6ICdEZWZhdWx0Vmlldyd9OiR7dGhpcy50ZXh0dXJlLm5hbWV9YCk7XG5cbiAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRob3NlIHByb3BlcnRpZXMgZ2V0IGNoYW5nZWRcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YW55fSBkZXZpY2UgLSBUaGUgR3JhcGhpY3MgRGV2aWNlLlxuICAgICAqIEByZXR1cm5zIHthbnl9IC0gUmV0dXJucyB0aGUgc2FtcGxlci5cbiAgICAgKi9cbiAgICBnZXRTYW1wbGVyKGRldmljZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2FtcGxlcikge1xuXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuXG4gICAgICAgICAgICAvKiogQHR5cGUgR1BVU2FtcGxlckRlc2NyaXB0b3IgKi9cbiAgICAgICAgICAgIGNvbnN0IGRlc2NyID0ge1xuICAgICAgICAgICAgICAgIGFkZHJlc3NNb2RlVTogZ3B1QWRkcmVzc01vZGVzW3RleHR1cmUuYWRkcmVzc1VdLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NNb2RlVjogZ3B1QWRkcmVzc01vZGVzW3RleHR1cmUuYWRkcmVzc1ZdLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NNb2RlVzogZ3B1QWRkcmVzc01vZGVzW3RleHR1cmUuYWRkcmVzc1ddXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIGlzIHRlbXBvcmFyeSBhbmQgbmVlZHMgdG8gYmUgbWFkZSBnZW5lcmljXG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0dXJlLmZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUkdCQTMyRiB8fFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZS5mb3JtYXQgPT09IFBJWEVMRk9STUFUX0RFUFRIU1RFTkNJTCB8fFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZS5mb3JtYXQgPT09IFBJWEVMRk9STUFUX1JHQkExNkYpIHtcbiAgICAgICAgICAgICAgICBkZXNjci5tYWdGaWx0ZXIgPSAnbmVhcmVzdCc7XG4gICAgICAgICAgICAgICAgZGVzY3IubWluRmlsdGVyID0gJ25lYXJlc3QnO1xuICAgICAgICAgICAgICAgIGRlc2NyLm1pcG1hcEZpbHRlciA9ICduZWFyZXN0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGV4dHVyZS5jb21wYXJlT25SZWFkKSB7IC8vIGRlcHRoIGNvbXBhcmUgc2FtcGxlclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGRlcHRoIHRleHR1cmUgY2FuIGJlIGV4cG9zZWQgZm9yIHNhbXBsaW5nLCBub3Qgb25seSBjb21wYXJlIHNhbXBsaW5nIChmb3IgZXhhbXBsZSBkZWJ1Z1xuICAgICAgICAgICAgICAgIC8vIHJlbmRlcmluZyBvZiBkZXB0aCkuIEZpbmQgc29tZSBnb29kIHdheSB0byBleHBvc2UgdGhpcywgcGVyaGFwcyBiYXNlZCBvbiB3aGF0IHNhbXBsaW5nIHNoYWRlciBuZWVkcy5cbiAgICAgICAgICAgICAgICBkZXNjci5jb21wYXJlID0gJ2xlc3MnO1xuICAgICAgICAgICAgICAgIGRlc2NyLm1hZ0ZpbHRlciA9ICdsaW5lYXInO1xuICAgICAgICAgICAgICAgIGRlc2NyLm1pbkZpbHRlciA9ICdsaW5lYXInO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXNjci5tYWdGaWx0ZXIgPSAnbGluZWFyJztcbiAgICAgICAgICAgICAgICBkZXNjci5taW5GaWx0ZXIgPSAnbGluZWFyJztcbiAgICAgICAgICAgICAgICBkZXNjci5taXBtYXBGaWx0ZXIgPSAnbGluZWFyJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zYW1wbGVyID0gZGV2aWNlLndncHUuY3JlYXRlU2FtcGxlcihkZXNjcik7XG4gICAgICAgICAgICBEZWJ1Z0hlbHBlci5zZXRMYWJlbCh0aGlzLnNhbXBsZXIsIGBMaW5lYXJTYW1wbGVyYCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVyO1xuICAgIH1cblxuICAgIGxvc2VDb250ZXh0KCkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL3dlYmdwdS1ncmFwaGljcy1kZXZpY2UuanMnKS5XZWJncHVHcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlIGdyYXBoaWNzXG4gICAgICogZGV2aWNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi90ZXh0dXJlLmpzJykuVGV4dHVyZX0gdGV4dHVyZSAtIFRoZSB0ZXh0dXJlLlxuICAgICAqL1xuICAgIHVwbG9hZEltbWVkaWF0ZShkZXZpY2UsIHRleHR1cmUpIHtcblxuICAgICAgICBpZiAodGV4dHVyZS5fbmVlZHNVcGxvYWQgfHwgdGV4dHVyZS5fbmVlZHNNaXBtYXBzVXBsb2FkKSB7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZERhdGEoZGV2aWNlKTtcblxuICAgICAgICAgICAgdGV4dHVyZS5fbmVlZHNVcGxvYWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRleHR1cmUuX25lZWRzTWlwbWFwc1VwbG9hZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vd2ViZ3B1LWdyYXBoaWNzLWRldmljZS5qcycpLldlYmdwdUdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBUaGUgZ3JhcGhpY3NcbiAgICAgKiBkZXZpY2UuXG4gICAgICovXG4gICAgdXBsb2FkRGF0YShkZXZpY2UpIHtcblxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuICAgICAgICBjb25zdCB3Z3B1ID0gZGV2aWNlLndncHU7XG5cbiAgICAgICAgaWYgKHRoaXMudGV4dHVyZS5jdWJlbWFwKSB7XG4gICAgICAgICAgICBEZWJ1Zy53YXJuKCdDdWJlbWFwIHRleHR1cmUgZGF0YSB1cGxvYWQgaXMgbm90IHN1cHBvcnRlZCB5ZXQnLCB0aGlzLnRleHR1cmUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBsb2FkIHRleHR1cmUgZGF0YSBpZiBhbnlcbiAgICAgICAgY29uc3QgbWlwTGV2ZWwgPSAwO1xuICAgICAgICBjb25zdCBtaXBPYmplY3QgPSB0ZXh0dXJlLl9sZXZlbHNbbWlwTGV2ZWxdO1xuICAgICAgICBpZiAobWlwT2JqZWN0KSB7XG5cbiAgICAgICAgICAgIGlmIChtaXBPYmplY3QgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCkge1xuXG4gICAgICAgICAgICAgICAgd2dwdS5xdWV1ZS5jb3B5RXh0ZXJuYWxJbWFnZVRvVGV4dHVyZSh7IHNvdXJjZTogbWlwT2JqZWN0IH0sIHsgdGV4dHVyZTogdGhpcy5ncHVUZXh0dXJlIH0sIHRoaXMuZGVzY3Iuc2l6ZSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KG1pcE9iamVjdCkpIHsgLy8gdHlwZWQgYXJyYXlcblxuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkVHlwZWRBcnJheURhdGEod2dwdSwgbWlwT2JqZWN0KTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIERlYnVnLmVycm9yKCdVbnN1cHBvcnRlZCB0ZXh0dXJlIHNvdXJjZSBkYXRhJywgbWlwT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwbG9hZFR5cGVkQXJyYXlEYXRhKHdncHUsIGRhdGEpIHtcblxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7R1BVSW1hZ2VDb3B5VGV4dHVyZX0gKi9cbiAgICAgICAgY29uc3QgZGVzdCA9IHtcbiAgICAgICAgICAgIHRleHR1cmU6IHRoaXMuZ3B1VGV4dHVyZSxcbiAgICAgICAgICAgIG1pcExldmVsOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVE9ETzogaGFuZGxlIHVwZGF0ZSB0byBtaXBtYXAgbGV2ZWxzIG90aGVyIHRoYW4gMFxuICAgICAgICBjb25zdCBwaXhlbFNpemUgPSBwaXhlbEZvcm1hdEJ5dGVTaXplc1t0ZXh0dXJlLmZvcm1hdF0gPz8gMDtcbiAgICAgICAgRGVidWcuYXNzZXJ0KHBpeGVsU2l6ZSk7XG4gICAgICAgIGNvbnN0IGJ5dGVzUGVyUm93ID0gdGV4dHVyZS53aWR0aCAqIHBpeGVsU2l6ZTtcbiAgICAgICAgY29uc3QgYnl0ZVNpemUgPSBieXRlc1BlclJvdyAqIHRleHR1cmUuaGVpZ2h0O1xuXG4gICAgICAgIERlYnVnLmFzc2VydChieXRlU2l6ZSA9PT0gZGF0YS5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgYEVycm9yIHVwbG9hZGluZyBkYXRhIHRvIHRleHR1cmUsIHRoZSBkYXRhIGJ5dGUgc2l6ZSBvZiAke2RhdGEuYnl0ZUxlbmd0aH0gZG9lcyBub3QgbWF0Y2ggcmVxdWlyZWQgJHtieXRlU2l6ZX1gLCB0ZXh0dXJlKTtcblxuICAgICAgICAvKiogQHR5cGUge0dQVUltYWdlRGF0YUxheW91dH0gKi9cbiAgICAgICAgY29uc3QgZGF0YUxheW91dCA9IHtcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGJ5dGVzUGVyUm93OiBieXRlc1BlclJvdyxcbiAgICAgICAgICAgIHJvd3NQZXJJbWFnZTogdGV4dHVyZS5oZWlnaHRcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzaXplID0ge1xuICAgICAgICAgICAgd2lkdGg6IHRleHR1cmUud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRleHR1cmUuaGVpZ2h0LFxuICAgICAgICAgICAgZGVwdGhPckFycmF5TGF5ZXJzOiAxXG4gICAgICAgIH07XG5cbiAgICAgICAgd2dwdS5xdWV1ZS53cml0ZVRleHR1cmUoZGVzdCwgZGF0YSwgZGF0YUxheW91dCwgc2l6ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBXZWJncHVUZXh0dXJlIH07XG4iXSwibmFtZXMiOlsiZ3B1VGV4dHVyZUZvcm1hdHMiLCJQSVhFTEZPUk1BVF9BOCIsIlBJWEVMRk9STUFUX0w4IiwiUElYRUxGT1JNQVRfTEE4IiwiUElYRUxGT1JNQVRfUkdCNTY1IiwiUElYRUxGT1JNQVRfUkdCQTU1NTEiLCJQSVhFTEZPUk1BVF9SR0JBNCIsIlBJWEVMRk9STUFUX1JHQjgiLCJQSVhFTEZPUk1BVF9SR0JBOCIsIlBJWEVMRk9STUFUX0RYVDEiLCJQSVhFTEZPUk1BVF9EWFQzIiwiUElYRUxGT1JNQVRfRFhUNSIsIlBJWEVMRk9STUFUX1JHQjE2RiIsIlBJWEVMRk9STUFUX1JHQkExNkYiLCJQSVhFTEZPUk1BVF9SR0IzMkYiLCJQSVhFTEZPUk1BVF9SR0JBMzJGIiwiUElYRUxGT1JNQVRfUjMyRiIsIlBJWEVMRk9STUFUX0RFUFRIIiwiUElYRUxGT1JNQVRfREVQVEhTVEVOQ0lMIiwiUElYRUxGT1JNQVRfMTExMTEwRiIsIlBJWEVMRk9STUFUX1NSR0IiLCJQSVhFTEZPUk1BVF9TUkdCQSIsIlBJWEVMRk9STUFUX0VUQzEiLCJQSVhFTEZPUk1BVF9FVEMyX1JHQiIsIlBJWEVMRk9STUFUX0VUQzJfUkdCQSIsIlBJWEVMRk9STUFUX1BWUlRDXzJCUFBfUkdCXzEiLCJQSVhFTEZPUk1BVF9QVlJUQ18yQlBQX1JHQkFfMSIsIlBJWEVMRk9STUFUX1BWUlRDXzRCUFBfUkdCXzEiLCJQSVhFTEZPUk1BVF9QVlJUQ180QlBQX1JHQkFfMSIsIlBJWEVMRk9STUFUX0FTVENfNHg0IiwiUElYRUxGT1JNQVRfQVRDX1JHQiIsIlBJWEVMRk9STUFUX0FUQ19SR0JBIiwiUElYRUxGT1JNQVRfQkdSQTgiLCJncHVBZGRyZXNzTW9kZXMiLCJBRERSRVNTX1JFUEVBVCIsIkFERFJFU1NfQ0xBTVBfVE9fRURHRSIsIkFERFJFU1NfTUlSUk9SRURfUkVQRUFUIiwiV2ViZ3B1VGV4dHVyZSIsImNvbnN0cnVjdG9yIiwidGV4dHVyZSIsImdwdVRleHR1cmUiLCJ2aWV3Iiwic2FtcGxlciIsImRlc2NyIiwiZm9ybWF0IiwiRGVidWciLCJhc3NlcnQiLCJuYW1lIiwiY3JlYXRlIiwiZGV2aWNlIiwid2dwdSIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsImRlcHRoT3JBcnJheUxheWVycyIsImN1YmVtYXAiLCJtaXBMZXZlbENvdW50Iiwic2FtcGxlQ291bnQiLCJkaW1lbnNpb24iLCJ2b2x1bWUiLCJ1c2FnZSIsIkdQVVRleHR1cmVVc2FnZSIsIlRFWFRVUkVfQklORElORyIsIkNPUFlfRFNUIiwiUkVOREVSX0FUVEFDSE1FTlQiLCJDT1BZX1NSQyIsImNyZWF0ZVRleHR1cmUiLCJEZWJ1Z0hlbHBlciIsInNldExhYmVsIiwidmlld0Rlc2NyIiwiYXNwZWN0IiwiY3JlYXRlVmlldyIsImRlc3Ryb3kiLCJnZXRWaWV3IiwidXBsb2FkSW1tZWRpYXRlIiwib3B0aW9ucyIsInRleHR1cmVEZXNjciIsImRlZmF1bHRWaWV3RGltZW5zaW9uIiwiYmFzZU1pcExldmVsIiwiYmFzZUFycmF5TGF5ZXIiLCJhcnJheUxheWVyQ291bnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0U2FtcGxlciIsImFkZHJlc3NNb2RlVSIsImFkZHJlc3NVIiwiYWRkcmVzc01vZGVWIiwiYWRkcmVzc1YiLCJhZGRyZXNzTW9kZVciLCJhZGRyZXNzVyIsIm1hZ0ZpbHRlciIsIm1pbkZpbHRlciIsIm1pcG1hcEZpbHRlciIsImNvbXBhcmVPblJlYWQiLCJjb21wYXJlIiwiY3JlYXRlU2FtcGxlciIsImxvc2VDb250ZXh0IiwiX25lZWRzVXBsb2FkIiwiX25lZWRzTWlwbWFwc1VwbG9hZCIsInVwbG9hZERhdGEiLCJ3YXJuIiwibWlwTGV2ZWwiLCJtaXBPYmplY3QiLCJfbGV2ZWxzIiwiSW1hZ2VCaXRtYXAiLCJxdWV1ZSIsImNvcHlFeHRlcm5hbEltYWdlVG9UZXh0dXJlIiwic291cmNlIiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJ1cGxvYWRUeXBlZEFycmF5RGF0YSIsImVycm9yIiwiZGF0YSIsImRlc3QiLCJwaXhlbFNpemUiLCJwaXhlbEZvcm1hdEJ5dGVTaXplcyIsImJ5dGVzUGVyUm93IiwiYnl0ZVNpemUiLCJieXRlTGVuZ3RoIiwiZGF0YUxheW91dCIsIm9mZnNldCIsInJvd3NQZXJJbWFnZSIsIndyaXRlVGV4dHVyZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFjQTtBQUNBLE1BQU1BLGlCQUFpQixHQUFHLEVBQUUsQ0FBQTtBQUM1QkEsaUJBQWlCLENBQUNDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUN0Q0QsaUJBQWlCLENBQUNFLGNBQWMsQ0FBQyxHQUFHLFNBQVMsQ0FBQTtBQUM3Q0YsaUJBQWlCLENBQUNHLGVBQWUsQ0FBQyxHQUFHLFVBQVUsQ0FBQTtBQUMvQ0gsaUJBQWlCLENBQUNJLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFBO0FBQzFDSixpQkFBaUIsQ0FBQ0ssb0JBQW9CLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDNUNMLGlCQUFpQixDQUFDTSxpQkFBaUIsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUN6Q04saUJBQWlCLENBQUNPLGdCQUFnQixDQUFDLEdBQUcsWUFBWSxDQUFBO0FBQ2xEUCxpQkFBaUIsQ0FBQ1EsaUJBQWlCLENBQUMsR0FBRyxZQUFZLENBQUE7QUFDbkRSLGlCQUFpQixDQUFDUyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUN4Q1QsaUJBQWlCLENBQUNVLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxDQUFBO0FBQ3hDVixpQkFBaUIsQ0FBQ1csZ0JBQWdCLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDeENYLGlCQUFpQixDQUFDWSxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUMxQ1osaUJBQWlCLENBQUNhLG1CQUFtQixDQUFDLEdBQUcsYUFBYSxDQUFBO0FBQ3REYixpQkFBaUIsQ0FBQ2Msa0JBQWtCLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDMUNkLGlCQUFpQixDQUFDZSxtQkFBbUIsQ0FBQyxHQUFHLGFBQWEsQ0FBQTtBQUN0RGYsaUJBQWlCLENBQUNnQixnQkFBZ0IsQ0FBQyxHQUFHLFVBQVUsQ0FBQTtBQUNoRGhCLGlCQUFpQixDQUFDaUIsaUJBQWlCLENBQUMsR0FBRyxjQUFjLENBQUE7QUFDckRqQixpQkFBaUIsQ0FBQ2tCLHdCQUF3QixDQUFDLEdBQUcsc0JBQXNCLENBQUE7QUFDcEVsQixpQkFBaUIsQ0FBQ21CLG1CQUFtQixDQUFDLEdBQUcsZUFBZSxDQUFBO0FBQ3hEbkIsaUJBQWlCLENBQUNvQixnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUN4Q3BCLGlCQUFpQixDQUFDcUIsaUJBQWlCLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDekNyQixpQkFBaUIsQ0FBQ3NCLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxDQUFBO0FBQ3hDdEIsaUJBQWlCLENBQUN1QixvQkFBb0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUM1Q3ZCLGlCQUFpQixDQUFDd0IscUJBQXFCLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDN0N4QixpQkFBaUIsQ0FBQ3lCLDRCQUE0QixDQUFDLEdBQUcsRUFBRSxDQUFBO0FBQ3BEekIsaUJBQWlCLENBQUMwQiw2QkFBNkIsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUNyRDFCLGlCQUFpQixDQUFDMkIsNEJBQTRCLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDcEQzQixpQkFBaUIsQ0FBQzRCLDZCQUE2QixDQUFDLEdBQUcsRUFBRSxDQUFBO0FBQ3JENUIsaUJBQWlCLENBQUM2QixvQkFBb0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUM1QzdCLGlCQUFpQixDQUFDOEIsbUJBQW1CLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDM0M5QixpQkFBaUIsQ0FBQytCLG9CQUFvQixDQUFDLEdBQUcsRUFBRSxDQUFBO0FBQzVDL0IsaUJBQWlCLENBQUNnQyxpQkFBaUIsQ0FBQyxHQUFHLFlBQVksQ0FBQTs7QUFFbkQ7QUFDQSxNQUFNQyxlQUFlLEdBQUcsRUFBRSxDQUFBO0FBQzFCQSxlQUFlLENBQUNDLGNBQWMsQ0FBQyxHQUFHLFFBQVEsQ0FBQTtBQUMxQ0QsZUFBZSxDQUFDRSxxQkFBcUIsQ0FBQyxHQUFHLGVBQWUsQ0FBQTtBQUN4REYsZUFBZSxDQUFDRyx1QkFBdUIsQ0FBQyxHQUFHLGVBQWUsQ0FBQTs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLGFBQWEsQ0FBQztBQUNoQjtBQUNKO0FBQ0E7QUFDQTs7QUFHSTtBQUNKO0FBQ0E7QUFDQTs7QUFHSTtBQUNKO0FBQ0E7QUFDQTs7QUFHSTtBQUNKO0FBQ0E7QUFDQTs7QUFHSTtBQUNKO0FBQ0E7QUFDQTs7RUFHSUMsV0FBVyxDQUFDQyxPQUFPLEVBQUU7QUFBQSxJQUFBLElBQUEsQ0ExQnJCQyxVQUFVLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FNVkMsSUFBSSxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBTUpDLE9BQU8sR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQU1QQyxLQUFLLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FNTEMsTUFBTSxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBR0Y7SUFDQSxJQUFJLENBQUNMLE9BQU8sR0FBR0EsT0FBTyxDQUFBO0lBRXRCLElBQUksQ0FBQ0ssTUFBTSxHQUFHNUMsaUJBQWlCLENBQUN1QyxPQUFPLENBQUNLLE1BQU0sQ0FBQyxDQUFBO0lBQy9DQyxLQUFLLENBQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUNGLE1BQU0sS0FBSyxFQUFFLEVBQUcsQ0FBQSx1Q0FBQSxFQUF5Q0wsT0FBTyxDQUFDSyxNQUFPLGdCQUFlTCxPQUFPLENBQUNRLElBQUssQ0FBQyxDQUFBLEVBQUVSLE9BQU8sQ0FBQyxDQUFBO0FBRWpJLElBQUEsSUFBSSxDQUFDUyxNQUFNLENBQUNULE9BQU8sQ0FBQ1UsTUFBTSxDQUFDLENBQUE7QUFDL0IsR0FBQTtFQUVBRCxNQUFNLENBQUNDLE1BQU0sRUFBRTtBQUVYLElBQUEsTUFBTVYsT0FBTyxHQUFHLElBQUksQ0FBQ0EsT0FBTyxDQUFBO0FBQzVCLElBQUEsTUFBTVcsSUFBSSxHQUFHRCxNQUFNLENBQUNDLElBQUksQ0FBQTtJQUV4QixJQUFJLENBQUNQLEtBQUssR0FBRztBQUNUUSxNQUFBQSxJQUFJLEVBQUU7UUFDRkMsS0FBSyxFQUFFYixPQUFPLENBQUNhLEtBQUs7UUFDcEJDLE1BQU0sRUFBRWQsT0FBTyxDQUFDYyxNQUFNO0FBQ3RCQyxRQUFBQSxrQkFBa0IsRUFBRWYsT0FBTyxDQUFDZ0IsT0FBTyxHQUFHLENBQUMsR0FBRyxDQUFBO09BQzdDO01BQ0RYLE1BQU0sRUFBRSxJQUFJLENBQUNBLE1BQU07QUFDbkJZLE1BQUFBLGFBQWEsRUFBRSxDQUFDO0FBQ2hCQyxNQUFBQSxXQUFXLEVBQUUsQ0FBQztBQUNkQyxNQUFBQSxTQUFTLEVBQUVuQixPQUFPLENBQUNvQixNQUFNLEdBQUcsSUFBSSxHQUFHLElBQUk7QUFFdkM7QUFDQTtBQUNBQyxNQUFBQSxLQUFLLEVBQUVDLGVBQWUsQ0FBQ0MsZUFBZSxHQUFHRCxlQUFlLENBQUNFLFFBQVEsR0FBR0YsZUFBZSxDQUFDRyxpQkFBaUIsR0FBR0gsZUFBZSxDQUFDSSxRQUFBQTtLQUMzSCxDQUFBO0lBRUQsSUFBSSxDQUFDekIsVUFBVSxHQUFHVSxJQUFJLENBQUNnQixhQUFhLENBQUMsSUFBSSxDQUFDdkIsS0FBSyxDQUFDLENBQUE7QUFDaER3QixJQUFBQSxXQUFXLENBQUNDLFFBQVEsQ0FBQyxJQUFJLENBQUM1QixVQUFVLEVBQUcsQ0FBQSxFQUFFRCxPQUFPLENBQUNRLElBQUssQ0FBQSxFQUFFUixPQUFPLENBQUNnQixPQUFPLEdBQUcsV0FBVyxHQUFHLEVBQUcsQ0FBQSxFQUFFaEIsT0FBTyxDQUFDb0IsTUFBTSxHQUFHLE1BQU0sR0FBRyxFQUFHLENBQUEsQ0FBQyxDQUFDLENBQUE7O0FBRTVIO0FBQ0EsSUFBQSxJQUFJVSxTQUFTLENBQUE7O0FBRWI7QUFDQSxJQUFBLElBQUksSUFBSSxDQUFDOUIsT0FBTyxDQUFDSyxNQUFNLEtBQUsxQix3QkFBd0IsRUFBRTtBQUNsRDtBQUNBbUQsTUFBQUEsU0FBUyxHQUFHO0FBQ1J6QixRQUFBQSxNQUFNLEVBQUUsYUFBYTtBQUNyQjBCLFFBQUFBLE1BQU0sRUFBRSxZQUFBO09BQ1gsQ0FBQTtBQUNMLEtBQUE7SUFFQSxJQUFJLENBQUM3QixJQUFJLEdBQUcsSUFBSSxDQUFDOEIsVUFBVSxDQUFDRixTQUFTLENBQUMsQ0FBQTtBQUMxQyxHQUFBO0VBRUFHLE9BQU8sQ0FBQ3ZCLE1BQU0sRUFBRSxFQUNoQjs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtFQUNJd0IsT0FBTyxDQUFDeEIsTUFBTSxFQUFFO0lBRVosSUFBSSxDQUFDeUIsZUFBZSxDQUFDekIsTUFBTSxFQUFFLElBQUksQ0FBQ1YsT0FBTyxDQUFDLENBQUE7QUFFMUNNLElBQUFBLEtBQUssQ0FBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQ0wsSUFBSSxDQUFDLENBQUE7SUFDdkIsT0FBTyxJQUFJLENBQUNBLElBQUksQ0FBQTtBQUNwQixHQUFBO0VBRUE4QixVQUFVLENBQUNGLFNBQVMsRUFBRTtBQUFBLElBQUEsSUFBQSxlQUFBLEVBQUEsa0JBQUEsRUFBQSxlQUFBLEVBQUEscUJBQUEsRUFBQSxxQkFBQSxFQUFBLHFCQUFBLEVBQUEscUJBQUEsQ0FBQTtBQUVsQixJQUFBLE1BQU1NLE9BQU8sR0FBR04sU0FBUyxXQUFUQSxTQUFTLEdBQUksRUFBRSxDQUFBO0FBQy9CLElBQUEsTUFBTU8sWUFBWSxHQUFHLElBQUksQ0FBQ2pDLEtBQUssQ0FBQTtBQUMvQixJQUFBLE1BQU1KLE9BQU8sR0FBRyxJQUFJLENBQUNBLE9BQU8sQ0FBQTs7QUFFNUI7SUFDQSxNQUFNc0Msb0JBQW9CLEdBQUcsTUFBTTtBQUMvQixNQUFBLElBQUl0QyxPQUFPLENBQUNnQixPQUFPLEVBQUUsT0FBTyxNQUFNLENBQUE7QUFDbEMsTUFBQSxJQUFJaEIsT0FBTyxDQUFDb0IsTUFBTSxFQUFFLE9BQU8sSUFBSSxDQUFBO0FBQy9CLE1BQUEsT0FBTyxJQUFJLENBQUE7S0FDZCxDQUFBOztBQUVEO0FBQ0EsSUFBQSxNQUFNaEIsS0FBSyxHQUFHO0FBQ1ZDLE1BQUFBLE1BQU0scUJBQUUrQixPQUFPLENBQUMvQixNQUFNLEtBQUlnQyxJQUFBQSxHQUFBQSxlQUFBQSxHQUFBQSxZQUFZLENBQUNoQyxNQUFNO0FBQzdDYyxNQUFBQSxTQUFTLHdCQUFFaUIsT0FBTyxDQUFDakIsU0FBUyxLQUFBLElBQUEsR0FBQSxrQkFBQSxHQUFJbUIsb0JBQW9CLEVBQUU7QUFDdERQLE1BQUFBLE1BQU0sRUFBRUssQ0FBQUEsZUFBQUEsR0FBQUEsT0FBTyxDQUFDTCxNQUFNLDhCQUFJLEtBQUs7QUFDL0JRLE1BQUFBLFlBQVksRUFBRUgsQ0FBQUEscUJBQUFBLEdBQUFBLE9BQU8sQ0FBQ0csWUFBWSxvQ0FBSSxDQUFDO0FBQ3ZDdEIsTUFBQUEsYUFBYSwyQkFBRW1CLE9BQU8sQ0FBQ25CLGFBQWEsS0FBSW9CLElBQUFBLEdBQUFBLHFCQUFBQSxHQUFBQSxZQUFZLENBQUNwQixhQUFhO0FBQ2xFdUIsTUFBQUEsY0FBYyxFQUFFSixDQUFBQSxxQkFBQUEsR0FBQUEsT0FBTyxDQUFDSSxjQUFjLG9DQUFJLENBQUM7QUFDM0NDLE1BQUFBLGVBQWUsMkJBQUVMLE9BQU8sQ0FBQ0ssZUFBZSxLQUFBLElBQUEsR0FBQSxxQkFBQSxHQUFJSixZQUFZLENBQUN0QixrQkFBQUE7S0FDNUQsQ0FBQTtJQUVELE1BQU1iLElBQUksR0FBRyxJQUFJLENBQUNELFVBQVUsQ0FBQytCLFVBQVUsQ0FBQzVCLEtBQUssQ0FBQyxDQUFBO0lBQzlDd0IsV0FBVyxDQUFDQyxRQUFRLENBQUMzQixJQUFJLEVBQUcsR0FBRTRCLFNBQVMsR0FBSSxDQUFZWSxVQUFBQSxFQUFBQSxJQUFJLENBQUNDLFNBQVMsQ0FBQ2IsU0FBUyxDQUFFLENBQUMsQ0FBQSxHQUFHLGFBQWMsQ0FBQSxDQUFBLEVBQUcsSUFBSSxDQUFDOUIsT0FBTyxDQUFDUSxJQUFLLENBQUEsQ0FBQyxDQUFDLENBQUE7QUFFMUgsSUFBQSxPQUFPTixJQUFJLENBQUE7QUFDZixHQUFBOztBQUVBOztBQUVBO0FBQ0o7QUFDQTtBQUNBO0VBQ0kwQyxVQUFVLENBQUNsQyxNQUFNLEVBQUU7QUFDZixJQUFBLElBQUksQ0FBQyxJQUFJLENBQUNQLE9BQU8sRUFBRTtBQUVmLE1BQUEsTUFBTUgsT0FBTyxHQUFHLElBQUksQ0FBQ0EsT0FBTyxDQUFBOztBQUU1QjtBQUNBLE1BQUEsTUFBTUksS0FBSyxHQUFHO0FBQ1Z5QyxRQUFBQSxZQUFZLEVBQUVuRCxlQUFlLENBQUNNLE9BQU8sQ0FBQzhDLFFBQVEsQ0FBQztBQUMvQ0MsUUFBQUEsWUFBWSxFQUFFckQsZUFBZSxDQUFDTSxPQUFPLENBQUNnRCxRQUFRLENBQUM7QUFDL0NDLFFBQUFBLFlBQVksRUFBRXZELGVBQWUsQ0FBQ00sT0FBTyxDQUFDa0QsUUFBUSxDQUFBO09BQ2pELENBQUE7O0FBRUQ7TUFDQSxJQUFJLElBQUksQ0FBQ2xELE9BQU8sQ0FBQ0ssTUFBTSxLQUFLN0IsbUJBQW1CLElBQzNDLElBQUksQ0FBQ3dCLE9BQU8sQ0FBQ0ssTUFBTSxLQUFLMUIsd0JBQXdCLElBQ2hELElBQUksQ0FBQ3FCLE9BQU8sQ0FBQ0ssTUFBTSxLQUFLL0IsbUJBQW1CLEVBQUU7UUFDN0M4QixLQUFLLENBQUMrQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1FBQzNCL0MsS0FBSyxDQUFDZ0QsU0FBUyxHQUFHLFNBQVMsQ0FBQTtRQUMzQmhELEtBQUssQ0FBQ2lELFlBQVksR0FBRyxTQUFTLENBQUE7QUFDbEMsT0FBQyxNQUFNLElBQUlyRCxPQUFPLENBQUNzRCxhQUFhLEVBQUU7QUFBRTtBQUNoQztBQUNBO1FBQ0FsRCxLQUFLLENBQUNtRCxPQUFPLEdBQUcsTUFBTSxDQUFBO1FBQ3RCbkQsS0FBSyxDQUFDK0MsU0FBUyxHQUFHLFFBQVEsQ0FBQTtRQUMxQi9DLEtBQUssQ0FBQ2dELFNBQVMsR0FBRyxRQUFRLENBQUE7QUFDOUIsT0FBQyxNQUFNO1FBQ0hoRCxLQUFLLENBQUMrQyxTQUFTLEdBQUcsUUFBUSxDQUFBO1FBQzFCL0MsS0FBSyxDQUFDZ0QsU0FBUyxHQUFHLFFBQVEsQ0FBQTtRQUMxQmhELEtBQUssQ0FBQ2lELFlBQVksR0FBRyxRQUFRLENBQUE7QUFDakMsT0FBQTtNQUVBLElBQUksQ0FBQ2xELE9BQU8sR0FBR08sTUFBTSxDQUFDQyxJQUFJLENBQUM2QyxhQUFhLENBQUNwRCxLQUFLLENBQUMsQ0FBQTtNQUMvQ3dCLFdBQVcsQ0FBQ0MsUUFBUSxDQUFDLElBQUksQ0FBQzFCLE9BQU8sRUFBRyxlQUFjLENBQUMsQ0FBQTtBQUN2RCxLQUFBO0lBRUEsT0FBTyxJQUFJLENBQUNBLE9BQU8sQ0FBQTtBQUN2QixHQUFBO0FBRUFzRCxFQUFBQSxXQUFXLEdBQUcsRUFDZDs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0l0QixFQUFBQSxlQUFlLENBQUN6QixNQUFNLEVBQUVWLE9BQU8sRUFBRTtBQUU3QixJQUFBLElBQUlBLE9BQU8sQ0FBQzBELFlBQVksSUFBSTFELE9BQU8sQ0FBQzJELG1CQUFtQixFQUFFO0FBQ3JELE1BQUEsSUFBSSxDQUFDQyxVQUFVLENBQUNsRCxNQUFNLENBQUMsQ0FBQTtNQUV2QlYsT0FBTyxDQUFDMEQsWUFBWSxHQUFHLEtBQUssQ0FBQTtNQUM1QjFELE9BQU8sQ0FBQzJELG1CQUFtQixHQUFHLEtBQUssQ0FBQTtBQUN2QyxLQUFBO0FBQ0osR0FBQTs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtFQUNJQyxVQUFVLENBQUNsRCxNQUFNLEVBQUU7QUFFZixJQUFBLE1BQU1WLE9BQU8sR0FBRyxJQUFJLENBQUNBLE9BQU8sQ0FBQTtBQUM1QixJQUFBLE1BQU1XLElBQUksR0FBR0QsTUFBTSxDQUFDQyxJQUFJLENBQUE7QUFFeEIsSUFBQSxJQUFJLElBQUksQ0FBQ1gsT0FBTyxDQUFDZ0IsT0FBTyxFQUFFO01BQ3RCVixLQUFLLENBQUN1RCxJQUFJLENBQUMsa0RBQWtELEVBQUUsSUFBSSxDQUFDN0QsT0FBTyxDQUFDLENBQUE7QUFDNUUsTUFBQSxPQUFBO0FBQ0osS0FBQTs7QUFFQTtJQUNBLE1BQU04RCxRQUFRLEdBQUcsQ0FBQyxDQUFBO0FBQ2xCLElBQUEsTUFBTUMsU0FBUyxHQUFHL0QsT0FBTyxDQUFDZ0UsT0FBTyxDQUFDRixRQUFRLENBQUMsQ0FBQTtBQUMzQyxJQUFBLElBQUlDLFNBQVMsRUFBRTtNQUVYLElBQUlBLFNBQVMsWUFBWUUsV0FBVyxFQUFFO0FBRWxDdEQsUUFBQUEsSUFBSSxDQUFDdUQsS0FBSyxDQUFDQywwQkFBMEIsQ0FBQztBQUFFQyxVQUFBQSxNQUFNLEVBQUVMLFNBQUFBO0FBQVUsU0FBQyxFQUFFO1VBQUUvRCxPQUFPLEVBQUUsSUFBSSxDQUFDQyxVQUFBQTtBQUFXLFNBQUMsRUFBRSxJQUFJLENBQUNHLEtBQUssQ0FBQ1EsSUFBSSxDQUFDLENBQUE7T0FFOUcsTUFBTSxJQUFJeUQsV0FBVyxDQUFDQyxNQUFNLENBQUNQLFNBQVMsQ0FBQyxFQUFFO0FBQUU7O0FBRXhDLFFBQUEsSUFBSSxDQUFDUSxvQkFBb0IsQ0FBQzVELElBQUksRUFBRW9ELFNBQVMsQ0FBQyxDQUFBO0FBRTlDLE9BQUMsTUFBTTtBQUVIekQsUUFBQUEsS0FBSyxDQUFDa0UsS0FBSyxDQUFDLGlDQUFpQyxFQUFFVCxTQUFTLENBQUMsQ0FBQTtBQUM3RCxPQUFBO0FBQ0osS0FBQTtBQUNKLEdBQUE7QUFFQVEsRUFBQUEsb0JBQW9CLENBQUM1RCxJQUFJLEVBQUU4RCxJQUFJLEVBQUU7QUFBQSxJQUFBLElBQUEscUJBQUEsQ0FBQTtBQUU3QixJQUFBLE1BQU16RSxPQUFPLEdBQUcsSUFBSSxDQUFDQSxPQUFPLENBQUE7O0FBRTVCO0FBQ0EsSUFBQSxNQUFNMEUsSUFBSSxHQUFHO01BQ1QxRSxPQUFPLEVBQUUsSUFBSSxDQUFDQyxVQUFVO0FBQ3hCNkQsTUFBQUEsUUFBUSxFQUFFLENBQUE7S0FDYixDQUFBOztBQUVEO0lBQ0EsTUFBTWEsU0FBUyw0QkFBR0Msb0JBQW9CLENBQUM1RSxPQUFPLENBQUNLLE1BQU0sQ0FBQyxLQUFBLElBQUEsR0FBQSxxQkFBQSxHQUFJLENBQUMsQ0FBQTtBQUMzREMsSUFBQUEsS0FBSyxDQUFDQyxNQUFNLENBQUNvRSxTQUFTLENBQUMsQ0FBQTtBQUN2QixJQUFBLE1BQU1FLFdBQVcsR0FBRzdFLE9BQU8sQ0FBQ2EsS0FBSyxHQUFHOEQsU0FBUyxDQUFBO0FBQzdDLElBQUEsTUFBTUcsUUFBUSxHQUFHRCxXQUFXLEdBQUc3RSxPQUFPLENBQUNjLE1BQU0sQ0FBQTtBQUU3Q1IsSUFBQUEsS0FBSyxDQUFDQyxNQUFNLENBQUN1RSxRQUFRLEtBQUtMLElBQUksQ0FBQ00sVUFBVSxFQUMzQixDQUF5RE4sdURBQUFBLEVBQUFBLElBQUksQ0FBQ00sVUFBVyxDQUFBLHlCQUFBLEVBQTJCRCxRQUFTLENBQUMsQ0FBQSxFQUFFOUUsT0FBTyxDQUFDLENBQUE7O0FBRXRJO0FBQ0EsSUFBQSxNQUFNZ0YsVUFBVSxHQUFHO0FBQ2ZDLE1BQUFBLE1BQU0sRUFBRSxDQUFDO0FBQ1RKLE1BQUFBLFdBQVcsRUFBRUEsV0FBVztNQUN4QkssWUFBWSxFQUFFbEYsT0FBTyxDQUFDYyxNQUFBQTtLQUN6QixDQUFBO0FBRUQsSUFBQSxNQUFNRixJQUFJLEdBQUc7TUFDVEMsS0FBSyxFQUFFYixPQUFPLENBQUNhLEtBQUs7TUFDcEJDLE1BQU0sRUFBRWQsT0FBTyxDQUFDYyxNQUFNO0FBQ3RCQyxNQUFBQSxrQkFBa0IsRUFBRSxDQUFBO0tBQ3ZCLENBQUE7QUFFREosSUFBQUEsSUFBSSxDQUFDdUQsS0FBSyxDQUFDaUIsWUFBWSxDQUFDVCxJQUFJLEVBQUVELElBQUksRUFBRU8sVUFBVSxFQUFFcEUsSUFBSSxDQUFDLENBQUE7QUFDekQsR0FBQTtBQUNKOzs7OyJ9
