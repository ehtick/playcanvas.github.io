/**
 * @license
 * PlayCanvas Engine v1.62.0-dev revision 7d088032c (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { Debug, DebugHelper } from '../../../core/debug.js';
import { SAMPLETYPE_FLOAT, SAMPLETYPE_UNFILTERABLE_FLOAT, SAMPLETYPE_DEPTH } from '../constants.js';
import { WebgpuUtils } from './webgpu-utils.js';

const samplerTypes = {};
samplerTypes[SAMPLETYPE_FLOAT] = 'filtering';
samplerTypes[SAMPLETYPE_UNFILTERABLE_FLOAT] = 'non-filtering';
samplerTypes[SAMPLETYPE_DEPTH] = 'comparison';

/**
 * A WebGPU implementation of the BindGroupFormat, which is a wrapper over GPUBindGroupLayout.
 *
 * @ignore
 */
class WebgpuBindGroupFormat {
  /**
   * @param {import('../bind-group-format.js').BindGroupFormat} bindGroupFormat - Bind group format.
   */
  constructor(bindGroupFormat) {
    /** @type {import('./webgpu-graphics-device.js').WebgpuGraphicsDevice} */
    const device = bindGroupFormat.device;
    const {
      key,
      descr
    } = this.createDescriptor(bindGroupFormat);

    /**
     * Unique key, used for caching
     *
     * @type {string}
     */
    this.key = key;

    // keep descr in debug mode
    Debug.call(() => {
      this.descr = descr;
    });

    /**
     * @type {GPUBindGroupLayout}
     * @private
     */
    this.bindGroupLayout = device.wgpu.createBindGroupLayout(descr);
    DebugHelper.setLabel(this.bindGroupLayout, bindGroupFormat.name);
  }
  destroy() {
    this.bindGroupLayout = null;
  }
  loseContext() {
    // this.bindGroupLayout = null;
  }

  /**
   * Returns texture binding slot.
   *
   * @param {import('../bind-group-format.js').BindGroupFormat} bindGroupFormat - Bind group format.
   * @param {number} index - The index of the texture.
   * @returns {number} - The slot index.
   */
  getTextureSlot(bindGroupFormat, index) {
    // each texture takes 2 slots (texture, sampler) and those are added after uniform buffers
    return bindGroupFormat.bufferFormats.length + index * 2;
  }

  /**
   * @param {any} bindGroupFormat - The format of the bind group.
   * @returns {any} Returns the bind group descriptor.
   */
  createDescriptor(bindGroupFormat) {
    // all WebGPU bindings:
    // - buffer: GPUBufferBindingLayout, resource type is GPUBufferBinding
    // - sampler: GPUSamplerBindingLayout, resource type is GPUSampler
    // - texture: GPUTextureBindingLayout, resource type is GPUTextureView
    // - storageTexture: GPUStorageTextureBindingLayout, resource type is GPUTextureView
    // - externalTexture: GPUExternalTextureBindingLayout, resource type is GPUExternalTexture
    const entries = [];

    // generate unique key
    let key = '';
    let index = 0;
    bindGroupFormat.bufferFormats.forEach(bufferFormat => {
      const visibility = WebgpuUtils.shaderStage(bufferFormat.visibility);
      key += `#${index}U:${visibility}`;
      entries.push({
        binding: index++,
        visibility: visibility,
        buffer: {
          type: 'uniform',
          // "uniform", "storage", "read-only-storage"

          // whether this binding requires a dynamic offset
          hasDynamicOffset: false

          // defaults to 0 meaning no validation, can do early size validation using it
          // minBindingSize
        }
      });
    });

    bindGroupFormat.textureFormats.forEach(textureFormat => {
      const visibility = WebgpuUtils.shaderStage(textureFormat.visibility);

      // texture
      const sampleType = textureFormat.sampleType;
      const viewDimension = textureFormat.textureDimension;
      const multisampled = false;
      key += `#${index}T:${visibility}-${sampleType}-${viewDimension}-${multisampled}`;
      entries.push({
        binding: index++,
        visibility: visibility,
        texture: {
          // Indicates the type required for texture views bound to this binding.
          // "float", "unfilterable-float", "depth", "sint", "uint",
          sampleType: sampleType,
          // Indicates the required dimension for texture views bound to this binding.
          // "1d", "2d", "2d-array", "cube", "cube-array", "3d"
          viewDimension: viewDimension,
          // Indicates whether or not texture views bound to this binding must be multisampled
          multisampled: multisampled
        }
      });

      // sampler
      const type = samplerTypes[sampleType];
      Debug.assert(type);
      key += `#${index}S:${visibility}-${type}`;
      entries.push({
        binding: index++,
        visibility: visibility,
        sampler: {
          // Indicates the required type of a sampler bound to this bindings
          // 'filtering', 'non-filtering', 'comparison'
          type: type
        }
      });
    });

    /** @type {GPUBindGroupLayoutDescriptor} */
    const descr = {
      entries: entries
    };
    return {
      key,
      descr
    };
  }
}

export { WebgpuBindGroupFormat };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1LWJpbmQtZ3JvdXAtZm9ybWF0LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvcGxhdGZvcm0vZ3JhcGhpY3Mvd2ViZ3B1L3dlYmdwdS1iaW5kLWdyb3VwLWZvcm1hdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZywgRGVidWdIZWxwZXIgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IFNBTVBMRVRZUEVfRkxPQVQsIFNBTVBMRVRZUEVfVU5GSUxURVJBQkxFX0ZMT0FULCBTQU1QTEVUWVBFX0RFUFRIIH0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IHsgV2ViZ3B1VXRpbHMgfSBmcm9tICcuL3dlYmdwdS11dGlscy5qcyc7XG5cbmNvbnN0IHNhbXBsZXJUeXBlcyA9IHsgfTtcbnNhbXBsZXJUeXBlc1tTQU1QTEVUWVBFX0ZMT0FUXSA9ICdmaWx0ZXJpbmcnO1xuc2FtcGxlclR5cGVzW1NBTVBMRVRZUEVfVU5GSUxURVJBQkxFX0ZMT0FUXSA9ICdub24tZmlsdGVyaW5nJztcbnNhbXBsZXJUeXBlc1tTQU1QTEVUWVBFX0RFUFRIXSA9ICdjb21wYXJpc29uJztcblxuLyoqXG4gKiBBIFdlYkdQVSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQmluZEdyb3VwRm9ybWF0LCB3aGljaCBpcyBhIHdyYXBwZXIgb3ZlciBHUFVCaW5kR3JvdXBMYXlvdXQuXG4gKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBXZWJncHVCaW5kR3JvdXBGb3JtYXQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9iaW5kLWdyb3VwLWZvcm1hdC5qcycpLkJpbmRHcm91cEZvcm1hdH0gYmluZEdyb3VwRm9ybWF0IC0gQmluZCBncm91cCBmb3JtYXQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYmluZEdyb3VwRm9ybWF0KSB7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoJy4vd2ViZ3B1LWdyYXBoaWNzLWRldmljZS5qcycpLldlYmdwdUdyYXBoaWNzRGV2aWNlfSAqL1xuICAgICAgICBjb25zdCBkZXZpY2UgPSBiaW5kR3JvdXBGb3JtYXQuZGV2aWNlO1xuXG4gICAgICAgIGNvbnN0IHsga2V5LCBkZXNjciB9ID0gdGhpcy5jcmVhdGVEZXNjcmlwdG9yKGJpbmRHcm91cEZvcm1hdCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuaXF1ZSBrZXksIHVzZWQgZm9yIGNhY2hpbmdcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXG4gICAgICAgIC8vIGtlZXAgZGVzY3IgaW4gZGVidWcgbW9kZVxuICAgICAgICBEZWJ1Zy5jYWxsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVzY3IgPSBkZXNjcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtHUFVCaW5kR3JvdXBMYXlvdXR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJpbmRHcm91cExheW91dCA9IGRldmljZS53Z3B1LmNyZWF0ZUJpbmRHcm91cExheW91dChkZXNjcik7XG4gICAgICAgIERlYnVnSGVscGVyLnNldExhYmVsKHRoaXMuYmluZEdyb3VwTGF5b3V0LCBiaW5kR3JvdXBGb3JtYXQubmFtZSk7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5iaW5kR3JvdXBMYXlvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGxvc2VDb250ZXh0KCkge1xuICAgICAgICAvLyB0aGlzLmJpbmRHcm91cExheW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0ZXh0dXJlIGJpbmRpbmcgc2xvdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9iaW5kLWdyb3VwLWZvcm1hdC5qcycpLkJpbmRHcm91cEZvcm1hdH0gYmluZEdyb3VwRm9ybWF0IC0gQmluZCBncm91cCBmb3JtYXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSB0ZXh0dXJlLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gVGhlIHNsb3QgaW5kZXguXG4gICAgICovXG4gICAgZ2V0VGV4dHVyZVNsb3QoYmluZEdyb3VwRm9ybWF0LCBpbmRleCkge1xuICAgICAgICAvLyBlYWNoIHRleHR1cmUgdGFrZXMgMiBzbG90cyAodGV4dHVyZSwgc2FtcGxlcikgYW5kIHRob3NlIGFyZSBhZGRlZCBhZnRlciB1bmlmb3JtIGJ1ZmZlcnNcbiAgICAgICAgcmV0dXJuIGJpbmRHcm91cEZvcm1hdC5idWZmZXJGb3JtYXRzLmxlbmd0aCArIGluZGV4ICogMjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2FueX0gYmluZEdyb3VwRm9ybWF0IC0gVGhlIGZvcm1hdCBvZiB0aGUgYmluZCBncm91cC5cbiAgICAgKiBAcmV0dXJucyB7YW55fSBSZXR1cm5zIHRoZSBiaW5kIGdyb3VwIGRlc2NyaXB0b3IuXG4gICAgICovXG4gICAgY3JlYXRlRGVzY3JpcHRvcihiaW5kR3JvdXBGb3JtYXQpIHtcbiAgICAgICAgLy8gYWxsIFdlYkdQVSBiaW5kaW5nczpcbiAgICAgICAgLy8gLSBidWZmZXI6IEdQVUJ1ZmZlckJpbmRpbmdMYXlvdXQsIHJlc291cmNlIHR5cGUgaXMgR1BVQnVmZmVyQmluZGluZ1xuICAgICAgICAvLyAtIHNhbXBsZXI6IEdQVVNhbXBsZXJCaW5kaW5nTGF5b3V0LCByZXNvdXJjZSB0eXBlIGlzIEdQVVNhbXBsZXJcbiAgICAgICAgLy8gLSB0ZXh0dXJlOiBHUFVUZXh0dXJlQmluZGluZ0xheW91dCwgcmVzb3VyY2UgdHlwZSBpcyBHUFVUZXh0dXJlVmlld1xuICAgICAgICAvLyAtIHN0b3JhZ2VUZXh0dXJlOiBHUFVTdG9yYWdlVGV4dHVyZUJpbmRpbmdMYXlvdXQsIHJlc291cmNlIHR5cGUgaXMgR1BVVGV4dHVyZVZpZXdcbiAgICAgICAgLy8gLSBleHRlcm5hbFRleHR1cmU6IEdQVUV4dGVybmFsVGV4dHVyZUJpbmRpbmdMYXlvdXQsIHJlc291cmNlIHR5cGUgaXMgR1BVRXh0ZXJuYWxUZXh0dXJlXG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBbXTtcblxuICAgICAgICAvLyBnZW5lcmF0ZSB1bmlxdWUga2V5XG4gICAgICAgIGxldCBrZXkgPSAnJztcblxuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBiaW5kR3JvdXBGb3JtYXQuYnVmZmVyRm9ybWF0cy5mb3JFYWNoKChidWZmZXJGb3JtYXQpID0+IHtcblxuICAgICAgICAgICAgY29uc3QgdmlzaWJpbGl0eSA9IFdlYmdwdVV0aWxzLnNoYWRlclN0YWdlKGJ1ZmZlckZvcm1hdC52aXNpYmlsaXR5KTtcbiAgICAgICAgICAgIGtleSArPSBgIyR7aW5kZXh9VToke3Zpc2liaWxpdHl9YDtcblxuICAgICAgICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBiaW5kaW5nOiBpbmRleCsrLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2liaWxpdHksXG5cbiAgICAgICAgICAgICAgICBidWZmZXI6IHtcblxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndW5pZm9ybScsIC8vIFwidW5pZm9ybVwiLCBcInN0b3JhZ2VcIiwgXCJyZWFkLW9ubHktc3RvcmFnZVwiXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gd2hldGhlciB0aGlzIGJpbmRpbmcgcmVxdWlyZXMgYSBkeW5hbWljIG9mZnNldFxuICAgICAgICAgICAgICAgICAgICBoYXNEeW5hbWljT2Zmc2V0OiBmYWxzZVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHRzIHRvIDAgbWVhbmluZyBubyB2YWxpZGF0aW9uLCBjYW4gZG8gZWFybHkgc2l6ZSB2YWxpZGF0aW9uIHVzaW5nIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIG1pbkJpbmRpbmdTaXplXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJpbmRHcm91cEZvcm1hdC50ZXh0dXJlRm9ybWF0cy5mb3JFYWNoKCh0ZXh0dXJlRm9ybWF0KSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IHZpc2liaWxpdHkgPSBXZWJncHVVdGlscy5zaGFkZXJTdGFnZSh0ZXh0dXJlRm9ybWF0LnZpc2liaWxpdHkpO1xuXG4gICAgICAgICAgICAvLyB0ZXh0dXJlXG4gICAgICAgICAgICBjb25zdCBzYW1wbGVUeXBlID0gdGV4dHVyZUZvcm1hdC5zYW1wbGVUeXBlO1xuICAgICAgICAgICAgY29uc3Qgdmlld0RpbWVuc2lvbiA9IHRleHR1cmVGb3JtYXQudGV4dHVyZURpbWVuc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IG11bHRpc2FtcGxlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBrZXkgKz0gYCMke2luZGV4fVQ6JHt2aXNpYmlsaXR5fS0ke3NhbXBsZVR5cGV9LSR7dmlld0RpbWVuc2lvbn0tJHttdWx0aXNhbXBsZWR9YDtcblxuICAgICAgICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBiaW5kaW5nOiBpbmRleCsrLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2liaWxpdHksXG4gICAgICAgICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbmRpY2F0ZXMgdGhlIHR5cGUgcmVxdWlyZWQgZm9yIHRleHR1cmUgdmlld3MgYm91bmQgdG8gdGhpcyBiaW5kaW5nLlxuICAgICAgICAgICAgICAgICAgICAvLyBcImZsb2F0XCIsIFwidW5maWx0ZXJhYmxlLWZsb2F0XCIsIFwiZGVwdGhcIiwgXCJzaW50XCIsIFwidWludFwiLFxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVUeXBlOiBzYW1wbGVUeXBlLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEluZGljYXRlcyB0aGUgcmVxdWlyZWQgZGltZW5zaW9uIGZvciB0ZXh0dXJlIHZpZXdzIGJvdW5kIHRvIHRoaXMgYmluZGluZy5cbiAgICAgICAgICAgICAgICAgICAgLy8gXCIxZFwiLCBcIjJkXCIsIFwiMmQtYXJyYXlcIiwgXCJjdWJlXCIsIFwiY3ViZS1hcnJheVwiLCBcIjNkXCJcbiAgICAgICAgICAgICAgICAgICAgdmlld0RpbWVuc2lvbjogdmlld0RpbWVuc2lvbixcblxuICAgICAgICAgICAgICAgICAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdGV4dHVyZSB2aWV3cyBib3VuZCB0byB0aGlzIGJpbmRpbmcgbXVzdCBiZSBtdWx0aXNhbXBsZWRcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlzYW1wbGVkOiBtdWx0aXNhbXBsZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gc2FtcGxlclxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHNhbXBsZXJUeXBlc1tzYW1wbGVUeXBlXTtcbiAgICAgICAgICAgIERlYnVnLmFzc2VydCh0eXBlKTtcblxuICAgICAgICAgICAga2V5ICs9IGAjJHtpbmRleH1TOiR7dmlzaWJpbGl0eX0tJHt0eXBlfWA7XG5cbiAgICAgICAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgYmluZGluZzogaW5kZXgrKyxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmlsaXR5LFxuICAgICAgICAgICAgICAgIHNhbXBsZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5kaWNhdGVzIHRoZSByZXF1aXJlZCB0eXBlIG9mIGEgc2FtcGxlciBib3VuZCB0byB0aGlzIGJpbmRpbmdzXG4gICAgICAgICAgICAgICAgICAgIC8vICdmaWx0ZXJpbmcnLCAnbm9uLWZpbHRlcmluZycsICdjb21wYXJpc29uJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7R1BVQmluZEdyb3VwTGF5b3V0RGVzY3JpcHRvcn0gKi9cbiAgICAgICAgY29uc3QgZGVzY3IgPSB7XG4gICAgICAgICAgICBlbnRyaWVzOiBlbnRyaWVzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGRlc2NyXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5leHBvcnQgeyBXZWJncHVCaW5kR3JvdXBGb3JtYXQgfTtcbiJdLCJuYW1lcyI6WyJzYW1wbGVyVHlwZXMiLCJTQU1QTEVUWVBFX0ZMT0FUIiwiU0FNUExFVFlQRV9VTkZJTFRFUkFCTEVfRkxPQVQiLCJTQU1QTEVUWVBFX0RFUFRIIiwiV2ViZ3B1QmluZEdyb3VwRm9ybWF0IiwiY29uc3RydWN0b3IiLCJiaW5kR3JvdXBGb3JtYXQiLCJkZXZpY2UiLCJrZXkiLCJkZXNjciIsImNyZWF0ZURlc2NyaXB0b3IiLCJEZWJ1ZyIsImNhbGwiLCJiaW5kR3JvdXBMYXlvdXQiLCJ3Z3B1IiwiY3JlYXRlQmluZEdyb3VwTGF5b3V0IiwiRGVidWdIZWxwZXIiLCJzZXRMYWJlbCIsIm5hbWUiLCJkZXN0cm95IiwibG9zZUNvbnRleHQiLCJnZXRUZXh0dXJlU2xvdCIsImluZGV4IiwiYnVmZmVyRm9ybWF0cyIsImxlbmd0aCIsImVudHJpZXMiLCJmb3JFYWNoIiwiYnVmZmVyRm9ybWF0IiwidmlzaWJpbGl0eSIsIldlYmdwdVV0aWxzIiwic2hhZGVyU3RhZ2UiLCJwdXNoIiwiYmluZGluZyIsImJ1ZmZlciIsInR5cGUiLCJoYXNEeW5hbWljT2Zmc2V0IiwidGV4dHVyZUZvcm1hdHMiLCJ0ZXh0dXJlRm9ybWF0Iiwic2FtcGxlVHlwZSIsInZpZXdEaW1lbnNpb24iLCJ0ZXh0dXJlRGltZW5zaW9uIiwibXVsdGlzYW1wbGVkIiwidGV4dHVy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
