/**
 * @license
 * PlayCanvas Engine v1.62.0-dev revision 7d088032c (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { SEMANTIC_POSITION, DEVICETYPE_WEBGPU, SEMANTIC_ATTR12, SEMANTIC_ATTR13, SEMANTIC_ATTR14, SEMANTIC_ATTR15, SEMANTIC_NORMAL, SEMANTIC_TANGENT, SEMANTIC_COLOR, SEMANTIC_ATTR8, SEMANTIC_ATTR9, SEMANTIC_ATTR10, SEMANTIC_ATTR11, SEMANTIC_BLENDWEIGHT, SEMANTIC_BLENDINDICES, PIXELFORMAT_RGBA8, SHADERTAG_MATERIAL, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1 } from '../../../platform/graphics/constants.js';
import { shaderChunks } from '../chunks/chunks.js';
import { ChunkUtils } from '../chunk-utils.js';
import { SPRITE_RENDERMODE_SLICED, SPRITE_RENDERMODE_TILED, LIGHTTYPE_SPOT, LIGHTSHAPE_SPHERE, LIGHTSHAPE_DISK, LIGHTSHAPE_RECT, SHADER_DEPTH, SHADOW_VSM32, SHADOW_PCF3, LIGHTTYPE_OMNI, SHADOW_VSM8, LIGHTTYPE_DIRECTIONAL, SHADOW_PCF5, LIGHTSHAPE_PUNCTUAL, FRESNEL_SCHLICK, SPECOCC_GLOSSDEPENDENT, SPECOCC_AO, SHADOW_VSM16, SPECULAR_PHONG, shadowTypeToString, LIGHTFALLOFF_LINEAR, BLEND_NORMAL, BLEND_PREMULTIPLIED, BLEND_ADDITIVEALPHA, SHADER_PICK } from '../../constants.js';
import { LightsBuffer } from '../../lighting/lights-buffer.js';
import { ShaderPass } from '../../shader-pass.js';
import { skinCode, begin, end, gammaCode, tonemapCode, fogCode } from './common.js';
import { validateUserChunks } from '../chunks/chunk-validation.js';
import { ShaderUtils } from '../../../platform/graphics/shader-utils.js';

const builtinAttributes = {
  vertex_normal: SEMANTIC_NORMAL,
  vertex_tangent: SEMANTIC_TANGENT,
  vertex_texCoord0: SEMANTIC_TEXCOORD0,
  vertex_texCoord1: SEMANTIC_TEXCOORD1,
  vertex_color: SEMANTIC_COLOR,
  vertex_boneWeights: SEMANTIC_BLENDWEIGHT,
  vertex_boneIndices: SEMANTIC_BLENDINDICES
};
const builtinVaryings = {
  vVertexColor: "vec4",
  vPositionW: "vec3",
  vNormalV: "vec3",
  vNormalW: "vec3",
  vTangentW: "vec3",
  vBinormalW: "vec3",
  vObjectSpaceUpW: "vec3",
  vUv0: "vec2",
  vUv1: "vec2"
};
class LitShader {
  constructor(device, options) {
    this.device = device;
    this.options = options;

    // resolve custom chunk attributes
    this.attributes = {
      vertex_position: SEMANTIC_POSITION
    };
    if (options.chunks) {
      this.chunks = {};
      const userChunks = options.chunks;
      validateUserChunks(options.chunks);
      for (const chunkName in shaderChunks) {
        if (userChunks.hasOwnProperty(chunkName)) {
          const chunk = userChunks[chunkName];
          for (const a in builtinAttributes) {
            if (builtinAttributes.hasOwnProperty(a) && chunk.indexOf(a) >= 0) {
              this.attributes[a] = builtinAttributes[a];
            }
          }
          this.chunks[chunkName] = chunk;
        } else {
          this.chunks[chunkName] = shaderChunks[chunkName];
        }
      }
    } else {
      this.chunks = shaderChunks;
    }
    this.lighting = options.lights.length > 0 || options.dirLightMapEnabled || options.clusteredLightingEnabled;
    this.reflections = !!options.reflectionSource;
    this.shadowPass = ShaderPass.isShadow(options.pass);
    this.needsNormal = this.lighting || this.reflections || options.useSpecular || options.ambientSH || options.heightMapEnabled || options.enableGGXSpecular || options.clusteredLightingEnabled && !this.shadowPass || options.clearCoatNormalMapEnabled;
    this.needsNormal = this.needsNormal && !this.shadowPass;
    this.needsSceneColor = options.useDynamicRefraction;
    this.needsScreenSize = options.useDynamicRefraction;
    this.needsTransforms = options.useDynamicRefraction;

    // generated by vshader
    this.varyings = "";
    this.vshader = null;

    // supplied by caller
    this.frontendDecl = null;
    this.frontendCode = null;
    this.frontendFunc = null;
    this.lightingUv = null;

    // defines set by the shader generation
    this.defines = [];

    // generated by fshader
    this.fshader = null;
  }
  _vsAddBaseCode(code, chunks, options) {
    code += chunks.baseVS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED || options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      code += chunks.baseNineSlicedVS;
    }
    return code;
  }
  _vsAddTransformCode(code, device, chunks, options) {
    code += this.chunks.transformVS;
    return code;
  }
  _setMapTransform(codes, name, id, uv) {
    const checkId = id + uv * 100;
    if (!codes[3][checkId]) {
      // upload a 3x2 matrix and manually perform the multiplication
      const varName = `texture_${name}MapTransform`;
      codes[0] += `uniform vec3 ${varName}0;\n`;
      codes[0] += `uniform vec3 ${varName}1;\n`;
      codes[1] += `varying vec2 vUV${uv}_${id};\n`;
      codes[2] += `   vUV${uv}_${id} = vec2(dot(vec3(uv${uv}, 1), ${varName}0), dot(vec3(uv${uv}, 1), ${varName}1));\n`;
      codes[3][checkId] = true;
    }
    return codes;
  }

  // Add "Base" Code section to fragment shader.
  _fsGetBaseCode() {
    const options = this.options;
    const chunks = this.chunks;
    let result = this.chunks.basePS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {
      result += chunks.baseNineSlicedPS;
    } else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      result += chunks.baseNineSlicedTiledPS;
    }
    return result;
  }

  // Add "Start" Code section to fragment shader.
  _fsGetStartCode(code, device, chunks, options) {
    let result = chunks.startPS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {
      result += chunks.startNineSlicedPS;
    } else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      result += chunks.startNineSlicedTiledPS;
    }
    return result;
  }

  // handles directional map shadow coordinate generation, including cascaded shadows
  _directionalShadowMapProjection(light, shadowCoordArgs, shadowParamArg, lightIndex, coordsFunctionName) {
    // for shadow cascades
    let code = "";
    if (light.numCascades > 1) {
      // compute which cascade matrix needs to be used
      code += `getShadowCascadeMatrix(light${lightIndex}_shadowMatrixPalette, light${lightIndex}_shadowCascadeDistances, light${lightIndex}_shadowCascadeCount);\n`;
      shadowCoordArgs = `(cascadeShadowMat, ${shadowParamArg});\n`;
    }

    // shadow coordinate generation
    code += coordsFunctionName + shadowCoordArgs;

    // stop shadow at the far distance
    code += `fadeShadow(light${lightIndex}_shadowCascadeDistances);\n`;
    return code;
  }
  _nonPointShadowMapProjection(device, light, shadowMatArg, shadowParamArg, lightIndex) {
    const shadowCoordArgs = `(${shadowMatArg}, ${shadowParamArg});\n`;
    if (!light._normalOffsetBias || light._isVsm) {
      if (light._type === LIGHTTYPE_SPOT) {
        if (light._isPcf && (device.webgl2 || device.extStandardDerivatives || device.deviceType === DEVICETYPE_WEBGPU)) {
          return "       getShadowCoordPerspZbuffer" + shadowCoordArgs;
        }
        return "       getShadowCoordPersp" + shadowCoordArgs;
      }
      return this._directionalShadowMapProjection(light, shadowCoordArgs, shadowParamArg, lightIndex, "getShadowCoordOrtho");
    }
    if (light._type === LIGHTTYPE_SPOT) {
      if (light._isPcf && (device.webgl2 || device.extStandardDerivatives || device.deviceType === DEVICETYPE_WEBGPU)) {
        return "       getShadowCoordPerspZbufferNormalOffset" + shadowCoordArgs;
      }
      return "       getShadowCoordPerspNormalOffset" + shadowCoordArgs;
    }
    return this._directionalShadowMapProjection(light, shadowCoordArgs, shadowParamArg, lightIndex, "getShadowCoordOrthoNormalOffset");
  }
  _getLightSourceShapeString(shape) {
    switch (shape) {
      case LIGHTSHAPE_RECT:
        return 'Rect';
      case LIGHTSHAPE_DISK:
        return 'Disk';
      case LIGHTSHAPE_SPHERE:
        return 'Sphere';
      default:
        return '';
    }
  }
  generateVertexShader(useUv, useUnmodifiedUv, mapTransforms) {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    let code = '';
    let codeBody = '';

    // code += chunks.baseVS;
    code = this._vsAddBaseCode(code, chunks, options);
    codeBody += "   vPositionW    = getWorldPosition();\n";
    if (this.options.pass === SHADER_DEPTH) {
      code += 'varying float vDepth;\n';
      code += '#ifndef VIEWMATRIX\n';
      code += '#define VIEWMATRIX\n';
      code += 'uniform mat4 matrix_view;\n';
      code += '#endif\n';
      code += '#ifndef CAMERAPLANES\n';
      code += '#define CAMERAPLANES\n';
      code += 'uniform vec4 camera_params;\n\n';
      code += '#endif\n';
      codeBody += "    vDepth = -(matrix_view * vec4(vPositionW,1.0)).z * camera_params.x;\n";
    }
    if (this.options.useInstancing) {
      this.attributes.instance_line1 = SEMANTIC_ATTR12;
      this.attributes.instance_line2 = SEMANTIC_ATTR13;
      this.attributes.instance_line3 = SEMANTIC_ATTR14;
      this.attributes.instance_line4 = SEMANTIC_ATTR15;
      code += chunks.instancingVS;
    }
    if (this.needsNormal) {
      this.attributes.vertex_normal = SEMANTIC_NORMAL;
      codeBody += "   vNormalW = getNormal();\n";
      if (options.reflectionSource === 'sphereMap' && device.fragmentUniformsCount <= 16) {
        code += chunks.viewNormalVS;
        codeBody += "   vNormalV    = getViewNormal();\n";
      }
      if (options.hasTangents && (options.heightMapEnabled || options.normalMapEnabled || options.enableGGXSpecular)) {
        this.attributes.vertex_tangent = SEMANTIC_TANGENT;
        code += chunks.tangentBinormalVS;
        codeBody += "   vTangentW   = getTangent();\n";
        codeBody += "   vBinormalW  = getBinormal();\n";
      } else if (options.enableGGXSpecular || !device.extStandardDerivatives) {
        code += chunks.tangentBinormalVS;
        codeBody += "   vObjectSpaceUpW  = getObjectSpaceUp();\n";
      }
    }
    const maxUvSets = 2;
    for (let i = 0; i < maxUvSets; i++) {
      if (useUv[i]) {
        this.attributes["vertex_texCoord" + i] = "TEXCOORD" + i;
        code += chunks["uv" + i + "VS"];
        codeBody += "   vec2 uv" + i + " = getUv" + i + "();\n";
      }
      if (useUnmodifiedUv[i]) {
        codeBody += "   vUv" + i + " = uv" + i + ";\n";
      }
    }
    const codes = [code, this.varyings, codeBody, []];
    mapTransforms.forEach(mapTransform => {
      this._setMapTransform(codes, mapTransform.name, mapTransform.id, mapTransform.uv);
    });
    code = codes[0];
    this.varyings = codes[1];
    codeBody = codes[2];
    if (options.vertexColors) {
      this.attributes.vertex_color = SEMANTIC_COLOR;
      codeBody += "   vVertexColor = vertex_color;\n";
    }
    if (options.useMsdf && options.msdfTextAttribute) {
      this.attributes.vertex_outlineParameters = SEMANTIC_ATTR8;
      this.attributes.vertex_shadowParameters = SEMANTIC_ATTR9;
      codeBody += "    unpackMsdfParams();\n";
      code += chunks.msdfVS;
    }

    // morphing
    if (options.useMorphPosition || options.useMorphNormal) {
      if (options.useMorphTextureBased) {
        code += "#define MORPHING_TEXTURE_BASED\n";
        if (options.useMorphPosition) {
          code += "#define MORPHING_TEXTURE_BASED_POSITION\n";
        }
        if (options.useMorphNormal) {
          code += "#define MORPHING_TEXTURE_BASED_NORMAL\n";
        }

        // vertex ids attributes
        this.attributes.morph_vertex_id = SEMANTIC_ATTR15;
        code += "attribute float morph_vertex_id;\n";
      } else {
        // set up 8 slots for morphing. these are supported combinations: PPPPPPPP, NNNNNNNN, PPPPNNNN
        code += "#define MORPHING\n";

        // first 4 slots are either position or normal
        if (options.useMorphPosition) {
          this.attributes.morph_pos0 = SEMANTIC_ATTR8;
          this.attributes.morph_pos1 = SEMANTIC_ATTR9;
          this.attributes.morph_pos2 = SEMANTIC_ATTR10;
          this.attributes.morph_pos3 = SEMANTIC_ATTR11;
          code += "#define MORPHING_POS03\n";
          code += "attribute vec3 morph_pos0;\n";
          code += "attribute vec3 morph_pos1;\n";
          code += "attribute vec3 morph_pos2;\n";
          code += "attribute vec3 morph_pos3;\n";
        } else if (options.useMorphNormal) {
          this.attributes.morph_nrm0 = SEMANTIC_ATTR8;
          this.attributes.morph_nrm1 = SEMANTIC_ATTR9;
          this.attributes.morph_nrm2 = SEMANTIC_ATTR10;
          this.attributes.morph_nrm3 = SEMANTIC_ATTR11;
          code += "#define MORPHING_NRM03\n";
          code += "attribute vec3 morph_nrm0;\n";
          code += "attribute vec3 morph_nrm1;\n";
          code += "attribute vec3 morph_nrm2;\n";
          code += "attribute vec3 morph_nrm3;\n";
        }

        // next 4 slots are either position or normal
        if (!options.useMorphNormal) {
          this.attributes.morph_pos4 = SEMANTIC_ATTR12;
          this.attributes.morph_pos5 = SEMANTIC_ATTR13;
          this.attributes.morph_pos6 = SEMANTIC_ATTR14;
          this.attributes.morph_pos7 = SEMANTIC_ATTR15;
          code += "#define MORPHING_POS47\n";
          code += "attribute vec3 morph_pos4;\n";
          code += "attribute vec3 morph_pos5;\n";
          code += "attribute vec3 morph_pos6;\n";
          code += "attribute vec3 morph_pos7;\n";
        } else {
          this.attributes.morph_nrm4 = SEMANTIC_ATTR12;
          this.attributes.morph_nrm5 = SEMANTIC_ATTR13;
          this.attributes.morph_nrm6 = SEMANTIC_ATTR14;
          this.attributes.morph_nrm7 = SEMANTIC_ATTR15;
          code += "#define MORPHING_NRM47\n";
          code += "attribute vec3 morph_nrm4;\n";
          code += "attribute vec3 morph_nrm5;\n";
          code += "attribute vec3 morph_nrm6;\n";
          code += "attribute vec3 morph_nrm7;\n";
        }
      }
    }
    if (options.skin) {
      this.attributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;
      this.attributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;
      code += skinCode(device, chunks);
      code += "#define SKIN\n";
    } else if (options.useInstancing) {
      code += "#define INSTANCING\n";
    }
    if (options.screenSpace) {
      code += "#define SCREENSPACE\n";
    }
    if (options.pixelSnap) {
      code += "#define PIXELSNAP\n";
    }
    code = this._vsAddTransformCode(code, device, chunks, options);
    if (this.needsNormal) {
      code += chunks.normalVS;
    }
    code += "\n";
    code += chunks.startVS;
    code += codeBody;
    code += chunks.endVS;
    code += "}";

    // build varyings
    Object.keys(builtinVaryings).forEach(v => {
      if (code.indexOf(v) >= 0) {
        this.varyings += `varying ${builtinVaryings[v]} ${v};\n`;
      }
    });
    const shaderPassDefine = ShaderPass.getPassShaderDefine(this.options.pass);
    this.vshader = shaderPassDefine + this.varyings + code;
  }
  _fsGetBeginCode() {
    let code = ShaderPass.getPassShaderDefine(this.options.pass);
    for (let i = 0; i < this.defines.length; i++) {
      code += `#define ${this.defines[i]}\n`;
    }
    return code;
  }
  _fsGetPickPassCode() {
    let code = this._fsGetBeginCode();
    code += "uniform vec4 uColor;\n";
    code += this.varyings;
    code += this.frontendDecl;
    code += this.frontendCode;
    code += begin();
    code += this.frontendFunc;
    code += "    gl_FragColor = uColor;\n";
    code += end();
    return code;
  }
  _fsGetDepthPassCode() {
    const chunks = this.chunks;
    let code = this._fsGetBeginCode();
    code += 'varying float vDepth;\n';
    code += this.varyings;
    code += chunks.packDepthPS;
    code += this.frontendDecl;
    code += this.frontendCode;
    code += begin();
    code += this.frontendFunc;
    code += "    gl_FragColor = packFloat(vDepth);\n";
    code += end();
    return code;
  }
  _fsGetShadowPassCode() {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    const varyings = this.varyings;
    const lightType = ShaderPass.toLightType(options.pass);
    const shadowType = ShaderPass.toShadowType(options.pass);
    let code = this._fsGetBeginCode();
    if (device.extStandardDerivatives && !device.webgl2 && device.deviceType !== DEVICETYPE_WEBGPU) {
      code += 'uniform vec2 polygonOffset;\n';
    }
    if (shadowType === SHADOW_VSM32) {
      if (device.textureFloatHighPrecision) {
        code += '#define VSM_EXPONENT 15.0\n\n';
      } else {
        code += '#define VSM_EXPONENT 5.54\n\n';
      }
    } else if (shadowType === SHADOW_VSM16) {
      code += '#define VSM_EXPONENT 5.54\n\n';
    }
    if (lightType !== LIGHTTYPE_DIRECTIONAL) {
      code += 'uniform vec3 view_position;\n';
      code += 'uniform float light_radius;\n';
    }
    code += varyings;
    code += this.frontendDecl;
    code += this.frontendCode;
    if (shadowType === SHADOW_PCF3 && (!device.webgl2 || device.deviceType !== DEVICETYPE_WEBGPU || lightType === LIGHTTYPE_OMNI)) {
      code += chunks.packDepthPS;
    } else if (shadowType === SHADOW_VSM8) {
      code += "vec2 encodeFloatRG( float v ) {\n";
      code += "    vec2 enc = vec2(1.0, 255.0) * v;\n";
      code += "    enc = fract(enc);\n";
      code += "    enc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\n";
      code += "    return enc;\n";
      code += "}\n\n";
    }
    code += begin();
    code += this.frontendFunc;
    const isVsm = shadowType === SHADOW_VSM8 || shadowType === SHADOW_VSM16 || shadowType === SHADOW_VSM32;
    const applySlopeScaleBias = !device.webgl2 && device.extStandardDerivatives && device.deviceType !== DEVICETYPE_WEBGPU;
    if (lightType === LIGHTTYPE_OMNI || isVsm && lightType !== LIGHTTYPE_DIRECTIONAL) {
      code += "    float depth = min(distance(view_position, vPositionW) / light_radius, 0.99999);\n";
    } else {
      code += "    float depth = gl_FragCoord.z;\n";
    }
    if (applySlopeScaleBias) {
      code += "    float minValue = 2.3374370500153186e-10; //(1.0 / 255.0) / (256.0 * 256.0 * 256.0);\n";
      code += "    depth += polygonOffset.x * max(abs(dFdx(depth)), abs(dFdy(depth))) + minValue * polygonOffset.y;\n";
    }
    if (shadowType === SHADOW_PCF3 && (!device.webgl2 || lightType === LIGHTTYPE_OMNI && !options.clusteredLightingEnabled)) {
      code += "    gl_FragColor = packFloat(depth);\n";
    } else if (shadowType === SHADOW_PCF3 || shadowType === SHADOW_PCF5) {
      code += "    gl_FragColor = vec4(1.0);\n"; // just the simplest code, color is not written anyway

      // clustered omni light is using shadow sampler and needs to write custom depth
      if (options.clusteredLightingEnabled && lightType === LIGHTTYPE_OMNI && device.webgl2) {
        code += "    gl_FragDepth = depth;\n";
      }
    } else if (shadowType === SHADOW_VSM8) {
      code += "    gl_FragColor = vec4(encodeFloatRG(depth), encodeFloatRG(depth*depth));\n";
    } else {
      code += chunks.storeEVSMPS;
    }
    code += end();
    return code;
  }

  // the big one
  _fsGetLitPassCode() {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    let code = "";
    if (options.opacityFadesSpecular === false) {
      code += 'uniform float material_alphaFade;\n';
    }
    if (options.useSpecular) {
      this.defines.push("LIT_SPECULAR");
      if (this.reflections) {
        this.defines.push("LIT_REFLECTIONS");
      }
      if (options.useClearCoat) {
        this.defines.push("LIT_CLEARCOAT");
      }
      if (options.fresnelModel > 0) {
        this.defines.push("LIT_SPECULAR_FRESNEL");
      }

      // enable conserve energy path in clustered chunk
      if (options.conserveEnergy) {
        this.defines.push("LIT_CONSERVE_ENERGY");
      }
      if (options.useSheen) {
        this.defines.push("LIT_SHEEN");
      }
      if (options.useIridescence) {
        this.defines.push("LIT_IRIDESCENCE");
      }
    }

    // FRAGMENT SHADER INPUTS: UNIFORMS
    const shadowTypeUsed = [];
    let numShadowLights = 0;
    let shadowedDirectionalLightUsed = false;
    let useVsm = false;
    let usePerspZbufferShadow = false;
    let hasAreaLights = options.lights.some(function (light) {
      return light._shape && light._shape !== LIGHTSHAPE_PUNCTUAL;
    });

    // if clustered lighting has area lights enabled, it always runs in 'area lights mode'
    // TODO: maybe we should always use it and remove the other way?
    if (options.clusteredLightingEnabled && options.clusteredLightingAreaLightsEnabled) {
      hasAreaLights = true;
    }
    let areaLutsPrecision = 'highp';
    if (device.areaLightLutFormat === PIXELFORMAT_RGBA8) {
      // use offset and scale for rgb8 format luts
      code += "#define AREA_R8_G8_B8_A8_LUTS\n";
      areaLutsPrecision = 'lowp';
    }
    if (hasAreaLights || options.clusteredLightingEnabled) {
      code += "#define AREA_LIGHTS\n";
      code += `uniform ${areaLutsPrecision} sampler2D areaLightsLutTex1;\n`;
      code += `uniform ${areaLutsPrecision} sampler2D areaLightsLutTex2;\n`;
    }
    for (let i = 0; i < options.lights.length; i++) {
      const light = options.lights[i];
      const lightType = light._type;

      // skip uniform generation for local lights if clustered lighting is enabled
      if (options.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) continue;
      const lightShape = hasAreaLights && light._shape ? light._shape : LIGHTSHAPE_PUNCTUAL;
      code += "uniform vec3 light" + i + "_color;\n";
      if (lightType === LIGHTTYPE_DIRECTIONAL) {
        code += "uniform vec3 light" + i + "_direction;\n";
      } else {
        code += "uniform vec3 light" + i + "_position;\n";
        code += "uniform float light" + i + "_radius;\n";
        if (lightType === LIGHTTYPE_SPOT) {
          code += "uniform vec3 light" + i + "_direction;\n";
          code += "uniform float light" + i + "_innerConeAngle;\n";
          code += "uniform float light" + i + "_outerConeAngle;\n";
        }
      }
      if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          code += "uniform vec3 light" + i + "_position;\n";
        }
        code += "uniform vec3 light" + i + "_halfWidth;\n";
        code += "uniform vec3 light" + i + "_halfHeight;\n";
      }
      if (light.castShadows && !options.noShadow) {
        code += "uniform mat4 light" + i + "_shadowMatrix;\n";
        code += "uniform float light" + i + "_shadowIntensity;\n";

        // directional (cascaded) shadows
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          code += "uniform mat4 light" + i + "_shadowMatrixPalette[4];\n";
          code += "uniform float light" + i + "_shadowCascadeDistances[4];\n";
          code += "uniform float light" + i + "_shadowCascadeCount;\n";
        }
        if (lightType !== LIGHTTYPE_DIRECTIONAL) {
          code += "uniform vec4 light" + i + "_shadowParams;\n"; // Width, height, bias, radius
        } else {
          shadowedDirectionalLightUsed = true;
          code += "uniform vec3 light" + i + "_shadowParams;\n"; // Width, height, bias
        }

        if (lightType === LIGHTTYPE_OMNI) {
          code += "uniform samplerCube light" + i + "_shadowMap;\n";
        } else {
          if (light._isPcf && device.supportsDepthShadow) {
            code += "uniform sampler2DShadow light" + i + "_shadowMap;\n";
          } else {
            code += "uniform sampler2D light" + i + "_shadowMap;\n";
          }
        }
        numShadowLights++;
        shadowTypeUsed[light._shadowType] = true;
        if (light._isVsm) useVsm = true;
        if (light._isPcf && (device.supportsDepthShadow || device.extStandardDerivatives) && lightType === LIGHTTYPE_SPOT) usePerspZbufferShadow = true;
      }
      if (light._cookie) {
        if (light._cookie._cubemap) {
          if (lightType === LIGHTTYPE_OMNI) {
            code += "uniform samplerCube light" + i + "_cookie;\n";
            code += "uniform float light" + i + "_cookieIntensity;\n";
            if (!light.castShadows || options.noShadow) code += "uniform mat4 light" + i + "_shadowMatrix;\n";
          }
        } else {
          if (lightType === LIGHTTYPE_SPOT) {
            code += "uniform sampler2D light" + i + "_cookie;\n";
            code += "uniform float light" + i + "_cookieIntensity;\n";
            if (!light.castShadows || options.noShadow) code += "uniform mat4 light" + i + "_shadowMatrix;\n";
            if (light._cookieTransform) {
              code += "uniform vec4 light" + i + "_cookieMatrix;\n";
              code += "uniform vec2 light" + i + "_cookieOffset;\n";
            }
          }
        }
      }
    }
    code += "\n"; // End of uniform declarations

    // TBN
    const hasTBN = this.needsNormal && (options.normalMapEnabled || options.clearCoatNormalMapEnabled || options.enableGGXSpecular && !options.heightMapEnabled);
    if (hasTBN) {
      if (options.hasTangents) {
        code += options.fastTbn ? chunks.TBNfastPS : chunks.TBNPS;
      } else {
        if (device.extStandardDerivatives && (options.normalMapEnabled || options.clearCoatNormalMapEnabled)) {
          code += chunks.TBNderivativePS.replace(/\$UV/g, this.lightingUv);
        } else {
          code += chunks.TBNObjectSpacePS;
        }
      }
    }

    // FIXME: only add these when needed
    code += chunks.sphericalPS;
    code += chunks.decodePS;
    code += gammaCode(options.gamma, chunks);
    code += tonemapCode(options.toneMap, chunks);
    code += fogCode(options.fog, chunks);

    // frontend
    code += this.frontendCode;
    if (options.useCubeMapRotation) {
      code += "#define CUBEMAP_ROTATION\n";
    }
    if (this.needsNormal) {
      code += chunks.cubeMapRotatePS;
      code += options.cubeMapProjection > 0 ? chunks.cubeMapProjectBoxPS : chunks.cubeMapProjectNonePS;
      code += options.skyboxIntensity ? chunks.envMultiplyPS : chunks.envConstPS;
    }
    if (this.lighting && options.useSpecular || this.reflections) {
      if (options.useMetalness) {
        code += chunks.metalnessModulatePS;
      }
      if (options.fresnelModel === FRESNEL_SCHLICK) {
        code += chunks.fresnelSchlickPS;
      }
      if (options.useIridescence) {
        code += chunks.iridescenceDiffractionPS;
      }
    }
    const useAo = options.aoMapEnabled || options.useAoVertexColors;
    if (useAo) {
      code += chunks.aoDiffuseOccPS;
      switch (options.occludeSpecular) {
        case SPECOCC_AO:
          code += options.occludeSpecularFloat ? chunks.aoSpecOccSimplePS : chunks.aoSpecOccConstSimplePS;
          break;
        case SPECOCC_GLOSSDEPENDENT:
          code += options.occludeSpecularFloat ? chunks.aoSpecOccPS : chunks.aoSpecOccConstPS;
          break;
      }
    }
    if (options.reflectionSource === 'envAtlasHQ') {
      code += options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS;
      code += chunks.envAtlasPS;
      code += chunks.reflectionEnvHQPS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding));
    } else if (options.reflectionSource === 'envAtlas') {
      code += chunks.envAtlasPS;
      code += chunks.reflectionEnvPS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding));
    } else if (options.reflectionSource === 'cubeMap') {
      code += options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS;
      code += chunks.reflectionCubePS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding));
    } else if (options.reflectionSource === 'sphereMap') {
      const scode = device.fragmentUniformsCount > 16 ? chunks.reflectionSpherePS : chunks.reflectionSphereLowPS;
      code += scode.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding));
    }
    if (this.reflections) {
      if (options.useClearCoat) {
        code += chunks.reflectionCCPS;
      }
      if (options.useSheen) {
        code += chunks.reflectionSheenPS;
      }
    }
    if (options.useRefraction) {
      if (options.useDynamicRefraction) {
        code += chunks.refractionDynamicPS;
      } else if (this.reflections) {
        code += chunks.refractionCubePS;
      }
    }
    if (options.useSheen) {
      code += chunks.lightSheenPS;
    }

    // clustered lighting
    if (options.clusteredLightingEnabled) {
      // include this before shadow / cookie code
      code += chunks.clusteredLightUtilsPS;
      if (options.clusteredLightingCookiesEnabled) code += chunks.clusteredLightCookiesPS;

      // include shadow chunks clustered lights support
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        shadowTypeUsed[SHADOW_PCF3] = true;
        shadowTypeUsed[SHADOW_PCF5] = true;
      }
      usePerspZbufferShadow = true;
    }
    if (numShadowLights > 0 || options.clusteredLightingEnabled) {
      if (shadowedDirectionalLightUsed) {
        code += chunks.shadowCascadesPS;
      }
      if (shadowTypeUsed[SHADOW_PCF3]) {
        code += chunks.shadowStandardPS;
      }
      if (shadowTypeUsed[SHADOW_PCF5] && (device.webgl2 || device.deviceType === DEVICETYPE_WEBGPU)) {
        code += chunks.shadowStandardGL2PS;
      }
      if (useVsm) {
        code += chunks.shadowVSM_commonPS;
        if (shadowTypeUsed[SHADOW_VSM8]) {
          code += chunks.shadowVSM8PS;
        }
        if (shadowTypeUsed[SHADOW_VSM16]) {
          code += device.extTextureHalfFloatLinear ? chunks.shadowEVSMPS.replace(/\$/g, "16") : chunks.shadowEVSMnPS.replace(/\$/g, "16");
        }
        if (shadowTypeUsed[SHADOW_VSM32]) {
          code += device.extTextureFloatLinear ? chunks.shadowEVSMPS.replace(/\$/g, "32") : chunks.shadowEVSMnPS.replace(/\$/g, "32");
        }
      }
      if (!(device.webgl2 || device.extStandardDerivatives || device.deviceType === DEVICETYPE_WEBGPU)) {
        code += chunks.biasConstPS;
      }

      // otherwise bias is applied on render
      code += chunks.shadowCoordPS + chunks.shadowCommonPS;
      if (usePerspZbufferShadow) code += chunks.shadowCoordPerspZbufferPS;
    }
    if (options.enableGGXSpecular) code += "uniform float material_anisotropy;\n";
    if (this.lighting) {
      code += chunks.lightDiffuseLambertPS;
      if (hasAreaLights || options.clusteredLightingAreaLightsEnabled) code += chunks.ltcPS;
    }
    code += '\n';
    let useOldAmbient = false;
    if (options.useSpecular) {
      if (this.lighting) {
        code += options.shadingModel === SPECULAR_PHONG ? chunks.lightSpecularPhongPS : options.enableGGXSpecular ? chunks.lightSpecularAnisoGGXPS : chunks.lightSpecularBlinnPS;
      }
      if (!options.fresnelModel && !this.reflections && !options.diffuseMapEnabled) {
        code += "    uniform vec3 material_ambient;\n";
        code += "#define LIT_OLD_AMBIENT";
        useOldAmbient = true;
      }
    }
    code += chunks.combinePS;

    // lightmap support
    if (options.lightMapEnabled || options.useLightMapVertexColors) {
      code += options.useSpecular && options.dirLightMapEnabled ? chunks.lightmapDirAddPS : chunks.lightmapAddPS;
    }
    const addAmbient = !options.lightMapEnabled && !options.useLightMapVertexColors || options.lightMapWithoutAmbient;
    if (addAmbient) {
      if (options.ambientSource === 'ambientSH') {
        code += chunks.ambientSHPS;
      } else if (options.ambientSource === 'envAtlas') {
        if (options.reflectionSource !== 'envAtlas' && options.reflectionSource !== 'envAtlasHQ') {
          code += chunks.envAtlasPS;
        }
        code += chunks.ambientEnvPS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.ambientEncoding));
      } else {
        code += chunks.ambientConstantPS;
      }
    }
    if (options.useAmbientTint && !useOldAmbient) {
      code += "uniform vec3 material_ambient;\n";
    }
    if (options.useMsdf) {
      if (!options.msdfTextAttribute) {
        code += "\n#define UNIFORM_TEXT_PARAMETERS";
      }
      code += chunks.msdfPS;
    }
    if (this.needsNormal) {
      code += chunks.viewDirPS;
      if (options.useSpecular) {
        code += options.enableGGXSpecular ? chunks.reflDirAnisoPS : chunks.reflDirPS;
      }
    }
    let hasPointLights = false;
    let usesLinearFalloff = false;
    let usesInvSquaredFalloff = false;
    let usesSpot = false;
    let usesCookie = false;
    let usesCookieNow;

    // clustered lighting
    if (options.clusteredLightingEnabled && this.lighting) {
      usesSpot = true;
      hasPointLights = true;
      usesLinearFalloff = true;
      usesCookie = true;
      code += chunks.floatUnpackingPS;
      if (options.lightMaskDynamic) code += "\n#define CLUSTER_MESH_DYNAMIC_LIGHTS";
      if (options.clusteredLightingCookiesEnabled) code += "\n#define CLUSTER_COOKIES";
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        code += "\n#define CLUSTER_SHADOWS";
        code += "\n#define CLUSTER_SHADOW_TYPE_" + shadowTypeToString[options.clusteredLightingShadowType];
      }
      if (options.clusteredLightingAreaLightsEnabled) code += "\n#define CLUSTER_AREALIGHTS";
      code += LightsBuffer.shaderDefines;
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        code += chunks.clusteredLightShadowsPS;
      }
      code += chunks.clusteredLightPS;
    }
    if (options.twoSidedLighting) code += "uniform float twoSidedLightingNegScaleFactor;\n";

    // FRAGMENT SHADER BODY

    code += this._fsGetStartCode(code, device, chunks, options);
    if (this.needsNormal) {
      if (options.twoSidedLighting) {
        code += "    dVertexNormalW = normalize(gl_FrontFacing ? vNormalW * twoSidedLightingNegScaleFactor : -vNormalW * twoSidedLightingNegScaleFactor);\n";
      } else {
        code += "    dVertexNormalW = normalize(vNormalW);\n";
      }
      if ((options.heightMapEnabled || options.normalMapEnabled) && options.hasTangents) {
        if (options.twoSidedLighting) {
          code += "    dTangentW = gl_FrontFacing ? vTangentW * twoSidedLightingNegScaleFactor : -vTangentW * twoSidedLightingNegScaleFactor;\n";
          code += "    dBinormalW = gl_FrontFacing ? vBinormalW * twoSidedLightingNegScaleFactor : -vBinormalW * twoSidedLightingNegScaleFactor;\n";
        } else {
          code += "    dTangentW = vTangentW;\n";
          code += "    dBinormalW = vBinormalW;\n";
        }
      }
      code += "    getViewDir();\n";
      if (hasTBN) {
        code += "    getTBN();\n";
      }
    }

    // invoke frontend functions
    code += this.frontendFunc;

    // transform tangent space normals to world space
    if (this.needsNormal) {
      if (options.useSpecular) {
        code += "    getReflDir();\n";
      }
      if (options.useClearCoat) {
        code += "    ccReflDirW = normalize(-reflect(dViewDirW, ccNormalW));\n";
      }
    }
    if (this.lighting && options.useSpecular || this.reflections) {
      if (options.useMetalness) {
        code += "    getMetalnessModulate();\n";
      }
      if (options.useIridescence) {
        code += "    getIridescence(saturate(dot(dViewDirW, dNormalW)));\n";
      }
    }
    if (addAmbient) {
      code += "    addAmbient();\n";
      if (options.conserveEnergy && options.useSpecular) {
        code += `   dDiffuseLight = dDiffuseLight * (1.0 - dSpecularity);`;
      }

      // move ambient color out of diffuse (used by Lightmapper, to multiply ambient color by accumulated AO)
      if (options.separateAmbient) {
        code += `
                    vec3 dAmbientLight = dDiffuseLight;
                    dDiffuseLight = vec3(0);
                `;
      }
    }
    if (options.useAmbientTint && !useOldAmbient) {
      code += "    dDiffuseLight *= material_ambient;\n";
    }
    if (useAo && !options.occludeDirect) {
      code += "    occludeDiffuse();\n";
    }
    if (options.lightMapEnabled || options.useLightMapVertexColors) {
      code += "    addLightMap();\n";
    }
    if (this.lighting || this.reflections) {
      if (this.reflections) {
        if (options.useClearCoat) {
          code += "    addReflectionCC();\n";
          if (options.fresnelModel > 0) {
            code += "    ccFresnel = getFresnelCC(dot(dViewDirW, ccNormalW));\n";
            code += "    ccReflection.rgb *= ccFresnel;\n";
          } else {
            code += "    ccFresnel = 0.0;\n";
          }
        }
        if (options.useSpecularityFactor) {
          code += "    ccReflection.rgb *= dSpecularityFactor;\n";
        }
        if (options.useSheen) {
          code += "    addReflectionSheen();\n";
        }

        // Fresnel has to be applied to reflections
        code += "    addReflection();\n";
        if (options.fresnelModel > 0) {
          code += "    dReflection.rgb *= getFresnel(dot(dViewDirW, dNormalW), dSpecularity);\n";
        } else {
          code += "    dReflection.rgb *= dSpecularity;\n";
        }
        if (options.useSpecularityFactor) {
          code += "    dReflection.rgb *= dSpecularityFactor;\n";
        }
      }
      if (hasAreaLights) {
        // specular has to be accumulated differently if we want area lights to look correct
        code += "    dSpecularLight *= dSpecularity;\n";
        // code += "    float roughness = max((1.0 - dGlossiness) * (1.0 - dGlossiness), 0.001);\n";

        // evaluate material based area lights data, shared by all area lights
        if (options.useSpecular) {
          code += "    calcLTCLightValues();\n";
        }
      }
      for (let i = 0; i < options.lights.length; i++) {
        const light = options.lights[i];
        const lightType = light._type;

        // if clustered lights are used, skip normal lights other than directional
        if (options.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) {
          continue;
        }

        // The following code is not decoupled to separate shader files, because most of it can be actually changed to achieve different behaviors like:
        // - different falloffs
        // - different shadow coords (omni shadows will use drastically different genShadowCoord)
        // - different shadow filter modes
        // - different light source shapes

        // getLightDiffuse and getLightSpecular is BRDF itself.

        usesCookieNow = false;
        const lightShape = hasAreaLights && light._shape ? light.shape : LIGHTSHAPE_PUNCTUAL;
        const shapeString = hasAreaLights && light._shape ? this._getLightSourceShapeString(lightShape) : '';
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          code += "    calc" + shapeString + "LightValues(light" + i + "_position, light" + i + "_halfWidth, light" + i + "_halfHeight);\n";
        }
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          // directional
          code += "    dLightDirNormW = light" + i + "_direction;\n";
          code += "    dAtten = 1.0;\n";
        } else {
          if (light._cookie) {
            if (lightType === LIGHTTYPE_SPOT && !light._cookie._cubemap) {
              usesCookie = true;
              usesCookieNow = true;
            } else if (lightType === LIGHTTYPE_OMNI && light._cookie._cubemap) {
              usesCookie = true;
              usesCookieNow = true;
            }
          }
          code += "    getLightDirPoint(light" + i + "_position);\n";
          hasPointLights = true;
          if (usesCookieNow) {
            if (lightType === LIGHTTYPE_SPOT) {
              code += "    dAtten3 = getCookie2D" + (light._cookieFalloff ? "" : "Clip") + (light._cookieTransform ? "Xform" : "") + "(light" + i + "_cookie, light" + i + "_shadowMatrix, light" + i + "_cookieIntensity" + (light._cookieTransform ? ", light" + i + "_cookieMatrix, light" + i + "_cookieOffset" : "") + ")." + light._cookieChannel + ";\n";
            } else {
              code += "    dAtten3 = getCookieCube(light" + i + "_cookie, light" + i + "_shadowMatrix, light" + i + "_cookieIntensity)." + light._cookieChannel + ";\n";
            }
          }
          if (lightShape === LIGHTSHAPE_PUNCTUAL) {
            if (light._falloffMode === LIGHTFALLOFF_LINEAR) {
              code += "    dAtten = getFalloffLinear(light" + i + "_radius);\n";
              usesLinearFalloff = true;
            } else {
              code += "    dAtten = getFalloffInvSquared(light" + i + "_radius);\n";
              usesInvSquaredFalloff = true;
            }
          } else {
            // non punctual lights only gets the range window here
            code += "    dAtten = getFalloffWindow(light" + i + "_radius);\n";
            usesInvSquaredFalloff = true;
          }
          code += "    if (dAtten > 0.00001) {\n"; // BRANCH START

          if (lightType === LIGHTTYPE_SPOT) {
            if (!(usesCookieNow && !light._cookieFalloff)) {
              code += "    dAtten *= getSpotEffect(light" + i + "_direction, light" + i + "_innerConeAngle, light" + i + "_outerConeAngle);\n";
              usesSpot = true;
            }
          }
        }

        // diffuse lighting - LTC lights do not mix diffuse lighting into attenuation that affects specular
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          if (lightType === LIGHTTYPE_DIRECTIONAL) {
            // NB: A better aproximation perhaps using wrap lighting could be implemented here
            code += "    dAttenD = getLightDiffuse();\n";
          } else {
            // 16.0 is a constant that is in getFalloffInvSquared()
            code += "    dAttenD = get" + shapeString + "LightDiffuse() * 16.0;\n";
          }
        } else {
          code += "    dAtten *= getLightDiffuse();\n";
        }
        if (light.castShadows && !options.noShadow) {
          let shadowReadMode = null;
          let evsmExp;
          if (light._shadowType === SHADOW_VSM8) {
            shadowReadMode = "VSM8";
            evsmExp = "0.0";
          } else if (light._shadowType === SHADOW_VSM16) {
            shadowReadMode = "VSM16";
            evsmExp = "5.54";
          } else if (light._shadowType === SHADOW_VSM32) {
            shadowReadMode = "VSM32";
            if (device.textureFloatHighPrecision) {
              evsmExp = "15.0";
            } else {
              evsmExp = "5.54";
            }
          } else if (light._shadowType === SHADOW_PCF5) {
            shadowReadMode = "PCF5x5";
          } else {
            shadowReadMode = "PCF3x3";
          }
          if (shadowReadMode !== null) {
            if (lightType === LIGHTTYPE_OMNI) {
              const shadowCoordArgs = "(light" + i + "_shadowMap, light" + i + "_shadowParams);\n";
              if (light._normalOffsetBias) {
                code += "    normalOffsetPointShadow(light" + i + "_shadowParams);\n";
              }
              code += `    float shadow${i} = getShadowPoint${shadowReadMode}${shadowCoordArgs}`;
              code += `    dAtten *= mix(1.0, shadow${i}, light${i}_shadowIntensity);\n`;
            } else {
              const shadowMatArg = `light${i}_shadowMatrix`;
              const shadowParamArg = `light${i}_shadowParams`;
              code += this._nonPointShadowMapProjection(device, options.lights[i], shadowMatArg, shadowParamArg, i);
              if (lightType === LIGHTTYPE_SPOT) shadowReadMode = "Spot" + shadowReadMode;
              code += `    float shadow${i} = getShadow${shadowReadMode}(SHADOWMAP_PASS(light${i}_shadowMap), light${i}_shadowParams${light._isVsm ? ", " + evsmExp : ""});\n`;
              code += `    dAtten *= mix(1.0, shadow${i}, light${i}_shadowIntensity);\n`;
            }
          }
        }
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          // area light - they do not mix diffuse lighting into specular attenuation
          if (options.conserveEnergy && options.useSpecular) {
            code += "    dDiffuseLight += ((dAttenD * dAtten) * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ") * (1.0 - dLTCSpecFres);\n";
          } else {
            code += "    dDiffuseLight += (dAttenD * dAtten) * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";\n";
          }
        } else {
          // punctual light
          if (hasAreaLights && options.conserveEnergy && options.useSpecular) {
            code += "    dDiffuseLight += (dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ") * (1.0 - dSpecularity);\n";
          } else {
            code += "    dDiffuseLight += dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";\n";
          }
        }
        if (options.useSpecular) {
          code += "    dHalfDirW = normalize(-dLightDirNormW + dViewDirW);\n";
        }

        // specular / clear coat
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          // area light
          if (options.useClearCoat) code += "    ccSpecularLight += ccLTCSpecFres * get" + shapeString + "LightSpecularCC() * dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";\n";
          if (options.useSpecular) code += "    dSpecularLight += dLTCSpecFres * get" + shapeString + "LightSpecular() * dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";\n";
        } else {
          var calcFresnel = false;
          if (lightType === LIGHTTYPE_DIRECTIONAL && options.fresnelModel > 0) {
            calcFresnel = true;
          }

          // if LTC lights are present, specular must be accumulated with specularity (specularity is pre multiplied by punctual light fresnel)
          if (options.useClearCoat) {
            code += "    ccSpecularLight += getLightSpecularCC(dHalfDirW) * dAtten * light" + i + "_color";
            code += usesCookieNow ? " * dAtten3" : "";
            code += calcFresnel ? " * getFresnelCC(dot(dViewDirW, dHalfDirW))" : "";
            code += ";\n";
          }
          if (options.useSheen) {
            code += "    sSpecularLight += getLightSpecularSheen(dHalfDirW) * dAtten * light" + i + "_color";
            code += usesCookieNow ? " * dAtten3" : "";
            code += ";\n";
          }
          if (options.useSpecular) {
            code += "    dSpecularLight += getLightSpecular(dHalfDirW) * dAtten * light" + i + "_color";
            code += usesCookieNow ? " * dAtten3" : "";
            code += calcFresnel ? " * getFresnel(dot(dViewDirW, dHalfDirW), dSpecularity)" : "* dSpecularity";
            code += ";\n";
          }
        }
        if (lightType !== LIGHTTYPE_DIRECTIONAL) {
          code += "    }\n"; // BRANCH END
        }

        code += "\n";
      }

      // clustered lighting
      if (options.clusteredLightingEnabled && this.lighting) {
        usesLinearFalloff = true;
        usesInvSquaredFalloff = true;
        hasPointLights = true;
        code += "    addClusteredLights();\n";
      }
      if (hasAreaLights) {
        // specular has to be accumulated differently if we want area lights to look correct
        if (options.useClearCoat) {
          code += "    ccSpecularity = 1.0;\n";
        }
        if (options.useSpecular) {
          code += "    dSpecularity = vec3(1);\n";
        }
      }
      if (options.useRefraction) {
        code += "    addRefraction();\n";
      }
    }
    code += "\n";
    if (useAo) {
      if (options.occludeDirect) {
        code += "    occludeDiffuse();\n";
      }
      if (options.occludeSpecular === SPECOCC_AO || options.occludeSpecular === SPECOCC_GLOSSDEPENDENT) {
        code += "    occludeSpecular();\n";
      }
    }
    if (options.useSpecularityFactor) {
      code += "    dSpecularLight *= dSpecularityFactor;\n";
    }
    if (options.opacityFadesSpecular === false) {
      if (options.blendType === BLEND_NORMAL || options.blendType === BLEND_PREMULTIPLIED) {
        code += "float specLum = dot((dSpecularLight + dReflection.rgb * dReflection.a), vec3( 0.2126, 0.7152, 0.0722 ));\n";
        code += "#ifdef LIT_CLEARCOAT\n specLum += dot(ccSpecularLight * ccSpecularity + ccReflection.rgb * ccSpecularity, vec3( 0.2126, 0.7152, 0.0722 ));\n#endif\n";
        code += "dAlpha = clamp(dAlpha + gammaCorrectInput(specLum), 0.0, 1.0);\n";
      }
      code += "dAlpha *= material_alphaFade;\n";
    }
    code += chunks.endPS;
    if (options.blendType === BLEND_NORMAL || options.blendType === BLEND_ADDITIVEALPHA || options.alphaToCoverage) {
      code += chunks.outputAlphaPS;
    } else if (options.blendType === BLEND_PREMULTIPLIED) {
      code += chunks.outputAlphaPremulPS;
    } else {
      code += chunks.outputAlphaOpaquePS;
    }
    if (options.useMsdf) {
      code += "    gl_FragColor = applyMsdf(gl_FragColor);\n";
    }
    code += "\n";
    code += end();
    if (hasPointLights) {
      code = chunks.lightDirPointPS + code;
    }
    if (usesLinearFalloff) {
      code = chunks.falloffLinearPS + code;
    }
    if (usesInvSquaredFalloff) {
      code = chunks.falloffInvSquaredPS + code;
    }
    if (usesSpot) {
      code = chunks.spotPS + code;
    }
    if (usesCookie && !options.clusteredLightingEnabled) {
      // non-clustered lights cookie code
      code = chunks.cookiePS + code;
    }
    let structCode = "";
    if (code.includes("dReflection")) structCode += "vec4 dReflection;\n";
    if (code.includes("dTBN")) structCode += "mat3 dTBN;\n";
    if (code.includes("dVertexNormalW")) structCode += "vec3 dVertexNormalW;\n";
    if (code.includes("dTangentW")) structCode += "vec3 dTangentW;\n";
    if (code.includes("dBinormalW")) structCode += "vec3 dBinormalW;\n";
    if (code.includes("dViewDirW")) structCode += "vec3 dViewDirW;\n";
    if (code.includes("dReflDirW")) structCode += "vec3 dReflDirW;\n";
    if (code.includes("dHalfDirW")) structCode += "vec3 dHalfDirW;\n";
    if (code.includes("dDiffuseLight")) structCode += "vec3 dDiffuseLight;\n";
    if (code.includes("dSpecularLight")) structCode += "vec3 dSpecularLight;\n";
    if (code.includes("dLightDirNormW")) structCode += "vec3 dLightDirNormW;\n";
    if (code.includes("dLightDirW")) structCode += "vec3 dLightDirW;\n";
    if (code.includes("dLightPosW")) structCode += "vec3 dLightPosW;\n";
    if (code.includes("dShadowCoord")) structCode += "vec3 dShadowCoord;\n";
    if (code.includes("dAtten")) structCode += "float dAtten;\n";
    if (code.includes("dAttenD")) structCode += "float dAttenD;\n"; // separate diffuse attenuation for non-punctual light sources
    if (code.includes("dAtten3")) structCode += "vec3 dAtten3;\n";
    if (code.includes("dMsdf")) structCode += "vec4 dMsdf;\n";
    if (code.includes("ccFresnel")) structCode += "float ccFresnel;\n";
    if (code.includes("ccReflection")) structCode += "vec3 ccReflection;\n";
    if (code.includes("ccReflDirW")) structCode += "vec3 ccReflDirW;\n";
    if (code.includes("ccSpecularLight")) structCode += "vec3 ccSpecularLight;\n";
    if (code.includes("ccSpecularityNoFres")) structCode += "float ccSpecularityNoFres;\n";
    if (code.includes("sSpecularLight")) structCode += "vec3 sSpecularLight;\n";
    if (code.includes("sReflection")) structCode += "vec3 sReflection;\n";
    const result = this._fsGetBeginCode() + this.varyings + this._fsGetBaseCode() + (options.detailModes ? chunks.detailModesPS : "") + structCode + this.frontendDecl + code;
    return result;
  }
  generateFragmentShader(frontendDecl, frontendCode, frontendFunc, lightingUv) {
    const options = this.options;
    this.frontendDecl = frontendDecl;
    this.frontendCode = frontendCode;
    this.frontendFunc = frontendFunc;
    this.lightingUv = lightingUv;
    if (options.pass === SHADER_PICK) {
      this.fshader = this._fsGetPickPassCode();
    } else if (options.pass === SHADER_DEPTH) {
      this.fshader = this._fsGetDepthPassCode();
    } else if (this.shadowPass) {
      this.fshader = this._fsGetShadowPassCode();
    } else if (options.customFragmentShader) {
      this.fshader = this._fsGetBeginCode() + options.customFragmentShader;
    } else {
      this.fshader = this._fsGetLitPassCode();
    }
  }
  getDefinition() {
    const definition = ShaderUtils.createDefinition(this.device, {
      name: 'LitShader',
      attributes: this.attributes,
      vertexCode: this.vshader,
      fragmentCode: this.fshader
    });
    if (ShaderPass.isForward(this.options.pass)) {
      definition.tag = SHADERTAG_MATERIAL;
    }
    return definition;
  }
}

export { LitShader };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl0LXNoYWRlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NjZW5lL3NoYWRlci1saWIvcHJvZ3JhbXMvbGl0LXNoYWRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIFNFTUFOVElDX0FUVFI4LCBTRU1BTlRJQ19BVFRSOSwgU0VNQU5USUNfQVRUUjEwLCBTRU1BTlRJQ19BVFRSMTEsIFNFTUFOVElDX0FUVFIxMiwgU0VNQU5USUNfQVRUUjEzLCBTRU1BTlRJQ19BVFRSMTQsIFNFTUFOVElDX0FUVFIxNSxcbiAgICBTRU1BTlRJQ19CTEVORElORElDRVMsIFNFTUFOVElDX0JMRU5EV0VJR0hULCBTRU1BTlRJQ19DT0xPUiwgU0VNQU5USUNfTk9STUFMLCBTRU1BTlRJQ19QT1NJVElPTiwgU0VNQU5USUNfVEFOR0VOVCxcbiAgICBTRU1BTlRJQ19URVhDT09SRDAsIFNFTUFOVElDX1RFWENPT1JEMSxcbiAgICBTSEFERVJUQUdfTUFURVJJQUwsXG4gICAgUElYRUxGT1JNQVRfUkdCQTgsXG4gICAgREVWSUNFVFlQRV9XRUJHUFVcbn0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IHNoYWRlckNodW5rcyB9IGZyb20gJy4uL2NodW5rcy9jaHVua3MuanMnO1xuaW1wb3J0IHsgQ2h1bmtVdGlscyB9IGZyb20gJy4uL2NodW5rLXV0aWxzLmpzJztcblxuaW1wb3J0IHtcbiAgICBCTEVORF9BRERJVElWRUFMUEhBLCBCTEVORF9OT1JNQUwsIEJMRU5EX1BSRU1VTFRJUExJRUQsXG4gICAgRlJFU05FTF9TQ0hMSUNLLFxuICAgIExJR0hURkFMTE9GRl9MSU5FQVIsXG4gICAgTElHSFRTSEFQRV9QVU5DVFVBTCwgTElHSFRTSEFQRV9SRUNULCBMSUdIVFNIQVBFX0RJU0ssIExJR0hUU0hBUEVfU1BIRVJFLFxuICAgIExJR0hUVFlQRV9ESVJFQ1RJT05BTCwgTElHSFRUWVBFX09NTkksIExJR0hUVFlQRV9TUE9ULFxuICAgIFNIQURFUl9ERVBUSCwgU0hBREVSX1BJQ0ssXG4gICAgU0hBRE9XX1BDRjMsIFNIQURPV19QQ0Y1LCBTSEFET1dfVlNNOCwgU0hBRE9XX1ZTTTE2LCBTSEFET1dfVlNNMzIsXG4gICAgU1BFQ09DQ19BTywgU1BFQ09DQ19HTE9TU0RFUEVOREVOVCxcbiAgICBTUEVDVUxBUl9QSE9ORyxcbiAgICBTUFJJVEVfUkVOREVSTU9ERV9TTElDRUQsIFNQUklURV9SRU5ERVJNT0RFX1RJTEVELCBzaGFkb3dUeXBlVG9TdHJpbmdcbn0gZnJvbSAnLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IExpZ2h0c0J1ZmZlciB9IGZyb20gJy4uLy4uL2xpZ2h0aW5nL2xpZ2h0cy1idWZmZXIuanMnO1xuaW1wb3J0IHsgU2hhZGVyUGFzcyB9IGZyb20gJy4uLy4uL3NoYWRlci1wYXNzLmpzJztcblxuaW1wb3J0IHsgYmVnaW4sIGVuZCwgZm9nQ29kZSwgZ2FtbWFDb2RlLCBza2luQ29kZSwgdG9uZW1hcENvZGUgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZVVzZXJDaHVua3MgfSBmcm9tICcuLi9jaHVua3MvY2h1bmstdmFsaWRhdGlvbi5qcyc7XG5pbXBvcnQgeyBTaGFkZXJVdGlscyB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3NoYWRlci11dGlscy5qcyc7XG5cbmNvbnN0IGJ1aWx0aW5BdHRyaWJ1dGVzID0ge1xuICAgIHZlcnRleF9ub3JtYWw6IFNFTUFOVElDX05PUk1BTCxcbiAgICB2ZXJ0ZXhfdGFuZ2VudDogU0VNQU5USUNfVEFOR0VOVCxcbiAgICB2ZXJ0ZXhfdGV4Q29vcmQwOiBTRU1BTlRJQ19URVhDT09SRDAsXG4gICAgdmVydGV4X3RleENvb3JkMTogU0VNQU5USUNfVEVYQ09PUkQxLFxuICAgIHZlcnRleF9jb2xvcjogU0VNQU5USUNfQ09MT1IsXG4gICAgdmVydGV4X2JvbmVXZWlnaHRzOiBTRU1BTlRJQ19CTEVORFdFSUdIVCxcbiAgICB2ZXJ0ZXhfYm9uZUluZGljZXM6IFNFTUFOVElDX0JMRU5ESU5ESUNFU1xufTtcblxuY29uc3QgYnVpbHRpblZhcnlpbmdzID0ge1xuICAgIHZWZXJ0ZXhDb2xvcjogXCJ2ZWM0XCIsXG4gICAgdlBvc2l0aW9uVzogXCJ2ZWMzXCIsXG4gICAgdk5vcm1hbFY6IFwidmVjM1wiLFxuICAgIHZOb3JtYWxXOiBcInZlYzNcIixcbiAgICB2VGFuZ2VudFc6IFwidmVjM1wiLFxuICAgIHZCaW5vcm1hbFc6IFwidmVjM1wiLFxuICAgIHZPYmplY3RTcGFjZVVwVzogXCJ2ZWMzXCIsXG4gICAgdlV2MDogXCJ2ZWMyXCIsXG4gICAgdlV2MTogXCJ2ZWMyXCJcbn07XG5cbmNsYXNzIExpdFNoYWRlciB7XG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgIC8vIHJlc29sdmUgY3VzdG9tIGNodW5rIGF0dHJpYnV0ZXNcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgdmVydGV4X3Bvc2l0aW9uOiBTRU1BTlRJQ19QT1NJVElPTlxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvcHRpb25zLmNodW5rcykge1xuICAgICAgICAgICAgdGhpcy5jaHVua3MgPSB7fTtcblxuICAgICAgICAgICAgY29uc3QgdXNlckNodW5rcyA9IG9wdGlvbnMuY2h1bmtzO1xuXG4gICAgICAgICAgICAvLyAjaWYgX0RFQlVHXG4gICAgICAgICAgICB2YWxpZGF0ZVVzZXJDaHVua3Mob3B0aW9ucy5jaHVua3MpO1xuICAgICAgICAgICAgLy8gI2VuZGlmXG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgY2h1bmtOYW1lIGluIHNoYWRlckNodW5rcykge1xuICAgICAgICAgICAgICAgIGlmICh1c2VyQ2h1bmtzLmhhc093blByb3BlcnR5KGNodW5rTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB1c2VyQ2h1bmtzW2NodW5rTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYSBpbiBidWlsdGluQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1aWx0aW5BdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGEpICYmIGNodW5rLmluZGV4T2YoYSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlc1thXSA9IGJ1aWx0aW5BdHRyaWJ1dGVzW2FdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtzW2NodW5rTmFtZV0gPSBjaHVuaztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNodW5rc1tjaHVua05hbWVdID0gc2hhZGVyQ2h1bmtzW2NodW5rTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaHVua3MgPSBzaGFkZXJDaHVua3M7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxpZ2h0aW5nID0gKG9wdGlvbnMubGlnaHRzLmxlbmd0aCA+IDApIHx8IG9wdGlvbnMuZGlyTGlnaHRNYXBFbmFibGVkIHx8IG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkO1xuICAgICAgICB0aGlzLnJlZmxlY3Rpb25zID0gISFvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2U7XG4gICAgICAgIHRoaXMuc2hhZG93UGFzcyA9IFNoYWRlclBhc3MuaXNTaGFkb3cob3B0aW9ucy5wYXNzKTtcbiAgICAgICAgdGhpcy5uZWVkc05vcm1hbCA9IHRoaXMubGlnaHRpbmcgfHwgdGhpcy5yZWZsZWN0aW9ucyB8fCBvcHRpb25zLnVzZVNwZWN1bGFyIHx8IG9wdGlvbnMuYW1iaWVudFNIIHx8IG9wdGlvbnMuaGVpZ2h0TWFwRW5hYmxlZCB8fCBvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmICF0aGlzLnNoYWRvd1Bhc3MpIHx8IG9wdGlvbnMuY2xlYXJDb2F0Tm9ybWFsTWFwRW5hYmxlZDtcbiAgICAgICAgdGhpcy5uZWVkc05vcm1hbCA9IHRoaXMubmVlZHNOb3JtYWwgJiYgIXRoaXMuc2hhZG93UGFzcztcbiAgICAgICAgdGhpcy5uZWVkc1NjZW5lQ29sb3IgPSBvcHRpb25zLnVzZUR5bmFtaWNSZWZyYWN0aW9uO1xuICAgICAgICB0aGlzLm5lZWRzU2NyZWVuU2l6ZSA9IG9wdGlvbnMudXNlRHluYW1pY1JlZnJhY3Rpb247XG4gICAgICAgIHRoaXMubmVlZHNUcmFuc2Zvcm1zID0gb3B0aW9ucy51c2VEeW5hbWljUmVmcmFjdGlvbjtcblxuICAgICAgICAvLyBnZW5lcmF0ZWQgYnkgdnNoYWRlclxuICAgICAgICB0aGlzLnZhcnlpbmdzID0gXCJcIjtcbiAgICAgICAgdGhpcy52c2hhZGVyID0gbnVsbDtcblxuICAgICAgICAvLyBzdXBwbGllZCBieSBjYWxsZXJcbiAgICAgICAgdGhpcy5mcm9udGVuZERlY2wgPSBudWxsO1xuICAgICAgICB0aGlzLmZyb250ZW5kQ29kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZnJvbnRlbmRGdW5jID0gbnVsbDtcbiAgICAgICAgdGhpcy5saWdodGluZ1V2ID0gbnVsbDtcblxuICAgICAgICAvLyBkZWZpbmVzIHNldCBieSB0aGUgc2hhZGVyIGdlbmVyYXRpb25cbiAgICAgICAgdGhpcy5kZWZpbmVzID0gW107XG5cbiAgICAgICAgLy8gZ2VuZXJhdGVkIGJ5IGZzaGFkZXJcbiAgICAgICAgdGhpcy5mc2hhZGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBfdnNBZGRCYXNlQ29kZShjb2RlLCBjaHVua3MsIG9wdGlvbnMpIHtcbiAgICAgICAgY29kZSArPSBjaHVua3MuYmFzZVZTO1xuICAgICAgICBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfU0xJQ0VEIHx8XG4gICAgICAgICAgICBvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9USUxFRCkge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MuYmFzZU5pbmVTbGljZWRWUztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29kZTtcbiAgICB9XG5cbiAgICBfdnNBZGRUcmFuc2Zvcm1Db2RlKGNvZGUsIGRldmljZSwgY2h1bmtzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5jaHVua3MudHJhbnNmb3JtVlM7XG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIF9zZXRNYXBUcmFuc2Zvcm0oY29kZXMsIG5hbWUsIGlkLCB1dikge1xuICAgICAgICBjb25zdCBjaGVja0lkID0gaWQgKyB1diAqIDEwMDtcbiAgICAgICAgaWYgKCFjb2Rlc1szXVtjaGVja0lkXSkge1xuICAgICAgICAgICAgLy8gdXBsb2FkIGEgM3gyIG1hdHJpeCBhbmQgbWFudWFsbHkgcGVyZm9ybSB0aGUgbXVsdGlwbGljYXRpb25cbiAgICAgICAgICAgIGNvbnN0IHZhck5hbWUgPSBgdGV4dHVyZV8ke25hbWV9TWFwVHJhbnNmb3JtYDtcbiAgICAgICAgICAgIGNvZGVzWzBdICs9IGB1bmlmb3JtIHZlYzMgJHt2YXJOYW1lfTA7XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzBdICs9IGB1bmlmb3JtIHZlYzMgJHt2YXJOYW1lfTE7XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzFdICs9IGB2YXJ5aW5nIHZlYzIgdlVWJHt1dn1fJHtpZH07XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzJdICs9IGAgICB2VVYke3V2fV8ke2lkfSA9IHZlYzIoZG90KHZlYzModXYke3V2fSwgMSksICR7dmFyTmFtZX0wKSwgZG90KHZlYzModXYke3V2fSwgMSksICR7dmFyTmFtZX0xKSk7XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzNdW2NoZWNrSWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29kZXM7XG4gICAgfVxuXG4gICAgLy8gQWRkIFwiQmFzZVwiIENvZGUgc2VjdGlvbiB0byBmcmFnbWVudCBzaGFkZXIuXG4gICAgX2ZzR2V0QmFzZUNvZGUoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuY2h1bmtzO1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5jaHVua3MuYmFzZVBTO1xuICAgICAgICBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfU0xJQ0VEKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gY2h1bmtzLmJhc2VOaW5lU2xpY2VkUFM7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfVElMRUQpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBjaHVua3MuYmFzZU5pbmVTbGljZWRUaWxlZFBTO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gQWRkIFwiU3RhcnRcIiBDb2RlIHNlY3Rpb24gdG8gZnJhZ21lbnQgc2hhZGVyLlxuICAgIF9mc0dldFN0YXJ0Q29kZShjb2RlLCBkZXZpY2UsIGNodW5rcywgb3B0aW9ucykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gY2h1bmtzLnN0YXJ0UFM7XG4gICAgICAgIGlmIChvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9TTElDRUQpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBjaHVua3Muc3RhcnROaW5lU2xpY2VkUFM7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfVElMRUQpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBjaHVua3Muc3RhcnROaW5lU2xpY2VkVGlsZWRQUztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIGhhbmRsZXMgZGlyZWN0aW9uYWwgbWFwIHNoYWRvdyBjb29yZGluYXRlIGdlbmVyYXRpb24sIGluY2x1ZGluZyBjYXNjYWRlZCBzaGFkb3dzXG4gICAgX2RpcmVjdGlvbmFsU2hhZG93TWFwUHJvamVjdGlvbihsaWdodCwgc2hhZG93Q29vcmRBcmdzLCBzaGFkb3dQYXJhbUFyZywgbGlnaHRJbmRleCwgY29vcmRzRnVuY3Rpb25OYW1lKSB7XG5cbiAgICAgICAgLy8gZm9yIHNoYWRvdyBjYXNjYWRlc1xuICAgICAgICBsZXQgY29kZSA9IFwiXCI7XG4gICAgICAgIGlmIChsaWdodC5udW1DYXNjYWRlcyA+IDEpIHtcbiAgICAgICAgICAgIC8vIGNvbXB1dGUgd2hpY2ggY2FzY2FkZSBtYXRyaXggbmVlZHMgdG8gYmUgdXNlZFxuICAgICAgICAgICAgY29kZSArPSBgZ2V0U2hhZG93Q2FzY2FkZU1hdHJpeChsaWdodCR7bGlnaHRJbmRleH1fc2hhZG93TWF0cml4UGFsZXR0ZSwgbGlnaHQke2xpZ2h0SW5kZXh9X3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXMsIGxpZ2h0JHtsaWdodEluZGV4fV9zaGFkb3dDYXNjYWRlQ291bnQpO1xcbmA7XG4gICAgICAgICAgICBzaGFkb3dDb29yZEFyZ3MgPSBgKGNhc2NhZGVTaGFkb3dNYXQsICR7c2hhZG93UGFyYW1Bcmd9KTtcXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hhZG93IGNvb3JkaW5hdGUgZ2VuZXJhdGlvblxuICAgICAgICBjb2RlICs9IGNvb3Jkc0Z1bmN0aW9uTmFtZSArIHNoYWRvd0Nvb3JkQXJncztcblxuICAgICAgICAvLyBzdG9wIHNoYWRvdyBhdCB0aGUgZmFyIGRpc3RhbmNlXG4gICAgICAgIGNvZGUgKz0gYGZhZGVTaGFkb3cobGlnaHQke2xpZ2h0SW5kZXh9X3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXMpO1xcbmA7XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgX25vblBvaW50U2hhZG93TWFwUHJvamVjdGlvbihkZXZpY2UsIGxpZ2h0LCBzaGFkb3dNYXRBcmcsIHNoYWRvd1BhcmFtQXJnLCBsaWdodEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHNoYWRvd0Nvb3JkQXJncyA9IGAoJHtzaGFkb3dNYXRBcmd9LCAke3NoYWRvd1BhcmFtQXJnfSk7XFxuYDtcbiAgICAgICAgaWYgKCFsaWdodC5fbm9ybWFsT2Zmc2V0QmlhcyB8fCBsaWdodC5faXNWc20pIHtcbiAgICAgICAgICAgIGlmIChsaWdodC5fdHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuX2lzUGNmICYmIChkZXZpY2Uud2ViZ2wyIHx8IGRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzIHx8IGRldmljZS5kZXZpY2VUeXBlID09PSBERVZJQ0VUWVBFX1dFQkdQVSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiICAgICAgIGdldFNoYWRvd0Nvb3JkUGVyc3BaYnVmZmVyXCIgKyBzaGFkb3dDb29yZEFyZ3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBcIiAgICAgICBnZXRTaGFkb3dDb29yZFBlcnNwXCIgKyBzaGFkb3dDb29yZEFyZ3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uYWxTaGFkb3dNYXBQcm9qZWN0aW9uKGxpZ2h0LCBzaGFkb3dDb29yZEFyZ3MsIHNoYWRvd1BhcmFtQXJnLCBsaWdodEluZGV4LCBcImdldFNoYWRvd0Nvb3JkT3J0aG9cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpZ2h0Ll90eXBlID09PSBMSUdIVFRZUEVfU1BPVCkge1xuICAgICAgICAgICAgaWYgKGxpZ2h0Ll9pc1BjZiAmJiAoZGV2aWNlLndlYmdsMiB8fCBkZXZpY2UuZXh0U3RhbmRhcmREZXJpdmF0aXZlcyB8fCBkZXZpY2UuZGV2aWNlVHlwZSA9PT0gREVWSUNFVFlQRV9XRUJHUFUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiICAgICAgIGdldFNoYWRvd0Nvb3JkUGVyc3BaYnVmZmVyTm9ybWFsT2Zmc2V0XCIgKyBzaGFkb3dDb29yZEFyZ3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCIgICAgICAgZ2V0U2hhZG93Q29vcmRQZXJzcE5vcm1hbE9mZnNldFwiICsgc2hhZG93Q29vcmRBcmdzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb25hbFNoYWRvd01hcFByb2plY3Rpb24obGlnaHQsIHNoYWRvd0Nvb3JkQXJncywgc2hhZG93UGFyYW1BcmcsIGxpZ2h0SW5kZXgsIFwiZ2V0U2hhZG93Q29vcmRPcnRob05vcm1hbE9mZnNldFwiKTtcbiAgICB9XG5cbiAgICBfZ2V0TGlnaHRTb3VyY2VTaGFwZVN0cmluZyhzaGFwZSkge1xuICAgICAgICBzd2l0Y2ggKHNoYXBlKSB7XG4gICAgICAgICAgICBjYXNlIExJR0hUU0hBUEVfUkVDVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1JlY3QnO1xuICAgICAgICAgICAgY2FzZSBMSUdIVFNIQVBFX0RJU0s6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdEaXNrJztcbiAgICAgICAgICAgIGNhc2UgTElHSFRTSEFQRV9TUEhFUkU6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdTcGhlcmUnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZW5lcmF0ZVZlcnRleFNoYWRlcih1c2VVdiwgdXNlVW5tb2RpZmllZFV2LCBtYXBUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLmNodW5rcztcblxuICAgICAgICBsZXQgY29kZSA9ICcnO1xuICAgICAgICBsZXQgY29kZUJvZHkgPSAnJztcblxuICAgICAgICAvLyBjb2RlICs9IGNodW5rcy5iYXNlVlM7XG4gICAgICAgIGNvZGUgPSB0aGlzLl92c0FkZEJhc2VDb2RlKGNvZGUsIGNodW5rcywgb3B0aW9ucyk7XG5cbiAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2UG9zaXRpb25XICAgID0gZ2V0V29ybGRQb3NpdGlvbigpO1xcblwiO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFzcyA9PT0gU0hBREVSX0RFUFRIKSB7XG4gICAgICAgICAgICBjb2RlICs9ICd2YXJ5aW5nIGZsb2F0IHZEZXB0aDtcXG4nO1xuICAgICAgICAgICAgY29kZSArPSAnI2lmbmRlZiBWSUVXTUFUUklYXFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJyNkZWZpbmUgVklFV01BVFJJWFxcbic7XG4gICAgICAgICAgICBjb2RlICs9ICd1bmlmb3JtIG1hdDQgbWF0cml4X3ZpZXc7XFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJyNlbmRpZlxcbic7XG4gICAgICAgICAgICBjb2RlICs9ICcjaWZuZGVmIENBTUVSQVBMQU5FU1xcbic7XG4gICAgICAgICAgICBjb2RlICs9ICcjZGVmaW5lIENBTUVSQVBMQU5FU1xcbic7XG4gICAgICAgICAgICBjb2RlICs9ICd1bmlmb3JtIHZlYzQgY2FtZXJhX3BhcmFtcztcXG5cXG4nO1xuICAgICAgICAgICAgY29kZSArPSAnI2VuZGlmXFxuJztcbiAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgIHZEZXB0aCA9IC0obWF0cml4X3ZpZXcgKiB2ZWM0KHZQb3NpdGlvblcsMS4wKSkueiAqIGNhbWVyYV9wYXJhbXMueDtcXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlSW5zdGFuY2luZykge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmluc3RhbmNlX2xpbmUxID0gU0VNQU5USUNfQVRUUjEyO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmluc3RhbmNlX2xpbmUyID0gU0VNQU5USUNfQVRUUjEzO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmluc3RhbmNlX2xpbmUzID0gU0VNQU5USUNfQVRUUjE0O1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmluc3RhbmNlX2xpbmU0ID0gU0VNQU5USUNfQVRUUjE1O1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MuaW5zdGFuY2luZ1ZTO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmVlZHNOb3JtYWwpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy52ZXJ0ZXhfbm9ybWFsID0gU0VNQU5USUNfTk9STUFMO1xuICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2Tm9ybWFsVyA9IGdldE5vcm1hbCgpO1xcblwiO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID09PSAnc3BoZXJlTWFwJyAmJiBkZXZpY2UuZnJhZ21lbnRVbmlmb3Jtc0NvdW50IDw9IDE2KSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3Mudmlld05vcm1hbFZTO1xuICAgICAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdk5vcm1hbFYgICAgPSBnZXRWaWV3Tm9ybWFsKCk7XFxuXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc1RhbmdlbnRzICYmIChvcHRpb25zLmhlaWdodE1hcEVuYWJsZWQgfHwgb3B0aW9ucy5ub3JtYWxNYXBFbmFibGVkIHx8IG9wdGlvbnMuZW5hYmxlR0dYU3BlY3VsYXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnZlcnRleF90YW5nZW50ID0gU0VNQU5USUNfVEFOR0VOVDtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rcy50YW5nZW50Qmlub3JtYWxWUztcbiAgICAgICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZUYW5nZW50VyAgID0gZ2V0VGFuZ2VudCgpO1xcblwiO1xuICAgICAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdkJpbm9ybWFsVyAgPSBnZXRCaW5vcm1hbCgpO1xcblwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyIHx8ICFkZXZpY2UuZXh0U3RhbmRhcmREZXJpdmF0aXZlcykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnRhbmdlbnRCaW5vcm1hbFZTO1xuICAgICAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdk9iamVjdFNwYWNlVXBXICA9IGdldE9iamVjdFNwYWNlVXAoKTtcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1heFV2U2V0cyA9IDI7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhVdlNldHM7IGkrKykge1xuICAgICAgICAgICAgaWYgKHVzZVV2W2ldKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzW1widmVydGV4X3RleENvb3JkXCIgKyBpXSA9IFwiVEVYQ09PUkRcIiArIGk7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3NbXCJ1dlwiICsgaSArIFwiVlNcIl07XG4gICAgICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2ZWMyIHV2XCIgKyBpICsgXCIgPSBnZXRVdlwiICsgaSArIFwiKCk7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlVW5tb2RpZmllZFV2W2ldKSB7XG4gICAgICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2VXZcIiArIGkgKyBcIiA9IHV2XCIgKyBpICsgXCI7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb2RlcyA9IFtjb2RlLCB0aGlzLnZhcnlpbmdzLCBjb2RlQm9keSwgW11dO1xuXG4gICAgICAgIG1hcFRyYW5zZm9ybXMuZm9yRWFjaCgobWFwVHJhbnNmb3JtKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zZXRNYXBUcmFuc2Zvcm0oY29kZXMsIG1hcFRyYW5zZm9ybS5uYW1lLCBtYXBUcmFuc2Zvcm0uaWQsIG1hcFRyYW5zZm9ybS51dik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvZGUgPSBjb2Rlc1swXTtcbiAgICAgICAgdGhpcy52YXJ5aW5ncyA9IGNvZGVzWzFdO1xuICAgICAgICBjb2RlQm9keSA9IGNvZGVzWzJdO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnZlcnRleENvbG9ycykge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnZlcnRleF9jb2xvciA9IFNFTUFOVElDX0NPTE9SO1xuICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2VmVydGV4Q29sb3IgPSB2ZXJ0ZXhfY29sb3I7XFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy51c2VNc2RmICYmIG9wdGlvbnMubXNkZlRleHRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy52ZXJ0ZXhfb3V0bGluZVBhcmFtZXRlcnMgPSBTRU1BTlRJQ19BVFRSODtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy52ZXJ0ZXhfc2hhZG93UGFyYW1ldGVycyA9IFNFTUFOVElDX0FUVFI5O1xuXG4gICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgICB1bnBhY2tNc2RmUGFyYW1zKCk7XFxuXCI7XG5cbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLm1zZGZWUztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vcnBoaW5nXG4gICAgICAgIGlmIChvcHRpb25zLnVzZU1vcnBoUG9zaXRpb24gfHwgb3B0aW9ucy51c2VNb3JwaE5vcm1hbCkge1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VNb3JwaFRleHR1cmVCYXNlZCkge1xuXG4gICAgICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgTU9SUEhJTkdfVEVYVFVSRV9CQVNFRFxcblwiO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTW9ycGhQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19URVhUVVJFX0JBU0VEX1BPU0lUSU9OXFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTW9ycGhOb3JtYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgTU9SUEhJTkdfVEVYVFVSRV9CQVNFRF9OT1JNQUxcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB2ZXJ0ZXggaWRzIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfdmVydGV4X2lkID0gU0VNQU5USUNfQVRUUjE1O1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgZmxvYXQgbW9ycGhfdmVydGV4X2lkO1xcblwiO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy8gc2V0IHVwIDggc2xvdHMgZm9yIG1vcnBoaW5nLiB0aGVzZSBhcmUgc3VwcG9ydGVkIGNvbWJpbmF0aW9uczogUFBQUFBQUFAsIE5OTk5OTk5OLCBQUFBQTk5OTlxuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HXFxuXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBmaXJzdCA0IHNsb3RzIGFyZSBlaXRoZXIgcG9zaXRpb24gb3Igbm9ybWFsXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTW9ycGhQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zMCA9IFNFTUFOVElDX0FUVFI4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zMSA9IFNFTUFOVElDX0FUVFI5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zMiA9IFNFTUFOVElDX0FUVFIxMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczMgPSBTRU1BTlRJQ19BVFRSMTE7XG5cbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgTU9SUEhJTkdfUE9TMDNcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczA7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9wb3MxO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zMjtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczM7XFxuXCI7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMudXNlTW9ycGhOb3JtYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTAgPSBTRU1BTlRJQ19BVFRSODtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTEgPSBTRU1BTlRJQ19BVFRSOTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTIgPSBTRU1BTlRJQ19BVFRSMTA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm0zID0gU0VNQU5USUNfQVRUUjExO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HX05STTAzXFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm0wO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtMTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX25ybTI7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm0zO1xcblwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIG5leHQgNCBzbG90cyBhcmUgZWl0aGVyIHBvc2l0aW9uIG9yIG5vcm1hbFxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy51c2VNb3JwaE5vcm1hbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zNCA9IFNFTUFOVElDX0FUVFIxMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczUgPSBTRU1BTlRJQ19BVFRSMTM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9wb3M2ID0gU0VNQU5USUNfQVRUUjE0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zNyA9IFNFTUFOVElDX0FUVFIxNTtcblxuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19QT1M0N1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zNDtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczU7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9wb3M2O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zNztcXG5cIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfbnJtNCA9IFNFTUFOVElDX0FUVFIxMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTUgPSBTRU1BTlRJQ19BVFRSMTM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm02ID0gU0VNQU5USUNfQVRUUjE0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfbnJtNyA9IFNFTUFOVElDX0FUVFIxNTtcblxuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19OUk00N1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtNDtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX25ybTU7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm02O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtNztcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5za2luKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X2JvbmVXZWlnaHRzID0gU0VNQU5USUNfQkxFTkRXRUlHSFQ7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X2JvbmVJbmRpY2VzID0gU0VNQU5USUNfQkxFTkRJTkRJQ0VTO1xuICAgICAgICAgICAgY29kZSArPSBza2luQ29kZShkZXZpY2UsIGNodW5rcyk7XG4gICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBTS0lOXFxuXCI7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy51c2VJbnN0YW5jaW5nKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBJTlNUQU5DSU5HXFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2NyZWVuU3BhY2UpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIFNDUkVFTlNQQUNFXFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucGl4ZWxTbmFwKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBQSVhFTFNOQVBcXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvZGUgPSB0aGlzLl92c0FkZFRyYW5zZm9ybUNvZGUoY29kZSwgZGV2aWNlLCBjaHVua3MsIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmICh0aGlzLm5lZWRzTm9ybWFsKSB7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5ub3JtYWxWUztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvZGUgKz0gXCJcXG5cIjtcbiAgICAgICAgY29kZSArPSBjaHVua3Muc3RhcnRWUztcbiAgICAgICAgY29kZSArPSBjb2RlQm9keTtcbiAgICAgICAgY29kZSArPSBjaHVua3MuZW5kVlM7XG4gICAgICAgIGNvZGUgKz0gXCJ9XCI7XG5cbiAgICAgICAgLy8gYnVpbGQgdmFyeWluZ3NcbiAgICAgICAgT2JqZWN0LmtleXMoYnVpbHRpblZhcnlpbmdzKS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29kZS5pbmRleE9mKHYpID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcnlpbmdzICs9IGB2YXJ5aW5nICR7YnVpbHRpblZhcnlpbmdzW3ZdfSAke3Z9O1xcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNoYWRlclBhc3NEZWZpbmUgPSBTaGFkZXJQYXNzLmdldFBhc3NTaGFkZXJEZWZpbmUodGhpcy5vcHRpb25zLnBhc3MpO1xuICAgICAgICB0aGlzLnZzaGFkZXIgPSBzaGFkZXJQYXNzRGVmaW5lICsgdGhpcy52YXJ5aW5ncyArIGNvZGU7XG4gICAgfVxuXG4gICAgX2ZzR2V0QmVnaW5Db2RlKCkge1xuXG4gICAgICAgIGxldCBjb2RlID0gU2hhZGVyUGFzcy5nZXRQYXNzU2hhZGVyRGVmaW5lKHRoaXMub3B0aW9ucy5wYXNzKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGVmaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29kZSArPSBgI2RlZmluZSAke3RoaXMuZGVmaW5lc1tpXX1cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgX2ZzR2V0UGlja1Bhc3NDb2RlKCkge1xuICAgICAgICBsZXQgY29kZSA9IHRoaXMuX2ZzR2V0QmVnaW5Db2RlKCk7XG4gICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHZlYzQgdUNvbG9yO1xcblwiO1xuICAgICAgICBjb2RlICs9IHRoaXMudmFyeWluZ3M7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZERlY2w7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZENvZGU7XG4gICAgICAgIGNvZGUgKz0gYmVnaW4oKTtcbiAgICAgICAgY29kZSArPSB0aGlzLmZyb250ZW5kRnVuYztcbiAgICAgICAgY29kZSArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSB1Q29sb3I7XFxuXCI7XG4gICAgICAgIGNvZGUgKz0gZW5kKCk7XG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIF9mc0dldERlcHRoUGFzc0NvZGUoKSB7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuY2h1bmtzO1xuXG4gICAgICAgIGxldCBjb2RlID0gdGhpcy5fZnNHZXRCZWdpbkNvZGUoKTtcblxuICAgICAgICBjb2RlICs9ICd2YXJ5aW5nIGZsb2F0IHZEZXB0aDtcXG4nO1xuICAgICAgICBjb2RlICs9IHRoaXMudmFyeWluZ3M7XG4gICAgICAgIGNvZGUgKz0gY2h1bmtzLnBhY2tEZXB0aFBTO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmREZWNsO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmRDb2RlO1xuICAgICAgICBjb2RlICs9IGJlZ2luKCk7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZEZ1bmM7XG4gICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gcGFja0Zsb2F0KHZEZXB0aCk7XFxuXCI7XG4gICAgICAgIGNvZGUgKz0gZW5kKCk7XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgX2ZzR2V0U2hhZG93UGFzc0NvZGUoKSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLmNodW5rcztcbiAgICAgICAgY29uc3QgdmFyeWluZ3MgPSB0aGlzLnZhcnlpbmdzO1xuXG4gICAgICAgIGNvbnN0IGxpZ2h0VHlwZSA9IFNoYWRlclBhc3MudG9MaWdodFR5cGUob3B0aW9ucy5wYXNzKTtcbiAgICAgICAgY29uc3Qgc2hhZG93VHlwZSA9IFNoYWRlclBhc3MudG9TaGFkb3dUeXBlKG9wdGlvbnMucGFzcyk7XG5cbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLl9mc0dldEJlZ2luQ29kZSgpO1xuXG4gICAgICAgIGlmIChkZXZpY2UuZXh0U3RhbmRhcmREZXJpdmF0aXZlcyAmJiAhZGV2aWNlLndlYmdsMiAmJiBkZXZpY2UuZGV2aWNlVHlwZSAhPT0gREVWSUNFVFlQRV9XRUJHUFUpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gJ3VuaWZvcm0gdmVjMiBwb2x5Z29uT2Zmc2V0O1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTMyKSB7XG4gICAgICAgICAgICBpZiAoZGV2aWNlLnRleHR1cmVGbG9hdEhpZ2hQcmVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9ICcjZGVmaW5lIFZTTV9FWFBPTkVOVCAxNS4wXFxuXFxuJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSAnI2RlZmluZSBWU01fRVhQT05FTlQgNS41NFxcblxcbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTE2KSB7XG4gICAgICAgICAgICBjb2RlICs9ICcjZGVmaW5lIFZTTV9FWFBPTkVOVCA1LjU0XFxuXFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaWdodFR5cGUgIT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgY29kZSArPSAndW5pZm9ybSB2ZWMzIHZpZXdfcG9zaXRpb247XFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJ3VuaWZvcm0gZmxvYXQgbGlnaHRfcmFkaXVzO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlICs9IHZhcnlpbmdzO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmREZWNsO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmRDb2RlO1xuXG4gICAgICAgIGlmIChzaGFkb3dUeXBlID09PSBTSEFET1dfUENGMyAmJiAoIWRldmljZS53ZWJnbDIgfHwgZGV2aWNlLmRldmljZVR5cGUgIT09IERFVklDRVRZUEVfV0VCR1BVIHx8IGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkpKSB7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5wYWNrRGVwdGhQUztcbiAgICAgICAgfSBlbHNlIGlmIChzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNOCkge1xuICAgICAgICAgICAgY29kZSArPSBcInZlYzIgZW5jb2RlRmxvYXRSRyggZmxvYXQgdiApIHtcXG5cIjtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgdmVjMiBlbmMgPSB2ZWMyKDEuMCwgMjU1LjApICogdjtcXG5cIjtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZW5jID0gZnJhY3QoZW5jKTtcXG5cIjtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZW5jIC09IGVuYy55eSAqIHZlYzIoMS4wLzI1NS4wLCAxLjAvMjU1LjApO1xcblwiO1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICByZXR1cm4gZW5jO1xcblwiO1xuICAgICAgICAgICAgY29kZSArPSBcIn1cXG5cXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvZGUgKz0gYmVnaW4oKTtcblxuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmRGdW5jO1xuXG4gICAgICAgIGNvbnN0IGlzVnNtID0gc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTggfHwgc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTE2IHx8IHNoYWRvd1R5cGUgPT09IFNIQURPV19WU00zMjtcbiAgICAgICAgY29uc3QgYXBwbHlTbG9wZVNjYWxlQmlhcyA9ICFkZXZpY2Uud2ViZ2wyICYmIGRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzICYmIGRldmljZS5kZXZpY2VUeXBlICE9PSBERVZJQ0VUWVBFX1dFQkdQVTtcblxuICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfT01OSSB8fCAoaXNWc20gJiYgbGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGZsb2F0IGRlcHRoID0gbWluKGRpc3RhbmNlKHZpZXdfcG9zaXRpb24sIHZQb3NpdGlvblcpIC8gbGlnaHRfcmFkaXVzLCAwLjk5OTk5KTtcXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQuejtcXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcHBseVNsb3BlU2NhbGVCaWFzKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGZsb2F0IG1pblZhbHVlID0gMi4zMzc0MzcwNTAwMTUzMTg2ZS0xMDsgLy8oMS4wIC8gMjU1LjApIC8gKDI1Ni4wICogMjU2LjAgKiAyNTYuMCk7XFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGRlcHRoICs9IHBvbHlnb25PZmZzZXQueCAqIG1heChhYnMoZEZkeChkZXB0aCkpLCBhYnMoZEZkeShkZXB0aCkpKSArIG1pblZhbHVlICogcG9seWdvbk9mZnNldC55O1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ0YzICYmICghZGV2aWNlLndlYmdsMiB8fCAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfT01OSSAmJiAhb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQpKSkge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSBwYWNrRmxvYXQoZGVwdGgpO1xcblwiO1xuICAgICAgICB9IGVsc2UgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ0YzIHx8IHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ0Y1KSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG5cIjsgLy8ganVzdCB0aGUgc2ltcGxlc3QgY29kZSwgY29sb3IgaXMgbm90IHdyaXR0ZW4gYW55d2F5XG5cbiAgICAgICAgICAgIC8vIGNsdXN0ZXJlZCBvbW5pIGxpZ2h0IGlzIHVzaW5nIHNoYWRvdyBzYW1wbGVyIGFuZCBuZWVkcyB0byB3cml0ZSBjdXN0b20gZGVwdGhcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCAmJiBsaWdodFR5cGUgPT09IExJR0hUVFlQRV9PTU5JICYmIGRldmljZS53ZWJnbDIpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGdsX0ZyYWdEZXB0aCA9IGRlcHRoO1xcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19WU004KSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoZW5jb2RlRmxvYXRSRyhkZXB0aCksIGVuY29kZUZsb2F0UkcoZGVwdGgqZGVwdGgpKTtcXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnN0b3JlRVZTTVBTO1xuICAgICAgICB9XG5cbiAgICAgICAgY29kZSArPSBlbmQoKTtcblxuICAgICAgICByZXR1cm4gY29kZTtcbiAgICB9XG5cbiAgICAvLyB0aGUgYmlnIG9uZVxuICAgIF9mc0dldExpdFBhc3NDb2RlKCkge1xuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLmRldmljZTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5jaHVua3M7XG5cbiAgICAgICAgbGV0IGNvZGUgPSBcIlwiO1xuXG4gICAgICAgIGlmIChvcHRpb25zLm9wYWNpdHlGYWRlc1NwZWN1bGFyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29kZSArPSAndW5pZm9ybSBmbG9hdCBtYXRlcmlhbF9hbHBoYUZhZGU7XFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9TUEVDVUxBUlwiKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9SRUZMRUNUSU9OU1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ2xlYXJDb2F0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVzLnB1c2goXCJMSVRfQ0xFQVJDT0FUXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5mcmVzbmVsTW9kZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVzLnB1c2goXCJMSVRfU1BFQ1VMQVJfRlJFU05FTFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZW5hYmxlIGNvbnNlcnZlIGVuZXJneSBwYXRoIGluIGNsdXN0ZXJlZCBjaHVua1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29uc2VydmVFbmVyZ3kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9DT05TRVJWRV9FTkVSR1lcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNoZWVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVzLnB1c2goXCJMSVRfU0hFRU5cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUlyaWRlc2NlbmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVzLnB1c2goXCJMSVRfSVJJREVTQ0VOQ0VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGUkFHTUVOVCBTSEFERVIgSU5QVVRTOiBVTklGT1JNU1xuICAgICAgICBjb25zdCBzaGFkb3dUeXBlVXNlZCA9IFtdO1xuICAgICAgICBsZXQgbnVtU2hhZG93TGlnaHRzID0gMDtcbiAgICAgICAgbGV0IHNoYWRvd2VkRGlyZWN0aW9uYWxMaWdodFVzZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHVzZVZzbSA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlUGVyc3BaYnVmZmVyU2hhZG93ID0gZmFsc2U7XG5cbiAgICAgICAgbGV0IGhhc0FyZWFMaWdodHMgPSBvcHRpb25zLmxpZ2h0cy5zb21lKGZ1bmN0aW9uIChsaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpZ2h0Ll9zaGFwZSAmJiBsaWdodC5fc2hhcGUgIT09IExJR0hUU0hBUEVfUFVOQ1RVQUw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGlmIGNsdXN0ZXJlZCBsaWdodGluZyBoYXMgYXJlYSBsaWdodHMgZW5hYmxlZCwgaXQgYWx3YXlzIHJ1bnMgaW4gJ2FyZWEgbGlnaHRzIG1vZGUnXG4gICAgICAgIC8vIFRPRE86IG1heWJlIHdlIHNob3VsZCBhbHdheXMgdXNlIGl0IGFuZCByZW1vdmUgdGhlIG90aGVyIHdheT9cbiAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCkge1xuICAgICAgICAgICAgaGFzQXJlYUxpZ2h0cyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYXJlYUx1dHNQcmVjaXNpb24gPSAnaGlnaHAnO1xuICAgICAgICBpZiAoZGV2aWNlLmFyZWFMaWdodEx1dEZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUkdCQTgpIHtcbiAgICAgICAgICAgIC8vIHVzZSBvZmZzZXQgYW5kIHNjYWxlIGZvciByZ2I4IGZvcm1hdCBsdXRzXG4gICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBBUkVBX1I4X0c4X0I4X0E4X0xVVFNcXG5cIjtcbiAgICAgICAgICAgIGFyZWFMdXRzUHJlY2lzaW9uID0gJ2xvd3AnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc0FyZWFMaWdodHMgfHwgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIEFSRUFfTElHSFRTXFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IGB1bmlmb3JtICR7YXJlYUx1dHNQcmVjaXNpb259IHNhbXBsZXIyRCBhcmVhTGlnaHRzTHV0VGV4MTtcXG5gO1xuICAgICAgICAgICAgY29kZSArPSBgdW5pZm9ybSAke2FyZWFMdXRzUHJlY2lzaW9ufSBzYW1wbGVyMkQgYXJlYUxpZ2h0c0x1dFRleDI7XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5saWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0ID0gb3B0aW9ucy5saWdodHNbaV07XG4gICAgICAgICAgICBjb25zdCBsaWdodFR5cGUgPSBsaWdodC5fdHlwZTtcblxuICAgICAgICAgICAgLy8gc2tpcCB1bmlmb3JtIGdlbmVyYXRpb24gZm9yIGxvY2FsIGxpZ2h0cyBpZiBjbHVzdGVyZWQgbGlnaHRpbmcgaXMgZW5hYmxlZFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIGxpZ2h0VHlwZSAhPT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBsaWdodFNoYXBlID0gKGhhc0FyZWFMaWdodHMgJiYgbGlnaHQuX3NoYXBlKSA/IGxpZ2h0Ll9zaGFwZSA6IExJR0hUU0hBUEVfUFVOQ1RVQUw7XG5cbiAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9jb2xvcjtcXG5cIjtcbiAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9kaXJlY3Rpb247XFxuXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9wb3NpdGlvbjtcXG5cIjtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSBmbG9hdCBsaWdodFwiICsgaSArIFwiX3JhZGl1cztcXG5cIjtcbiAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfU1BPVCkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSB2ZWMzIGxpZ2h0XCIgKyBpICsgXCJfZGlyZWN0aW9uO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSBmbG9hdCBsaWdodFwiICsgaSArIFwiX2lubmVyQ29uZUFuZ2xlO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSBmbG9hdCBsaWdodFwiICsgaSArIFwiX291dGVyQ29uZUFuZ2xlO1xcblwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9wb3NpdGlvbjtcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29kZSArPSBcInVuaWZvcm0gdmVjMyBsaWdodFwiICsgaSArIFwiX2hhbGZXaWR0aDtcXG5cIjtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSB2ZWMzIGxpZ2h0XCIgKyBpICsgXCJfaGFsZkhlaWdodDtcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodC5jYXN0U2hhZG93cyAmJiAhb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIG1hdDQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXRyaXg7XFxuXCI7XG4gICAgICAgICAgICAgICAgY29kZSArPSBcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dJbnRlbnNpdHk7XFxuXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBkaXJlY3Rpb25hbCAoY2FzY2FkZWQpIHNoYWRvd3NcbiAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcInVuaWZvcm0gbWF0NCBsaWdodFwiICsgaSArIFwiX3NoYWRvd01hdHJpeFBhbGV0dGVbNF07XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93Q2FzY2FkZURpc3RhbmNlc1s0XTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dDYXNjYWRlQ291bnQ7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSAhPT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHZlYzQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dQYXJhbXM7XFxuXCI7IC8vIFdpZHRoLCBoZWlnaHQsIGJpYXMsIHJhZGl1c1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRvd2VkRGlyZWN0aW9uYWxMaWdodFVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSB2ZWMzIGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93UGFyYW1zO1xcblwiOyAvLyBXaWR0aCwgaGVpZ2h0LCBiaWFzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9PTU5JKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHNhbXBsZXJDdWJlIGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWFwO1xcblwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodC5faXNQY2YgJiYgZGV2aWNlLnN1cHBvcnRzRGVwdGhTaGFkb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHNhbXBsZXIyRFNoYWRvdyBsaWdodFwiICsgaSArIFwiX3NoYWRvd01hcDtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHNhbXBsZXIyRCBsaWdodFwiICsgaSArIFwiX3NoYWRvd01hcDtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBudW1TaGFkb3dMaWdodHMrKztcbiAgICAgICAgICAgICAgICBzaGFkb3dUeXBlVXNlZFtsaWdodC5fc2hhZG93VHlwZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChsaWdodC5faXNWc20pIHVzZVZzbSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9pc1BjZiAmJiAoZGV2aWNlLnN1cHBvcnRzRGVwdGhTaGFkb3cgfHwgZGV2aWNlLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMpICYmIGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHVzZVBlcnNwWmJ1ZmZlclNoYWRvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGlnaHQuX2Nvb2tpZSkge1xuICAgICAgICAgICAgICAgIGlmIChsaWdodC5fY29va2llLl9jdWJlbWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9PTU5JKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSBzYW1wbGVyQ3ViZSBsaWdodFwiICsgaSArIFwiX2Nvb2tpZTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaWdodC5jYXN0U2hhZG93cyB8fCBvcHRpb25zLm5vU2hhZG93KSBjb2RlICs9IFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHNhbXBsZXIyRCBsaWdodFwiICsgaSArIFwiX2Nvb2tpZTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaWdodC5jYXN0U2hhZG93cyB8fCBvcHRpb25zLm5vU2hhZG93KSBjb2RlICs9IFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9jb29raWVUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwidW5pZm9ybSB2ZWM0IGxpZ2h0XCIgKyBpICsgXCJfY29va2llTWF0cml4O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJ1bmlmb3JtIHZlYzIgbGlnaHRcIiArIGkgKyBcIl9jb29raWVPZmZzZXQ7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlICs9IFwiXFxuXCI7IC8vIEVuZCBvZiB1bmlmb3JtIGRlY2xhcmF0aW9uc1xuXG4gICAgICAgIC8vIFRCTlxuICAgICAgICBjb25zdCBoYXNUQk4gPSB0aGlzLm5lZWRzTm9ybWFsICYmIChvcHRpb25zLm5vcm1hbE1hcEVuYWJsZWQgfHwgb3B0aW9ucy5jbGVhckNvYXROb3JtYWxNYXBFbmFibGVkIHx8IChvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyICYmICFvcHRpb25zLmhlaWdodE1hcEVuYWJsZWQpKTtcblxuICAgICAgICBpZiAoaGFzVEJOKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNUYW5nZW50cykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gb3B0aW9ucy5mYXN0VGJuID8gY2h1bmtzLlRCTmZhc3RQUyA6IGNodW5rcy5UQk5QUztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzICYmIChvcHRpb25zLm5vcm1hbE1hcEVuYWJsZWQgfHwgb3B0aW9ucy5jbGVhckNvYXROb3JtYWxNYXBFbmFibGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rcy5UQk5kZXJpdmF0aXZlUFMucmVwbGFjZSgvXFwkVVYvZywgdGhpcy5saWdodGluZ1V2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rcy5UQk5PYmplY3RTcGFjZVBTO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBvbmx5IGFkZCB0aGVzZSB3aGVuIG5lZWRlZFxuICAgICAgICBjb2RlICs9IGNodW5rcy5zcGhlcmljYWxQUztcbiAgICAgICAgY29kZSArPSBjaHVua3MuZGVjb2RlUFM7XG4gICAgICAgIGNvZGUgKz0gZ2FtbWFDb2RlKG9wdGlvbnMuZ2FtbWEsIGNodW5rcyk7XG4gICAgICAgIGNvZGUgKz0gdG9uZW1hcENvZGUob3B0aW9ucy50b25lTWFwLCBjaHVua3MpO1xuICAgICAgICBjb2RlICs9IGZvZ0NvZGUob3B0aW9ucy5mb2csIGNodW5rcyk7XG5cblxuICAgICAgICAvLyBmcm9udGVuZFxuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmRDb2RlO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZUN1YmVNYXBSb3RhdGlvbikge1xuICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgQ1VCRU1BUF9ST1RBVElPTlxcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmVlZHNOb3JtYWwpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLmN1YmVNYXBSb3RhdGVQUztcbiAgICAgICAgICAgIGNvZGUgKz0gb3B0aW9ucy5jdWJlTWFwUHJvamVjdGlvbiA+IDAgPyBjaHVua3MuY3ViZU1hcFByb2plY3RCb3hQUyA6IGNodW5rcy5jdWJlTWFwUHJvamVjdE5vbmVQUztcbiAgICAgICAgICAgIGNvZGUgKz0gb3B0aW9ucy5za3lib3hJbnRlbnNpdHkgPyBjaHVua3MuZW52TXVsdGlwbHlQUyA6IGNodW5rcy5lbnZDb25zdFBTO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCh0aGlzLmxpZ2h0aW5nICYmIG9wdGlvbnMudXNlU3BlY3VsYXIpIHx8IHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZU1ldGFsbmVzcykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLm1ldGFsbmVzc01vZHVsYXRlUFM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZyZXNuZWxNb2RlbCA9PT0gRlJFU05FTF9TQ0hMSUNLKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MuZnJlc25lbFNjaGxpY2tQUztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlSXJpZGVzY2VuY2UpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rcy5pcmlkZXNjZW5jZURpZmZyYWN0aW9uUFM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VBbyA9IG9wdGlvbnMuYW9NYXBFbmFibGVkIHx8IG9wdGlvbnMudXNlQW9WZXJ0ZXhDb2xvcnM7XG5cbiAgICAgICAgaWYgKHVzZUFvKSB7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5hb0RpZmZ1c2VPY2NQUztcbiAgICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5vY2NsdWRlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFNQRUNPQ0NfQU86XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gb3B0aW9ucy5vY2NsdWRlU3BlY3VsYXJGbG9hdCA/IGNodW5rcy5hb1NwZWNPY2NTaW1wbGVQUyA6IGNodW5rcy5hb1NwZWNPY2NDb25zdFNpbXBsZVBTO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNQRUNPQ0NfR0xPU1NERVBFTkRFTlQ6XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gb3B0aW9ucy5vY2NsdWRlU3BlY3VsYXJGbG9hdCA/IGNodW5rcy5hb1NwZWNPY2NQUyA6IGNodW5rcy5hb1NwZWNPY2NDb25zdFBTO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPT09ICdlbnZBdGxhc0hRJykge1xuICAgICAgICAgICAgY29kZSArPSBvcHRpb25zLmZpeFNlYW1zID8gY2h1bmtzLmZpeEN1YmVtYXBTZWFtc1N0cmV0Y2hQUyA6IGNodW5rcy5maXhDdWJlbWFwU2VhbXNOb25lUFM7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5lbnZBdGxhc1BTO1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MucmVmbGVjdGlvbkVudkhRUFMucmVwbGFjZSgvXFwkREVDT0RFL2csIENodW5rVXRpbHMuZGVjb2RlRnVuYyhvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZykpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSA9PT0gJ2VudkF0bGFzJykge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MuZW52QXRsYXNQUztcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnJlZmxlY3Rpb25FbnZQUy5yZXBsYWNlKC9cXCRERUNPREUvZywgQ2h1bmtVdGlscy5kZWNvZGVGdW5jKG9wdGlvbnMucmVmbGVjdGlvbkVuY29kaW5nKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID09PSAnY3ViZU1hcCcpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gb3B0aW9ucy5maXhTZWFtcyA/IGNodW5rcy5maXhDdWJlbWFwU2VhbXNTdHJldGNoUFMgOiBjaHVua3MuZml4Q3ViZW1hcFNlYW1zTm9uZVBTO1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MucmVmbGVjdGlvbkN1YmVQUy5yZXBsYWNlKC9cXCRERUNPREUvZywgQ2h1bmtVdGlscy5kZWNvZGVGdW5jKG9wdGlvbnMucmVmbGVjdGlvbkVuY29kaW5nKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID09PSAnc3BoZXJlTWFwJykge1xuICAgICAgICAgICAgY29uc3Qgc2NvZGUgPSBkZXZpY2UuZnJhZ21lbnRVbmlmb3Jtc0NvdW50ID4gMTYgPyBjaHVua3MucmVmbGVjdGlvblNwaGVyZVBTIDogY2h1bmtzLnJlZmxlY3Rpb25TcGhlcmVMb3dQUztcbiAgICAgICAgICAgIGNvZGUgKz0gc2NvZGUucmVwbGFjZSgvXFwkREVDT0RFL2csIENodW5rVXRpbHMuZGVjb2RlRnVuYyhvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUNsZWFyQ29hdCkge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnJlZmxlY3Rpb25DQ1BTO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU2hlZW4pIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rcy5yZWZsZWN0aW9uU2hlZW5QUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZVJlZnJhY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUR5bmFtaWNSZWZyYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MucmVmcmFjdGlvbkR5bmFtaWNQUztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnJlZnJhY3Rpb25DdWJlUFM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy51c2VTaGVlbikge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MubGlnaHRTaGVlblBTO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2x1c3RlcmVkIGxpZ2h0aW5nXG4gICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCkge1xuXG4gICAgICAgICAgICAvLyBpbmNsdWRlIHRoaXMgYmVmb3JlIHNoYWRvdyAvIGNvb2tpZSBjb2RlXG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5jbHVzdGVyZWRMaWdodFV0aWxzUFM7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0Nvb2tpZXNFbmFibGVkKVxuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLmNsdXN0ZXJlZExpZ2h0Q29va2llc1BTO1xuXG4gICAgICAgICAgICAvLyBpbmNsdWRlIHNoYWRvdyBjaHVua3MgY2x1c3RlcmVkIGxpZ2h0cyBzdXBwb3J0XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkICYmICFvcHRpb25zLm5vU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgc2hhZG93VHlwZVVzZWRbU0hBRE9XX1BDRjNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzaGFkb3dUeXBlVXNlZFtTSEFET1dfUENGNV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXNlUGVyc3BaYnVmZmVyU2hhZG93ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChudW1TaGFkb3dMaWdodHMgPiAwIHx8IG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAoc2hhZG93ZWREaXJlY3Rpb25hbExpZ2h0VXNlZCkge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnNoYWRvd0Nhc2NhZGVzUFM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1BDRjNdKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3Muc2hhZG93U3RhbmRhcmRQUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFkb3dUeXBlVXNlZFtTSEFET1dfUENGNV0gJiYgKGRldmljZS53ZWJnbDIgfHwgZGV2aWNlLmRldmljZVR5cGUgPT09IERFVklDRVRZUEVfV0VCR1BVKSkge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnNoYWRvd1N0YW5kYXJkR0wyUFM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlVnNtKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3Muc2hhZG93VlNNX2NvbW1vblBTO1xuICAgICAgICAgICAgICAgIGlmIChzaGFkb3dUeXBlVXNlZFtTSEFET1dfVlNNOF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3Muc2hhZG93VlNNOFBTO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1ZTTTE2XSkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IGRldmljZS5leHRUZXh0dXJlSGFsZkZsb2F0TGluZWFyID8gY2h1bmtzLnNoYWRvd0VWU01QUy5yZXBsYWNlKC9cXCQvZywgXCIxNlwiKSA6IGNodW5rcy5zaGFkb3dFVlNNblBTLnJlcGxhY2UoL1xcJC9nLCBcIjE2XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1ZTTTMyXSkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IGRldmljZS5leHRUZXh0dXJlRmxvYXRMaW5lYXIgPyBjaHVua3Muc2hhZG93RVZTTVBTLnJlcGxhY2UoL1xcJC9nLCBcIjMyXCIpIDogY2h1bmtzLnNoYWRvd0VWU01uUFMucmVwbGFjZSgvXFwkL2csIFwiMzJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIShkZXZpY2Uud2ViZ2wyIHx8IGRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzIHx8IGRldmljZS5kZXZpY2VUeXBlID09PSBERVZJQ0VUWVBFX1dFQkdQVSkpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rcy5iaWFzQ29uc3RQUztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGJpYXMgaXMgYXBwbGllZCBvbiByZW5kZXJcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnNoYWRvd0Nvb3JkUFMgKyBjaHVua3Muc2hhZG93Q29tbW9uUFM7XG4gICAgICAgICAgICBpZiAodXNlUGVyc3BaYnVmZmVyU2hhZG93KSBjb2RlICs9IGNodW5rcy5zaGFkb3dDb29yZFBlcnNwWmJ1ZmZlclBTO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlR0dYU3BlY3VsYXIpIGNvZGUgKz0gXCJ1bmlmb3JtIGZsb2F0IG1hdGVyaWFsX2FuaXNvdHJvcHk7XFxuXCI7XG5cbiAgICAgICAgaWYgKHRoaXMubGlnaHRpbmcpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLmxpZ2h0RGlmZnVzZUxhbWJlcnRQUztcbiAgICAgICAgICAgIGlmIChoYXNBcmVhTGlnaHRzIHx8IG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCkgY29kZSArPSBjaHVua3MubHRjUFM7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlICs9ICdcXG4nO1xuXG4gICAgICAgIGxldCB1c2VPbGRBbWJpZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmxpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBvcHRpb25zLnNoYWRpbmdNb2RlbCA9PT0gU1BFQ1VMQVJfUEhPTkcgPyBjaHVua3MubGlnaHRTcGVjdWxhclBob25nUFMgOiAob3B0aW9ucy5lbmFibGVHR1hTcGVjdWxhciA/IGNodW5rcy5saWdodFNwZWN1bGFyQW5pc29HR1hQUyA6IGNodW5rcy5saWdodFNwZWN1bGFyQmxpbm5QUyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5mcmVzbmVsTW9kZWwgJiYgIXRoaXMucmVmbGVjdGlvbnMgJiYgIW9wdGlvbnMuZGlmZnVzZU1hcEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIHVuaWZvcm0gdmVjMyBtYXRlcmlhbF9hbWJpZW50O1xcblwiO1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIExJVF9PTERfQU1CSUVOVFwiO1xuICAgICAgICAgICAgICAgIHVzZU9sZEFtYmllbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29kZSArPSBjaHVua3MuY29tYmluZVBTO1xuXG4gICAgICAgIC8vIGxpZ2h0bWFwIHN1cHBvcnRcbiAgICAgICAgaWYgKG9wdGlvbnMubGlnaHRNYXBFbmFibGVkIHx8IG9wdGlvbnMudXNlTGlnaHRNYXBWZXJ0ZXhDb2xvcnMpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gKG9wdGlvbnMudXNlU3BlY3VsYXIgJiYgb3B0aW9ucy5kaXJMaWdodE1hcEVuYWJsZWQpID8gY2h1bmtzLmxpZ2h0bWFwRGlyQWRkUFMgOiBjaHVua3MubGlnaHRtYXBBZGRQUztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFkZEFtYmllbnQgPSAoIW9wdGlvbnMubGlnaHRNYXBFbmFibGVkICYmICFvcHRpb25zLnVzZUxpZ2h0TWFwVmVydGV4Q29sb3JzKSB8fCBvcHRpb25zLmxpZ2h0TWFwV2l0aG91dEFtYmllbnQ7XG5cbiAgICAgICAgaWYgKGFkZEFtYmllbnQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFtYmllbnRTb3VyY2UgPT09ICdhbWJpZW50U0gnKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MuYW1iaWVudFNIUFM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuYW1iaWVudFNvdXJjZSA9PT0gJ2VudkF0bGFzJykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgIT09ICdlbnZBdGxhcycgJiYgb3B0aW9ucy5yZWZsZWN0aW9uU291cmNlICE9PSAnZW52QXRsYXNIUScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MuZW52QXRsYXNQUztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MuYW1iaWVudEVudlBTLnJlcGxhY2UoL1xcJERFQ09ERS9nLCBDaHVua1V0aWxzLmRlY29kZUZ1bmMob3B0aW9ucy5hbWJpZW50RW5jb2RpbmcpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MuYW1iaWVudENvbnN0YW50UFM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy51c2VBbWJpZW50VGludCAmJiAhdXNlT2xkQW1iaWVudCkge1xuICAgICAgICAgICAgY29kZSArPSBcInVuaWZvcm0gdmVjMyBtYXRlcmlhbF9hbWJpZW50O1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlTXNkZikge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLm1zZGZUZXh0QXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBcIlxcbiNkZWZpbmUgVU5JRk9STV9URVhUX1BBUkFNRVRFUlNcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLm1zZGZQUztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm5lZWRzTm9ybWFsKSB7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy52aWV3RGlyUFM7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gKG9wdGlvbnMuZW5hYmxlR0dYU3BlY3VsYXIpID8gY2h1bmtzLnJlZmxEaXJBbmlzb1BTIDogY2h1bmtzLnJlZmxEaXJQUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoYXNQb2ludExpZ2h0cyA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc0xpbmVhckZhbGxvZmYgPSBmYWxzZTtcbiAgICAgICAgbGV0IHVzZXNJbnZTcXVhcmVkRmFsbG9mZiA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc1Nwb3QgPSBmYWxzZTtcbiAgICAgICAgbGV0IHVzZXNDb29raWUgPSBmYWxzZTtcbiAgICAgICAgbGV0IHVzZXNDb29raWVOb3c7XG5cbiAgICAgICAgLy8gY2x1c3RlcmVkIGxpZ2h0aW5nXG4gICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCAmJiB0aGlzLmxpZ2h0aW5nKSB7XG5cbiAgICAgICAgICAgIHVzZXNTcG90ID0gdHJ1ZTtcbiAgICAgICAgICAgIGhhc1BvaW50TGlnaHRzID0gdHJ1ZTtcbiAgICAgICAgICAgIHVzZXNMaW5lYXJGYWxsb2ZmID0gdHJ1ZTtcbiAgICAgICAgICAgIHVzZXNDb29raWUgPSB0cnVlO1xuXG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5mbG9hdFVucGFja2luZ1BTO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5saWdodE1hc2tEeW5hbWljKVxuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJcXG4jZGVmaW5lIENMVVNURVJfTUVTSF9EWU5BTUlDX0xJR0hUU1wiO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0Nvb2tpZXNFbmFibGVkKVxuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJcXG4jZGVmaW5lIENMVVNURVJfQ09PS0lFU1wiO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dzRW5hYmxlZCAmJiAhb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJcXG4jZGVmaW5lIENMVVNURVJfU0hBRE9XU1wiO1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJcXG4jZGVmaW5lIENMVVNURVJfU0hBRE9XX1RZUEVfXCIgKyBzaGFkb3dUeXBlVG9TdHJpbmdbb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ1NoYWRvd1R5cGVdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0FyZWFMaWdodHNFbmFibGVkKVxuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJcXG4jZGVmaW5lIENMVVNURVJfQVJFQUxJR0hUU1wiO1xuXG4gICAgICAgICAgICBjb2RlICs9IExpZ2h0c0J1ZmZlci5zaGFkZXJEZWZpbmVzO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkICYmICFvcHRpb25zLm5vU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBjaHVua3MuY2x1c3RlcmVkTGlnaHRTaGFkb3dzUFM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLmNsdXN0ZXJlZExpZ2h0UFM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy50d29TaWRlZExpZ2h0aW5nKSBjb2RlICs9IFwidW5pZm9ybSBmbG9hdCB0d29TaWRlZExpZ2h0aW5nTmVnU2NhbGVGYWN0b3I7XFxuXCI7XG5cbiAgICAgICAgLy8gRlJBR01FTlQgU0hBREVSIEJPRFlcblxuICAgICAgICBjb2RlICs9IHRoaXMuX2ZzR2V0U3RhcnRDb2RlKGNvZGUsIGRldmljZSwgY2h1bmtzLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudHdvU2lkZWRMaWdodGluZykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZFZlcnRleE5vcm1hbFcgPSBub3JtYWxpemUoZ2xfRnJvbnRGYWNpbmcgPyB2Tm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvciA6IC12Tm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3Rvcik7XFxuXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZFZlcnRleE5vcm1hbFcgPSBub3JtYWxpemUodk5vcm1hbFcpO1xcblwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMuaGVpZ2h0TWFwRW5hYmxlZCB8fCBvcHRpb25zLm5vcm1hbE1hcEVuYWJsZWQpICYmIG9wdGlvbnMuaGFzVGFuZ2VudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50d29TaWRlZExpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZFRhbmdlbnRXID0gZ2xfRnJvbnRGYWNpbmcgPyB2VGFuZ2VudFcgKiB0d29TaWRlZExpZ2h0aW5nTmVnU2NhbGVGYWN0b3IgOiAtdlRhbmdlbnRXICogdHdvU2lkZWRMaWdodGluZ05lZ1NjYWxlRmFjdG9yO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRCaW5vcm1hbFcgPSBnbF9Gcm9udEZhY2luZyA/IHZCaW5vcm1hbFcgKiB0d29TaWRlZExpZ2h0aW5nTmVnU2NhbGVGYWN0b3IgOiAtdkJpbm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvcjtcXG5cIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRUYW5nZW50VyA9IHZUYW5nZW50VztcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBkQmlub3JtYWxXID0gdkJpbm9ybWFsVztcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2V0Vmlld0RpcigpO1xcblwiO1xuICAgICAgICAgICAgaWYgKGhhc1RCTikge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2V0VEJOKCk7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbnZva2UgZnJvbnRlbmQgZnVuY3Rpb25zXG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZEZ1bmM7XG5cbiAgICAgICAgLy8gdHJhbnNmb3JtIHRhbmdlbnQgc3BhY2Ugbm9ybWFscyB0byB3b3JsZCBzcGFjZVxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGdldFJlZmxEaXIoKTtcXG5cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ2xlYXJDb2F0KSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBjY1JlZmxEaXJXID0gbm9ybWFsaXplKC1yZWZsZWN0KGRWaWV3RGlyVywgY2NOb3JtYWxXKSk7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRoaXMubGlnaHRpbmcgJiYgb3B0aW9ucy51c2VTcGVjdWxhcikgfHwgdGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTWV0YWxuZXNzKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBnZXRNZXRhbG5lc3NNb2R1bGF0ZSgpO1xcblwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VJcmlkZXNjZW5jZSkge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2V0SXJpZGVzY2VuY2Uoc2F0dXJhdGUoZG90KGRWaWV3RGlyVywgZE5vcm1hbFcpKSk7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWRkQW1iaWVudCkge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBhZGRBbWJpZW50KCk7XFxuXCI7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jb25zZXJ2ZUVuZXJneSAmJiBvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSBgICAgZERpZmZ1c2VMaWdodCA9IGREaWZmdXNlTGlnaHQgKiAoMS4wIC0gZFNwZWN1bGFyaXR5KTtgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBtb3ZlIGFtYmllbnQgY29sb3Igb3V0IG9mIGRpZmZ1c2UgKHVzZWQgYnkgTGlnaHRtYXBwZXIsIHRvIG11bHRpcGx5IGFtYmllbnQgY29sb3IgYnkgYWNjdW11bGF0ZWQgQU8pXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zZXBhcmF0ZUFtYmllbnQpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGBcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBkQW1iaWVudExpZ2h0ID0gZERpZmZ1c2VMaWdodDtcbiAgICAgICAgICAgICAgICAgICAgZERpZmZ1c2VMaWdodCA9IHZlYzMoMCk7XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZUFtYmllbnRUaW50ICYmICF1c2VPbGRBbWJpZW50KSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGREaWZmdXNlTGlnaHQgKj0gbWF0ZXJpYWxfYW1iaWVudDtcXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VBbyAmJiAhb3B0aW9ucy5vY2NsdWRlRGlyZWN0KSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIG9jY2x1ZGVEaWZmdXNlKCk7XFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5saWdodE1hcEVuYWJsZWQgfHwgb3B0aW9ucy51c2VMaWdodE1hcFZlcnRleENvbG9ycykge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBhZGRMaWdodE1hcCgpO1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGlnaHRpbmcgfHwgdGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBhZGRSZWZsZWN0aW9uQ0MoKTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZnJlc25lbE1vZGVsID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBjY0ZyZXNuZWwgPSBnZXRGcmVzbmVsQ0MoZG90KGRWaWV3RGlyVywgY2NOb3JtYWxXKSk7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGNjUmVmbGVjdGlvbi5yZ2IgKj0gY2NGcmVzbmVsO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICB9ICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgY2NGcmVzbmVsID0gMC4wO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyaXR5RmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgY2NSZWZsZWN0aW9uLnJnYiAqPSBkU3BlY3VsYXJpdHlGYWN0b3I7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU2hlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBhZGRSZWZsZWN0aW9uU2hlZW4oKTtcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBGcmVzbmVsIGhhcyB0byBiZSBhcHBsaWVkIHRvIHJlZmxlY3Rpb25zXG4gICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBhZGRSZWZsZWN0aW9uKCk7XFxuXCI7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5mcmVzbmVsTW9kZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZFJlZmxlY3Rpb24ucmdiICo9IGdldEZyZXNuZWwoZG90KGRWaWV3RGlyVywgZE5vcm1hbFcpLCBkU3BlY3VsYXJpdHkpO1xcblwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZFJlZmxlY3Rpb24ucmdiICo9IGRTcGVjdWxhcml0eTtcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXJpdHlGYWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBkUmVmbGVjdGlvbi5yZ2IgKj0gZFNwZWN1bGFyaXR5RmFjdG9yO1xcblwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc0FyZWFMaWdodHMpIHtcbiAgICAgICAgICAgICAgICAvLyBzcGVjdWxhciBoYXMgdG8gYmUgYWNjdW11bGF0ZWQgZGlmZmVyZW50bHkgaWYgd2Ugd2FudCBhcmVhIGxpZ2h0cyB0byBsb29rIGNvcnJlY3RcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRTcGVjdWxhckxpZ2h0ICo9IGRTcGVjdWxhcml0eTtcXG5cIjtcbiAgICAgICAgICAgICAgICAvLyBjb2RlICs9IFwiICAgIGZsb2F0IHJvdWdobmVzcyA9IG1heCgoMS4wIC0gZEdsb3NzaW5lc3MpICogKDEuMCAtIGRHbG9zc2luZXNzKSwgMC4wMDEpO1xcblwiO1xuXG4gICAgICAgICAgICAgICAgLy8gZXZhbHVhdGUgbWF0ZXJpYWwgYmFzZWQgYXJlYSBsaWdodHMgZGF0YSwgc2hhcmVkIGJ5IGFsbCBhcmVhIGxpZ2h0c1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgY2FsY0xUQ0xpZ2h0VmFsdWVzKCk7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbnMubGlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBvcHRpb25zLmxpZ2h0c1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaWdodFR5cGUgPSBsaWdodC5fdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIGNsdXN0ZXJlZCBsaWdodHMgYXJlIHVzZWQsIHNraXAgbm9ybWFsIGxpZ2h0cyBvdGhlciB0aGFuIGRpcmVjdGlvbmFsXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIGxpZ2h0VHlwZSAhPT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBpcyBub3QgZGVjb3VwbGVkIHRvIHNlcGFyYXRlIHNoYWRlciBmaWxlcywgYmVjYXVzZSBtb3N0IG9mIGl0IGNhbiBiZSBhY3R1YWxseSBjaGFuZ2VkIHRvIGFjaGlldmUgZGlmZmVyZW50IGJlaGF2aW9ycyBsaWtlOlxuICAgICAgICAgICAgICAgIC8vIC0gZGlmZmVyZW50IGZhbGxvZmZzXG4gICAgICAgICAgICAgICAgLy8gLSBkaWZmZXJlbnQgc2hhZG93IGNvb3JkcyAob21uaSBzaGFkb3dzIHdpbGwgdXNlIGRyYXN0aWNhbGx5IGRpZmZlcmVudCBnZW5TaGFkb3dDb29yZClcbiAgICAgICAgICAgICAgICAvLyAtIGRpZmZlcmVudCBzaGFkb3cgZmlsdGVyIG1vZGVzXG4gICAgICAgICAgICAgICAgLy8gLSBkaWZmZXJlbnQgbGlnaHQgc291cmNlIHNoYXBlc1xuXG4gICAgICAgICAgICAgICAgLy8gZ2V0TGlnaHREaWZmdXNlIGFuZCBnZXRMaWdodFNwZWN1bGFyIGlzIEJSREYgaXRzZWxmLlxuXG4gICAgICAgICAgICAgICAgdXNlc0Nvb2tpZU5vdyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbGlnaHRTaGFwZSA9IChoYXNBcmVhTGlnaHRzICYmIGxpZ2h0Ll9zaGFwZSkgPyBsaWdodC5zaGFwZSA6IExJR0hUU0hBUEVfUFVOQ1RVQUw7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hhcGVTdHJpbmcgPSAoaGFzQXJlYUxpZ2h0cyAmJiBsaWdodC5fc2hhcGUpID8gdGhpcy5fZ2V0TGlnaHRTb3VyY2VTaGFwZVN0cmluZyhsaWdodFNoYXBlKSA6ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0U2hhcGUgIT09IExJR0hUU0hBUEVfUFVOQ1RVQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBjYWxjXCIgKyBzaGFwZVN0cmluZyArIFwiTGlnaHRWYWx1ZXMobGlnaHRcIiArIGkgKyBcIl9wb3NpdGlvbiwgbGlnaHRcIiArIGkgKyBcIl9oYWxmV2lkdGgsIGxpZ2h0XCIgKyBpICsgXCJfaGFsZkhlaWdodCk7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZExpZ2h0RGlyTm9ybVcgPSBsaWdodFwiICsgaSArIFwiX2RpcmVjdGlvbjtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBkQXR0ZW4gPSAxLjA7XFxuXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHQuX2Nvb2tpZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QgJiYgIWxpZ2h0Ll9jb29raWUuX2N1YmVtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VzQ29va2llID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VzQ29va2llTm93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfT01OSSAmJiBsaWdodC5fY29va2llLl9jdWJlbWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0Nvb2tpZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0Nvb2tpZU5vdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGdldExpZ2h0RGlyUG9pbnQobGlnaHRcIiArIGkgKyBcIl9wb3NpdGlvbik7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGhhc1BvaW50TGlnaHRzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc0Nvb2tpZU5vdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRBdHRlbjMgPSBnZXRDb29raWUyRFwiICsgKGxpZ2h0Ll9jb29raWVGYWxsb2ZmID8gXCJcIiA6IFwiQ2xpcFwiKSArIChsaWdodC5fY29va2llVHJhbnNmb3JtID8gXCJYZm9ybVwiIDogXCJcIikgKyBcIihsaWdodFwiICsgaSArIFwiX2Nvb2tpZSwgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXRyaXgsIGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5XCIgKyAobGlnaHQuX2Nvb2tpZVRyYW5zZm9ybSA/IFwiLCBsaWdodFwiICsgaSArIFwiX2Nvb2tpZU1hdHJpeCwgbGlnaHRcIiArIGkgKyBcIl9jb29raWVPZmZzZXRcIiA6IFwiXCIpICsgXCIpLlwiICsgbGlnaHQuX2Nvb2tpZUNoYW5uZWwgKyBcIjtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBkQXR0ZW4zID0gZ2V0Q29va2llQ3ViZShsaWdodFwiICsgaSArIFwiX2Nvb2tpZSwgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXRyaXgsIGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5KS5cIiArIGxpZ2h0Ll9jb29raWVDaGFubmVsICsgXCI7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRTaGFwZSA9PT0gTElHSFRTSEFQRV9QVU5DVFVBTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9mYWxsb2ZmTW9kZSA9PT0gTElHSFRGQUxMT0ZGX0xJTkVBUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZEF0dGVuID0gZ2V0RmFsbG9mZkxpbmVhcihsaWdodFwiICsgaSArIFwiX3JhZGl1cyk7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0xpbmVhckZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRBdHRlbiA9IGdldEZhbGxvZmZJbnZTcXVhcmVkKGxpZ2h0XCIgKyBpICsgXCJfcmFkaXVzKTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VzSW52U3F1YXJlZEZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9uIHB1bmN0dWFsIGxpZ2h0cyBvbmx5IGdldHMgdGhlIHJhbmdlIHdpbmRvdyBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRBdHRlbiA9IGdldEZhbGxvZmZXaW5kb3cobGlnaHRcIiArIGkgKyBcIl9yYWRpdXMpO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0ludlNxdWFyZWRGYWxsb2ZmID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgaWYgKGRBdHRlbiA+IDAuMDAwMDEpIHtcXG5cIjsgLy8gQlJBTkNIIFNUQVJUXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHVzZXNDb29raWVOb3cgJiYgIWxpZ2h0Ll9jb29raWVGYWxsb2ZmKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZEF0dGVuICo9IGdldFNwb3RFZmZlY3QobGlnaHRcIiArIGkgKyBcIl9kaXJlY3Rpb24sIGxpZ2h0XCIgKyBpICsgXCJfaW5uZXJDb25lQW5nbGUsIGxpZ2h0XCIgKyBpICsgXCJfb3V0ZXJDb25lQW5nbGUpO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNTcG90ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGRpZmZ1c2UgbGlnaHRpbmcgLSBMVEMgbGlnaHRzIGRvIG5vdCBtaXggZGlmZnVzZSBsaWdodGluZyBpbnRvIGF0dGVudWF0aW9uIHRoYXQgYWZmZWN0cyBzcGVjdWxhclxuICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkI6IEEgYmV0dGVyIGFwcm94aW1hdGlvbiBwZXJoYXBzIHVzaW5nIHdyYXAgbGlnaHRpbmcgY291bGQgYmUgaW1wbGVtZW50ZWQgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBkQXR0ZW5EID0gZ2V0TGlnaHREaWZmdXNlKCk7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxNi4wIGlzIGEgY29uc3RhbnQgdGhhdCBpcyBpbiBnZXRGYWxsb2ZmSW52U3F1YXJlZCgpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRBdHRlbkQgPSBnZXRcIiArIHNoYXBlU3RyaW5nICsgXCJMaWdodERpZmZ1c2UoKSAqIDE2LjA7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRBdHRlbiAqPSBnZXRMaWdodERpZmZ1c2UoKTtcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuY2FzdFNoYWRvd3MgJiYgIW9wdGlvbnMubm9TaGFkb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNoYWRvd1JlYWRNb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV2c21FeHA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd1JlYWRNb2RlID0gXCJWU004XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBldnNtRXhwID0gXCIwLjBcIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTE2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiVlNNMTZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2c21FeHAgPSBcIjUuNTRcIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTMyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiVlNNMzJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXZpY2UudGV4dHVyZUZsb2F0SGlnaFByZWNpc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2c21FeHAgPSBcIjE1LjBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZzbUV4cCA9IFwiNS41NFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpZ2h0Ll9zaGFkb3dUeXBlID09PSBTSEFET1dfUENGNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBcIlBDRjV4NVwiO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBcIlBDRjN4M1wiO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYWRvd1JlYWRNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfT01OSSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoYWRvd0Nvb3JkQXJncyA9IFwiKGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWFwLCBsaWdodFwiICsgaSArIFwiX3NoYWRvd1BhcmFtcyk7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9ub3JtYWxPZmZzZXRCaWFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgbm9ybWFsT2Zmc2V0UG9pbnRTaGFkb3cobGlnaHRcIiArIGkgKyBcIl9zaGFkb3dQYXJhbXMpO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IGAgICAgZmxvYXQgc2hhZG93JHtpfSA9IGdldFNoYWRvd1BvaW50JHtzaGFkb3dSZWFkTW9kZX0ke3NoYWRvd0Nvb3JkQXJnc31gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gYCAgICBkQXR0ZW4gKj0gbWl4KDEuMCwgc2hhZG93JHtpfSwgbGlnaHQke2l9X3NoYWRvd0ludGVuc2l0eSk7XFxuYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hhZG93TWF0QXJnID0gYGxpZ2h0JHtpfV9zaGFkb3dNYXRyaXhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoYWRvd1BhcmFtQXJnID0gYGxpZ2h0JHtpfV9zaGFkb3dQYXJhbXNgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gdGhpcy5fbm9uUG9pbnRTaGFkb3dNYXBQcm9qZWN0aW9uKGRldmljZSwgb3B0aW9ucy5saWdodHNbaV0sIHNoYWRvd01hdEFyZywgc2hhZG93UGFyYW1BcmcsIGkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHNoYWRvd1JlYWRNb2RlID0gXCJTcG90XCIgKyBzaGFkb3dSZWFkTW9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IGAgICAgZmxvYXQgc2hhZG93JHtpfSA9IGdldFNoYWRvdyR7c2hhZG93UmVhZE1vZGV9KFNIQURPV01BUF9QQVNTKGxpZ2h0JHtpfV9zaGFkb3dNYXApLCBsaWdodCR7aX1fc2hhZG93UGFyYW1zJHsobGlnaHQuX2lzVnNtID8gXCIsIFwiICsgZXZzbUV4cCA6IFwiXCIpfSk7XFxuYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IGAgICAgZEF0dGVuICo9IG1peCgxLjAsIHNoYWRvdyR7aX0sIGxpZ2h0JHtpfV9zaGFkb3dJbnRlbnNpdHkpO1xcbmA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGlnaHRTaGFwZSAhPT0gTElHSFRTSEFQRV9QVU5DVFVBTCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFyZWEgbGlnaHQgLSB0aGV5IGRvIG5vdCBtaXggZGlmZnVzZSBsaWdodGluZyBpbnRvIHNwZWN1bGFyIGF0dGVudWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbnNlcnZlRW5lcmd5ICYmIG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZERpZmZ1c2VMaWdodCArPSAoKGRBdHRlbkQgKiBkQXR0ZW4pICogbGlnaHRcIiArIGkgKyBcIl9jb2xvclwiICsgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjNcIiA6IFwiXCIpICsgXCIpICogKDEuMCAtIGRMVENTcGVjRnJlcyk7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGREaWZmdXNlTGlnaHQgKz0gKGRBdHRlbkQgKiBkQXR0ZW4pICogbGlnaHRcIiArIGkgKyBcIl9jb2xvclwiICsgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjNcIiA6IFwiXCIpICsgXCI7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHB1bmN0dWFsIGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNBcmVhTGlnaHRzICYmIG9wdGlvbnMuY29uc2VydmVFbmVyZ3kgJiYgb3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBkRGlmZnVzZUxpZ2h0ICs9IChkQXR0ZW4gKiBsaWdodFwiICsgaSArIFwiX2NvbG9yXCIgKyAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIikgKyBcIikgKiAoMS4wIC0gZFNwZWN1bGFyaXR5KTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZERpZmZ1c2VMaWdodCArPSBkQXR0ZW4gKiBsaWdodFwiICsgaSArIFwiX2NvbG9yXCIgKyAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIikgKyBcIjtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZEhhbGZEaXJXID0gbm9ybWFsaXplKC1kTGlnaHREaXJOb3JtVyArIGRWaWV3RGlyVyk7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gc3BlY3VsYXIgLyBjbGVhciBjb2F0XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0U2hhcGUgIT09IExJR0hUU0hBUEVfUFVOQ1RVQUwpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhcmVhIGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUNsZWFyQ29hdCkgY29kZSArPSBcIiAgICBjY1NwZWN1bGFyTGlnaHQgKz0gY2NMVENTcGVjRnJlcyAqIGdldFwiICsgc2hhcGVTdHJpbmcgKyBcIkxpZ2h0U3BlY3VsYXJDQygpICogZEF0dGVuICogbGlnaHRcIiArIGkgKyBcIl9jb2xvclwiICsgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjNcIiA6IFwiXCIpICsgXCI7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSBjb2RlICs9IFwiICAgIGRTcGVjdWxhckxpZ2h0ICs9IGRMVENTcGVjRnJlcyAqIGdldFwiICsgc2hhcGVTdHJpbmcgKyBcIkxpZ2h0U3BlY3VsYXIoKSAqIGRBdHRlbiAqIGxpZ2h0XCIgKyBpICsgXCJfY29sb3JcIiArICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArIFwiO1xcblwiO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGNGcmVzbmVsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCAmJiBvcHRpb25zLmZyZXNuZWxNb2RlbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGNGcmVzbmVsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIExUQyBsaWdodHMgYXJlIHByZXNlbnQsIHNwZWN1bGFyIG11c3QgYmUgYWNjdW11bGF0ZWQgd2l0aCBzcGVjdWxhcml0eSAoc3BlY3VsYXJpdHkgaXMgcHJlIG11bHRpcGxpZWQgYnkgcHVuY3R1YWwgbGlnaHQgZnJlc25lbClcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ2xlYXJDb2F0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGNjU3BlY3VsYXJMaWdodCArPSBnZXRMaWdodFNwZWN1bGFyQ0MoZEhhbGZEaXJXKSAqIGRBdHRlbiAqIGxpZ2h0XCIgKyBpICsgXCJfY29sb3JcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gdXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gY2FsY0ZyZXNuZWwgPyBcIiAqIGdldEZyZXNuZWxDQyhkb3QoZFZpZXdEaXJXLCBkSGFsZkRpclcpKVwiIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gIFwiO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNoZWVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIHNTcGVjdWxhckxpZ2h0ICs9IGdldExpZ2h0U3BlY3VsYXJTaGVlbihkSGFsZkRpclcpICogZEF0dGVuICogbGlnaHRcIiArIGkgKyBcIl9jb2xvclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSB1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSAgXCI7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZFNwZWN1bGFyTGlnaHQgKz0gZ2V0TGlnaHRTcGVjdWxhcihkSGFsZkRpclcpICogZEF0dGVuICogbGlnaHRcIiArIGkgKyBcIl9jb2xvclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSB1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSBjYWxjRnJlc25lbCA/IFwiICogZ2V0RnJlc25lbChkb3QoZFZpZXdEaXJXLCBkSGFsZkRpclcpLCBkU3BlY3VsYXJpdHkpXCIgOiBcIiogZFNwZWN1bGFyaXR5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSAhPT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgfVxcblwiOyAvLyBCUkFOQ0ggRU5EXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29kZSArPSBcIlxcblwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjbHVzdGVyZWQgbGlnaHRpbmdcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCAmJiB0aGlzLmxpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgdXNlc0xpbmVhckZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHVzZXNJbnZTcXVhcmVkRmFsbG9mZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgaGFzUG9pbnRMaWdodHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgYWRkQ2x1c3RlcmVkTGlnaHRzKCk7XFxuXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNBcmVhTGlnaHRzKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BlY3VsYXIgaGFzIHRvIGJlIGFjY3VtdWxhdGVkIGRpZmZlcmVudGx5IGlmIHdlIHdhbnQgYXJlYSBsaWdodHMgdG8gbG9vayBjb3JyZWN0XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ2xlYXJDb2F0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgY2NTcGVjdWxhcml0eSA9IDEuMDtcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiAgICBkU3BlY3VsYXJpdHkgPSB2ZWMzKDEpO1xcblwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlUmVmcmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgYWRkUmVmcmFjdGlvbigpO1xcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvZGUgKz0gXCJcXG5cIjtcblxuICAgICAgICBpZiAodXNlQW8pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9jY2x1ZGVEaXJlY3QpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIG9jY2x1ZGVEaWZmdXNlKCk7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vY2NsdWRlU3BlY3VsYXIgPT09IFNQRUNPQ0NfQU8gfHwgb3B0aW9ucy5vY2NsdWRlU3BlY3VsYXIgPT09IFNQRUNPQ0NfR0xPU1NERVBFTkRFTlQpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIG9jY2x1ZGVTcGVjdWxhcigpO1xcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXJpdHlGYWN0b3IpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZFNwZWN1bGFyTGlnaHQgKj0gZFNwZWN1bGFyaXR5RmFjdG9yO1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMub3BhY2l0eUZhZGVzU3BlY3VsYXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ibGVuZFR5cGUgPT09IEJMRU5EX05PUk1BTCB8fCBvcHRpb25zLmJsZW5kVHlwZSA9PT0gQkxFTkRfUFJFTVVMVElQTElFRCkge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJmbG9hdCBzcGVjTHVtID0gZG90KChkU3BlY3VsYXJMaWdodCArIGRSZWZsZWN0aW9uLnJnYiAqIGRSZWZsZWN0aW9uLmEpLCB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICkpO1xcblwiO1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjaWZkZWYgTElUX0NMRUFSQ09BVFxcbiBzcGVjTHVtICs9IGRvdChjY1NwZWN1bGFyTGlnaHQgKiBjY1NwZWN1bGFyaXR5ICsgY2NSZWZsZWN0aW9uLnJnYiAqIGNjU3BlY3VsYXJpdHksIHZlYzMoIDAuMjEyNiwgMC43MTUyLCAwLjA3MjIgKSk7XFxuI2VuZGlmXFxuXCI7XG4gICAgICAgICAgICAgICAgY29kZSArPSBcImRBbHBoYSA9IGNsYW1wKGRBbHBoYSArIGdhbW1hQ29ycmVjdElucHV0KHNwZWNMdW0pLCAwLjAsIDEuMCk7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2RlICs9IFwiZEFscGhhICo9IG1hdGVyaWFsX2FscGhhRmFkZTtcXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvZGUgKz0gY2h1bmtzLmVuZFBTO1xuICAgICAgICBpZiAob3B0aW9ucy5ibGVuZFR5cGUgPT09IEJMRU5EX05PUk1BTCB8fCBvcHRpb25zLmJsZW5kVHlwZSA9PT0gQkxFTkRfQURESVRJVkVBTFBIQSB8fCBvcHRpb25zLmFscGhhVG9Db3ZlcmFnZSkge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3Mub3V0cHV0QWxwaGFQUztcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmJsZW5kVHlwZSA9PT0gQkxFTkRfUFJFTVVMVElQTElFRCkge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3Mub3V0cHV0QWxwaGFQcmVtdWxQUztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLm91dHB1dEFscGhhT3BhcXVlUFM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy51c2VNc2RmKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGdsX0ZyYWdDb2xvciA9IGFwcGx5TXNkZihnbF9GcmFnQ29sb3IpO1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgY29kZSArPSBcIlxcblwiO1xuICAgICAgICBjb2RlICs9IGVuZCgpO1xuXG4gICAgICAgIGlmIChoYXNQb2ludExpZ2h0cykge1xuICAgICAgICAgICAgY29kZSA9IGNodW5rcy5saWdodERpclBvaW50UFMgKyBjb2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VzTGluZWFyRmFsbG9mZikge1xuICAgICAgICAgICAgY29kZSA9IGNodW5rcy5mYWxsb2ZmTGluZWFyUFMgKyBjb2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VzSW52U3F1YXJlZEZhbGxvZmYpIHtcbiAgICAgICAgICAgIGNvZGUgPSBjaHVua3MuZmFsbG9mZkludlNxdWFyZWRQUyArIGNvZGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXNTcG90KSB7XG4gICAgICAgICAgICBjb2RlID0gY2h1bmtzLnNwb3RQUyArIGNvZGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXNDb29raWUgJiYgIW9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICAvLyBub24tY2x1c3RlcmVkIGxpZ2h0cyBjb29raWUgY29kZVxuICAgICAgICAgICAgY29kZSA9IGNodW5rcy5jb29raWVQUyArIGNvZGU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0cnVjdENvZGUgPSBcIlwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRSZWZsZWN0aW9uXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjNCBkUmVmbGVjdGlvbjtcXG5cIjtcbiAgICAgICAgaWYgKGNvZGUuaW5jbHVkZXMoXCJkVEJOXCIpKSBzdHJ1Y3RDb2RlICs9IFwibWF0MyBkVEJOO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRWZXJ0ZXhOb3JtYWxXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkVmVydGV4Tm9ybWFsVztcXG5cIjtcbiAgICAgICAgaWYgKGNvZGUuaW5jbHVkZXMoXCJkVGFuZ2VudFdcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRUYW5nZW50VztcXG5cIjtcbiAgICAgICAgaWYgKGNvZGUuaW5jbHVkZXMoXCJkQmlub3JtYWxXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkQmlub3JtYWxXO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRWaWV3RGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZFZpZXdEaXJXO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRSZWZsRGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZFJlZmxEaXJXO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRIYWxmRGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZEhhbGZEaXJXO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImREaWZmdXNlTGlnaHRcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGREaWZmdXNlTGlnaHQ7XFxuXCI7XG4gICAgICAgIGlmIChjb2RlLmluY2x1ZGVzKFwiZFNwZWN1bGFyTGlnaHRcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRTcGVjdWxhckxpZ2h0O1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRMaWdodERpck5vcm1XXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkTGlnaHREaXJOb3JtVztcXG5cIjtcbiAgICAgICAgaWYgKGNvZGUuaW5jbHVkZXMoXCJkTGlnaHREaXJXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkTGlnaHREaXJXO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRMaWdodFBvc1dcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRMaWdodFBvc1c7XFxuXCI7XG4gICAgICAgIGlmIChjb2RlLmluY2x1ZGVzKFwiZFNoYWRvd0Nvb3JkXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkU2hhZG93Q29vcmQ7XFxuXCI7XG4gICAgICAgIGlmIChjb2RlLmluY2x1ZGVzKFwiZEF0dGVuXCIpKSBzdHJ1Y3RDb2RlICs9IFwiZmxvYXQgZEF0dGVuO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRBdHRlbkRcIikpIHN0cnVjdENvZGUgKz0gXCJmbG9hdCBkQXR0ZW5EO1xcblwiOyAvLyBzZXBhcmF0ZSBkaWZmdXNlIGF0dGVudWF0aW9uIGZvciBub24tcHVuY3R1YWwgbGlnaHQgc291cmNlc1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImRBdHRlbjNcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRBdHRlbjM7XFxuXCI7XG4gICAgICAgIGlmIChjb2RlLmluY2x1ZGVzKFwiZE1zZGZcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWM0IGRNc2RmO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImNjRnJlc25lbFwiKSkgc3RydWN0Q29kZSArPSBcImZsb2F0IGNjRnJlc25lbDtcXG5cIjtcbiAgICAgICAgaWYgKGNvZGUuaW5jbHVkZXMoXCJjY1JlZmxlY3Rpb25cIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGNjUmVmbGVjdGlvbjtcXG5cIjtcbiAgICAgICAgaWYgKGNvZGUuaW5jbHVkZXMoXCJjY1JlZmxEaXJXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBjY1JlZmxEaXJXO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImNjU3BlY3VsYXJMaWdodFwiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgY2NTcGVjdWxhckxpZ2h0O1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcImNjU3BlY3VsYXJpdHlOb0ZyZXNcIikpIHN0cnVjdENvZGUgKz0gXCJmbG9hdCBjY1NwZWN1bGFyaXR5Tm9GcmVzO1xcblwiO1xuICAgICAgICBpZiAoY29kZS5pbmNsdWRlcyhcInNTcGVjdWxhckxpZ2h0XCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBzU3BlY3VsYXJMaWdodDtcXG5cIjtcbiAgICAgICAgaWYgKGNvZGUuaW5jbHVkZXMoXCJzUmVmbGVjdGlvblwiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgc1JlZmxlY3Rpb247XFxuXCI7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZnNHZXRCZWdpbkNvZGUoKSArXG4gICAgICAgICAgICB0aGlzLnZhcnlpbmdzICtcbiAgICAgICAgICAgIHRoaXMuX2ZzR2V0QmFzZUNvZGUoKSArXG4gICAgICAgICAgICAob3B0aW9ucy5kZXRhaWxNb2RlcyA/IGNodW5rcy5kZXRhaWxNb2Rlc1BTIDogXCJcIikgK1xuICAgICAgICAgICAgc3RydWN0Q29kZSArXG4gICAgICAgICAgICB0aGlzLmZyb250ZW5kRGVjbCArXG4gICAgICAgICAgICBjb2RlO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVGcmFnbWVudFNoYWRlcihmcm9udGVuZERlY2wsIGZyb250ZW5kQ29kZSwgZnJvbnRlbmRGdW5jLCBsaWdodGluZ1V2KSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5mcm9udGVuZERlY2wgPSBmcm9udGVuZERlY2w7XG4gICAgICAgIHRoaXMuZnJvbnRlbmRDb2RlID0gZnJvbnRlbmRDb2RlO1xuICAgICAgICB0aGlzLmZyb250ZW5kRnVuYyA9IGZyb250ZW5kRnVuYztcbiAgICAgICAgdGhpcy5saWdodGluZ1V2ID0gbGlnaHRpbmdVdjtcblxuICAgICAgICBpZiAob3B0aW9ucy5wYXNzID09PSBTSEFERVJfUElDSykge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXRQaWNrUGFzc0NvZGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnBhc3MgPT09IFNIQURFUl9ERVBUSCkge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXREZXB0aFBhc3NDb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zaGFkb3dQYXNzKSB7XG4gICAgICAgICAgICB0aGlzLmZzaGFkZXIgPSB0aGlzLl9mc0dldFNoYWRvd1Bhc3NDb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5jdXN0b21GcmFnbWVudFNoYWRlcikge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXRCZWdpbkNvZGUoKSArIG9wdGlvbnMuY3VzdG9tRnJhZ21lbnRTaGFkZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZzaGFkZXIgPSB0aGlzLl9mc0dldExpdFBhc3NDb2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXREZWZpbml0aW9uKCkge1xuXG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBTaGFkZXJVdGlscy5jcmVhdGVEZWZpbml0aW9uKHRoaXMuZGV2aWNlLCB7XG4gICAgICAgICAgICBuYW1lOiAnTGl0U2hhZGVyJyxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRoaXMuYXR0cmlidXRlcyxcbiAgICAgICAgICAgIHZlcnRleENvZGU6IHRoaXMudnNoYWRlcixcbiAgICAgICAgICAgIGZyYWdtZW50Q29kZTogdGhpcy5mc2hhZGVyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChTaGFkZXJQYXNzLmlzRm9yd2FyZCh0aGlzLm9wdGlvbnMucGFzcykpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24udGFnID0gU0hBREVSVEFHX01BVEVSSUFMO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfVxufVxuXG5leHBvcnQge1xuICAgIExpdFNoYWRlclxufTtcbiJdLCJuYW1lcyI6WyJidWlsdGluQXR0cmlidXRlcyIsInZlcnRleF9ub3JtYWwiLCJTRU1BTlRJQ19OT1JNQUwiLCJ2ZXJ0ZXhfdGFuZ2VudCIsIlNFTUFOVElDX1RBTkdFTlQiLCJ2ZXJ0ZXhfdGV4Q29vcmQwIiwiU0VNQU5USUNfVEVYQ09PUkQwIiwidmVydGV4X3RleENvb3JkMSIsIlNFTUFOVElDX1RFWENPT1JEMSIsInZlcnRleF9jb2xvciIsIlNFTUFOVElDX0NPTE9SIiwidmVydGV4X2JvbmVXZWlnaHRzIiwiU0VNQU5USUNfQkxFTkRXRUlHSFQiLCJ2ZXJ0ZXhfYm9uZUluZGljZXMiLCJTRU1BTlRJQ19CTEVORElORElDRVMiLCJidWlsdGluVmFyeWluZ3MiLCJ2VmVydGV4Q29sb3IiLCJ2UG9zaXRpb25XIiwidk5vcm1hbFYiLCJ2Tm9ybWFsVyIsInZUYW5nZW50VyIsInZCaW5vcm1hbFciLCJ2T2JqZWN0U3BhY2VVcFciLCJ2VXYwIiwidlV2MSIsIkxpdFNoYWRlciIsImNvbnN0cnVjdG9yIiwiZGV2aWNlIiwib3B0aW9ucyIsImF0dHJpYnV0ZXMiLCJ2ZXJ0ZXhfcG9zaXRpb24iLCJTRU1BTlRJQ19QT1NJVElPTiIsImNodW5rcyIsInVzZXJDaHVua3MiLCJ2YWxpZGF0ZVVzZXJDaHVua3MiLCJjaHVua05hbWUiLCJzaGFkZXJDaHVua3MiLCJoYXNPd25Qcm9wZXJ0eSIsImNodW5rIiwiYSIsImluZGV4T2YiLCJsaWdodGluZyIsImxpZ2h0cyIsImxlbmd0aCIsImRpckxpZ2h0TWFwRW5hYmxlZCIsImNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCIsInJlZmxlY3Rpb25zIiwicmVmbGVjdGlvblNvdXJjZSIsInNoYWRvd1Bhc3MiLCJTaGFkZXJQYXNzIiwiaXNTaGFkb3ciLCJwYXNzIiwibmVlZHNOb3JtYWwiLCJ1c2VTcGVjdWxhciIsImFtYmllbnRTSCIsImhlaWdodE1hcEVuYWJsZWQiLCJlbmFibGVHR1hTcGVjdWxhciIsImNsZWFyQ29hdE5vcm1hbE1hcEVuYWJsZWQiLCJuZWVkc1NjZW5lQ29sb3IiLCJ1c2VEeW5hbWljUmVmcmFjdGlvbiIsIm5lZWRzU2NyZWVuU2l6ZSIsIm5lZWRzVHJhbnNmb3JtcyIsInZhcnlpbmdzIiwidnNoYWRlciIsImZyb250ZW5kRGVjbCIsImZyb250ZW5kQ29kZSIsImZyb250ZW5kRnVuYyIsImxpZ2h0aW5nVXYiLCJkZWZpbmVzIiwiZnNoYWRlciIsIl92c0FkZEJhc2VDb2RlIiwiY29kZSIsImJhc2VWUyIsIm5pbmVTbGljZWRNb2RlIiwiU1BSSVRFX1JFTkRFUk1PREVfU0xJQ0VEIiwiU1BSSVRFX1JFTkRFUk1PREVfVElMRUQiLCJiYXNlTmluZVNsaWNlZFZTIiwiX3ZzQWRkVHJhbnNmb3JtQ29kZSIsInRyYW5zZm9ybVZTIiwiX3NldE1hcFRyYW5zZm9ybSIsImNvZGVzIiwibmFtZSIsImlkIiwidXYiLCJjaGVja0lkIiwidmFyTmFtZSIsIl9mc0dldEJhc2VDb2RlIiwicmVzdWx0IiwiYmFzZVBTIiwiYmFzZU5pbmVTbGljZWRQUyIsImJhc2VOaW5lU2xpY2VkVGlsZWRQUyIsIl9mc0dldFN0YXJ0Q29kZSIsInN0YXJ0UFMiLCJzdGFydE5pbmVTbGljZWRQUyIsInN0YXJ0TmluZVNsaWNlZFRpbGVkUFMiLCJfZGlyZWN0aW9uYWxTaGFkb3dNYXBQcm9qZWN0aW9uIiwibGlnaHQiLCJzaGFkb3dDb29yZEFyZ3MiLCJzaGFkb3dQYXJhbUFyZyIsImxpZ2h0SW5kZXgiLCJjb29yZHNGdW5jdGlvbk5hbWUiLCJudW1DYXNjYWRlcyIsIl9ub25Qb2ludFNoYWRvd01hcFByb2plY3Rpb24iLCJzaGFkb3dNYXRBcmciLCJfbm9ybWFsT2Zmc2V0QmlhcyIsIl9pc1ZzbSIsIl90eXBlIiwiTElHSFRUWVBFX1NQT1QiLCJfaXNQY2YiLCJ3ZWJnbDIiLCJleHRTdGFuZGFyZERlcml2YXRpdmVzIiwiZGV2aWNlVHlwZSIsIkRFVklDRVRZUEVfV0VCR1BVIiwiX2dldExpZ2h0U291cmNlU2hhcGVTdHJpbmciLCJzaGFwZSIsIkxJR0hUU0hBUEVfUkVDVCIsIkxJR0hUU0hBUEVfRElTSyIsIkxJR0hUU0hBUEVfU1BIRVJFIiwiZ2VuZXJhdGVWZXJ0ZXhTaGFkZXIiLCJ1c2VVdiIsInVzZVVubW9kaWZpZWRVdiIsIm1hcFRyYW5zZm9ybXMiLCJjb2RlQm9keSIsIlNIQURFUl9ERVBUSCIsInVzZUluc3RhbmNpbmciLCJpbnN0YW5jZV9saW5lMSIsIlNFTUFOVElDX0FUVFIxMiIsImluc3RhbmNlX2xpbmUyIiwiU0VNQU5USUNfQVRUUjEzIiwiaW5zdGFuY2VfbGluZTMiLCJTRU1BTlRJQ19BVFRSMTQiLCJpbnN0YW5jZV9saW5lNCIsIlNFTUFOVElDX0FUVFIxNSIsImluc3RhbmNpbmdWUyIsImZyYWdtZW50VW5pZm9ybXNDb3VudCIsInZpZXdOb3JtYWxWUyIsImhhc1RhbmdlbnRzIiwibm9ybWFsTWFwRW5hYmxlZCIsInRhbmdlbnRCaW5vcm1hbFZTIiwibWF4VXZTZXRzIiwiaSIsImZvckVhY2giLCJtYXBUcmFuc2Zvcm0iLCJ2ZXJ0ZXhDb2xvcnMiLCJ1c2VNc2RmIiwibXNkZlRleHRBdHRyaWJ1dGUiLCJ2ZXJ0ZXhfb3V0bGluZVBhcmFtZXRlcnMiLCJTRU1BTlRJQ19BVFRSOCIsInZlcnRleF9zaGFkb3dQYXJhbWV0ZXJzIiwiU0VNQU5USUNfQVRUUjkiLCJtc2RmVlMiLCJ1c2VNb3JwaFBvc2l0aW9uIiwidXNlTW9ycGhOb3JtYWwiLCJ1c2VNb3JwaFRleHR1cmVCYXNlZCIsIm1vcnBoX3ZlcnRleF9pZCIsIm1vcnBoX3BvczAiLCJtb3JwaF9wb3MxIiwibW9ycGhfcG9zMiIsIlNFTUFOVElDX0FUVFIxMCIsIm1vcnBoX3BvczMiLCJTRU1BTlRJQ19BVFRSMTEiLCJtb3JwaF9ucm0wIiwibW9ycGhfbnJtMSIsIm1vcnBoX25ybTIiLCJtb3JwaF9ucm0zIiwibW9ycGhfcG9zNCIsIm1vcnBoX3BvczUiLCJtb3JwaF9wb3M2IiwibW9ycGhfcG9zNyIsIm1vcnBoX25ybTQiLCJtb3JwaF9ucm01IiwibW9ycGhfbnJtNiIsIm1vcnBoX25ybTciLCJza2luIiwic2tpbkNvZGUiLCJzY3JlZW5TcGFjZSIsInBpeGVsU25hcCIsIm5vcm1hbFZTIiwic3RhcnRWUyIsImVuZFZTIiwiT2JqZWN0Iiwia2V5cyIsInYiLCJzaGFkZXJQYXNzRGVmaW5lIiwiZ2V0UGFzc1NoYWRlckRlZmluZSIsIl9mc0dldEJlZ2luQ29kZSIsIl9mc0dldFBpY2tQYXNzQ29kZSIsImJlZ2luIiwiZW5kIiwiX2ZzR2V0RGVwdGhQYXNzQ29kZSIsInBhY2tEZXB0aFBTIiwiX2ZzR2V0U2hhZG93UGFzc0NvZGUiLCJsaWdodFR5cGUiLCJ0b0xpZ2h0VHlwZSIsInNoYWRvd1R5cGUiLCJ0b1NoYWRvd1R5cGUiLCJTSEFET1dfVlNNMzIiLCJ0ZXh0dXJlRmxvYXRIaWdoUHJlY2lzaW9uIiwiU0hBRE9XX1ZTTTE2IiwiTElHSFRUWVBFX0RJUkVDVElPTkFMIiwiU0hBRE9XX1BDRjMiLCJMSUdIVFRZUEVfT01OSSIsIlNIQURPV19WU004IiwiaXNWc20iLCJhcHBseVNsb3BlU2NhbGVCaWFzIiwiU0hBRE9XX1BDRjUiLCJzdG9yZUVWU01QUyIsIl9mc0dldExpdFBhc3NDb2RlIiwib3BhY2l0eUZhZGVzU3BlY3VsYXIiLCJwdXNoIiwidXNlQ2xlYXJDb2F0IiwiZnJlc25lbE1vZGVsIiwiY29uc2VydmVFbmVyZ3kiLCJ1c2VTaGVlbiIsInVzZUlyaWRlc2NlbmNlIiwic2hhZG93VHlwZVVzZWQiLCJudW1TaGFkb3dMaWdodHMiLCJzaGFkb3dlZERpcmVjdGlvbmFsTGlnaHRVc2VkIiwidXNlVnNtIiwidXNlUGVyc3BaYnVmZmVyU2hhZG93IiwiaGFzQXJlYUxpZ2h0cyIsInNvbWUiLCJfc2hhcGUiLCJMSUdIVFNIQVBFX1BVTkNUVUFMIiwiY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCIsImFyZWFMdXRzUHJlY2lzaW9uIiwiYXJlYUxpZ2h0THV0Rm9ybWF0IiwiUElYRUxGT1JNQVRfUkdCQTgiLCJsaWdodFNoYXBlIiwiY2FzdFNoYWRvd3MiLCJub1NoYWRvdyIsInN1cHBvcnRzRGVwdGhTaGFkb3ciLCJfc2hhZG93VHlwZSIsIl9jb29raWUiLCJfY3ViZW1hcCIsIl9jb29raWVUcmFuc2Zvcm0iLCJoYXNUQk4iLCJmYXN0VGJuIiwiVEJOZmFzdFBTIiwiVEJOUFMiLCJUQk5kZXJpdmF0aXZlUFMiLCJyZXBsYWNlIiwiVEJOT2JqZWN0U3BhY2VQUyIsInNwaGVyaWNhbFBTIiwiZGVjb2RlUFMiLCJnYW1tYUNvZGUiLCJnYW1tYSIsInRvbmVtYXBDb2RlIiwidG9uZU1hcCIsImZvZ0NvZGUiLCJmb2ciLCJ1c2VDdWJlTWFwUm90YXRpb24iLCJjdWJlTWFwUm90YXRlUFMiLCJjdWJlTWFwUHJvamVjdGlvbiIsImN1YmVNYXBQcm9qZWN0Qm94UFMiLCJjdWJlTWFwUHJvamVjdE5vbmVQUyIsInNreWJveEludGVuc2l0eSIsImVudk11bHRpcGx5UFMiLCJlbnZDb25zdFBTIiwidXNlTWV0YWxuZXNzIiwibWV0YWxuZXNzTW9kdWxhdGVQUyIsIkZSRVNORUxfU0NITElDSyIsImZyZXNuZWxTY2hsaWNrUFMiLCJpcmlkZXNjZW5jZURpZmZyYWN0aW9uUFMiLCJ1c2VBbyIsImFvTWFwRW5hYmxlZCIsInVzZUFvVmVydGV4Q29sb3JzIiwiYW9EaWZmdXNlT2NjUFMiLCJvY2NsdWRlU3BlY3VsYXIiLCJTUEVDT0NDX0FPIiwib2NjbHVkZVNwZWN1bGFyRmxvYXQiLCJhb1NwZWNPY2NTaW1wbGVQUyIsImFvU3BlY09jY0NvbnN0U2ltcGxlUFMiLCJTUEVDT0NDX0dMT1NTREVQRU5ERU5UIiwiYW9TcGVjT2NjUFMiLCJhb1NwZWNPY2NDb25zdFBTIiwiZml4U2VhbXMiLCJmaXhDdWJlbWFwU2VhbXNTdHJldGNoUFMiLCJmaXhDdWJlbWFwU2VhbXNOb25lUFMiLCJlbnZBdGxhc1BTIiwicmVmbGVjdGlvbkVudkhRUFMiLCJDaHVua1V0aWxzIiwiZGVjb2RlRnVuYyIsInJlZmxlY3Rpb25FbmNvZGluZyIsInJlZmxlY3Rpb25FbnZQUyIsInJlZmxlY3Rpb25DdWJlUFMiLCJzY29kZSIsInJlZmxlY3Rpb25TcGhlcmVQUyIsInJlZmxlY3Rpb25TcGhlcmVMb3dQUyIsInJlZmxlY3Rpb25DQ1BTIiwicmVmbGVjdGlvblNoZWVuUFMiLCJ1c2VSZWZyYWN0aW9uIiwicmVmcmFjdGlvbkR5bmFtaWNQUyIsInJlZnJhY3Rpb25DdWJlUFMiLCJsaWdodFNoZWVuUFMiLCJjbHVzdGVyZWRMaWdodFV0aWxzUFMiLCJjbHVzdGVyZWRMaWdodGluZ0Nvb2tpZXNFbmFibGVkIiwiY2x1c3RlcmVkTGlnaHRDb29raWVzUFMiLCJjbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkIiwic2hhZG93Q2FzY2FkZXNQUyIsInNoYWRvd1N0YW5kYXJkUFMiLCJzaGFkb3dTdGFuZGFyZEdMMlBTIiwic2hhZG93VlNNX2NvbW1vblBTIiwic2hhZG93VlNNOFBTIiwiZXh0VGV4dHVyZUhhbGZGbG9hdExpbmVhciIsInNoYWRvd0VWU01QUyIsInNoYWRvd0VWU01uUFMiLCJleHRUZXh0dXJlRmxvYXRMaW5lYXIiLCJiaWFzQ29uc3RQUyIsInNoYWRvd0Nvb3JkUFMiLCJzaGFkb3dDb21tb25QUyIsInNoYWRvd0Nvb3JkUGVyc3BaYnVmZmVyUFMiLCJsaWdodERpZmZ1c2VMYW1iZXJ0UFMiLCJsdGNQUyIsInVzZU9sZEFtYmllbnQiLCJzaGFkaW5nTW9kZWwiLCJTUEVDVUxBUl9QSE9ORyIsImxpZ2h0U3BlY3VsYXJQaG9uZ1BTIiwibGlnaHRTcGVjdWxhckFuaXNvR0dYUFMiLCJsaWdodFNwZWN1bGFyQmxpbm5QUyIsImRpZmZ1c2VNYXBFbmFibGVkIiwiY29tYmluZVBTIiwibGlnaHRNYXBFbmFibGVkIiwidXNlTGlnaHRNYXBWZXJ0ZXhDb2xvcnMiLCJsaWdodG1hcERpckFkZFBTIiwibGlnaHRtYXBBZGRQUyIsImFkZEFtYmllbnQiLCJsaWdodE1hcFdpdGhvdXRBbWJpZW50IiwiYW1iaWVudFNvdXJjZSIsImFtYmllbnRTSFBTIiwiYW1iaWVudEVudlBTIiwiYW1iaWVudEVuY29kaW5nIiwiYW1iaWVudENvbnN0YW50UFMiLCJ1c2VBbWJpZW50VGludCIsIm1zZGZQUyIsInZpZXdEaXJQUyIsInJlZmxEaXJBbmlzb1BTIiwicmVmbERpclBTIiwiaGFzUG9pbnRMaWdodHMiLCJ1c2VzTGluZWFyRmFsbG9mZiIsInVzZXNJbnZTcXVhcmVkRmFsbG9mZiIsInVzZXNTcG90IiwidXNlc0Nvb2tpZSIsInVzZXNDb29raWVOb3ciLCJmbG9hdFVucGFja2luZ1BTIiwibGlnaHRNYXNrRHluYW1pYyIsInNoYWRvd1R5cGVUb1N0cmluZyIsImNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93VHlwZSIsIkxpZ2h0c0J1ZmZlciIsInNoYWRlckRlZmluZXMiLCJjbHVzdGVyZWRMaWdodFNoYWRvd3NQUyIsImNsdXN0ZXJlZExpZ2h0UFMiLCJ0d29TaWRlZExpZ2h0aW5nIiwic2VwYXJhdGVBbWJpZW50Iiwib2NjbHVkZURpcmVjdCIsInVzZVNwZWN1bGFyaXR5RmFjdG9yIiwic2hhcGVTdHJpbmciLCJfY29va2llRmFsbG9mZiIsIl9jb29raWVDaGFubmVsIiwiX2ZhbGxvZmZNb2RlIiwiTElHSFRGQUxMT0ZGX0xJTkVBUiIsInNoYWRvd1JlYWRNb2RlIiwiZXZzbUV4cCIsImNhbGNGcmVzbmVsIiwiYmxlbmRUeXBlIiwiQkxFTkRfTk9STUFMIiwiQkxFTkRfUFJFTVVMVElQTElFRCIsImVuZFBTIiwiQkxFTkRfQURESVRJVkVBTFBIQSIsImFscGhhVG9Db3ZlcmFnZSIsIm91dHB1dEFscGhhUFMiLCJvdXRwdXRBbHBoYVByZW11bFBTIiwib3V0cHV0QWxwaGFPcGFxdWVQUyIsImxpZ2h0RGlyUG9pbnRQUyIsImZhbGxvZmZMaW5lYXJQUyIsImZhbGxvZmZJbnZTcXVhcmVkUFMiLCJzcG90UFMiLCJjb29raWVQUyIsInN0cnVjdENvZGUiLCJpbmNsdWRlcyIsImRldGFpbE1vZGVzIiwiZGV0YWlsTW9kZXNQUyIsImdlbmVyYXRlRnJhZ21lbnRTaGFkZXIiLCJTSEFERVJfUElDSyIsImN1c3RvbUZyYWdtZW50U2hhZGVyIiwiZ2V0RGVmaW5pdGlvbiIsImRlZmluaXRpb24iLCJTaGFkZXJVdGlscyIsImNyZWF0ZURlZmluaXRpb24iLCJ2ZXJ0ZXhDb2RlIiwiZnJhZ21lbnRDb2RlIiwiaXNGb3J3YXJkIiwidGFnIiwiU0hBREVSVEFHX01BVEVSSUFMIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUE4QkEsTUFBTUEsaUJBQWlCLEdBQUc7QUFDdEJDLEVBQUFBLGFBQWEsRUFBRUMsZUFBZTtBQUM5QkMsRUFB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
