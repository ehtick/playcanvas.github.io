import { SEMANTIC_POSITION, SEMANTIC_ATTR12, SEMANTIC_ATTR13, SEMANTIC_ATTR14, SEMANTIC_ATTR15, SEMANTIC_NORMAL, SEMANTIC_TANGENT, SEMANTIC_COLOR, SEMANTIC_ATTR8, SEMANTIC_ATTR9, SEMANTIC_ATTR10, SEMANTIC_ATTR11, SEMANTIC_BLENDWEIGHT, SEMANTIC_BLENDINDICES, PIXELFORMAT_RGBA8, SHADERTAG_MATERIAL, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1 } from '../../../platform/graphics/constants.js';
import { shaderChunks } from '../chunks/chunks.js';
import { ChunkUtils } from '../chunk-utils.js';
import { SPRITE_RENDERMODE_SLICED, SPRITE_RENDERMODE_TILED, LIGHTSHAPE_SPHERE, LIGHTSHAPE_DISK, LIGHTSHAPE_RECT, SHADER_DEPTH, SHADOW_VSM32, SHADOW_PCF1, SHADOW_PCF3, SHADOW_PCSS, LIGHTTYPE_OMNI, SHADOW_VSM8, LIGHTSHAPE_PUNCTUAL, LIGHTTYPE_DIRECTIONAL, LIGHTTYPE_SPOT, FRESNEL_SCHLICK, SPECOCC_GLOSSDEPENDENT, SPECOCC_AO, SHADOW_PCF5, SHADOW_VSM16, SPECULAR_PHONG, shadowTypeToString, LIGHTFALLOFF_LINEAR, BLEND_NORMAL, BLEND_PREMULTIPLIED, BLEND_ADDITIVEALPHA, SHADER_PICK } from '../../constants.js';
import { LightsBuffer } from '../../lighting/lights-buffer.js';
import { ShaderPass } from '../../shader-pass.js';
import { skinCode, begin, end, gammaCode, tonemapCode, fogCode } from './common.js';
import { validateUserChunks } from '../chunks/chunk-validation.js';
import { ShaderUtils } from '../../../platform/graphics/shader-utils.js';
import { ChunkBuilder } from '../chunk-builder.js';

const builtinAttributes = {
  vertex_normal: SEMANTIC_NORMAL,
  vertex_tangent: SEMANTIC_TANGENT,
  vertex_texCoord0: SEMANTIC_TEXCOORD0,
  vertex_texCoord1: SEMANTIC_TEXCOORD1,
  vertex_color: SEMANTIC_COLOR,
  vertex_boneWeights: SEMANTIC_BLENDWEIGHT,
  vertex_boneIndices: SEMANTIC_BLENDINDICES
};
const builtinVaryings = {
  vVertexColor: "vec4",
  vPositionW: "vec3",
  vNormalV: "vec3",
  vNormalW: "vec3",
  vTangentW: "vec3",
  vBinormalW: "vec3",
  vObjectSpaceUpW: "vec3",
  vUv0: "vec2",
  vUv1: "vec2"
};
class LitShader {
  constructor(device, options) {
    /**
     * @param {import('../../../platform/graphics/graphics-device.js').GraphicsDevice} device - The
     * graphics device.
     * @param {import('../../../scene/materials/lit-options.js').LitOptions} options - The
     * lit options.
     * @ignore
     */
    this.device = device;
    this.options = options;

    // resolve custom chunk attributes
    this.attributes = {
      vertex_position: SEMANTIC_POSITION
    };
    if (options.chunks) {
      this.chunks = {};
      const userChunks = options.chunks;
      validateUserChunks(options.chunks);
      for (const chunkName in shaderChunks) {
        if (userChunks.hasOwnProperty(chunkName)) {
          const chunk = userChunks[chunkName];
          for (const a in builtinAttributes) {
            if (builtinAttributes.hasOwnProperty(a) && chunk.indexOf(a) >= 0) {
              this.attributes[a] = builtinAttributes[a];
            }
          }
          this.chunks[chunkName] = chunk;
        } else {
          this.chunks[chunkName] = shaderChunks[chunkName];
        }
      }
    } else {
      this.chunks = shaderChunks;
    }
    this.shaderPassInfo = ShaderPass.get(this.device).getByIndex(options.pass);
    this.shadowPass = this.shaderPassInfo.isShadow;
    this.lighting = options.lights.length > 0 || options.dirLightMapEnabled || options.clusteredLightingEnabled;
    this.reflections = !!options.reflectionSource;
    this.needsNormal = this.lighting || this.reflections || options.useSpecular || options.ambientSH || options.heightMapEnabled || options.enableGGXSpecular || options.clusteredLightingEnabled && !this.shadowPass || options.clearCoatNormalMapEnabled;
    this.needsNormal = this.needsNormal && !this.shadowPass;
    this.needsSceneColor = options.useDynamicRefraction;
    this.needsScreenSize = options.useDynamicRefraction;
    this.needsTransforms = options.useDynamicRefraction;

    // generated by vshader
    this.varyings = "";
    this.varyingDefines = "";
    this.vshader = null;

    // supplied by caller
    this.frontendDecl = null;
    this.frontendCode = null;
    this.frontendFunc = null;
    this.lightingUv = null;

    // defines set by the shader generation
    this.defines = [];

    // generated by fshader
    this.fshader = null;
  }
  _vsAddBaseCode(code, chunks, options) {
    code += chunks.baseVS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED || options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      code += chunks.baseNineSlicedVS;
    }
    return code;
  }
  _vsAddTransformCode(code, device, chunks, options) {
    code += this.chunks.transformVS;
    return code;
  }
  _setMapTransform(codes, name, id, uv) {
    const checkId = id + uv * 100;
    if (!codes[3][checkId]) {
      // upload a 3x2 matrix and manually perform the multiplication
      const varName = `texture_${name}MapTransform`;
      codes[0] += `uniform vec3 ${varName}0;\n`;
      codes[0] += `uniform vec3 ${varName}1;\n`;
      codes[1] += `varying vec2 vUV${uv}_${id};\n`;
      codes[2] += `   vUV${uv}_${id} = vec2(dot(vec3(uv${uv}, 1), ${varName}0), dot(vec3(uv${uv}, 1), ${varName}1));\n`;
      codes[3][checkId] = true;
    }
    return codes;
  }

  // Add "Base" Code section to fragment shader.
  _fsGetBaseCode() {
    const options = this.options;
    const chunks = this.chunks;
    let result = this.chunks.basePS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {
      result += chunks.baseNineSlicedPS;
    } else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      result += chunks.baseNineSlicedTiledPS;
    }
    return result;
  }

  // Add "Start" Code section to fragment shader.
  _fsGetStartCode(code, device, chunks, options) {
    let result = chunks.startPS;
    if (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {
      result += chunks.startNineSlicedPS;
    } else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {
      result += chunks.startNineSlicedTiledPS;
    }
    return result;
  }
  _getLightSourceShapeString(shape) {
    switch (shape) {
      case LIGHTSHAPE_RECT:
        return 'Rect';
      case LIGHTSHAPE_DISK:
        return 'Disk';
      case LIGHTSHAPE_SPHERE:
        return 'Sphere';
      default:
        return '';
    }
  }
  generateVertexShader(useUv, useUnmodifiedUv, mapTransforms) {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    let code = '';
    let codeBody = '';

    // code += chunks.baseVS;
    code = this._vsAddBaseCode(code, chunks, options);
    codeBody += "   vPositionW    = getWorldPosition();\n";
    if (this.options.pass === SHADER_DEPTH) {
      code += 'varying float vDepth;\n';
      code += '#ifndef VIEWMATRIX\n';
      code += '#define VIEWMATRIX\n';
      code += 'uniform mat4 matrix_view;\n';
      code += '#endif\n';
      code += '#ifndef CAMERAPLANES\n';
      code += '#define CAMERAPLANES\n';
      code += 'uniform vec4 camera_params;\n\n';
      code += '#endif\n';
      codeBody += "    vDepth = -(matrix_view * vec4(vPositionW,1.0)).z * camera_params.x;\n";
    }
    if (this.options.useInstancing) {
      this.attributes.instance_line1 = SEMANTIC_ATTR12;
      this.attributes.instance_line2 = SEMANTIC_ATTR13;
      this.attributes.instance_line3 = SEMANTIC_ATTR14;
      this.attributes.instance_line4 = SEMANTIC_ATTR15;
      code += chunks.instancingVS;
    }
    if (this.needsNormal) {
      this.attributes.vertex_normal = SEMANTIC_NORMAL;
      codeBody += "   vNormalW = getNormal();\n";
      if (options.reflectionSource === 'sphereMap' && device.fragmentUniformsCount <= 16) {
        code += chunks.viewNormalVS;
        codeBody += "   vNormalV    = getViewNormal();\n";
      }
      if (options.hasTangents && (options.heightMapEnabled || options.normalMapEnabled || options.enableGGXSpecular)) {
        this.attributes.vertex_tangent = SEMANTIC_TANGENT;
        code += chunks.tangentBinormalVS;
        codeBody += "   vTangentW   = getTangent();\n";
        codeBody += "   vBinormalW  = getBinormal();\n";
      } else if (options.enableGGXSpecular || !device.extStandardDerivatives) {
        codeBody += "   vObjectSpaceUpW = normalize(dNormalMatrix * vec3(0, 1, 0));\n";
      }
    }
    const maxUvSets = 2;
    for (let i = 0; i < maxUvSets; i++) {
      if (useUv[i]) {
        this.attributes["vertex_texCoord" + i] = "TEXCOORD" + i;
        code += chunks["uv" + i + "VS"];
        codeBody += "   vec2 uv" + i + " = getUv" + i + "();\n";
      }
      if (useUnmodifiedUv[i]) {
        codeBody += "   vUv" + i + " = uv" + i + ";\n";
      }
    }
    const codes = [code, this.varyings, codeBody, []];
    mapTransforms.forEach(mapTransform => {
      this._setMapTransform(codes, mapTransform.name, mapTransform.id, mapTransform.uv);
    });
    code = codes[0];
    this.varyings = codes[1];
    codeBody = codes[2];
    if (options.vertexColors) {
      this.attributes.vertex_color = SEMANTIC_COLOR;
      codeBody += "   vVertexColor = vertex_color;\n";
    }
    if (options.useMsdf && options.msdfTextAttribute) {
      this.attributes.vertex_outlineParameters = SEMANTIC_ATTR8;
      this.attributes.vertex_shadowParameters = SEMANTIC_ATTR9;
      codeBody += "    unpackMsdfParams();\n";
      code += chunks.msdfVS;
    }

    // morphing
    if (options.useMorphPosition || options.useMorphNormal) {
      if (options.useMorphTextureBased) {
        code += "#define MORPHING_TEXTURE_BASED\n";
        if (options.useMorphPosition) {
          code += "#define MORPHING_TEXTURE_BASED_POSITION\n";
        }
        if (options.useMorphNormal) {
          code += "#define MORPHING_TEXTURE_BASED_NORMAL\n";
        }

        // vertex ids attributes
        this.attributes.morph_vertex_id = SEMANTIC_ATTR15;
        const morphIdType = device.isWebGPU ? 'uint' : 'float';
        code += `attribute ${morphIdType} morph_vertex_id;\n`;
      } else {
        // set up 8 slots for morphing. these are supported combinations: PPPPPPPP, NNNNNNNN, PPPPNNNN
        code += "#define MORPHING\n";

        // first 4 slots are either position or normal
        if (options.useMorphPosition) {
          this.attributes.morph_pos0 = SEMANTIC_ATTR8;
          this.attributes.morph_pos1 = SEMANTIC_ATTR9;
          this.attributes.morph_pos2 = SEMANTIC_ATTR10;
          this.attributes.morph_pos3 = SEMANTIC_ATTR11;
          code += "#define MORPHING_POS03\n";
          code += "attribute vec3 morph_pos0;\n";
          code += "attribute vec3 morph_pos1;\n";
          code += "attribute vec3 morph_pos2;\n";
          code += "attribute vec3 morph_pos3;\n";
        } else if (options.useMorphNormal) {
          this.attributes.morph_nrm0 = SEMANTIC_ATTR8;
          this.attributes.morph_nrm1 = SEMANTIC_ATTR9;
          this.attributes.morph_nrm2 = SEMANTIC_ATTR10;
          this.attributes.morph_nrm3 = SEMANTIC_ATTR11;
          code += "#define MORPHING_NRM03\n";
          code += "attribute vec3 morph_nrm0;\n";
          code += "attribute vec3 morph_nrm1;\n";
          code += "attribute vec3 morph_nrm2;\n";
          code += "attribute vec3 morph_nrm3;\n";
        }

        // next 4 slots are either position or normal
        if (!options.useMorphNormal) {
          this.attributes.morph_pos4 = SEMANTIC_ATTR12;
          this.attributes.morph_pos5 = SEMANTIC_ATTR13;
          this.attributes.morph_pos6 = SEMANTIC_ATTR14;
          this.attributes.morph_pos7 = SEMANTIC_ATTR15;
          code += "#define MORPHING_POS47\n";
          code += "attribute vec3 morph_pos4;\n";
          code += "attribute vec3 morph_pos5;\n";
          code += "attribute vec3 morph_pos6;\n";
          code += "attribute vec3 morph_pos7;\n";
        } else {
          this.attributes.morph_nrm4 = SEMANTIC_ATTR12;
          this.attributes.morph_nrm5 = SEMANTIC_ATTR13;
          this.attributes.morph_nrm6 = SEMANTIC_ATTR14;
          this.attributes.morph_nrm7 = SEMANTIC_ATTR15;
          code += "#define MORPHING_NRM47\n";
          code += "attribute vec3 morph_nrm4;\n";
          code += "attribute vec3 morph_nrm5;\n";
          code += "attribute vec3 morph_nrm6;\n";
          code += "attribute vec3 morph_nrm7;\n";
        }
      }
    }
    if (options.skin) {
      this.attributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;
      this.attributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;
      code += skinCode(device, chunks);
      code += "#define SKIN\n";
    } else if (options.useInstancing) {
      code += "#define INSTANCING\n";
    }
    if (options.screenSpace) {
      code += "#define SCREENSPACE\n";
    }
    if (options.pixelSnap) {
      code += "#define PIXELSNAP\n";
    }
    code = this._vsAddTransformCode(code, device, chunks, options);
    if (this.needsNormal) {
      code += chunks.normalVS;
    }
    code += "\n";
    code += chunks.startVS;
    code += codeBody;
    code += chunks.endVS;
    code += "}";

    // build varyings
    Object.keys(builtinVaryings).forEach(v => {
      if (code.indexOf(v) >= 0) {
        this.varyings += `varying ${builtinVaryings[v]} ${v};\n`;
        this.varyingDefines += `#define VARYING_${v.toUpperCase()}\n`;
      }
    });
    const shaderPassDefines = this.shaderPassInfo.shaderDefines;
    this.vshader = shaderPassDefines + this.varyings + code;
  }
  _fsGetBeginCode() {
    let code = this.shaderPassInfo.shaderDefines;
    for (let i = 0; i < this.defines.length; i++) {
      code += `#define ${this.defines[i]}\n`;
    }
    return code;
  }
  _fsGetPickPassCode() {
    let code = this._fsGetBeginCode();
    code += "uniform vec4 uColor;\n";
    code += this.varyings;
    code += this.varyingDefines;
    code += this.frontendDecl;
    code += this.frontendCode;
    code += begin();
    code += this.frontendFunc;
    code += "    gl_FragColor = uColor;\n";
    code += end();
    return code;
  }
  _fsGetDepthPassCode() {
    const chunks = this.chunks;
    let code = this._fsGetBeginCode();
    code += 'varying float vDepth;\n';
    code += this.varyings;
    code += this.varyingDefines;
    code += chunks.packDepthPS;
    code += this.frontendDecl;
    code += this.frontendCode;
    code += begin();
    code += this.frontendFunc;
    code += "    gl_FragColor = packFloat(vDepth);\n";
    code += end();
    return code;
  }
  _fsGetShadowPassCode() {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    const varyings = this.varyings;
    const lightType = this.shaderPassInfo.lightType;
    const shadowType = this.shaderPassInfo.shadowType;
    let code = this._fsGetBeginCode();
    if (device.extStandardDerivatives && !device.webgl2 && !device.isWebGPU) {
      code += 'uniform vec2 polygonOffset;\n';
    }
    if (shadowType === SHADOW_VSM32) {
      if (device.textureFloatHighPrecision) {
        code += '#define VSM_EXPONENT 15.0\n\n';
      } else {
        code += '#define VSM_EXPONENT 5.54\n\n';
      }
    } else if (shadowType === SHADOW_VSM16) {
      code += '#define VSM_EXPONENT 5.54\n\n';
    }
    if (lightType !== LIGHTTYPE_DIRECTIONAL) {
      code += 'uniform vec3 view_position;\n';
      code += 'uniform float light_radius;\n';
    }
    code += varyings;
    code += this.varyingDefines;
    code += this.frontendDecl;
    code += this.frontendCode;
    const usePackedDepth = !device.supportsDepthShadow && (shadowType === SHADOW_PCF1 || shadowType === SHADOW_PCF3 || shadowType === SHADOW_PCSS) || lightType === LIGHTTYPE_OMNI && shadowType !== SHADOW_PCSS && !options.clusteredLightingEnabled;
    if (usePackedDepth) {
      code += chunks.packDepthPS;
    } else if (shadowType === SHADOW_VSM8) {
      code += "vec2 encodeFloatRG( float v ) {\n";
      code += "    vec2 enc = vec2(1.0, 255.0) * v;\n";
      code += "    enc = fract(enc);\n";
      code += "    enc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\n";
      code += "    return enc;\n";
      code += "}\n\n";
    }
    if (shadowType === SHADOW_PCSS) {
      code += shaderChunks.linearizeDepthPS;
    }
    code += begin();
    code += this.frontendFunc;
    const isVsm = shadowType === SHADOW_VSM8 || shadowType === SHADOW_VSM16 || shadowType === SHADOW_VSM32;
    const applySlopeScaleBias = !device.webgl2 && device.extStandardDerivatives && !device.isWebGPU;
    const customDepth = isVsm && lightType !== LIGHTTYPE_DIRECTIONAL || lightType === LIGHTTYPE_OMNI;
    if (customDepth) {
      code += "    float depth = min(distance(view_position, vPositionW) / light_radius, 0.99999);\n";
    } else if (shadowType === SHADOW_PCSS) {
      code += "    float depth = linearizeDepth(gl_FragCoord.z, camera_params);\n";
      if (usePackedDepth) {
        // After linearizing, make sure to pack the range between [0..1]
        code += "    depth *= 1.0 / (camera_params.y - camera_params.z);\n";
      }
    } else {
      code += "    float depth = gl_FragCoord.z;\n";
    }
    if (applySlopeScaleBias) {
      code += "    float minValue = 2.3374370500153186e-10; //(1.0 / 255.0) / (256.0 * 256.0 * 256.0);\n";
      code += "    depth += polygonOffset.x * max(abs(dFdx(depth)), abs(dFdy(depth))) + minValue * polygonOffset.y;\n";
    }
    if (usePackedDepth) {
      code += "    gl_FragColor = packFloat(depth);\n";
    } else if (!isVsm) {
      code += "    gl_FragColor = vec4(1.0);\n"; // just the simplest code, color is not written anyway

      // clustered omni light is using shadow sampler and needs to write custom depth
      if (shadowType === SHADOW_PCSS || lightType === LIGHTTYPE_OMNI && !options.clusteredLightingEnabled) {
        code += "   gl_FragColor.r = depth;\n";
      } else if (options.clusteredLightingEnabled && lightType === LIGHTTYPE_OMNI && device.supportsDepthShadow) {
        code += "    gl_FragDepth = depth;\n";
      }
    } else if (shadowType === SHADOW_VSM8) {
      code += "    gl_FragColor = vec4(encodeFloatRG(depth), encodeFloatRG(depth*depth));\n";
    } else {
      code += chunks.storeEVSMPS;
    }
    code += end();
    return code;
  }

  // the big one
  _fsGetLitPassCode() {
    const device = this.device;
    const options = this.options;
    const chunks = this.chunks;
    const decl = new ChunkBuilder();
    const func = new ChunkBuilder();
    const backend = new ChunkBuilder();
    const code = new ChunkBuilder();
    if (options.opacityFadesSpecular === false) {
      decl.append('uniform float material_alphaFade;');
    }
    if (options.useSpecular) {
      this.defines.push("LIT_SPECULAR");
      if (this.reflections) {
        this.defines.push("LIT_REFLECTIONS");
      }
      if (options.useClearCoat) {
        this.defines.push("LIT_CLEARCOAT");
      }
      if (options.fresnelModel > 0) {
        this.defines.push("LIT_SPECULAR_FRESNEL");
      }

      // enable conserve energy path in clustered chunk
      if (options.conserveEnergy) {
        this.defines.push("LIT_CONSERVE_ENERGY");
      }
      if (options.useSheen) {
        this.defines.push("LIT_SHEEN");
      }
      if (options.useIridescence) {
        this.defines.push("LIT_IRIDESCENCE");
      }
    }

    // FRAGMENT SHADER INPUTS: UNIFORMS
    const shadowTypeUsed = [];
    let numShadowLights = 0;
    let shadowedDirectionalLightUsed = false;
    let useVsm = false;
    let usePcss = false;
    let hasAreaLights = options.lights.some(function (light) {
      return light._shape && light._shape !== LIGHTSHAPE_PUNCTUAL;
    });

    // if clustered lighting has area lights enabled, it always runs in 'area lights mode'
    // TODO: maybe we should always use it and remove the other way?
    if (options.clusteredLightingEnabled && options.clusteredLightingAreaLightsEnabled) {
      hasAreaLights = true;
    }
    let areaLutsPrecision = 'highp';
    if (device.areaLightLutFormat === PIXELFORMAT_RGBA8) {
      // use offset and scale for rgb8 format luts
      decl.append("#define AREA_R8_G8_B8_A8_LUTS");
      areaLutsPrecision = 'lowp';
    }
    if (hasAreaLights || options.clusteredLightingEnabled) {
      decl.append("#define AREA_LIGHTS");
      decl.append(`uniform ${areaLutsPrecision} sampler2D areaLightsLutTex1;`);
      decl.append(`uniform ${areaLutsPrecision} sampler2D areaLightsLutTex2;`);
    }
    for (let i = 0; i < options.lights.length; i++) {
      const light = options.lights[i];
      const lightType = light._type;

      // skip uniform generation for local lights if clustered lighting is enabled
      if (options.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) continue;
      const lightShape = hasAreaLights && light._shape ? light._shape : LIGHTSHAPE_PUNCTUAL;
      decl.append("uniform vec3 light" + i + "_color;");
      if (light._shadowType === SHADOW_PCSS && light.castShadows && !options.noShadow) {
        decl.append(`uniform float light${i}_shadowSearchArea;`);
        decl.append(`uniform vec4 light${i}_cameraParams;`);
      }
      if (lightType === LIGHTTYPE_DIRECTIONAL) {
        decl.append("uniform vec3 light" + i + "_direction;");
      } else {
        decl.append("uniform vec3 light" + i + "_position;");
        decl.append("uniform float light" + i + "_radius;");
        if (lightType === LIGHTTYPE_SPOT) {
          decl.append("uniform vec3 light" + i + "_direction;");
          decl.append("uniform float light" + i + "_innerConeAngle;");
          decl.append("uniform float light" + i + "_outerConeAngle;");
        }
      }
      if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          decl.append("uniform vec3 light" + i + "_position;");
        }
        decl.append("uniform vec3 light" + i + "_halfWidth;");
        decl.append("uniform vec3 light" + i + "_halfHeight;");
      }
      if (light.castShadows && !options.noShadow) {
        decl.append("uniform mat4 light" + i + "_shadowMatrix;");
        decl.append("uniform float light" + i + "_shadowIntensity;");

        // directional (cascaded) shadows
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          decl.append("uniform mat4 light" + i + "_shadowMatrixPalette[4];");
          decl.append("uniform float light" + i + "_shadowCascadeDistances[4];");
          decl.append("uniform float light" + i + "_shadowCascadeCount;");
        }
        decl.append("uniform vec4 light" + i + "_shadowParams;"); // Width, height, bias, radius
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          shadowedDirectionalLightUsed = true;
        }
        if (lightType === LIGHTTYPE_OMNI) {
          decl.append("uniform samplerCube light" + i + "_shadowMap;");
        } else {
          if (light._isPcf && device.supportsDepthShadow) {
            decl.append("uniform sampler2DShadow light" + i + "_shadowMap;");
          } else {
            decl.append("uniform sampler2D light" + i + "_shadowMap;");
          }
        }
        numShadowLights++;
        shadowTypeUsed[light._shadowType] = true;
        if (light._isVsm) useVsm = true;
        if (light._shadowType === SHADOW_PCSS) usePcss = true;
      }
      if (light._cookie) {
        if (light._cookie._cubemap) {
          if (lightType === LIGHTTYPE_OMNI) {
            decl.append("uniform samplerCube light" + i + "_cookie;");
            decl.append("uniform float light" + i + "_cookieIntensity;");
            if (!light.castShadows || options.noShadow) {
              decl.append("uniform mat4 light" + i + "_shadowMatrix;");
            }
          }
        } else {
          if (lightType === LIGHTTYPE_SPOT) {
            decl.append("uniform sampler2D light" + i + "_cookie;");
            decl.append("uniform float light" + i + "_cookieIntensity;");
            if (!light.castShadows || options.noShadow) {
              decl.append("uniform mat4 light" + i + "_shadowMatrix;");
            }
            if (light._cookieTransform) {
              decl.append("uniform vec4 light" + i + "_cookieMatrix;");
              decl.append("uniform vec2 light" + i + "_cookieOffset;");
            }
          }
        }
      }
    }

    // TBN
    const hasTBN = this.needsNormal && (options.normalMapEnabled || options.clearCoatNormalMapEnabled || options.enableGGXSpecular && !options.heightMapEnabled);
    if (hasTBN) {
      if (options.hasTangents) {
        func.append(options.fastTbn ? chunks.TBNfastPS : chunks.TBNPS);
      } else {
        if (device.extStandardDerivatives && (options.normalMapEnabled || options.clearCoatNormalMapEnabled)) {
          func.append(chunks.TBNderivativePS.replace(/\$UV/g, this.lightingUv));
        } else {
          func.append(chunks.TBNObjectSpacePS);
        }
      }
    }

    // FIXME: only add these when needed
    func.append(chunks.sphericalPS);
    func.append(chunks.decodePS);
    func.append(gammaCode(options.gamma, chunks));
    func.append(tonemapCode(options.toneMap, chunks));
    func.append(fogCode(options.fog, chunks));

    // frontend
    func.append(this.frontendCode);
    if (options.useCubeMapRotation) {
      decl.append("#define CUBEMAP_ROTATION");
    }
    if (this.needsNormal) {
      func.append(chunks.cubeMapRotatePS);
      func.append(options.cubeMapProjection > 0 ? chunks.cubeMapProjectBoxPS : chunks.cubeMapProjectNonePS);
      func.append(options.skyboxIntensity ? chunks.envMultiplyPS : chunks.envConstPS);
    }
    if (this.lighting && options.useSpecular || this.reflections) {
      if (options.useMetalness) {
        func.append(chunks.metalnessModulatePS);
      }
      if (options.fresnelModel === FRESNEL_SCHLICK) {
        func.append(chunks.fresnelSchlickPS);
      }
      if (options.useIridescence) {
        func.append(chunks.iridescenceDiffractionPS);
      }
    }
    const useAo = options.aoMapEnabled || options.useAoVertexColors;
    if (useAo) {
      func.append(chunks.aoDiffuseOccPS);
      switch (options.occludeSpecular) {
        case SPECOCC_AO:
          func.append(options.occludeSpecularFloat ? chunks.aoSpecOccSimplePS : chunks.aoSpecOccConstSimplePS);
          break;
        case SPECOCC_GLOSSDEPENDENT:
          func.append(options.occludeSpecularFloat ? chunks.aoSpecOccPS : chunks.aoSpecOccConstPS);
          break;
      }
    }
    if (options.reflectionSource === 'envAtlasHQ') {
      func.append(options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS);
      func.append(chunks.envAtlasPS);
      func.append(chunks.reflectionEnvHQPS.replace(/\$DECODE_CUBEMAP/g, ChunkUtils.decodeFunc(options.reflectionCubemapEncoding)).replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    } else if (options.reflectionSource === 'envAtlas') {
      func.append(chunks.envAtlasPS);
      func.append(chunks.reflectionEnvPS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    } else if (options.reflectionSource === 'cubeMap') {
      func.append(options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS);
      func.append(chunks.reflectionCubePS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    } else if (options.reflectionSource === 'sphereMap') {
      const scode = device.fragmentUniformsCount > 16 ? chunks.reflectionSpherePS : chunks.reflectionSphereLowPS;
      func.append(scode.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.reflectionEncoding)));
    }
    if (this.reflections) {
      if (options.useClearCoat) {
        func.append(chunks.reflectionCCPS);
      }
      if (options.useSheen) {
        func.append(chunks.reflectionSheenPS);
      }
    }
    if (options.useRefraction) {
      if (options.useDynamicRefraction) {
        func.append(chunks.refractionDynamicPS);
      } else if (this.reflections) {
        func.append(chunks.refractionCubePS);
      }
    }
    if (options.useSheen) {
      func.append(chunks.lightSheenPS);
    }

    // clustered lighting
    if (options.clusteredLightingEnabled) {
      // include this before shadow / cookie code
      func.append(chunks.clusteredLightUtilsPS);
      if (options.clusteredLightingCookiesEnabled) func.append(chunks.clusteredLightCookiesPS);

      // include shadow chunks clustered lights support
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        shadowTypeUsed[SHADOW_PCF3] = true;
        shadowTypeUsed[SHADOW_PCF5] = true;
        shadowTypeUsed[SHADOW_PCSS] = true;
      }
    }
    if (numShadowLights > 0 || options.clusteredLightingEnabled) {
      if (shadowedDirectionalLightUsed) {
        func.append(chunks.shadowCascadesPS);
      }
      if (shadowTypeUsed[SHADOW_PCF1] || shadowTypeUsed[SHADOW_PCF3]) {
        func.append(chunks.shadowStandardPS);
      }
      if (shadowTypeUsed[SHADOW_PCF5] && (device.webgl2 || device.isWebGPU)) {
        func.append(chunks.shadowStandardGL2PS);
      }
      if (useVsm) {
        func.append(chunks.shadowVSM_commonPS);
        if (shadowTypeUsed[SHADOW_VSM8]) {
          func.append(chunks.shadowVSM8PS);
        }
        if (shadowTypeUsed[SHADOW_VSM16]) {
          func.append(device.extTextureHalfFloatLinear ? chunks.shadowEVSMPS.replace(/\$/g, "16") : chunks.shadowEVSMnPS.replace(/\$/g, "16"));
        }
        if (shadowTypeUsed[SHADOW_VSM32]) {
          func.append(device.extTextureFloatLinear ? chunks.shadowEVSMPS.replace(/\$/g, "32") : chunks.shadowEVSMnPS.replace(/\$/g, "32"));
        }
      }
      if (usePcss) {
        func.append(chunks.linearizeDepthPS);
        func.append(chunks.shadowPCSSPS);
      }
      if (!(device.webgl2 || device.extStandardDerivatives || device.isWebGPU)) {
        func.append(chunks.biasConstPS);
      }
    }
    if (options.enableGGXSpecular) func.append("uniform float material_anisotropy;");
    if (this.lighting) {
      func.append(chunks.lightDiffuseLambertPS);
      if (hasAreaLights || options.clusteredLightingAreaLightsEnabled) {
        func.append(chunks.ltcPS);
      }
    }
    let useOldAmbient = false;
    if (options.useSpecular) {
      if (this.lighting) {
        func.append(options.shadingModel === SPECULAR_PHONG ? chunks.lightSpecularPhongPS : options.enableGGXSpecular ? chunks.lightSpecularAnisoGGXPS : chunks.lightSpecularBlinnPS);
      }
      if (!options.fresnelModel && !this.reflections && !options.diffuseMapEnabled) {
        decl.append("uniform vec3 material_ambient;");
        decl.append("#define LIT_OLD_AMBIENT");
        useOldAmbient = true;
      }
    }
    func.append(chunks.combinePS);

    // lightmap support
    if (options.lightMapEnabled || options.useLightMapVertexColors) {
      func.append(options.useSpecular && options.dirLightMapEnabled ? chunks.lightmapDirAddPS : chunks.lightmapAddPS);
    }
    const addAmbient = !options.lightMapEnabled && !options.useLightMapVertexColors || options.lightMapWithoutAmbient;
    if (addAmbient) {
      if (options.ambientSource === 'ambientSH') {
        func.append(chunks.ambientSHPS);
      } else if (options.ambientSource === 'envAtlas') {
        if (options.reflectionSource !== 'envAtlas' && options.reflectionSource !== 'envAtlasHQ') {
          func.append(chunks.envAtlasPS);
        }
        func.append(chunks.ambientEnvPS.replace(/\$DECODE/g, ChunkUtils.decodeFunc(options.ambientEncoding)));
      } else {
        func.append(chunks.ambientConstantPS);
      }
    }
    if (options.useAmbientTint && !useOldAmbient) {
      decl.append("uniform vec3 material_ambient;");
    }
    if (options.useMsdf) {
      if (!options.msdfTextAttribute) {
        decl.append("#define UNIFORM_TEXT_PARAMETERS");
      }
      func.append(chunks.msdfPS);
    }
    if (this.needsNormal) {
      func.append(chunks.viewDirPS);
      if (options.useSpecular) {
        func.append(options.enableGGXSpecular ? chunks.reflDirAnisoPS : chunks.reflDirPS);
      }
    }
    let hasPointLights = false;
    let usesLinearFalloff = false;
    let usesInvSquaredFalloff = false;
    let usesSpot = false;
    let usesCookie = false;
    let usesCookieNow;

    // clustered lighting
    if (options.clusteredLightingEnabled && this.lighting) {
      usesSpot = true;
      hasPointLights = true;
      usesLinearFalloff = true;
      usesCookie = true;
      func.append(chunks.floatUnpackingPS);
      if (options.lightMaskDynamic) decl.append("#define CLUSTER_MESH_DYNAMIC_LIGHTS");
      if (options.clusteredLightingCookiesEnabled) decl.append("#define CLUSTER_COOKIES");
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        decl.append("#define CLUSTER_SHADOWS");
        decl.append("#define CLUSTER_SHADOW_TYPE_" + shadowTypeToString[options.clusteredLightingShadowType]);
      }
      if (options.clusteredLightingAreaLightsEnabled) decl.append("#define CLUSTER_AREALIGHTS");
      decl.append(LightsBuffer.shaderDefines);
      if (options.clusteredLightingShadowsEnabled && !options.noShadow) {
        func.append(chunks.clusteredLightShadowsPS);
      }
      func.append(chunks.clusteredLightPS);
    }
    if (options.twoSidedLighting) {
      decl.append("uniform float twoSidedLightingNegScaleFactor;");
    }

    // FRAGMENT SHADER BODY

    code.append(this._fsGetStartCode(code, device, chunks, options));
    if (this.needsNormal) {
      if (options.twoSidedLighting) {
        code.append("    dVertexNormalW = normalize(gl_FrontFacing ? vNormalW * twoSidedLightingNegScaleFactor : -vNormalW * twoSidedLightingNegScaleFactor);");
      } else {
        code.append("    dVertexNormalW = normalize(vNormalW);");
      }
      if ((options.heightMapEnabled || options.normalMapEnabled) && options.hasTangents) {
        if (options.twoSidedLighting) {
          code.append("    dTangentW = gl_FrontFacing ? vTangentW * twoSidedLightingNegScaleFactor : -vTangentW * twoSidedLightingNegScaleFactor;");
          code.append("    dBinormalW = gl_FrontFacing ? vBinormalW * twoSidedLightingNegScaleFactor : -vBinormalW * twoSidedLightingNegScaleFactor;");
        } else {
          code.append("    dTangentW = vTangentW;");
          code.append("    dBinormalW = vBinormalW;");
        }
      }
      code.append("    getViewDir();");
      if (hasTBN) {
        code.append("    getTBN(dTangentW, dBinormalW, dVertexNormalW);");
      }
    }

    // invoke frontend functions
    code.append(this.frontendFunc);

    // transform tangent space normals to world space
    if (this.needsNormal) {
      if (options.useSpecular) {
        backend.append("    getReflDir(litShaderArgs.worldNormal, dViewDirW, litShaderArgs.gloss, dTBN);");
      }
      if (options.useClearCoat) {
        backend.append("    ccReflDirW = normalize(-reflect(dViewDirW, litShaderArgs.clearcoat.worldNormal));");
      }
    }
    if (this.lighting && options.useSpecular || this.reflections) {
      if (options.useMetalness) {
        backend.append("    getMetalnessModulate(litShaderArgs);");
      }
      if (options.useIridescence) {
        backend.append("    vec3 iridescenceFresnel = getIridescence(saturate(dot(dViewDirW, litShaderArgs.worldNormal)), litShaderArgs.specularity, litShaderArgs.iridescence);");
      }
    }
    if (addAmbient) {
      backend.append("    addAmbient(litShaderArgs.worldNormal);");
      if (options.conserveEnergy && options.useSpecular) {
        backend.append(`   dDiffuseLight = dDiffuseLight * (1.0 - litShaderArgs.specularity);`);
      }

      // move ambient color out of diffuse (used by Lightmapper, to multiply ambient color by accumulated AO)
      if (options.separateAmbient) {
        backend.append(`
                    vec3 dAmbientLight = dDiffuseLight;
                    dDiffuseLight = vec3(0);
                `);
      }
    }
    if (options.useAmbientTint && !useOldAmbient) {
      backend.append("    dDiffuseLight *= material_ambient;");
    }
    if (useAo && !options.occludeDirect) {
      backend.append("    occludeDiffuse(litShaderArgs.ao);");
    }
    if (options.lightMapEnabled || options.useLightMapVertexColors) {
      backend.append(`    addLightMap(
                litShaderArgs.lightmap, 
                litShaderArgs.lightmapDir, 
                litShaderArgs.worldNormal, 
                dViewDirW, 
                dReflDirW, 
                litShaderArgs.gloss, 
                litShaderArgs.specularity, 
                dVertexNormalW,
                dTBN
            #if defined(LIT_IRIDESCENCE)
                , iridescenceFresnel,
                litShaderArgs.iridescence
            #endif
                );`);
    }
    if (this.lighting || this.reflections) {
      if (this.reflections) {
        if (options.useClearCoat) {
          backend.append("    addReflectionCC(ccReflDirW, litShaderArgs.clearcoat.gloss);");
          if (options.fresnelModel > 0) {
            backend.append("    ccFresnel = getFresnelCC(dot(dViewDirW, litShaderArgs.clearcoat.worldNormal));");
            backend.append("    ccReflection.rgb *= ccFresnel;");
          } else {
            backend.append("    ccFresnel = 0.0;");
          }
        }
        if (options.useSpecularityFactor) {
          backend.append("    ccReflection.rgb *= litShaderArgs.specularityFactor;");
        }
        if (options.useSheen) {
          backend.append("    addReflectionSheen(litShaderArgs.worldNormal, dViewDirW, litShaderArgs.sheen.gloss);");
        }

        // Fresnel has to be applied to reflections
        backend.append("    addReflection(dReflDirW, litShaderArgs.gloss);");
        if (options.fresnelModel > 0) {
          backend.append(`    dReflection.rgb *= 
                        getFresnel(
                            dot(dViewDirW, litShaderArgs.worldNormal), 
                            litShaderArgs.gloss, 
                            litShaderArgs.specularity
                        #if defined(LIT_IRIDESCENCE)
                            , iridescenceFresnel,
                            litShaderArgs.iridescence
                        #endif
                            );`);
        } else {
          backend.append("    dReflection.rgb *= litShaderArgs.specularity;");
        }
        if (options.useSpecularityFactor) {
          backend.append("    dReflection.rgb *= litShaderArgs.specularityFactor;");
        }
      }
      if (hasAreaLights) {
        // specular has to be accumulated differently if we want area lights to look correct
        backend.append("    dSpecularLight *= litShaderArgs.specularity;");
        // code += "    float roughness = max((1.0 - dGlossiness) * (1.0 - dGlossiness), 0.001);\n";

        // evaluate material based area lights data, shared by all area lights
        if (options.useSpecular) {
          backend.append("    calcLTCLightValues(litShaderArgs.gloss, litShaderArgs.worldNormal, dViewDirW, litShaderArgs.specularity, litShaderArgs.clearcoat.gloss, litShaderArgs.clearcoat.worldNormal, litShaderArgs.clearcoat.specularity);");
        }
      }
      for (let i = 0; i < options.lights.length; i++) {
        const light = options.lights[i];
        const lightType = light._type;

        // if clustered lights are used, skip normal lights other than directional
        if (options.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) {
          continue;
        }

        // The following code is not decoupled to separate shader files, because most of it can be actually changed to achieve different behaviors like:
        // - different falloffs
        // - different shadow coords (omni shadows will use drastically different genShadowCoord)
        // - different shadow filter modes
        // - different light source shapes

        // getLightDiffuse and getLightSpecular is BRDF itself.

        usesCookieNow = false;
        const lightShape = hasAreaLights && light._shape ? light.shape : LIGHTSHAPE_PUNCTUAL;
        const shapeString = hasAreaLights && light._shape ? this._getLightSourceShapeString(lightShape) : '';
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          backend.append("    calc" + shapeString + "LightValues(light" + i + "_position, light" + i + "_halfWidth, light" + i + "_halfHeight);");
        }
        if (lightType === LIGHTTYPE_DIRECTIONAL) {
          // directional
          backend.append("    dLightDirNormW = light" + i + "_direction;");
          backend.append("    dAtten = 1.0;");
        } else {
          if (light._cookie) {
            if (lightType === LIGHTTYPE_SPOT && !light._cookie._cubemap) {
              usesCookie = true;
              usesCookieNow = true;
            } else if (lightType === LIGHTTYPE_OMNI && light._cookie._cubemap) {
              usesCookie = true;
              usesCookieNow = true;
            }
          }
          backend.append("    getLightDirPoint(light" + i + "_position);");
          hasPointLights = true;
          if (usesCookieNow) {
            if (lightType === LIGHTTYPE_SPOT) {
              backend.append("    dAtten3 = getCookie2D" + (light._cookieFalloff ? "" : "Clip") + (light._cookieTransform ? "Xform" : "") + "(light" + i + "_cookie, light" + i + "_shadowMatrix, light" + i + "_cookieIntensity" + (light._cookieTransform ? ", light" + i + "_cookieMatrix, light" + i + "_cookieOffset" : "") + ")." + light._cookieChannel + ";");
            } else {
              backend.append("    dAtten3 = getCookieCube(light" + i + "_cookie, light" + i + "_shadowMatrix, light" + i + "_cookieIntensity)." + light._cookieChannel + ";");
            }
          }
          if (lightShape === LIGHTSHAPE_PUNCTUAL) {
            if (light._falloffMode === LIGHTFALLOFF_LINEAR) {
              backend.append("    dAtten = getFalloffLinear(light" + i + "_radius, dLightDirW);");
              usesLinearFalloff = true;
            } else {
              backend.append("    dAtten = getFalloffInvSquared(light" + i + "_radius, dLightDirW);");
              usesInvSquaredFalloff = true;
            }
          } else {
            // non punctual lights only gets the range window here
            backend.append("    dAtten = getFalloffWindow(light" + i + "_radius, dLightDirW);");
            usesInvSquaredFalloff = true;
          }
          backend.append("    if (dAtten > 0.00001) {"); // BRANCH START

          if (lightType === LIGHTTYPE_SPOT) {
            if (!(usesCookieNow && !light._cookieFalloff)) {
              backend.append("    dAtten *= getSpotEffect(light" + i + "_direction, light" + i + "_innerConeAngle, light" + i + "_outerConeAngle, dLightDirNormW);");
              usesSpot = true;
            }
          }
        }

        // diffuse lighting - LTC lights do not mix diffuse lighting into attenuation that affects specular
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          if (lightType === LIGHTTYPE_DIRECTIONAL) {
            // NB: A better aproximation perhaps using wrap lighting could be implemented here
            backend.append("    dAttenD = getLightDiffuse(litShaderArgs.worldNormal, dViewDirW, dLightDirW, dLightDirNormW);");
          } else {
            // 16.0 is a constant that is in getFalloffInvSquared()
            backend.append("    dAttenD = get" + shapeString + "LightDiffuse(litShaderArgs.worldNormal, dViewDirW, dLightDirW, dLightDirNormW) * 16.0;");
          }
        } else {
          backend.append("    dAtten *= getLightDiffuse(litShaderArgs.worldNormal, dViewDirW, dLightDirW, dLightDirNormW);");
        }
        if (light.castShadows && !options.noShadow) {
          const pcssShadows = light._shadowType === SHADOW_PCSS;
          const vsmShadows = light._shadowType === SHADOW_VSM8 || light._shadowType === SHADOW_VSM16 || light._shadowType === SHADOW_VSM32;
          const pcfShadows = light._shadowType === SHADOW_PCF1 || light._shadowType === SHADOW_PCF3 || light._shadowType === SHADOW_PCF5;
          let shadowReadMode = null;
          let evsmExp;
          switch (light._shadowType) {
            case SHADOW_VSM8:
              shadowReadMode = "VSM8";
              evsmExp = "0.0";
              break;
            case SHADOW_VSM16:
              shadowReadMode = "VSM16";
              evsmExp = "5.54";
              break;
            case SHADOW_VSM32:
              shadowReadMode = "VSM32";
              if (device.textureFloatHighPrecision) {
                evsmExp = "15.0";
              } else {
                evsmExp = "5.54";
              }
              break;
            case SHADOW_PCF1:
              shadowReadMode = "PCF1x1";
              break;
            case SHADOW_PCF5:
              shadowReadMode = "PCF5x5";
              break;
            case SHADOW_PCSS:
              shadowReadMode = "PCSS";
              break;
            case SHADOW_PCF3:
            default:
              shadowReadMode = "PCF3x3";
              break;
          }
          if (shadowReadMode !== null) {
            if (light._normalOffsetBias && !light._isVsm) {
              func.append("#define SHADOW_SAMPLE_NORMAL_OFFSET");
            }
            if (lightType === LIGHTTYPE_DIRECTIONAL) {
              func.append("#define SHADOW_SAMPLE_ORTHO");
            }
            if ((pcfShadows || pcssShadows) && device.webgl2 || device.extStandardDerivatives || device.isWebGPU) {
              func.append("#define SHADOW_SAMPLE_SOURCE_ZBUFFER");
            }
            if (lightType === LIGHTTYPE_OMNI) {
              func.append("#define SHADOW_SAMPLE_POINT");
            }

            // Create shadow coord sampler function for this light
            const coordCode = chunks.shadowSampleCoordPS;
            func.append(coordCode.replace("$LIGHT", i));

            // Make sure to undefine the shadow sampler defines
            func.append("#undef SHADOW_SAMPLE_NORMAL_OFFSET");
            func.append("#undef SHADOW_SAMPLE_ORTHO");
            func.append("#undef SHADOW_SAMPLE_SOURCE_ZBUFFER");
            func.append("#undef SHADOW_SAMPLE_POINT");
            let shadowMatrix = `light${i}_shadowMatrix`;
            if (lightType === LIGHTTYPE_DIRECTIONAL && light.numCascades > 1) {
              // compute which cascade matrix needs to be used
              backend.append(`    getShadowCascadeMatrix(light${i}_shadowMatrixPalette, light${i}_shadowCascadeDistances, light${i}_shadowCascadeCount);`);
              shadowMatrix = `cascadeShadowMat`;
            }
            backend.append(`    dShadowCoord = getShadowSampleCoord${i}(${shadowMatrix}, light${i}_shadowParams, vPositionW, dLightPosW, dLightDirW, dLightDirNormW, dVertexNormalW);`);

            // Fade shadow at edges
            if (lightType === LIGHTTYPE_DIRECTIONAL) {
              backend.append(`    fadeShadow(light${i}_shadowCascadeDistances);`);
            }
            var shadowCoordArgs = `SHADOWMAP_PASS(light${i}_shadowMap), dShadowCoord, light${i}_shadowParams`;
            if (vsmShadows) {
              // VSM
              shadowCoordArgs = `${shadowCoordArgs}, ${evsmExp}, dLightDirW`;
            } else if (pcssShadows) {
              let penumbraSizeArg = `vec2(light${i}_shadowSearchArea)`;
              if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
                penumbraSizeArg = `vec2(length(light${i}_halfWidth), length(light${i}_halfHeight)) * light${i}_shadowSearchArea`;
              }
              shadowCoordArgs = `${shadowCoordArgs}, light${i}_cameraParams, ${penumbraSizeArg}, dLightDirW`;
            }
            if (lightType === LIGHTTYPE_OMNI) {
              shadowReadMode = `Point${shadowReadMode}`;
              if (!pcssShadows) {
                shadowCoordArgs = `${shadowCoordArgs}, dLightDirW`;
              }
            } else if (lightType === LIGHTTYPE_SPOT) {
              shadowReadMode = `Spot${shadowReadMode}`;
            }
            backend.append(`    float shadow${i} = getShadow${shadowReadMode}(${shadowCoordArgs});`);
            backend.append(`    dAtten *= mix(1.0, shadow${i}, light${i}_shadowIntensity);`);
          }
        }
        if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
          // area light - they do not mix diffuse lighting into specular attenuation
          if (options.conserveEnergy && options.useSpecular) {
            backend.append("    dDiffuseLight += ((dAttenD * dAtten) * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ") * (1.0 - dLTCSpecFres);");
          } else {
            backend.append("    dDiffuseLight += (dAttenD * dAtten) * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";");
          }
        } else {
          // punctual light
          if (hasAreaLights && options.conserveEnergy && options.useSpecular) {
            backend.append("    dDiffuseLight += (dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ") * (1.0 - litShaderArgs.specularity);");
          } else {
            backend.append("    dDiffuseLight += dAtten * light" + i + "_color" + (usesCookieNow ? " * dAtten3" : "") + ";");
          }
        }
        if (options.useSpecular) {
          backend.append("    dHalfDirW = normalize(-dLightDirNormW + dViewDirW);");
        }

        // specular / clear coat
        if (light.affectSpecularity) {
          if (lightShape !== LIGHTSHAPE_PUNCTUAL) {
            // area light
            if (options.useClearCoat) {
              backend.append(`    ccSpecularLight += ccLTCSpecFres * get${shapeString}LightSpecular(litShaderArgs.clearcoat.worldNormal, dViewDirW) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + ";");
            }
            if (options.useSpecular) {
              backend.append(`    dSpecularLight += dLTCSpecFres * get${shapeString}LightSpecular(litShaderArgs.worldNormal, dViewDirW) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + ";");
            }
          } else {
            var calcFresnel = false;
            if (lightType === LIGHTTYPE_DIRECTIONAL && options.fresnelModel > 0) {
              calcFresnel = true;
            }

            // if LTC lights are present, specular must be accumulated with specularity (specularity is pre multiplied by punctual light fresnel)
            if (options.useClearCoat) {
              backend.append(`    ccSpecularLight += getLightSpecular(dHalfDirW, ccReflDirW, litShaderArgs.clearcoat.worldNormal, dViewDirW, dLightDirNormW, litShaderArgs.clearcoat.gloss, dTBN) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + (calcFresnel ? " * getFresnelCC(dot(dViewDirW, dHalfDirW));" : ";"));
            }
            if (options.useSheen) {
              backend.append(`    sSpecularLight += getLightSpecularSheen(dHalfDirW, litShaderArgs.worldNormal, dViewDirW, dLightDirNormW, litShaderArgs.sheen.gloss) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3;" : ";"));
            }
            if (options.useSpecular) {
              backend.append(`    dSpecularLight += getLightSpecular(dHalfDirW, dReflDirW, litShaderArgs.worldNormal, dViewDirW, dLightDirNormW, litShaderArgs.gloss, dTBN) * dAtten * light${i}_color` + (usesCookieNow ? " * dAtten3" : "") + (calcFresnel ? ` 
                                    * getFresnel(
                                        dot(dViewDirW, dHalfDirW), 
                                        litShaderArgs.gloss, 
                                        litShaderArgs.specularity
                                    #if defined(LIT_IRIDESCENCE)
                                        , iridescenceFresnel, 
                                        litShaderArgs.iridescence
                                    #endif
                                    );` : `* litShaderArgs.specularity;`));
            }
          }
        }
        if (lightType !== LIGHTTYPE_DIRECTIONAL) {
          backend.append("    }"); // BRANCH END
        }
      }

      // clustered lighting
      if (options.clusteredLightingEnabled && this.lighting) {
        usesLinearFalloff = true;
        usesInvSquaredFalloff = true;
        hasPointLights = true;
        backend.append(`    addClusteredLights(
                                        litShaderArgs.worldNormal, 
                                        dViewDirW, 
                                        dReflDirW,
                                #if defined(LIT_CLEARCOAT)
                                        ccReflDirW,
                                #endif
                                        litShaderArgs.gloss, 
                                        litShaderArgs.specularity, 
                                        dVertexNormalW, 
                                        dTBN, 
                                #if defined(LIT_IRIDESCENCE)
                                        iridescenceFresnel,
                                #endif
                                        litShaderArgs.clearcoat, 
                                        litShaderArgs.sheen, 
                                        litShaderArgs.iridescence
                                    );`);
      }
      if (hasAreaLights) {
        // specular has to be accumulated differently if we want area lights to look correct
        if (options.useClearCoat) {
          backend.append("    litShaderArgs.clearcoat.specularity = 1.0;");
        }
        if (options.useSpecular) {
          backend.append("    litShaderArgs.specularity = vec3(1);");
        }
      }
      if (options.useRefraction) {
        backend.append(`    addRefraction(
                        litShaderArgs.worldNormal, 
                        dViewDirW, 
                        litShaderArgs.thickness, 
                        litShaderArgs.gloss, 
                        litShaderArgs.specularity, 
                        litShaderArgs.albedo, 
                        litShaderArgs.transmission
                    #if defined(LIT_IRIDESCENCE)
                        , iridescenceFresnel, 
                        litShaderArgs.iridescence
                    #endif
                    );`);
      }
    }
    if (useAo) {
      if (options.occludeDirect) {
        backend.append("    occludeDiffuse(litShaderArgs.ao);");
      }
      if (options.occludeSpecular === SPECOCC_AO || options.occludeSpecular === SPECOCC_GLOSSDEPENDENT) {
        backend.append("    occludeSpecular(litShaderArgs.gloss, litShaderArgs.ao, litShaderArgs.worldNormal, dViewDirW);");
      }
    }
    if (options.useSpecularityFactor) {
      backend.append("    dSpecularLight *= litShaderArgs.specularityFactor;");
    }
    if (options.opacityFadesSpecular === false) {
      if (options.blendType === BLEND_NORMAL || options.blendType === BLEND_PREMULTIPLIED) {
        backend.append("float specLum = dot((dSpecularLight + dReflection.rgb * dReflection.a), vec3( 0.2126, 0.7152, 0.0722 ));");
        backend.append("#ifdef LIT_CLEARCOAT\n specLum += dot(ccSpecularLight * litShaderArgs.clearcoat.specularity + ccReflection.rgb * litShaderArgs.clearcoat.specularity, vec3( 0.2126, 0.7152, 0.0722 ));\n#endif");
        backend.append("litShaderArgs.opacity = clamp(litShaderArgs.opacity + gammaCorrectInput(specLum), 0.0, 1.0);");
      }
      backend.append("litShaderArgs.opacity *= material_alphaFade;");
    }
    backend.append(chunks.endPS);
    if (options.blendType === BLEND_NORMAL || options.blendType === BLEND_ADDITIVEALPHA || options.alphaToCoverage) {
      backend.append(chunks.outputAlphaPS);
    } else if (options.blendType === BLEND_PREMULTIPLIED) {
      backend.append(chunks.outputAlphaPremulPS);
    } else {
      backend.append(chunks.outputAlphaOpaquePS);
    }
    if (options.useMsdf) {
      backend.append("    gl_FragColor = applyMsdf(gl_FragColor);");
    }
    backend.append(chunks.outputPS);
    backend.append(chunks.debugOutputPS);
    if (hasPointLights) {
      func.prepend(chunks.lightDirPointPS);
    }
    if (usesLinearFalloff) {
      func.prepend(chunks.falloffLinearPS);
    }
    if (usesInvSquaredFalloff) {
      func.prepend(chunks.falloffInvSquaredPS);
    }
    if (usesSpot) {
      func.prepend(chunks.spotPS);
    }
    if (usesCookie && !options.clusteredLightingEnabled) {
      // non-clustered lights cookie code
      func.prepend(chunks.cookiePS);
    }
    let structCode = "";
    const backendCode = `void evaluateBackend(LitShaderArguments litShaderArgs) {\n${backend.code}\n}`;
    func.append(backendCode);
    code.append(chunks.debugProcessFrontendPS);
    code.append("    evaluateBackend(litShaderArgs);");
    code.append(end());
    const mergedCode = decl.code + func.code + code.code;

    // Light inputs
    if (mergedCode.includes("dTBN")) structCode += "mat3 dTBN;\n";
    if (mergedCode.includes("dVertexNormalW")) structCode += "vec3 dVertexNormalW;\n";
    if (mergedCode.includes("dTangentW")) structCode += "vec3 dTangentW;\n";
    if (mergedCode.includes("dBinormalW")) structCode += "vec3 dBinormalW;\n";
    if (mergedCode.includes("dViewDirW")) structCode += "vec3 dViewDirW;\n";
    if (mergedCode.includes("dReflDirW")) structCode += "vec3 dReflDirW;\n";
    if (mergedCode.includes("dHalfDirW")) structCode += "vec3 dHalfDirW;\n";
    if (mergedCode.includes("ccReflDirW")) structCode += "vec3 ccReflDirW;\n";

    // Per-light temporaries
    if (mergedCode.includes("dLightDirNormW")) structCode += "vec3 dLightDirNormW;\n";
    if (mergedCode.includes("dLightDirW")) structCode += "vec3 dLightDirW;\n";
    if (mergedCode.includes("dLightPosW")) structCode += "vec3 dLightPosW;\n";
    if (mergedCode.includes("dShadowCoord")) structCode += "vec3 dShadowCoord;\n";

    // Outputs
    if (mergedCode.includes("dReflection")) structCode += "vec4 dReflection;\n";
    if (mergedCode.includes("dDiffuseLight")) structCode += "vec3 dDiffuseLight;\n";
    if (mergedCode.includes("dSpecularLight")) structCode += "vec3 dSpecularLight;\n";
    if (mergedCode.includes("dAtten")) structCode += "float dAtten;\n";
    if (mergedCode.includes("dAttenD")) structCode += "float dAttenD;\n"; // separate diffuse attenuation for non-punctual light sources
    if (mergedCode.includes("dAtten3")) structCode += "vec3 dAtten3;\n";
    if (mergedCode.includes("dMsdf")) structCode += "vec4 dMsdf;\n";
    if (mergedCode.includes("ccFresnel")) structCode += "float ccFresnel;\n";
    if (mergedCode.includes("ccReflection")) structCode += "vec3 ccReflection;\n";
    if (mergedCode.includes("ccSpecularLight")) structCode += "vec3 ccSpecularLight;\n";
    if (mergedCode.includes("ccSpecularityNoFres")) structCode += "float ccSpecularityNoFres;\n";
    if (mergedCode.includes("sSpecularLight")) structCode += "vec3 sSpecularLight;\n";
    if (mergedCode.includes("sReflection")) structCode += "vec3 sReflection;\n";
    const result = this._fsGetBeginCode() + this.varyings + this.varyingDefines + this._fsGetBaseCode() + (options.detailModes ? chunks.detailModesPS : "") + structCode + this.frontendDecl + mergedCode;
    return result;
  }
  generateFragmentShader(frontendDecl, frontendCode, frontendFunc, lightingUv) {
    const options = this.options;
    this.frontendDecl = frontendDecl;
    this.frontendCode = frontendCode;
    this.frontendFunc = frontendFunc;
    this.lightingUv = lightingUv;
    if (options.pass === SHADER_PICK) {
      this.fshader = this._fsGetPickPassCode();
    } else if (options.pass === SHADER_DEPTH) {
      this.fshader = this._fsGetDepthPassCode();
    } else if (this.shadowPass) {
      this.fshader = this._fsGetShadowPassCode();
    } else if (options.customFragmentShader) {
      this.fshader = this._fsGetBeginCode() + options.customFragmentShader;
    } else {
      this.fshader = this._fsGetLitPassCode();
    }
  }
  getDefinition() {
    const definition = ShaderUtils.createDefinition(this.device, {
      name: 'LitShader',
      attributes: this.attributes,
      vertexCode: this.vshader,
      fragmentCode: this.fshader
    });
    if (this.options.isForwardPass) {
      definition.tag = SHADERTAG_MATERIAL;
    }
    return definition;
  }
}

export { LitShader };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl0LXNoYWRlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NjZW5lL3NoYWRlci1saWIvcHJvZ3JhbXMvbGl0LXNoYWRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIFNFTUFOVElDX0FUVFI4LCBTRU1BTlRJQ19BVFRSOSwgU0VNQU5USUNfQVRUUjEwLCBTRU1BTlRJQ19BVFRSMTEsIFNFTUFOVElDX0FUVFIxMiwgU0VNQU5USUNfQVRUUjEzLCBTRU1BTlRJQ19BVFRSMTQsIFNFTUFOVElDX0FUVFIxNSxcbiAgICBTRU1BTlRJQ19CTEVORElORElDRVMsIFNFTUFOVElDX0JMRU5EV0VJR0hULCBTRU1BTlRJQ19DT0xPUiwgU0VNQU5USUNfTk9STUFMLCBTRU1BTlRJQ19QT1NJVElPTiwgU0VNQU5USUNfVEFOR0VOVCxcbiAgICBTRU1BTlRJQ19URVhDT09SRDAsIFNFTUFOVElDX1RFWENPT1JEMSxcbiAgICBTSEFERVJUQUdfTUFURVJJQUwsXG4gICAgUElYRUxGT1JNQVRfUkdCQThcbn0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IHNoYWRlckNodW5rcyB9IGZyb20gJy4uL2NodW5rcy9jaHVua3MuanMnO1xuaW1wb3J0IHsgQ2h1bmtVdGlscyB9IGZyb20gJy4uL2NodW5rLXV0aWxzLmpzJztcblxuaW1wb3J0IHtcbiAgICBCTEVORF9BRERJVElWRUFMUEhBLCBCTEVORF9OT1JNQUwsIEJMRU5EX1BSRU1VTFRJUExJRUQsXG4gICAgRlJFU05FTF9TQ0hMSUNLLFxuICAgIExJR0hURkFMTE9GRl9MSU5FQVIsXG4gICAgTElHSFRTSEFQRV9QVU5DVFVBTCwgTElHSFRTSEFQRV9SRUNULCBMSUdIVFNIQVBFX0RJU0ssIExJR0hUU0hBUEVfU1BIRVJFLFxuICAgIExJR0hUVFlQRV9ESVJFQ1RJT05BTCwgTElHSFRUWVBFX09NTkksIExJR0hUVFlQRV9TUE9ULFxuICAgIFNIQURFUl9ERVBUSCwgU0hBREVSX1BJQ0ssXG4gICAgU0hBRE9XX1BDRjEsIFNIQURPV19QQ0YzLCBTSEFET1dfUENGNSwgU0hBRE9XX1ZTTTgsIFNIQURPV19WU00xNiwgU0hBRE9XX1ZTTTMyLCBTSEFET1dfUENTUyxcbiAgICBTUEVDT0NDX0FPLCBTUEVDT0NDX0dMT1NTREVQRU5ERU5ULFxuICAgIFNQRUNVTEFSX1BIT05HLFxuICAgIFNQUklURV9SRU5ERVJNT0RFX1NMSUNFRCwgU1BSSVRFX1JFTkRFUk1PREVfVElMRUQsIHNoYWRvd1R5cGVUb1N0cmluZ1xufSBmcm9tICcuLi8uLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgTGlnaHRzQnVmZmVyIH0gZnJvbSAnLi4vLi4vbGlnaHRpbmcvbGlnaHRzLWJ1ZmZlci5qcyc7XG5pbXBvcnQgeyBTaGFkZXJQYXNzIH0gZnJvbSAnLi4vLi4vc2hhZGVyLXBhc3MuanMnO1xuXG5pbXBvcnQgeyBiZWdpbiwgZW5kLCBmb2dDb2RlLCBnYW1tYUNvZGUsIHNraW5Db2RlLCB0b25lbWFwQ29kZSB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCB7IHZhbGlkYXRlVXNlckNodW5rcyB9IGZyb20gJy4uL2NodW5rcy9jaHVuay12YWxpZGF0aW9uLmpzJztcbmltcG9ydCB7IFNoYWRlclV0aWxzIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3Mvc2hhZGVyLXV0aWxzLmpzJztcbmltcG9ydCB7IENodW5rQnVpbGRlciB9IGZyb20gJy4uL2NodW5rLWJ1aWxkZXIuanMnO1xuXG5jb25zdCBidWlsdGluQXR0cmlidXRlcyA9IHtcbiAgICB2ZXJ0ZXhfbm9ybWFsOiBTRU1BTlRJQ19OT1JNQUwsXG4gICAgdmVydGV4X3RhbmdlbnQ6IFNFTUFOVElDX1RBTkdFTlQsXG4gICAgdmVydGV4X3RleENvb3JkMDogU0VNQU5USUNfVEVYQ09PUkQwLFxuICAgIHZlcnRleF90ZXhDb29yZDE6IFNFTUFOVElDX1RFWENPT1JEMSxcbiAgICB2ZXJ0ZXhfY29sb3I6IFNFTUFOVElDX0NPTE9SLFxuICAgIHZlcnRleF9ib25lV2VpZ2h0czogU0VNQU5USUNfQkxFTkRXRUlHSFQsXG4gICAgdmVydGV4X2JvbmVJbmRpY2VzOiBTRU1BTlRJQ19CTEVORElORElDRVNcbn07XG5cbmNvbnN0IGJ1aWx0aW5WYXJ5aW5ncyA9IHtcbiAgICB2VmVydGV4Q29sb3I6IFwidmVjNFwiLFxuICAgIHZQb3NpdGlvblc6IFwidmVjM1wiLFxuICAgIHZOb3JtYWxWOiBcInZlYzNcIixcbiAgICB2Tm9ybWFsVzogXCJ2ZWMzXCIsXG4gICAgdlRhbmdlbnRXOiBcInZlYzNcIixcbiAgICB2Qmlub3JtYWxXOiBcInZlYzNcIixcbiAgICB2T2JqZWN0U3BhY2VVcFc6IFwidmVjM1wiLFxuICAgIHZVdjA6IFwidmVjMlwiLFxuICAgIHZVdjE6IFwidmVjMlwiXG59O1xuXG5jbGFzcyBMaXRTaGFkZXIge1xuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgb3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBUaGVcbiAgICAgICAgICogZ3JhcGhpY3MgZGV2aWNlLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vLi4vc2NlbmUvbWF0ZXJpYWxzL2xpdC1vcHRpb25zLmpzJykuTGl0T3B0aW9uc30gb3B0aW9ucyAtIFRoZVxuICAgICAgICAgKiBsaXQgb3B0aW9ucy5cbiAgICAgICAgICogQGlnbm9yZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZXZpY2UgPSBkZXZpY2U7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAgICAgLy8gcmVzb2x2ZSBjdXN0b20gY2h1bmsgYXR0cmlidXRlc1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICB2ZXJ0ZXhfcG9zaXRpb246IFNFTUFOVElDX1BPU0lUSU9OXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuY2h1bmtzKSB7XG4gICAgICAgICAgICB0aGlzLmNodW5rcyA9IHt9O1xuXG4gICAgICAgICAgICBjb25zdCB1c2VyQ2h1bmtzID0gb3B0aW9ucy5jaHVua3M7XG5cbiAgICAgICAgICAgIC8vICNpZiBfREVCVUdcbiAgICAgICAgICAgIHZhbGlkYXRlVXNlckNodW5rcyhvcHRpb25zLmNodW5rcyk7XG4gICAgICAgICAgICAvLyAjZW5kaWZcblxuICAgICAgICAgICAgZm9yIChjb25zdCBjaHVua05hbWUgaW4gc2hhZGVyQ2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXJDaHVua3MuaGFzT3duUHJvcGVydHkoY2h1bmtOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHVzZXJDaHVua3NbY2h1bmtOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhIGluIGJ1aWx0aW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVpbHRpbkF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoYSkgJiYgY2h1bmsuaW5kZXhPZihhKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzW2FdID0gYnVpbHRpbkF0dHJpYnV0ZXNbYV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVua3NbY2h1bmtOYW1lXSA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtzW2NodW5rTmFtZV0gPSBzaGFkZXJDaHVua3NbY2h1bmtOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNodW5rcyA9IHNoYWRlckNodW5rcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2hhZGVyUGFzc0luZm8gPSBTaGFkZXJQYXNzLmdldCh0aGlzLmRldmljZSkuZ2V0QnlJbmRleChvcHRpb25zLnBhc3MpO1xuICAgICAgICB0aGlzLnNoYWRvd1Bhc3MgPSB0aGlzLnNoYWRlclBhc3NJbmZvLmlzU2hhZG93O1xuXG4gICAgICAgIHRoaXMubGlnaHRpbmcgPSAob3B0aW9ucy5saWdodHMubGVuZ3RoID4gMCkgfHwgb3B0aW9ucy5kaXJMaWdodE1hcEVuYWJsZWQgfHwgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQ7XG4gICAgICAgIHRoaXMucmVmbGVjdGlvbnMgPSAhIW9wdGlvbnMucmVmbGVjdGlvblNvdXJjZTtcbiAgICAgICAgdGhpcy5uZWVkc05vcm1hbCA9IHRoaXMubGlnaHRpbmcgfHwgdGhpcy5yZWZsZWN0aW9ucyB8fCBvcHRpb25zLnVzZVNwZWN1bGFyIHx8IG9wdGlvbnMuYW1iaWVudFNIIHx8IG9wdGlvbnMuaGVpZ2h0TWFwRW5hYmxlZCB8fCBvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyIHx8XG4gICAgICAgICAgICAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQgJiYgIXRoaXMuc2hhZG93UGFzcykgfHwgb3B0aW9ucy5jbGVhckNvYXROb3JtYWxNYXBFbmFibGVkO1xuICAgICAgICB0aGlzLm5lZWRzTm9ybWFsID0gdGhpcy5uZWVkc05vcm1hbCAmJiAhdGhpcy5zaGFkb3dQYXNzO1xuICAgICAgICB0aGlzLm5lZWRzU2NlbmVDb2xvciA9IG9wdGlvbnMudXNlRHluYW1pY1JlZnJhY3Rpb247XG4gICAgICAgIHRoaXMubmVlZHNTY3JlZW5TaXplID0gb3B0aW9ucy51c2VEeW5hbWljUmVmcmFjdGlvbjtcbiAgICAgICAgdGhpcy5uZWVkc1RyYW5zZm9ybXMgPSBvcHRpb25zLnVzZUR5bmFtaWNSZWZyYWN0aW9uO1xuXG4gICAgICAgIC8vIGdlbmVyYXRlZCBieSB2c2hhZGVyXG4gICAgICAgIHRoaXMudmFyeWluZ3MgPSBcIlwiO1xuICAgICAgICB0aGlzLnZhcnlpbmdEZWZpbmVzID0gXCJcIjtcbiAgICAgICAgdGhpcy52c2hhZGVyID0gbnVsbDtcblxuICAgICAgICAvLyBzdXBwbGllZCBieSBjYWxsZXJcbiAgICAgICAgdGhpcy5mcm9udGVuZERlY2wgPSBudWxsO1xuICAgICAgICB0aGlzLmZyb250ZW5kQ29kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZnJvbnRlbmRGdW5jID0gbnVsbDtcbiAgICAgICAgdGhpcy5saWdodGluZ1V2ID0gbnVsbDtcblxuICAgICAgICAvLyBkZWZpbmVzIHNldCBieSB0aGUgc2hhZGVyIGdlbmVyYXRpb25cbiAgICAgICAgdGhpcy5kZWZpbmVzID0gW107XG5cbiAgICAgICAgLy8gZ2VuZXJhdGVkIGJ5IGZzaGFkZXJcbiAgICAgICAgdGhpcy5mc2hhZGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBfdnNBZGRCYXNlQ29kZShjb2RlLCBjaHVua3MsIG9wdGlvbnMpIHtcbiAgICAgICAgY29kZSArPSBjaHVua3MuYmFzZVZTO1xuICAgICAgICBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfU0xJQ0VEIHx8XG4gICAgICAgICAgICBvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9USUxFRCkge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3MuYmFzZU5pbmVTbGljZWRWUztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29kZTtcbiAgICB9XG5cbiAgICBfdnNBZGRUcmFuc2Zvcm1Db2RlKGNvZGUsIGRldmljZSwgY2h1bmtzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5jaHVua3MudHJhbnNmb3JtVlM7XG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIF9zZXRNYXBUcmFuc2Zvcm0oY29kZXMsIG5hbWUsIGlkLCB1dikge1xuICAgICAgICBjb25zdCBjaGVja0lkID0gaWQgKyB1diAqIDEwMDtcbiAgICAgICAgaWYgKCFjb2Rlc1szXVtjaGVja0lkXSkge1xuICAgICAgICAgICAgLy8gdXBsb2FkIGEgM3gyIG1hdHJpeCBhbmQgbWFudWFsbHkgcGVyZm9ybSB0aGUgbXVsdGlwbGljYXRpb25cbiAgICAgICAgICAgIGNvbnN0IHZhck5hbWUgPSBgdGV4dHVyZV8ke25hbWV9TWFwVHJhbnNmb3JtYDtcbiAgICAgICAgICAgIGNvZGVzWzBdICs9IGB1bmlmb3JtIHZlYzMgJHt2YXJOYW1lfTA7XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzBdICs9IGB1bmlmb3JtIHZlYzMgJHt2YXJOYW1lfTE7XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzFdICs9IGB2YXJ5aW5nIHZlYzIgdlVWJHt1dn1fJHtpZH07XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzJdICs9IGAgICB2VVYke3V2fV8ke2lkfSA9IHZlYzIoZG90KHZlYzModXYke3V2fSwgMSksICR7dmFyTmFtZX0wKSwgZG90KHZlYzModXYke3V2fSwgMSksICR7dmFyTmFtZX0xKSk7XFxuYDtcbiAgICAgICAgICAgIGNvZGVzWzNdW2NoZWNrSWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29kZXM7XG4gICAgfVxuXG4gICAgLy8gQWRkIFwiQmFzZVwiIENvZGUgc2VjdGlvbiB0byBmcmFnbWVudCBzaGFkZXIuXG4gICAgX2ZzR2V0QmFzZUNvZGUoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuY2h1bmtzO1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5jaHVua3MuYmFzZVBTO1xuICAgICAgICBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfU0xJQ0VEKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gY2h1bmtzLmJhc2VOaW5lU2xpY2VkUFM7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfVElMRUQpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBjaHVua3MuYmFzZU5pbmVTbGljZWRUaWxlZFBTO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gQWRkIFwiU3RhcnRcIiBDb2RlIHNlY3Rpb24gdG8gZnJhZ21lbnQgc2hhZGVyLlxuICAgIF9mc0dldFN0YXJ0Q29kZShjb2RlLCBkZXZpY2UsIGNodW5rcywgb3B0aW9ucykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gY2h1bmtzLnN0YXJ0UFM7XG4gICAgICAgIGlmIChvcHRpb25zLm5pbmVTbGljZWRNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9TTElDRUQpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBjaHVua3Muc3RhcnROaW5lU2xpY2VkUFM7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5uaW5lU2xpY2VkTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfVElMRUQpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBjaHVua3Muc3RhcnROaW5lU2xpY2VkVGlsZWRQUztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIF9nZXRMaWdodFNvdXJjZVNoYXBlU3RyaW5nKHNoYXBlKSB7XG4gICAgICAgIHN3aXRjaCAoc2hhcGUpIHtcbiAgICAgICAgICAgIGNhc2UgTElHSFRTSEFQRV9SRUNUOlxuICAgICAgICAgICAgICAgIHJldHVybiAnUmVjdCc7XG4gICAgICAgICAgICBjYXNlIExJR0hUU0hBUEVfRElTSzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0Rpc2snO1xuICAgICAgICAgICAgY2FzZSBMSUdIVFNIQVBFX1NQSEVSRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1NwaGVyZSc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdlbmVyYXRlVmVydGV4U2hhZGVyKHVzZVV2LCB1c2VVbm1vZGlmaWVkVXYsIG1hcFRyYW5zZm9ybXMpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5kZXZpY2U7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuY2h1bmtzO1xuXG4gICAgICAgIGxldCBjb2RlID0gJyc7XG4gICAgICAgIGxldCBjb2RlQm9keSA9ICcnO1xuXG4gICAgICAgIC8vIGNvZGUgKz0gY2h1bmtzLmJhc2VWUztcbiAgICAgICAgY29kZSA9IHRoaXMuX3ZzQWRkQmFzZUNvZGUoY29kZSwgY2h1bmtzLCBvcHRpb25zKTtcblxuICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZQb3NpdGlvblcgICAgPSBnZXRXb3JsZFBvc2l0aW9uKCk7XFxuXCI7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYXNzID09PSBTSEFERVJfREVQVEgpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gJ3ZhcnlpbmcgZmxvYXQgdkRlcHRoO1xcbic7XG4gICAgICAgICAgICBjb2RlICs9ICcjaWZuZGVmIFZJRVdNQVRSSVhcXG4nO1xuICAgICAgICAgICAgY29kZSArPSAnI2RlZmluZSBWSUVXTUFUUklYXFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJ3VuaWZvcm0gbWF0NCBtYXRyaXhfdmlldztcXG4nO1xuICAgICAgICAgICAgY29kZSArPSAnI2VuZGlmXFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJyNpZm5kZWYgQ0FNRVJBUExBTkVTXFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJyNkZWZpbmUgQ0FNRVJBUExBTkVTXFxuJztcbiAgICAgICAgICAgIGNvZGUgKz0gJ3VuaWZvcm0gdmVjNCBjYW1lcmFfcGFyYW1zO1xcblxcbic7XG4gICAgICAgICAgICBjb2RlICs9ICcjZW5kaWZcXG4nO1xuICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICAgdkRlcHRoID0gLShtYXRyaXhfdmlldyAqIHZlYzQodlBvc2l0aW9uVywxLjApKS56ICogY2FtZXJhX3BhcmFtcy54O1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VJbnN0YW5jaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaW5zdGFuY2VfbGluZTEgPSBTRU1BTlRJQ19BVFRSMTI7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaW5zdGFuY2VfbGluZTIgPSBTRU1BTlRJQ19BVFRSMTM7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaW5zdGFuY2VfbGluZTMgPSBTRU1BTlRJQ19BVFRSMTQ7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaW5zdGFuY2VfbGluZTQgPSBTRU1BTlRJQ19BVFRSMTU7XG4gICAgICAgICAgICBjb2RlICs9IGNodW5rcy5pbnN0YW5jaW5nVlM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnZlcnRleF9ub3JtYWwgPSBTRU1BTlRJQ19OT1JNQUw7XG4gICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZOb3JtYWxXID0gZ2V0Tm9ybWFsKCk7XFxuXCI7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPT09ICdzcGhlcmVNYXAnICYmIGRldmljZS5mcmFnbWVudFVuaWZvcm1zQ291bnQgPD0gMTYpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rcy52aWV3Tm9ybWFsVlM7XG4gICAgICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2Tm9ybWFsViAgICA9IGdldFZpZXdOb3JtYWwoKTtcXG5cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzVGFuZ2VudHMgJiYgKG9wdGlvbnMuaGVpZ2h0TWFwRW5hYmxlZCB8fCBvcHRpb25zLm5vcm1hbE1hcEVuYWJsZWQgfHwgb3B0aW9ucy5lbmFibGVHR1hTcGVjdWxhcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X3RhbmdlbnQgPSBTRU1BTlRJQ19UQU5HRU5UO1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnRhbmdlbnRCaW5vcm1hbFZTO1xuICAgICAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgdlRhbmdlbnRXICAgPSBnZXRUYW5nZW50KCk7XFxuXCI7XG4gICAgICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2Qmlub3JtYWxXICA9IGdldEJpbm9ybWFsKCk7XFxuXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZW5hYmxlR0dYU3BlY3VsYXIgfHwgIWRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzKSB7XG4gICAgICAgICAgICAgICAgY29kZUJvZHkgKz0gXCIgICB2T2JqZWN0U3BhY2VVcFcgPSBub3JtYWxpemUoZE5vcm1hbE1hdHJpeCAqIHZlYzMoMCwgMSwgMCkpO1xcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWF4VXZTZXRzID0gMjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heFV2U2V0czsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodXNlVXZbaV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbXCJ2ZXJ0ZXhfdGV4Q29vcmRcIiArIGldID0gXCJURVhDT09SRFwiICsgaTtcbiAgICAgICAgICAgICAgICBjb2RlICs9IGNodW5rc1tcInV2XCIgKyBpICsgXCJWU1wiXTtcbiAgICAgICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZlYzIgdXZcIiArIGkgKyBcIiA9IGdldFV2XCIgKyBpICsgXCIoKTtcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2VVbm1vZGlmaWVkVXZbaV0pIHtcbiAgICAgICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZVdlwiICsgaSArIFwiID0gdXZcIiArIGkgKyBcIjtcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvZGVzID0gW2NvZGUsIHRoaXMudmFyeWluZ3MsIGNvZGVCb2R5LCBbXV07XG5cbiAgICAgICAgbWFwVHJhbnNmb3Jtcy5mb3JFYWNoKChtYXBUcmFuc2Zvcm0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3NldE1hcFRyYW5zZm9ybShjb2RlcywgbWFwVHJhbnNmb3JtLm5hbWUsIG1hcFRyYW5zZm9ybS5pZCwgbWFwVHJhbnNmb3JtLnV2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29kZSA9IGNvZGVzWzBdO1xuICAgICAgICB0aGlzLnZhcnlpbmdzID0gY29kZXNbMV07XG4gICAgICAgIGNvZGVCb2R5ID0gY29kZXNbMl07XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudmVydGV4Q29sb3JzKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudmVydGV4X2NvbG9yID0gU0VNQU5USUNfQ09MT1I7XG4gICAgICAgICAgICBjb2RlQm9keSArPSBcIiAgIHZWZXJ0ZXhDb2xvciA9IHZlcnRleF9jb2xvcjtcXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZU1zZGYgJiYgb3B0aW9ucy5tc2RmVGV4dEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnZlcnRleF9vdXRsaW5lUGFyYW1ldGVycyA9IFNFTUFOVElDX0FUVFI4O1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnZlcnRleF9zaGFkb3dQYXJhbWV0ZXJzID0gU0VNQU5USUNfQVRUUjk7XG5cbiAgICAgICAgICAgIGNvZGVCb2R5ICs9IFwiICAgIHVucGFja01zZGZQYXJhbXMoKTtcXG5cIjtcblxuICAgICAgICAgICAgY29kZSArPSBjaHVua3MubXNkZlZTO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW9ycGhpbmdcbiAgICAgICAgaWYgKG9wdGlvbnMudXNlTW9ycGhQb3NpdGlvbiB8fCBvcHRpb25zLnVzZU1vcnBoTm9ybWFsKSB7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZU1vcnBoVGV4dHVyZUJhc2VkKSB7XG5cbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19URVhUVVJFX0JBU0VEXFxuXCI7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VNb3JwaFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HX1RFWFRVUkVfQkFTRURfUE9TSVRJT05cXG5cIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VNb3JwaE5vcm1hbCkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19URVhUVVJFX0JBU0VEX05PUk1BTFxcblwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHZlcnRleCBpZHMgYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF92ZXJ0ZXhfaWQgPSBTRU1BTlRJQ19BVFRSMTU7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9ycGhJZFR5cGUgPSBkZXZpY2UuaXNXZWJHUFUgPyAndWludCcgOiAnZmxvYXQnO1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gYGF0dHJpYnV0ZSAke21vcnBoSWRUeXBlfSBtb3JwaF92ZXJ0ZXhfaWQ7XFxuYDtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIC8vIHNldCB1cCA4IHNsb3RzIGZvciBtb3JwaGluZy4gdGhlc2UgYXJlIHN1cHBvcnRlZCBjb21iaW5hdGlvbnM6IFBQUFBQUFBQLCBOTk5OTk5OTiwgUFBQUE5OTk5cbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR1xcblwiO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlyc3QgNCBzbG90cyBhcmUgZWl0aGVyIHBvc2l0aW9uIG9yIG5vcm1hbFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZU1vcnBoUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczAgPSBTRU1BTlRJQ19BVFRSODtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczEgPSBTRU1BTlRJQ19BVFRSOTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczIgPSBTRU1BTlRJQ19BVFRSMTA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9wb3MzID0gU0VNQU5USUNfQVRUUjExO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIjZGVmaW5lIE1PUlBISU5HX1BPUzAzXFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9wb3MwO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zMTtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczI7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9wb3MzO1xcblwiO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnVzZU1vcnBoTm9ybWFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm0wID0gU0VNQU5USUNfQVRUUjg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm0xID0gU0VNQU5USUNfQVRUUjk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm0yID0gU0VNQU5USUNfQVRUUjEwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfbnJtMyA9IFNFTUFOVElDX0FUVFIxMTtcblxuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBNT1JQSElOR19OUk0wM1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtMDtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX25ybTE7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm0yO1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtMztcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBuZXh0IDQgc2xvdHMgYXJlIGVpdGhlciBwb3NpdGlvbiBvciBub3JtYWxcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMudXNlTW9ycGhOb3JtYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczQgPSBTRU1BTlRJQ19BVFRSMTI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9wb3M1ID0gU0VNQU5USUNfQVRUUjEzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfcG9zNiA9IFNFTUFOVElDX0FUVFIxNDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX3BvczcgPSBTRU1BTlRJQ19BVFRSMTU7XG5cbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgTU9SUEhJTkdfUE9TNDdcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3BvczQ7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9wb3M1O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfcG9zNjtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX3Bvczc7XFxuXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTQgPSBTRU1BTlRJQ19BVFRSMTI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5tb3JwaF9ucm01ID0gU0VNQU5USUNfQVRUUjEzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMubW9ycGhfbnJtNiA9IFNFTUFOVElDX0FUVFIxNDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm1vcnBoX25ybTcgPSBTRU1BTlRJQ19BVFRSMTU7XG5cbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgTU9SUEhJTkdfTlJNNDdcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX25ybTQ7XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gXCJhdHRyaWJ1dGUgdmVjMyBtb3JwaF9ucm01O1xcblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFwiYXR0cmlidXRlIHZlYzMgbW9ycGhfbnJtNjtcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBcImF0dHJpYnV0ZSB2ZWMzIG1vcnBoX25ybTc7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc2tpbikge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnZlcnRleF9ib25lV2VpZ2h0cyA9IFNFTUFOVElDX0JMRU5EV0VJR0hUO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnZlcnRleF9ib25lSW5kaWNlcyA9IFNFTUFOVElDX0JMRU5ESU5ESUNFUztcbiAgICAgICAgICAgIGNvZGUgKz0gc2tpbkNvZGUoZGV2aWNlLCBjaHVua3MpO1xuICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgU0tJTlxcblwiO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMudXNlSW5zdGFuY2luZykge1xuICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgSU5TVEFOQ0lOR1xcblwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNjcmVlblNwYWNlKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiI2RlZmluZSBTQ1JFRU5TUEFDRVxcblwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnBpeGVsU25hcCkge1xuICAgICAgICAgICAgY29kZSArPSBcIiNkZWZpbmUgUElYRUxTTkFQXFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlID0gdGhpcy5fdnNBZGRUcmFuc2Zvcm1Db2RlKGNvZGUsIGRldmljZSwgY2h1bmtzLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3Mubm9ybWFsVlM7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlICs9IFwiXFxuXCI7XG4gICAgICAgIGNvZGUgKz0gY2h1bmtzLnN0YXJ0VlM7XG4gICAgICAgIGNvZGUgKz0gY29kZUJvZHk7XG4gICAgICAgIGNvZGUgKz0gY2h1bmtzLmVuZFZTO1xuICAgICAgICBjb2RlICs9IFwifVwiO1xuXG4gICAgICAgIC8vIGJ1aWxkIHZhcnlpbmdzXG4gICAgICAgIE9iamVjdC5rZXlzKGJ1aWx0aW5WYXJ5aW5ncykuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgaWYgKGNvZGUuaW5kZXhPZih2KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJ5aW5ncyArPSBgdmFyeWluZyAke2J1aWx0aW5WYXJ5aW5nc1t2XX0gJHt2fTtcXG5gO1xuICAgICAgICAgICAgICAgIHRoaXMudmFyeWluZ0RlZmluZXMgKz0gYCNkZWZpbmUgVkFSWUlOR18ke3YudG9VcHBlckNhc2UoKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzaGFkZXJQYXNzRGVmaW5lcyA9IHRoaXMuc2hhZGVyUGFzc0luZm8uc2hhZGVyRGVmaW5lcztcbiAgICAgICAgdGhpcy52c2hhZGVyID0gc2hhZGVyUGFzc0RlZmluZXMgKyB0aGlzLnZhcnlpbmdzICsgY29kZTtcbiAgICB9XG5cbiAgICBfZnNHZXRCZWdpbkNvZGUoKSB7XG5cbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLnNoYWRlclBhc3NJbmZvLnNoYWRlckRlZmluZXM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlZmluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvZGUgKz0gYCNkZWZpbmUgJHt0aGlzLmRlZmluZXNbaV19XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIF9mc0dldFBpY2tQYXNzQ29kZSgpIHtcbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLl9mc0dldEJlZ2luQ29kZSgpO1xuICAgICAgICBjb2RlICs9IFwidW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG5cIjtcbiAgICAgICAgY29kZSArPSB0aGlzLnZhcnlpbmdzO1xuICAgICAgICBjb2RlICs9IHRoaXMudmFyeWluZ0RlZmluZXM7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZERlY2w7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZENvZGU7XG4gICAgICAgIGNvZGUgKz0gYmVnaW4oKTtcbiAgICAgICAgY29kZSArPSB0aGlzLmZyb250ZW5kRnVuYztcbiAgICAgICAgY29kZSArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSB1Q29sb3I7XFxuXCI7XG4gICAgICAgIGNvZGUgKz0gZW5kKCk7XG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIF9mc0dldERlcHRoUGFzc0NvZGUoKSB7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuY2h1bmtzO1xuXG4gICAgICAgIGxldCBjb2RlID0gdGhpcy5fZnNHZXRCZWdpbkNvZGUoKTtcblxuICAgICAgICBjb2RlICs9ICd2YXJ5aW5nIGZsb2F0IHZEZXB0aDtcXG4nO1xuICAgICAgICBjb2RlICs9IHRoaXMudmFyeWluZ3M7XG4gICAgICAgIGNvZGUgKz0gdGhpcy52YXJ5aW5nRGVmaW5lcztcbiAgICAgICAgY29kZSArPSBjaHVua3MucGFja0RlcHRoUFM7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZERlY2w7XG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZENvZGU7XG4gICAgICAgIGNvZGUgKz0gYmVnaW4oKTtcbiAgICAgICAgY29kZSArPSB0aGlzLmZyb250ZW5kRnVuYztcbiAgICAgICAgY29kZSArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSBwYWNrRmxvYXQodkRlcHRoKTtcXG5cIjtcbiAgICAgICAgY29kZSArPSBlbmQoKTtcblxuICAgICAgICByZXR1cm4gY29kZTtcbiAgICB9XG5cbiAgICBfZnNHZXRTaGFkb3dQYXNzQ29kZSgpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5kZXZpY2U7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuY2h1bmtzO1xuICAgICAgICBjb25zdCB2YXJ5aW5ncyA9IHRoaXMudmFyeWluZ3M7XG5cbiAgICAgICAgY29uc3QgbGlnaHRUeXBlID0gdGhpcy5zaGFkZXJQYXNzSW5mby5saWdodFR5cGU7XG4gICAgICAgIGNvbnN0IHNoYWRvd1R5cGUgPSB0aGlzLnNoYWRlclBhc3NJbmZvLnNoYWRvd1R5cGU7XG5cbiAgICAgICAgbGV0IGNvZGUgPSB0aGlzLl9mc0dldEJlZ2luQ29kZSgpO1xuXG4gICAgICAgIGlmIChkZXZpY2UuZXh0U3RhbmRhcmREZXJpdmF0aXZlcyAmJiAhZGV2aWNlLndlYmdsMiAmJiAhZGV2aWNlLmlzV2ViR1BVKSB7XG4gICAgICAgICAgICBjb2RlICs9ICd1bmlmb3JtIHZlYzIgcG9seWdvbk9mZnNldDtcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19WU00zMikge1xuICAgICAgICAgICAgaWYgKGRldmljZS50ZXh0dXJlRmxvYXRIaWdoUHJlY2lzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29kZSArPSAnI2RlZmluZSBWU01fRVhQT05FTlQgMTUuMFxcblxcbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gJyNkZWZpbmUgVlNNX0VYUE9ORU5UIDUuNTRcXG5cXG4nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19WU00xNikge1xuICAgICAgICAgICAgY29kZSArPSAnI2RlZmluZSBWU01fRVhQT05FTlQgNS41NFxcblxcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gJ3VuaWZvcm0gdmVjMyB2aWV3X3Bvc2l0aW9uO1xcbic7XG4gICAgICAgICAgICBjb2RlICs9ICd1bmlmb3JtIGZsb2F0IGxpZ2h0X3JhZGl1cztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgY29kZSArPSB2YXJ5aW5ncztcbiAgICAgICAgY29kZSArPSB0aGlzLnZhcnlpbmdEZWZpbmVzO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmREZWNsO1xuICAgICAgICBjb2RlICs9IHRoaXMuZnJvbnRlbmRDb2RlO1xuXG4gICAgICAgIGNvbnN0IHVzZVBhY2tlZERlcHRoID0gKCghZGV2aWNlLnN1cHBvcnRzRGVwdGhTaGFkb3cpICYmIChzaGFkb3dUeXBlID09PSBTSEFET1dfUENGMSB8fCBzaGFkb3dUeXBlID09PSBTSEFET1dfUENGMyB8fCBzaGFkb3dUeXBlID09PSBTSEFET1dfUENTUykpIHx8XG4gICAgICAgICAgICAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfT01OSSAmJiBzaGFkb3dUeXBlICE9PSBTSEFET1dfUENTUyAmJiAhb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQpO1xuICAgICAgICBpZiAodXNlUGFja2VkRGVwdGgpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gY2h1bmtzLnBhY2tEZXB0aFBTO1xuICAgICAgICB9IGVsc2UgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19WU004KSB7XG4gICAgICAgICAgICBjb2RlICs9IFwidmVjMiBlbmNvZGVGbG9hdFJHKCBmbG9hdCB2ICkge1xcblwiO1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICB2ZWMyIGVuYyA9IHZlYzIoMS4wLCAyNTUuMCkgKiB2O1xcblwiO1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBlbmMgPSBmcmFjdChlbmMpO1xcblwiO1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBlbmMgLT0gZW5jLnl5ICogdmVjMigxLjAvMjU1LjAsIDEuMC8yNTUuMCk7XFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIHJldHVybiBlbmM7XFxuXCI7XG4gICAgICAgICAgICBjb2RlICs9IFwifVxcblxcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ1NTKSB7XG4gICAgICAgICAgICBjb2RlICs9IHNoYWRlckNodW5rcy5saW5lYXJpemVEZXB0aFBTO1xuICAgICAgICB9XG5cbiAgICAgICAgY29kZSArPSBiZWdpbigpO1xuXG4gICAgICAgIGNvZGUgKz0gdGhpcy5mcm9udGVuZEZ1bmM7XG5cbiAgICAgICAgY29uc3QgaXNWc20gPSBzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNOCB8fCBzaGFkb3dUeXBlID09PSBTSEFET1dfVlNNMTYgfHwgc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTMyO1xuICAgICAgICBjb25zdCBhcHBseVNsb3BlU2NhbGVCaWFzID0gIWRldmljZS53ZWJnbDIgJiYgZGV2aWNlLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMgJiYgIWRldmljZS5pc1dlYkdQVTtcbiAgICAgICAgY29uc3QgY3VzdG9tRGVwdGggPSAoaXNWc20gJiYgbGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHx8IGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkk7XG5cbiAgICAgICAgaWYgKGN1c3RvbURlcHRoKSB7XG4gICAgICAgICAgICBjb2RlICs9IFwiICAgIGZsb2F0IGRlcHRoID0gbWluKGRpc3RhbmNlKHZpZXdfcG9zaXRpb24sIHZQb3NpdGlvblcpIC8gbGlnaHRfcmFkaXVzLCAwLjk5OTk5KTtcXG5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChzaGFkb3dUeXBlID09PSBTSEFET1dfUENTUykge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBmbG9hdCBkZXB0aCA9IGxpbmVhcml6ZURlcHRoKGdsX0ZyYWdDb29yZC56LCBjYW1lcmFfcGFyYW1zKTtcXG5cIjtcbiAgICAgICAgICAgIGlmICh1c2VQYWNrZWREZXB0aCkge1xuICAgICAgICAgICAgICAgIC8vIEFmdGVyIGxpbmVhcml6aW5nLCBtYWtlIHN1cmUgdG8gcGFjayB0aGUgcmFuZ2UgYmV0d2VlbiBbMC4uMV1cbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgIGRlcHRoICo9IDEuMCAvIChjYW1lcmFfcGFyYW1zLnkgLSBjYW1lcmFfcGFyYW1zLnopO1xcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29kZSArPSBcIiAgICBmbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56O1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFwcGx5U2xvcGVTY2FsZUJpYXMpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZmxvYXQgbWluVmFsdWUgPSAyLjMzNzQzNzA1MDAxNTMxODZlLTEwOyAvLygxLjAgLyAyNTUuMCkgLyAoMjU2LjAgKiAyNTYuMCAqIDI1Ni4wKTtcXG5cIjtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZGVwdGggKz0gcG9seWdvbk9mZnNldC54ICogbWF4KGFicyhkRmR4KGRlcHRoKSksIGFicyhkRmR5KGRlcHRoKSkpICsgbWluVmFsdWUgKiBwb2x5Z29uT2Zmc2V0Lnk7XFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlUGFja2VkRGVwdGgpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gcGFja0Zsb2F0KGRlcHRoKTtcXG5cIjtcbiAgICAgICAgfSBlbHNlIGlmICghaXNWc20pIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcblwiOyAvLyBqdXN0IHRoZSBzaW1wbGVzdCBjb2RlLCBjb2xvciBpcyBub3Qgd3JpdHRlbiBhbnl3YXlcblxuICAgICAgICAgICAgLy8gY2x1c3RlcmVkIG9tbmkgbGlnaHQgaXMgdXNpbmcgc2hhZG93IHNhbXBsZXIgYW5kIG5lZWRzIHRvIHdyaXRlIGN1c3RvbSBkZXB0aFxuICAgICAgICAgICAgaWYgKHNoYWRvd1R5cGUgPT09IFNIQURPV19QQ1NTIHx8IChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9PTU5JICYmICFvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCkpIHtcbiAgICAgICAgICAgICAgICBjb2RlICs9IFwiICAgZ2xfRnJhZ0NvbG9yLnIgPSBkZXB0aDtcXG5cIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQgJiYgbGlnaHRUeXBlID09PSBMSUdIVFRZUEVfT01OSSAmJiBkZXZpY2Uuc3VwcG9ydHNEZXB0aFNoYWRvdykge1xuICAgICAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0RlcHRoID0gZGVwdGg7XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTgpIHtcbiAgICAgICAgICAgIGNvZGUgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChlbmNvZGVGbG9hdFJHKGRlcHRoKSwgZW5jb2RlRmxvYXRSRyhkZXB0aCpkZXB0aCkpO1xcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29kZSArPSBjaHVua3Muc3RvcmVFVlNNUFM7XG4gICAgICAgIH1cblxuICAgICAgICBjb2RlICs9IGVuZCgpO1xuXG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIC8vIHRoZSBiaWcgb25lXG4gICAgX2ZzR2V0TGl0UGFzc0NvZGUoKSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLmNodW5rcztcblxuICAgICAgICBjb25zdCBkZWNsID0gbmV3IENodW5rQnVpbGRlcigpO1xuICAgICAgICBjb25zdCBmdW5jID0gbmV3IENodW5rQnVpbGRlcigpO1xuICAgICAgICBjb25zdCBiYWNrZW5kID0gbmV3IENodW5rQnVpbGRlcigpO1xuICAgICAgICBjb25zdCBjb2RlID0gbmV3IENodW5rQnVpbGRlcigpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLm9wYWNpdHlGYWRlc1NwZWN1bGFyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoJ3VuaWZvcm0gZmxvYXQgbWF0ZXJpYWxfYWxwaGFGYWRlOycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lcy5wdXNoKFwiTElUX1NQRUNVTEFSXCIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lcy5wdXNoKFwiTElUX1JFRkxFQ1RJT05TXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9DTEVBUkNPQVRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZyZXNuZWxNb2RlbCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9TUEVDVUxBUl9GUkVTTkVMXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBlbmFibGUgY29uc2VydmUgZW5lcmd5IHBhdGggaW4gY2x1c3RlcmVkIGNodW5rXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jb25zZXJ2ZUVuZXJneSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lcy5wdXNoKFwiTElUX0NPTlNFUlZFX0VORVJHWVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU2hlZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9TSEVFTlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlSXJpZGVzY2VuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZXMucHVzaChcIkxJVF9JUklERVNDRU5DRVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZSQUdNRU5UIFNIQURFUiBJTlBVVFM6IFVOSUZPUk1TXG4gICAgICAgIGNvbnN0IHNoYWRvd1R5cGVVc2VkID0gW107XG4gICAgICAgIGxldCBudW1TaGFkb3dMaWdodHMgPSAwO1xuICAgICAgICBsZXQgc2hhZG93ZWREaXJlY3Rpb25hbExpZ2h0VXNlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlVnNtID0gZmFsc2U7XG4gICAgICAgIGxldCB1c2VQY3NzID0gZmFsc2U7XG5cbiAgICAgICAgbGV0IGhhc0FyZWFMaWdodHMgPSBvcHRpb25zLmxpZ2h0cy5zb21lKGZ1bmN0aW9uIChsaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpZ2h0Ll9zaGFwZSAmJiBsaWdodC5fc2hhcGUgIT09IExJR0hUU0hBUEVfUFVOQ1RVQUw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGlmIGNsdXN0ZXJlZCBsaWdodGluZyBoYXMgYXJlYSBsaWdodHMgZW5hYmxlZCwgaXQgYWx3YXlzIHJ1bnMgaW4gJ2FyZWEgbGlnaHRzIG1vZGUnXG4gICAgICAgIC8vIFRPRE86IG1heWJlIHdlIHNob3VsZCBhbHdheXMgdXNlIGl0IGFuZCByZW1vdmUgdGhlIG90aGVyIHdheT9cbiAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCkge1xuICAgICAgICAgICAgaGFzQXJlYUxpZ2h0cyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYXJlYUx1dHNQcmVjaXNpb24gPSAnaGlnaHAnO1xuICAgICAgICBpZiAoZGV2aWNlLmFyZWFMaWdodEx1dEZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUkdCQTgpIHtcbiAgICAgICAgICAgIC8vIHVzZSBvZmZzZXQgYW5kIHNjYWxlIGZvciByZ2I4IGZvcm1hdCBsdXRzXG4gICAgICAgICAgICBkZWNsLmFwcGVuZChcIiNkZWZpbmUgQVJFQV9SOF9HOF9COF9BOF9MVVRTXCIpO1xuICAgICAgICAgICAgYXJlYUx1dHNQcmVjaXNpb24gPSAnbG93cCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzQXJlYUxpZ2h0cyB8fCBvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCIjZGVmaW5lIEFSRUFfTElHSFRTXCIpO1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoYHVuaWZvcm0gJHthcmVhTHV0c1ByZWNpc2lvbn0gc2FtcGxlcjJEIGFyZWFMaWdodHNMdXRUZXgxO2ApO1xuICAgICAgICAgICAgZGVjbC5hcHBlbmQoYHVuaWZvcm0gJHthcmVhTHV0c1ByZWNpc2lvbn0gc2FtcGxlcjJEIGFyZWFMaWdodHNMdXRUZXgyO2ApO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBvcHRpb25zLmxpZ2h0c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0VHlwZSA9IGxpZ2h0Ll90eXBlO1xuXG4gICAgICAgICAgICAvLyBza2lwIHVuaWZvcm0gZ2VuZXJhdGlvbiBmb3IgbG9jYWwgbGlnaHRzIGlmIGNsdXN0ZXJlZCBsaWdodGluZyBpcyBlbmFibGVkXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQgJiYgbGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0U2hhcGUgPSAoaGFzQXJlYUxpZ2h0cyAmJiBsaWdodC5fc2hhcGUpID8gbGlnaHQuX3NoYXBlIDogTElHSFRTSEFQRV9QVU5DVFVBTDtcblxuICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9jb2xvcjtcIik7XG5cbiAgICAgICAgICAgIGlmIChsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1BDU1MgJiYgbGlnaHQuY2FzdFNoYWRvd3MgJiYgIW9wdGlvbnMubm9TaGFkb3cpIHtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChgdW5pZm9ybSBmbG9hdCBsaWdodCR7aX1fc2hhZG93U2VhcmNoQXJlYTtgKTtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChgdW5pZm9ybSB2ZWM0IGxpZ2h0JHtpfV9jYW1lcmFQYXJhbXM7YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMzIGxpZ2h0XCIgKyBpICsgXCJfZGlyZWN0aW9uO1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9wb3NpdGlvbjtcIik7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfcmFkaXVzO1wiKTtcbiAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfU1BPVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gdmVjMyBsaWdodFwiICsgaSArIFwiX2RpcmVjdGlvbjtcIik7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBmbG9hdCBsaWdodFwiICsgaSArIFwiX2lubmVyQ29uZUFuZ2xlO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfb3V0ZXJDb25lQW5nbGU7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMzIGxpZ2h0XCIgKyBpICsgXCJfcG9zaXRpb247XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gdmVjMyBsaWdodFwiICsgaSArIFwiX2hhbGZXaWR0aDtcIik7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzMgbGlnaHRcIiArIGkgKyBcIl9oYWxmSGVpZ2h0O1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodC5jYXN0U2hhZG93cyAmJiAhb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4O1wiKTtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dJbnRlbnNpdHk7XCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0aW9uYWwgKGNhc2NhZGVkKSBzaGFkb3dzXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4UGFsZXR0ZVs0XTtcIik7XG4gICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBmbG9hdCBsaWdodFwiICsgaSArIFwiX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXNbNF07XCIpO1xuICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dDYXNjYWRlQ291bnQ7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gdmVjNCBsaWdodFwiICsgaSArIFwiX3NoYWRvd1BhcmFtcztcIik7IC8vIFdpZHRoLCBoZWlnaHQsIGJpYXMsIHJhZGl1c1xuICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICBzaGFkb3dlZERpcmVjdGlvbmFsTGlnaHRVc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHNhbXBsZXJDdWJlIGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWFwO1wiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHQuX2lzUGNmICYmIGRldmljZS5zdXBwb3J0c0RlcHRoU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gc2FtcGxlcjJEU2hhZG93IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWFwO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXA7XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51bVNoYWRvd0xpZ2h0cysrO1xuICAgICAgICAgICAgICAgIHNoYWRvd1R5cGVVc2VkW2xpZ2h0Ll9zaGFkb3dUeXBlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9pc1ZzbSkgdXNlVnNtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuX3NoYWRvd1R5cGUgPT09IFNIQURPV19QQ1NTKSB1c2VQY3NzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaWdodC5fY29va2llKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9jb29raWUuX2N1YmVtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBzYW1wbGVyQ3ViZSBsaWdodFwiICsgaSArIFwiX2Nvb2tpZTtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcInVuaWZvcm0gZmxvYXQgbGlnaHRcIiArIGkgKyBcIl9jb29raWVJbnRlbnNpdHk7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaWdodC5jYXN0U2hhZG93cyB8fCBvcHRpb25zLm5vU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIG1hdDQgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXRyaXg7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRcIiArIGkgKyBcIl9jb29raWU7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIGZsb2F0IGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlnaHQuY2FzdFNoYWRvd3MgfHwgb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBtYXQ0IGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodC5fY29va2llVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzQgbGlnaHRcIiArIGkgKyBcIl9jb29raWVNYXRyaXg7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMyIGxpZ2h0XCIgKyBpICsgXCJfY29va2llT2Zmc2V0O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRCTlxuICAgICAgICBjb25zdCBoYXNUQk4gPSB0aGlzLm5lZWRzTm9ybWFsICYmIChvcHRpb25zLm5vcm1hbE1hcEVuYWJsZWQgfHwgb3B0aW9ucy5jbGVhckNvYXROb3JtYWxNYXBFbmFibGVkIHx8IChvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyICYmICFvcHRpb25zLmhlaWdodE1hcEVuYWJsZWQpKTtcblxuICAgICAgICBpZiAoaGFzVEJOKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNUYW5nZW50cykge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKG9wdGlvbnMuZmFzdFRibiA/IGNodW5rcy5UQk5mYXN0UFMgOiBjaHVua3MuVEJOUFMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV2aWNlLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMgJiYgKG9wdGlvbnMubm9ybWFsTWFwRW5hYmxlZCB8fCBvcHRpb25zLmNsZWFyQ29hdE5vcm1hbE1hcEVuYWJsZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5UQk5kZXJpdmF0aXZlUFMucmVwbGFjZSgvXFwkVVYvZywgdGhpcy5saWdodGluZ1V2KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLlRCTk9iamVjdFNwYWNlUFMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBvbmx5IGFkZCB0aGVzZSB3aGVuIG5lZWRlZFxuICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc3BoZXJpY2FsUFMpO1xuICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuZGVjb2RlUFMpO1xuICAgICAgICBmdW5jLmFwcGVuZChnYW1tYUNvZGUob3B0aW9ucy5nYW1tYSwgY2h1bmtzKSk7XG4gICAgICAgIGZ1bmMuYXBwZW5kKHRvbmVtYXBDb2RlKG9wdGlvbnMudG9uZU1hcCwgY2h1bmtzKSk7XG4gICAgICAgIGZ1bmMuYXBwZW5kKGZvZ0NvZGUob3B0aW9ucy5mb2csIGNodW5rcykpO1xuXG4gICAgICAgIC8vIGZyb250ZW5kXG4gICAgICAgIGZ1bmMuYXBwZW5kKHRoaXMuZnJvbnRlbmRDb2RlKTtcblxuICAgICAgICBpZiAob3B0aW9ucy51c2VDdWJlTWFwUm90YXRpb24pIHtcbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwiI2RlZmluZSBDVUJFTUFQX1JPVEFUSU9OXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubmVlZHNOb3JtYWwpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jdWJlTWFwUm90YXRlUFMpO1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQob3B0aW9ucy5jdWJlTWFwUHJvamVjdGlvbiA+IDAgPyBjaHVua3MuY3ViZU1hcFByb2plY3RCb3hQUyA6IGNodW5rcy5jdWJlTWFwUHJvamVjdE5vbmVQUyk7XG4gICAgICAgICAgICBmdW5jLmFwcGVuZChvcHRpb25zLnNreWJveEludGVuc2l0eSA/IGNodW5rcy5lbnZNdWx0aXBseVBTIDogY2h1bmtzLmVudkNvbnN0UFMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCh0aGlzLmxpZ2h0aW5nICYmIG9wdGlvbnMudXNlU3BlY3VsYXIpIHx8IHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZU1ldGFsbmVzcykge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5tZXRhbG5lc3NNb2R1bGF0ZVBTKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZnJlc25lbE1vZGVsID09PSBGUkVTTkVMX1NDSExJQ0spIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuZnJlc25lbFNjaGxpY2tQUyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUlyaWRlc2NlbmNlKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmlyaWRlc2NlbmNlRGlmZnJhY3Rpb25QUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VBbyA9IG9wdGlvbnMuYW9NYXBFbmFibGVkIHx8IG9wdGlvbnMudXNlQW9WZXJ0ZXhDb2xvcnM7XG5cbiAgICAgICAgaWYgKHVzZUFvKSB7XG4gICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuYW9EaWZmdXNlT2NjUFMpO1xuICAgICAgICAgICAgc3dpdGNoIChvcHRpb25zLm9jY2x1ZGVTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgIGNhc2UgU1BFQ09DQ19BTzpcbiAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQob3B0aW9ucy5vY2NsdWRlU3BlY3VsYXJGbG9hdCA/IGNodW5rcy5hb1NwZWNPY2NTaW1wbGVQUyA6IGNodW5rcy5hb1NwZWNPY2NDb25zdFNpbXBsZVBTKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTUEVDT0NDX0dMT1NTREVQRU5ERU5UOlxuICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChvcHRpb25zLm9jY2x1ZGVTcGVjdWxhckZsb2F0ID8gY2h1bmtzLmFvU3BlY09jY1BTIDogY2h1bmtzLmFvU3BlY09jY0NvbnN0UFMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPT09ICdlbnZBdGxhc0hRJykge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQob3B0aW9ucy5maXhTZWFtcyA/IGNodW5rcy5maXhDdWJlbWFwU2VhbXNTdHJldGNoUFMgOiBjaHVua3MuZml4Q3ViZW1hcFNlYW1zTm9uZVBTKTtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5lbnZBdGxhc1BTKTtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5yZWZsZWN0aW9uRW52SFFQU1xuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCRERUNPREVfQ1VCRU1BUC9nLCBDaHVua1V0aWxzLmRlY29kZUZ1bmMob3B0aW9ucy5yZWZsZWN0aW9uQ3ViZW1hcEVuY29kaW5nKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwkREVDT0RFL2csIENodW5rVXRpbHMuZGVjb2RlRnVuYyhvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZykpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSA9PT0gJ2VudkF0bGFzJykge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmVudkF0bGFzUFMpO1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnJlZmxlY3Rpb25FbnZQUy5yZXBsYWNlKC9cXCRERUNPREUvZywgQ2h1bmtVdGlscy5kZWNvZGVGdW5jKG9wdGlvbnMucmVmbGVjdGlvbkVuY29kaW5nKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSA9PT0gJ2N1YmVNYXAnKSB7XG4gICAgICAgICAgICBmdW5jLmFwcGVuZChvcHRpb25zLmZpeFNlYW1zID8gY2h1bmtzLmZpeEN1YmVtYXBTZWFtc1N0cmV0Y2hQUyA6IGNodW5rcy5maXhDdWJlbWFwU2VhbXNOb25lUFMpO1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnJlZmxlY3Rpb25DdWJlUFMucmVwbGFjZSgvXFwkREVDT0RFL2csIENodW5rVXRpbHMuZGVjb2RlRnVuYyhvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZykpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPT09ICdzcGhlcmVNYXAnKSB7XG4gICAgICAgICAgICBjb25zdCBzY29kZSA9IGRldmljZS5mcmFnbWVudFVuaWZvcm1zQ291bnQgPiAxNiA/IGNodW5rcy5yZWZsZWN0aW9uU3BoZXJlUFMgOiBjaHVua3MucmVmbGVjdGlvblNwaGVyZUxvd1BTO1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoc2NvZGUucmVwbGFjZSgvXFwkREVDT0RFL2csIENodW5rVXRpbHMuZGVjb2RlRnVuYyhvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZykpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJlZmxlY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MucmVmbGVjdGlvbkNDUFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU2hlZW4pIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MucmVmbGVjdGlvblNoZWVuUFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlUmVmcmFjdGlvbikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlRHluYW1pY1JlZnJhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MucmVmcmFjdGlvbkR5bmFtaWNQUyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MucmVmcmFjdGlvbkN1YmVQUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy51c2VTaGVlbikge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmxpZ2h0U2hlZW5QUyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbHVzdGVyZWQgbGlnaHRpbmdcbiAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkKSB7XG5cbiAgICAgICAgICAgIC8vIGluY2x1ZGUgdGhpcyBiZWZvcmUgc2hhZG93IC8gY29va2llIGNvZGVcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jbHVzdGVyZWRMaWdodFV0aWxzUFMpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdDb29raWVzRW5hYmxlZClcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuY2x1c3RlcmVkTGlnaHRDb29raWVzUFMpO1xuXG4gICAgICAgICAgICAvLyBpbmNsdWRlIHNoYWRvdyBjaHVua3MgY2x1c3RlcmVkIGxpZ2h0cyBzdXBwb3J0XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkICYmICFvcHRpb25zLm5vU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgc2hhZG93VHlwZVVzZWRbU0hBRE9XX1BDRjNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzaGFkb3dUeXBlVXNlZFtTSEFET1dfUENGNV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNoYWRvd1R5cGVVc2VkW1NIQURPV19QQ1NTXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobnVtU2hhZG93TGlnaHRzID4gMCB8fCBvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKHNoYWRvd2VkRGlyZWN0aW9uYWxMaWdodFVzZWQpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc2hhZG93Q2FzY2FkZXNQUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1BDRjFdIHx8IHNoYWRvd1R5cGVVc2VkW1NIQURPV19QQ0YzXSkge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5zaGFkb3dTdGFuZGFyZFBTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFkb3dUeXBlVXNlZFtTSEFET1dfUENGNV0gJiYgKGRldmljZS53ZWJnbDIgfHwgZGV2aWNlLmlzV2ViR1BVKSkge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5zaGFkb3dTdGFuZGFyZEdMMlBTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2VWc20pIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3Muc2hhZG93VlNNX2NvbW1vblBTKTtcbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1ZTTThdKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5zaGFkb3dWU004UFMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VHlwZVVzZWRbU0hBRE9XX1ZTTTE2XSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChkZXZpY2UuZXh0VGV4dHVyZUhhbGZGbG9hdExpbmVhciA/IGNodW5rcy5zaGFkb3dFVlNNUFMucmVwbGFjZSgvXFwkL2csIFwiMTZcIikgOiBjaHVua3Muc2hhZG93RVZTTW5QUy5yZXBsYWNlKC9cXCQvZywgXCIxNlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzaGFkb3dUeXBlVXNlZFtTSEFET1dfVlNNMzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGRldmljZS5leHRUZXh0dXJlRmxvYXRMaW5lYXIgPyBjaHVua3Muc2hhZG93RVZTTVBTLnJlcGxhY2UoL1xcJC9nLCBcIjMyXCIpIDogY2h1bmtzLnNoYWRvd0VWU01uUFMucmVwbGFjZSgvXFwkL2csIFwiMzJcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2VQY3NzKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmxpbmVhcml6ZURlcHRoUFMpO1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5zaGFkb3dQQ1NTUFMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIShkZXZpY2Uud2ViZ2wyIHx8IGRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzIHx8IGRldmljZS5pc1dlYkdQVSkpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuYmlhc0NvbnN0UFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlR0dYU3BlY3VsYXIpIGZ1bmMuYXBwZW5kKFwidW5pZm9ybSBmbG9hdCBtYXRlcmlhbF9hbmlzb3Ryb3B5O1wiKTtcblxuICAgICAgICBpZiAodGhpcy5saWdodGluZykge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmxpZ2h0RGlmZnVzZUxhbWJlcnRQUyk7XG4gICAgICAgICAgICBpZiAoaGFzQXJlYUxpZ2h0cyB8fCBvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nQXJlYUxpZ2h0c0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MubHRjUFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHVzZU9sZEFtYmllbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMubGlnaHRpbmcpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChvcHRpb25zLnNoYWRpbmdNb2RlbCA9PT0gU1BFQ1VMQVJfUEhPTkcgPyBjaHVua3MubGlnaHRTcGVjdWxhclBob25nUFMgOiAob3B0aW9ucy5lbmFibGVHR1hTcGVjdWxhciA/IGNodW5rcy5saWdodFNwZWN1bGFyQW5pc29HR1hQUyA6IGNodW5rcy5saWdodFNwZWN1bGFyQmxpbm5QUykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZnJlc25lbE1vZGVsICYmICF0aGlzLnJlZmxlY3Rpb25zICYmICFvcHRpb25zLmRpZmZ1c2VNYXBFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCJ1bmlmb3JtIHZlYzMgbWF0ZXJpYWxfYW1iaWVudDtcIik7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCIjZGVmaW5lIExJVF9PTERfQU1CSUVOVFwiKTtcbiAgICAgICAgICAgICAgICB1c2VPbGRBbWJpZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jb21iaW5lUFMpO1xuXG4gICAgICAgIC8vIGxpZ2h0bWFwIHN1cHBvcnRcbiAgICAgICAgaWYgKG9wdGlvbnMubGlnaHRNYXBFbmFibGVkIHx8IG9wdGlvbnMudXNlTGlnaHRNYXBWZXJ0ZXhDb2xvcnMpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKChvcHRpb25zLnVzZVNwZWN1bGFyICYmIG9wdGlvbnMuZGlyTGlnaHRNYXBFbmFibGVkKSA/IGNodW5rcy5saWdodG1hcERpckFkZFBTIDogY2h1bmtzLmxpZ2h0bWFwQWRkUFMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWRkQW1iaWVudCA9ICghb3B0aW9ucy5saWdodE1hcEVuYWJsZWQgJiYgIW9wdGlvbnMudXNlTGlnaHRNYXBWZXJ0ZXhDb2xvcnMpIHx8IG9wdGlvbnMubGlnaHRNYXBXaXRob3V0QW1iaWVudDtcblxuICAgICAgICBpZiAoYWRkQW1iaWVudCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYW1iaWVudFNvdXJjZSA9PT0gJ2FtYmllbnRTSCcpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuYW1iaWVudFNIUFMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmFtYmllbnRTb3VyY2UgPT09ICdlbnZBdGxhcycpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0aW9uU291cmNlICE9PSAnZW52QXRsYXMnICYmIG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSAhPT0gJ2VudkF0bGFzSFEnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5lbnZBdGxhc1BTKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLmFtYmllbnRFbnZQUy5yZXBsYWNlKC9cXCRERUNPREUvZywgQ2h1bmtVdGlscy5kZWNvZGVGdW5jKG9wdGlvbnMuYW1iaWVudEVuY29kaW5nKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChjaHVua3MuYW1iaWVudENvbnN0YW50UFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlQW1iaWVudFRpbnQgJiYgIXVzZU9sZEFtYmllbnQpIHtcbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSB2ZWMzIG1hdGVyaWFsX2FtYmllbnQ7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlTXNkZikge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLm1zZGZUZXh0QXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCIjZGVmaW5lIFVOSUZPUk1fVEVYVF9QQVJBTUVURVJTXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLm1zZGZQUyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgZnVuYy5hcHBlbmQoY2h1bmtzLnZpZXdEaXJQUyk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKChvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyKSA/IGNodW5rcy5yZWZsRGlyQW5pc29QUyA6IGNodW5rcy5yZWZsRGlyUFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhhc1BvaW50TGlnaHRzID0gZmFsc2U7XG4gICAgICAgIGxldCB1c2VzTGluZWFyRmFsbG9mZiA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc0ludlNxdWFyZWRGYWxsb2ZmID0gZmFsc2U7XG4gICAgICAgIGxldCB1c2VzU3BvdCA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc0Nvb2tpZSA9IGZhbHNlO1xuICAgICAgICBsZXQgdXNlc0Nvb2tpZU5vdztcblxuICAgICAgICAvLyBjbHVzdGVyZWQgbGlnaHRpbmdcbiAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIHRoaXMubGlnaHRpbmcpIHtcblxuICAgICAgICAgICAgdXNlc1Nwb3QgPSB0cnVlO1xuICAgICAgICAgICAgaGFzUG9pbnRMaWdodHMgPSB0cnVlO1xuICAgICAgICAgICAgdXNlc0xpbmVhckZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgdXNlc0Nvb2tpZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5mbG9hdFVucGFja2luZ1BTKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGlnaHRNYXNrRHluYW1pYylcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcIiNkZWZpbmUgQ0xVU1RFUl9NRVNIX0RZTkFNSUNfTElHSFRTXCIpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0Nvb2tpZXNFbmFibGVkKVxuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwiI2RlZmluZSBDTFVTVEVSX0NPT0tJRVNcIik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkICYmICFvcHRpb25zLm5vU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgZGVjbC5hcHBlbmQoXCIjZGVmaW5lIENMVVNURVJfU0hBRE9XU1wiKTtcbiAgICAgICAgICAgICAgICBkZWNsLmFwcGVuZChcIiNkZWZpbmUgQ0xVU1RFUl9TSEFET1dfVFlQRV9cIiArIHNoYWRvd1R5cGVUb1N0cmluZ1tvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93VHlwZV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0FyZWFMaWdodHNFbmFibGVkKVxuICAgICAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwiI2RlZmluZSBDTFVTVEVSX0FSRUFMSUdIVFNcIik7XG5cbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKExpZ2h0c0J1ZmZlci5zaGFkZXJEZWZpbmVzKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dzRW5hYmxlZCAmJiAhb3B0aW9ucy5ub1NoYWRvdykge1xuICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jbHVzdGVyZWRMaWdodFNoYWRvd3NQUyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNodW5rcy5jbHVzdGVyZWRMaWdodFBTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnR3b1NpZGVkTGlnaHRpbmcpIHtcbiAgICAgICAgICAgIGRlY2wuYXBwZW5kKFwidW5pZm9ybSBmbG9hdCB0d29TaWRlZExpZ2h0aW5nTmVnU2NhbGVGYWN0b3I7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRlJBR01FTlQgU0hBREVSIEJPRFlcblxuICAgICAgICBjb2RlLmFwcGVuZCh0aGlzLl9mc0dldFN0YXJ0Q29kZShjb2RlLCBkZXZpY2UsIGNodW5rcywgb3B0aW9ucykpO1xuXG4gICAgICAgIGlmICh0aGlzLm5lZWRzTm9ybWFsKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy50d29TaWRlZExpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZFZlcnRleE5vcm1hbFcgPSBub3JtYWxpemUoZ2xfRnJvbnRGYWNpbmcgPyB2Tm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvciA6IC12Tm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3Rvcik7XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChcIiAgICBkVmVydGV4Tm9ybWFsVyA9IG5vcm1hbGl6ZSh2Tm9ybWFsVyk7XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMuaGVpZ2h0TWFwRW5hYmxlZCB8fCBvcHRpb25zLm5vcm1hbE1hcEVuYWJsZWQpICYmIG9wdGlvbnMuaGFzVGFuZ2VudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50d29TaWRlZExpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKFwiICAgIGRUYW5nZW50VyA9IGdsX0Zyb250RmFjaW5nID8gdlRhbmdlbnRXICogdHdvU2lkZWRMaWdodGluZ05lZ1NjYWxlRmFjdG9yIDogLXZUYW5nZW50VyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvcjtcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKFwiICAgIGRCaW5vcm1hbFcgPSBnbF9Gcm9udEZhY2luZyA/IHZCaW5vcm1hbFcgKiB0d29TaWRlZExpZ2h0aW5nTmVnU2NhbGVGYWN0b3IgOiAtdkJpbm9ybWFsVyAqIHR3b1NpZGVkTGlnaHRpbmdOZWdTY2FsZUZhY3RvcjtcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZFRhbmdlbnRXID0gdlRhbmdlbnRXO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZEJpbm9ybWFsVyA9IHZCaW5vcm1hbFc7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZ2V0Vmlld0RpcigpO1wiKTtcbiAgICAgICAgICAgIGlmIChoYXNUQk4pIHtcbiAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChcIiAgICBnZXRUQk4oZFRhbmdlbnRXLCBkQmlub3JtYWxXLCBkVmVydGV4Tm9ybWFsVyk7XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW52b2tlIGZyb250ZW5kIGZ1bmN0aW9uc1xuICAgICAgICBjb2RlLmFwcGVuZCh0aGlzLmZyb250ZW5kRnVuYyk7XG5cbiAgICAgICAgLy8gdHJhbnNmb3JtIHRhbmdlbnQgc3BhY2Ugbm9ybWFscyB0byB3b3JsZCBzcGFjZVxuICAgICAgICBpZiAodGhpcy5uZWVkc05vcm1hbCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBnZXRSZWZsRGlyKGxpdFNoYWRlckFyZ3Mud29ybGROb3JtYWwsIGRWaWV3RGlyVywgbGl0U2hhZGVyQXJncy5nbG9zcywgZFRCTik7XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBjY1JlZmxEaXJXID0gbm9ybWFsaXplKC1yZWZsZWN0KGRWaWV3RGlyVywgbGl0U2hhZGVyQXJncy5jbGVhcmNvYXQud29ybGROb3JtYWwpKTtcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRoaXMubGlnaHRpbmcgJiYgb3B0aW9ucy51c2VTcGVjdWxhcikgfHwgdGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlTWV0YWxuZXNzKSB7XG4gICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZ2V0TWV0YWxuZXNzTW9kdWxhdGUobGl0U2hhZGVyQXJncyk7XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51c2VJcmlkZXNjZW5jZSkge1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIHZlYzMgaXJpZGVzY2VuY2VGcmVzbmVsID0gZ2V0SXJpZGVzY2VuY2Uoc2F0dXJhdGUoZG90KGRWaWV3RGlyVywgbGl0U2hhZGVyQXJncy53b3JsZE5vcm1hbCkpLCBsaXRTaGFkZXJBcmdzLnNwZWN1bGFyaXR5LCBsaXRTaGFkZXJBcmdzLmlyaWRlc2NlbmNlKTtcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWRkQW1iaWVudCkge1xuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgYWRkQW1iaWVudChsaXRTaGFkZXJBcmdzLndvcmxkTm9ybWFsKTtcIik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jb25zZXJ2ZUVuZXJneSAmJiBvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgIGREaWZmdXNlTGlnaHQgPSBkRGlmZnVzZUxpZ2h0ICogKDEuMCAtIGxpdFNoYWRlckFyZ3Muc3BlY3VsYXJpdHkpO2ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBtb3ZlIGFtYmllbnQgY29sb3Igb3V0IG9mIGRpZmZ1c2UgKHVzZWQgYnkgTGlnaHRtYXBwZXIsIHRvIG11bHRpcGx5IGFtYmllbnQgY29sb3IgYnkgYWNjdW11bGF0ZWQgQU8pXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zZXBhcmF0ZUFtYmllbnQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgXG4gICAgICAgICAgICAgICAgICAgIHZlYzMgZEFtYmllbnRMaWdodCA9IGREaWZmdXNlTGlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGREaWZmdXNlTGlnaHQgPSB2ZWMzKDApO1xuICAgICAgICAgICAgICAgIGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlQW1iaWVudFRpbnQgJiYgIXVzZU9sZEFtYmllbnQpIHtcbiAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGREaWZmdXNlTGlnaHQgKj0gbWF0ZXJpYWxfYW1iaWVudDtcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQW8gJiYgIW9wdGlvbnMub2NjbHVkZURpcmVjdCkge1xuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgb2NjbHVkZURpZmZ1c2UobGl0U2hhZGVyQXJncy5hbyk7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMubGlnaHRNYXBFbmFibGVkIHx8IG9wdGlvbnMudXNlTGlnaHRNYXBWZXJ0ZXhDb2xvcnMpIHtcbiAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgYWRkTGlnaHRNYXAoXG4gICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy5saWdodG1hcCwgXG4gICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy5saWdodG1hcERpciwgXG4gICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy53b3JsZE5vcm1hbCwgXG4gICAgICAgICAgICAgICAgZFZpZXdEaXJXLCBcbiAgICAgICAgICAgICAgICBkUmVmbERpclcsIFxuICAgICAgICAgICAgICAgIGxpdFNoYWRlckFyZ3MuZ2xvc3MsIFxuICAgICAgICAgICAgICAgIGxpdFNoYWRlckFyZ3Muc3BlY3VsYXJpdHksIFxuICAgICAgICAgICAgICAgIGRWZXJ0ZXhOb3JtYWxXLFxuICAgICAgICAgICAgICAgIGRUQk5cbiAgICAgICAgICAgICNpZiBkZWZpbmVkKExJVF9JUklERVNDRU5DRSlcbiAgICAgICAgICAgICAgICAsIGlyaWRlc2NlbmNlRnJlc25lbCxcbiAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLmlyaWRlc2NlbmNlXG4gICAgICAgICAgICAjZW5kaWZcbiAgICAgICAgICAgICAgICApO2ApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGlnaHRpbmcgfHwgdGhpcy5yZWZsZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVmbGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VDbGVhckNvYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgYWRkUmVmbGVjdGlvbkNDKGNjUmVmbERpclcsIGxpdFNoYWRlckFyZ3MuY2xlYXJjb2F0Lmdsb3NzKTtcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmZyZXNuZWxNb2RlbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGNjRnJlc25lbCA9IGdldEZyZXNuZWxDQyhkb3QoZFZpZXdEaXJXLCBsaXRTaGFkZXJBcmdzLmNsZWFyY29hdC53b3JsZE5vcm1hbCkpO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGNjUmVmbGVjdGlvbi5yZ2IgKj0gY2NGcmVzbmVsO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGNjRnJlc25lbCA9IDAuMDtcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXJpdHlGYWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgY2NSZWZsZWN0aW9uLnJnYiAqPSBsaXRTaGFkZXJBcmdzLnNwZWN1bGFyaXR5RmFjdG9yO1wiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTaGVlbikge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBhZGRSZWZsZWN0aW9uU2hlZW4obGl0U2hhZGVyQXJncy53b3JsZE5vcm1hbCwgZFZpZXdEaXJXLCBsaXRTaGFkZXJBcmdzLnNoZWVuLmdsb3NzKTtcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRnJlc25lbCBoYXMgdG8gYmUgYXBwbGllZCB0byByZWZsZWN0aW9uc1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGFkZFJlZmxlY3Rpb24oZFJlZmxEaXJXLCBsaXRTaGFkZXJBcmdzLmdsb3NzKTtcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5mcmVzbmVsTW9kZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgZFJlZmxlY3Rpb24ucmdiICo9IFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RnJlc25lbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3QoZFZpZXdEaXJXLCBsaXRTaGFkZXJBcmdzLndvcmxkTm9ybWFsKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy5nbG9zcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy5zcGVjdWxhcml0eVxuICAgICAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoTElUX0lSSURFU0NFTkNFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaXJpZGVzY2VuY2VGcmVzbmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdFNoYWRlckFyZ3MuaXJpZGVzY2VuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7YCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZFJlZmxlY3Rpb24ucmdiICo9IGxpdFNoYWRlckFyZ3Muc3BlY3VsYXJpdHk7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcml0eUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkUmVmbGVjdGlvbi5yZ2IgKj0gbGl0U2hhZGVyQXJncy5zcGVjdWxhcml0eUZhY3RvcjtcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzQXJlYUxpZ2h0cykge1xuICAgICAgICAgICAgICAgIC8vIHNwZWN1bGFyIGhhcyB0byBiZSBhY2N1bXVsYXRlZCBkaWZmZXJlbnRseSBpZiB3ZSB3YW50IGFyZWEgbGlnaHRzIHRvIGxvb2sgY29ycmVjdFxuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRTcGVjdWxhckxpZ2h0ICo9IGxpdFNoYWRlckFyZ3Muc3BlY3VsYXJpdHk7XCIpO1xuICAgICAgICAgICAgICAgIC8vIGNvZGUgKz0gXCIgICAgZmxvYXQgcm91Z2huZXNzID0gbWF4KCgxLjAgLSBkR2xvc3NpbmVzcykgKiAoMS4wIC0gZEdsb3NzaW5lc3MpLCAwLjAwMSk7XFxuXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBldmFsdWF0ZSBtYXRlcmlhbCBiYXNlZCBhcmVhIGxpZ2h0cyBkYXRhLCBzaGFyZWQgYnkgYWxsIGFyZWEgbGlnaHRzXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgY2FsY0xUQ0xpZ2h0VmFsdWVzKGxpdFNoYWRlckFyZ3MuZ2xvc3MsIGxpdFNoYWRlckFyZ3Mud29ybGROb3JtYWwsIGRWaWV3RGlyVywgbGl0U2hhZGVyQXJncy5zcGVjdWxhcml0eSwgbGl0U2hhZGVyQXJncy5jbGVhcmNvYXQuZ2xvc3MsIGxpdFNoYWRlckFyZ3MuY2xlYXJjb2F0LndvcmxkTm9ybWFsLCBsaXRTaGFkZXJBcmdzLmNsZWFyY29hdC5zcGVjdWxhcml0eSk7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpZ2h0ID0gb3B0aW9ucy5saWdodHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgbGlnaHRUeXBlID0gbGlnaHQuX3R5cGU7XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBjbHVzdGVyZWQgbGlnaHRzIGFyZSB1c2VkLCBza2lwIG5vcm1hbCBsaWdodHMgb3RoZXIgdGhhbiBkaXJlY3Rpb25hbFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCAmJiBsaWdodFR5cGUgIT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgaXMgbm90IGRlY291cGxlZCB0byBzZXBhcmF0ZSBzaGFkZXIgZmlsZXMsIGJlY2F1c2UgbW9zdCBvZiBpdCBjYW4gYmUgYWN0dWFsbHkgY2hhbmdlZCB0byBhY2hpZXZlIGRpZmZlcmVudCBiZWhhdmlvcnMgbGlrZTpcbiAgICAgICAgICAgICAgICAvLyAtIGRpZmZlcmVudCBmYWxsb2Zmc1xuICAgICAgICAgICAgICAgIC8vIC0gZGlmZmVyZW50IHNoYWRvdyBjb29yZHMgKG9tbmkgc2hhZG93cyB3aWxsIHVzZSBkcmFzdGljYWxseSBkaWZmZXJlbnQgZ2VuU2hhZG93Q29vcmQpXG4gICAgICAgICAgICAgICAgLy8gLSBkaWZmZXJlbnQgc2hhZG93IGZpbHRlciBtb2Rlc1xuICAgICAgICAgICAgICAgIC8vIC0gZGlmZmVyZW50IGxpZ2h0IHNvdXJjZSBzaGFwZXNcblxuICAgICAgICAgICAgICAgIC8vIGdldExpZ2h0RGlmZnVzZSBhbmQgZ2V0TGlnaHRTcGVjdWxhciBpcyBCUkRGIGl0c2VsZi5cblxuICAgICAgICAgICAgICAgIHVzZXNDb29raWVOb3cgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpZ2h0U2hhcGUgPSAoaGFzQXJlYUxpZ2h0cyAmJiBsaWdodC5fc2hhcGUpID8gbGlnaHQuc2hhcGUgOiBMSUdIVFNIQVBFX1BVTkNUVUFMO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoYXBlU3RyaW5nID0gKGhhc0FyZWFMaWdodHMgJiYgbGlnaHQuX3NoYXBlKSA/IHRoaXMuX2dldExpZ2h0U291cmNlU2hhcGVTdHJpbmcobGlnaHRTaGFwZSkgOiAnJztcblxuICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGNhbGNcIiArIHNoYXBlU3RyaW5nICsgXCJMaWdodFZhbHVlcyhsaWdodFwiICsgaSArIFwiX3Bvc2l0aW9uLCBsaWdodFwiICsgaSArIFwiX2hhbGZXaWR0aCwgbGlnaHRcIiArIGkgKyBcIl9oYWxmSGVpZ2h0KTtcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRMaWdodERpck5vcm1XID0gbGlnaHRcIiArIGkgKyBcIl9kaXJlY3Rpb247XCIpO1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gPSAxLjA7XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0Ll9jb29raWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9TUE9UICYmICFsaWdodC5fY29va2llLl9jdWJlbWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0Nvb2tpZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0Nvb2tpZU5vdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkgJiYgbGlnaHQuX2Nvb2tpZS5fY3ViZW1hcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNDb29raWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNDb29raWVOb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZ2V0TGlnaHREaXJQb2ludChsaWdodFwiICsgaSArIFwiX3Bvc2l0aW9uKTtcIik7XG4gICAgICAgICAgICAgICAgICAgIGhhc1BvaW50TGlnaHRzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc0Nvb2tpZU5vdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4zID0gZ2V0Q29va2llMkRcIiArIChsaWdodC5fY29va2llRmFsbG9mZiA/IFwiXCIgOiBcIkNsaXBcIikgKyAobGlnaHQuX2Nvb2tpZVRyYW5zZm9ybSA/IFwiWGZvcm1cIiA6IFwiXCIpICsgXCIobGlnaHRcIiArIGkgKyBcIl9jb29raWUsIGxpZ2h0XCIgKyBpICsgXCJfc2hhZG93TWF0cml4LCBsaWdodFwiICsgaSArIFwiX2Nvb2tpZUludGVuc2l0eVwiICsgKGxpZ2h0Ll9jb29raWVUcmFuc2Zvcm0gPyBcIiwgbGlnaHRcIiArIGkgKyBcIl9jb29raWVNYXRyaXgsIGxpZ2h0XCIgKyBpICsgXCJfY29va2llT2Zmc2V0XCIgOiBcIlwiKSArIFwiKS5cIiArIGxpZ2h0Ll9jb29raWVDaGFubmVsICsgXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4zID0gZ2V0Q29va2llQ3ViZShsaWdodFwiICsgaSArIFwiX2Nvb2tpZSwgbGlnaHRcIiArIGkgKyBcIl9zaGFkb3dNYXRyaXgsIGxpZ2h0XCIgKyBpICsgXCJfY29va2llSW50ZW5zaXR5KS5cIiArIGxpZ2h0Ll9jb29raWVDaGFubmVsICsgXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0U2hhcGUgPT09IExJR0hUU0hBUEVfUFVOQ1RVQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodC5fZmFsbG9mZk1vZGUgPT09IExJR0hURkFMTE9GRl9MSU5FQVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gPSBnZXRGYWxsb2ZmTGluZWFyKGxpZ2h0XCIgKyBpICsgXCJfcmFkaXVzLCBkTGlnaHREaXJXKTtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlc0xpbmVhckZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gPSBnZXRGYWxsb2ZmSW52U3F1YXJlZChsaWdodFwiICsgaSArIFwiX3JhZGl1cywgZExpZ2h0RGlyVyk7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNJbnZTcXVhcmVkRmFsbG9mZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub24gcHVuY3R1YWwgbGlnaHRzIG9ubHkgZ2V0cyB0aGUgcmFuZ2Ugd2luZG93IGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRBdHRlbiA9IGdldEZhbGxvZmZXaW5kb3cobGlnaHRcIiArIGkgKyBcIl9yYWRpdXMsIGRMaWdodERpclcpO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNJbnZTcXVhcmVkRmFsbG9mZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBpZiAoZEF0dGVuID4gMC4wMDAwMSkge1wiKTsgLy8gQlJBTkNIIFNUQVJUXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHVzZXNDb29raWVOb3cgJiYgIWxpZ2h0Ll9jb29raWVGYWxsb2ZmKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRBdHRlbiAqPSBnZXRTcG90RWZmZWN0KGxpZ2h0XCIgKyBpICsgXCJfZGlyZWN0aW9uLCBsaWdodFwiICsgaSArIFwiX2lubmVyQ29uZUFuZ2xlLCBsaWdodFwiICsgaSArIFwiX291dGVyQ29uZUFuZ2xlLCBkTGlnaHREaXJOb3JtVyk7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNTcG90ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGRpZmZ1c2UgbGlnaHRpbmcgLSBMVEMgbGlnaHRzIGRvIG5vdCBtaXggZGlmZnVzZSBsaWdodGluZyBpbnRvIGF0dGVudWF0aW9uIHRoYXQgYWZmZWN0cyBzcGVjdWxhclxuICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkI6IEEgYmV0dGVyIGFwcm94aW1hdGlvbiBwZXJoYXBzIHVzaW5nIHdyYXAgbGlnaHRpbmcgY291bGQgYmUgaW1wbGVtZW50ZWQgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZEF0dGVuRCA9IGdldExpZ2h0RGlmZnVzZShsaXRTaGFkZXJBcmdzLndvcmxkTm9ybWFsLCBkVmlld0RpclcsIGRMaWdodERpclcsIGRMaWdodERpck5vcm1XKTtcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxNi4wIGlzIGEgY29uc3RhbnQgdGhhdCBpcyBpbiBnZXRGYWxsb2ZmSW52U3F1YXJlZCgpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW5EID0gZ2V0XCIgKyBzaGFwZVN0cmluZyArIFwiTGlnaHREaWZmdXNlKGxpdFNoYWRlckFyZ3Mud29ybGROb3JtYWwsIGRWaWV3RGlyVywgZExpZ2h0RGlyVywgZExpZ2h0RGlyTm9ybVcpICogMTYuMDtcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkQXR0ZW4gKj0gZ2V0TGlnaHREaWZmdXNlKGxpdFNoYWRlckFyZ3Mud29ybGROb3JtYWwsIGRWaWV3RGlyVywgZExpZ2h0RGlyVywgZExpZ2h0RGlyTm9ybVcpO1wiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuY2FzdFNoYWRvd3MgJiYgIW9wdGlvbnMubm9TaGFkb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGNzc1NoYWRvd3MgPSBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1BDU1M7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZzbVNoYWRvd3MgPSBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTggfHwgbGlnaHQuX3NoYWRvd1R5cGUgPT09IFNIQURPV19WU00xNiB8fCBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1ZTTTMyO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwY2ZTaGFkb3dzID0gbGlnaHQuX3NoYWRvd1R5cGUgPT09IFNIQURPV19QQ0YxIHx8IGxpZ2h0Ll9zaGFkb3dUeXBlID09PSBTSEFET1dfUENGMyB8fCBsaWdodC5fc2hhZG93VHlwZSA9PT0gU0hBRE9XX1BDRjU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaGFkb3dSZWFkTW9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxldCBldnNtRXhwO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGxpZ2h0Ll9zaGFkb3dUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19WU004OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd1JlYWRNb2RlID0gXCJWU004XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZzbUV4cCA9IFwiMC4wXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19WU00xNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiVlNNMTZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnNtRXhwID0gXCI1LjU0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19WU00zMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiVlNNMzJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGV2aWNlLnRleHR1cmVGbG9hdEhpZ2hQcmVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZzbUV4cCA9IFwiMTUuMFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2c21FeHAgPSBcIjUuNTRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQURPV19QQ0YxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd1JlYWRNb2RlID0gXCJQQ0YxeDFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU0hBRE9XX1BDRjU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBcIlBDRjV4NVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTSEFET1dfUENTUzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IFwiUENTU1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTSEFET1dfUENGMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBcIlBDRjN4M1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYWRvd1JlYWRNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHQuX25vcm1hbE9mZnNldEJpYXMgJiYgIWxpZ2h0Ll9pc1ZzbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKFwiI2RlZmluZSBTSEFET1dfU0FNUExFX05PUk1BTF9PRkZTRVRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiNkZWZpbmUgU0hBRE9XX1NBTVBMRV9PUlRIT1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGNmU2hhZG93cyB8fCBwY3NzU2hhZG93cykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2Uud2ViZ2wyIHx8IGRldmljZS5leHRTdGFuZGFyZERlcml2YXRpdmVzIHx8IGRldmljZS5pc1dlYkdQVSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKFwiI2RlZmluZSBTSEFET1dfU0FNUExFX1NPVVJDRV9aQlVGRkVSXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX09NTkkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiNkZWZpbmUgU0hBRE9XX1NBTVBMRV9QT0lOVFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHNoYWRvdyBjb29yZCBzYW1wbGVyIGZ1bmN0aW9uIGZvciB0aGlzIGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb29yZENvZGUgPSBjaHVua3Muc2hhZG93U2FtcGxlQ29vcmRQUztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKGNvb3JkQ29kZS5yZXBsYWNlKFwiJExJR0hUXCIsIGkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHVuZGVmaW5lIHRoZSBzaGFkb3cgc2FtcGxlciBkZWZpbmVzXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiN1bmRlZiBTSEFET1dfU0FNUExFX05PUk1BTF9PRkZTRVRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGVuZChcIiN1bmRlZiBTSEFET1dfU0FNUExFX09SVEhPXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBlbmQoXCIjdW5kZWYgU0hBRE9XX1NBTVBMRV9TT1VSQ0VfWkJVRkZFUlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwZW5kKFwiI3VuZGVmIFNIQURPV19TQU1QTEVfUE9JTlRcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzaGFkb3dNYXRyaXggPSBgbGlnaHQke2l9X3NoYWRvd01hdHJpeGA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwgJiYgbGlnaHQubnVtQ2FzY2FkZXMgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcHV0ZSB3aGljaCBjYXNjYWRlIG1hdHJpeCBuZWVkcyB0byBiZSB1c2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgICBnZXRTaGFkb3dDYXNjYWRlTWF0cml4KGxpZ2h0JHtpfV9zaGFkb3dNYXRyaXhQYWxldHRlLCBsaWdodCR7aX1fc2hhZG93Q2FzY2FkZURpc3RhbmNlcywgbGlnaHQke2l9X3NoYWRvd0Nhc2NhZGVDb3VudCk7YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93TWF0cml4ID0gYGNhc2NhZGVTaGFkb3dNYXRgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGRTaGFkb3dDb29yZCA9IGdldFNoYWRvd1NhbXBsZUNvb3JkJHtpfSgke3NoYWRvd01hdHJpeH0sIGxpZ2h0JHtpfV9zaGFkb3dQYXJhbXMsIHZQb3NpdGlvblcsIGRMaWdodFBvc1csIGRMaWdodERpclcsIGRMaWdodERpck5vcm1XLCBkVmVydGV4Tm9ybWFsVyk7YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhZGUgc2hhZG93IGF0IGVkZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlID09PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGZhZGVTaGFkb3cobGlnaHQke2l9X3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXMpO2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhZG93Q29vcmRBcmdzID0gYFNIQURPV01BUF9QQVNTKGxpZ2h0JHtpfV9zaGFkb3dNYXApLCBkU2hhZG93Q29vcmQsIGxpZ2h0JHtpfV9zaGFkb3dQYXJhbXNgO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodnNtU2hhZG93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZTTVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0Nvb3JkQXJncyA9IGAke3NoYWRvd0Nvb3JkQXJnc30sICR7ZXZzbUV4cH0sIGRMaWdodERpcldgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwY3NzU2hhZG93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZW51bWJyYVNpemVBcmcgPSBgdmVjMihsaWdodCR7aX1fc2hhZG93U2VhcmNoQXJlYSlgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFNoYXBlICE9PSBMSUdIVFNIQVBFX1BVTkNUVUFMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbnVtYnJhU2l6ZUFyZyA9IGB2ZWMyKGxlbmd0aChsaWdodCR7aX1faGFsZldpZHRoKSwgbGVuZ3RoKGxpZ2h0JHtpfV9oYWxmSGVpZ2h0KSkgKiBsaWdodCR7aX1fc2hhZG93U2VhcmNoQXJlYWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0Nvb3JkQXJncyA9IGAke3NoYWRvd0Nvb3JkQXJnc30sIGxpZ2h0JHtpfV9jYW1lcmFQYXJhbXMsICR7cGVudW1icmFTaXplQXJnfSwgZExpZ2h0RGlyV2A7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9PTU5JKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93UmVhZE1vZGUgPSBgUG9pbnQke3NoYWRvd1JlYWRNb2RlfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwY3NzU2hhZG93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb29yZEFyZ3MgPSBgJHtzaGFkb3dDb29yZEFyZ3N9LCBkTGlnaHREaXJXYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpZ2h0VHlwZSA9PT0gTElHSFRUWVBFX1NQT1QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dSZWFkTW9kZSA9IGBTcG90JHtzaGFkb3dSZWFkTW9kZX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGZsb2F0IHNoYWRvdyR7aX0gPSBnZXRTaGFkb3cke3NoYWRvd1JlYWRNb2RlfSgke3NoYWRvd0Nvb3JkQXJnc30pO2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgICBkQXR0ZW4gKj0gbWl4KDEuMCwgc2hhZG93JHtpfSwgbGlnaHQke2l9X3NoYWRvd0ludGVuc2l0eSk7YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGlnaHRTaGFwZSAhPT0gTElHSFRTSEFQRV9QVU5DVFVBTCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFyZWEgbGlnaHQgLSB0aGV5IGRvIG5vdCBtaXggZGlmZnVzZSBsaWdodGluZyBpbnRvIHNwZWN1bGFyIGF0dGVudWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbnNlcnZlRW5lcmd5ICYmIG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGREaWZmdXNlTGlnaHQgKz0gKChkQXR0ZW5EICogZEF0dGVuKSAqIGxpZ2h0XCIgKyBpICsgXCJfY29sb3JcIiArICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArIFwiKSAqICgxLjAgLSBkTFRDU3BlY0ZyZXMpO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGREaWZmdXNlTGlnaHQgKz0gKGRBdHRlbkQgKiBkQXR0ZW4pICogbGlnaHRcIiArIGkgKyBcIl9jb2xvclwiICsgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjNcIiA6IFwiXCIpICsgXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBwdW5jdHVhbCBsaWdodFxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQXJlYUxpZ2h0cyAmJiBvcHRpb25zLmNvbnNlcnZlRW5lcmd5ICYmIG9wdGlvbnMudXNlU3BlY3VsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGREaWZmdXNlTGlnaHQgKz0gKGRBdHRlbiAqIGxpZ2h0XCIgKyBpICsgXCJfY29sb3JcIiArICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArIFwiKSAqICgxLjAgLSBsaXRTaGFkZXJBcmdzLnNwZWN1bGFyaXR5KTtcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkRGlmZnVzZUxpZ2h0ICs9IGRBdHRlbiAqIGxpZ2h0XCIgKyBpICsgXCJfY29sb3JcIiArICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArIFwiO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGRIYWxmRGlyVyA9IG5vcm1hbGl6ZSgtZExpZ2h0RGlyTm9ybVcgKyBkVmlld0RpclcpO1wiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBzcGVjdWxhciAvIGNsZWFyIGNvYXRcbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuYWZmZWN0U3BlY3VsYXJpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0U2hhcGUgIT09IExJR0hUU0hBUEVfUFVOQ1RVQUwpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJlYSBsaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ2xlYXJDb2F0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgICBjY1NwZWN1bGFyTGlnaHQgKz0gY2NMVENTcGVjRnJlcyAqIGdldCR7c2hhcGVTdHJpbmd9TGlnaHRTcGVjdWxhcihsaXRTaGFkZXJBcmdzLmNsZWFyY29hdC53b3JsZE5vcm1hbCwgZFZpZXdEaXJXKSAqIGRBdHRlbiAqIGxpZ2h0JHtpfV9jb2xvcmAgKyAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuM1wiIDogXCJcIikgKyBcIjtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgZFNwZWN1bGFyTGlnaHQgKz0gZExUQ1NwZWNGcmVzICogZ2V0JHtzaGFwZVN0cmluZ31MaWdodFNwZWN1bGFyKGxpdFNoYWRlckFyZ3Mud29ybGROb3JtYWwsIGRWaWV3RGlyVykgKiBkQXR0ZW4gKiBsaWdodCR7aX1fY29sb3JgICsgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjNcIiA6IFwiXCIpICsgXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsY0ZyZXNuZWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWdodFR5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCAmJiBvcHRpb25zLmZyZXNuZWxNb2RlbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxjRnJlc25lbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIExUQyBsaWdodHMgYXJlIHByZXNlbnQsIHNwZWN1bGFyIG11c3QgYmUgYWNjdW11bGF0ZWQgd2l0aCBzcGVjdWxhcml0eSAoc3BlY3VsYXJpdHkgaXMgcHJlIG11bHRpcGxpZWQgYnkgcHVuY3R1YWwgbGlnaHQgZnJlc25lbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUNsZWFyQ29hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgY2NTcGVjdWxhckxpZ2h0ICs9IGdldExpZ2h0U3BlY3VsYXIoZEhhbGZEaXJXLCBjY1JlZmxEaXJXLCBsaXRTaGFkZXJBcmdzLmNsZWFyY29hdC53b3JsZE5vcm1hbCwgZFZpZXdEaXJXLCBkTGlnaHREaXJOb3JtVywgbGl0U2hhZGVyQXJncy5jbGVhcmNvYXQuZ2xvc3MsIGRUQk4pICogZEF0dGVuICogbGlnaHQke2l9X2NvbG9yYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1c2VzQ29va2llTm93ID8gXCIgKiBkQXR0ZW4zXCIgOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjYWxjRnJlc25lbCA/IFwiICogZ2V0RnJlc25lbENDKGRvdChkVmlld0RpclcsIGRIYWxmRGlyVykpO1wiIDogXCI7XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNoZWVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoYCAgICBzU3BlY3VsYXJMaWdodCArPSBnZXRMaWdodFNwZWN1bGFyU2hlZW4oZEhhbGZEaXJXLCBsaXRTaGFkZXJBcmdzLndvcmxkTm9ybWFsLCBkVmlld0RpclcsIGRMaWdodERpck5vcm1XLCBsaXRTaGFkZXJBcmdzLnNoZWVuLmdsb3NzKSAqIGRBdHRlbiAqIGxpZ2h0JHtpfV9jb2xvcmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodXNlc0Nvb2tpZU5vdyA/IFwiICogZEF0dGVuMztcIiA6IFwiO1wiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VTcGVjdWxhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGAgICAgZFNwZWN1bGFyTGlnaHQgKz0gZ2V0TGlnaHRTcGVjdWxhcihkSGFsZkRpclcsIGRSZWZsRGlyVywgbGl0U2hhZGVyQXJncy53b3JsZE5vcm1hbCwgZFZpZXdEaXJXLCBkTGlnaHREaXJOb3JtVywgbGl0U2hhZGVyQXJncy5nbG9zcywgZFRCTikgKiBkQXR0ZW4gKiBsaWdodCR7aX1fY29sb3JgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHVzZXNDb29raWVOb3cgPyBcIiAqIGRBdHRlbjNcIiA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhbGNGcmVzbmVsID8gYCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZ2V0RnJlc25lbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3QoZFZpZXdEaXJXLCBkSGFsZkRpclcpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLmdsb3NzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLnNwZWN1bGFyaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChMSVRfSVJJREVTQ0VOQ0UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBpcmlkZXNjZW5jZUZyZXNuZWwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdFNoYWRlckFyZ3MuaXJpZGVzY2VuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtgIDogYCogbGl0U2hhZGVyQXJncy5zcGVjdWxhcml0eTtgKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGlnaHRUeXBlICE9PSBMSUdIVFRZUEVfRElSRUNUSU9OQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgfVwiKTsgLy8gQlJBTkNIIEVORFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY2x1c3RlcmVkIGxpZ2h0aW5nXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQgJiYgdGhpcy5saWdodGluZykge1xuICAgICAgICAgICAgICAgIHVzZXNMaW5lYXJGYWxsb2ZmID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB1c2VzSW52U3F1YXJlZEZhbGxvZmYgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGhhc1BvaW50TGlnaHRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGFkZENsdXN0ZXJlZExpZ2h0cyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLndvcmxkTm9ybWFsLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkVmlld0RpclcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRSZWZsRGlyVyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoTElUX0NMRUFSQ09BVClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjY1JlZmxEaXJXLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjZW5kaWZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLmdsb3NzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLnNwZWN1bGFyaXR5LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkVmVydGV4Tm9ybWFsVywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFRCTiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKExJVF9JUklERVNDRU5DRSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcmlkZXNjZW5jZUZyZXNuZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdFNoYWRlckFyZ3MuY2xlYXJjb2F0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLnNoZWVuLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLmlyaWRlc2NlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO2ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzQXJlYUxpZ2h0cykge1xuICAgICAgICAgICAgICAgIC8vIHNwZWN1bGFyIGhhcyB0byBiZSBhY2N1bXVsYXRlZCBkaWZmZXJlbnRseSBpZiB3ZSB3YW50IGFyZWEgbGlnaHRzIHRvIGxvb2sgY29ycmVjdFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUNsZWFyQ29hdCkge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBsaXRTaGFkZXJBcmdzLmNsZWFyY29hdC5zcGVjdWxhcml0eSA9IDEuMDtcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIGxpdFNoYWRlckFyZ3Muc3BlY3VsYXJpdHkgPSB2ZWMzKDEpO1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZVJlZnJhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChgICAgIGFkZFJlZnJhY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLndvcmxkTm9ybWFsLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRWaWV3RGlyVywgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLnRoaWNrbmVzcywgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRTaGFkZXJBcmdzLmdsb3NzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdFNoYWRlckFyZ3Muc3BlY3VsYXJpdHksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy5hbGJlZG8sIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy50cmFuc21pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoTElUX0lSSURFU0NFTkNFKVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBpcmlkZXNjZW5jZUZyZXNuZWwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGl0U2hhZGVyQXJncy5pcmlkZXNjZW5jZVxuICAgICAgICAgICAgICAgICAgICAjZW5kaWZcbiAgICAgICAgICAgICAgICAgICAgKTtgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VBbykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMub2NjbHVkZURpcmVjdCkge1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIG9jY2x1ZGVEaWZmdXNlKGxpdFNoYWRlckFyZ3MuYW8pO1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9jY2x1ZGVTcGVjdWxhciA9PT0gU1BFQ09DQ19BTyB8fCBvcHRpb25zLm9jY2x1ZGVTcGVjdWxhciA9PT0gU1BFQ09DQ19HTE9TU0RFUEVOREVOVCkge1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiICAgIG9jY2x1ZGVTcGVjdWxhcihsaXRTaGFkZXJBcmdzLmdsb3NzLCBsaXRTaGFkZXJBcmdzLmFvLCBsaXRTaGFkZXJBcmdzLndvcmxkTm9ybWFsLCBkVmlld0RpclcpO1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnVzZVNwZWN1bGFyaXR5RmFjdG9yKSB7XG4gICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcIiAgICBkU3BlY3VsYXJMaWdodCAqPSBsaXRTaGFkZXJBcmdzLnNwZWN1bGFyaXR5RmFjdG9yO1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLm9wYWNpdHlGYWRlc1NwZWN1bGFyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYmxlbmRUeXBlID09PSBCTEVORF9OT1JNQUwgfHwgb3B0aW9ucy5ibGVuZFR5cGUgPT09IEJMRU5EX1BSRU1VTFRJUExJRUQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcImZsb2F0IHNwZWNMdW0gPSBkb3QoKGRTcGVjdWxhckxpZ2h0ICsgZFJlZmxlY3Rpb24ucmdiICogZFJlZmxlY3Rpb24uYSksIHZlYzMoIDAuMjEyNiwgMC43MTUyLCAwLjA3MjIgKSk7XCIpO1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwiI2lmZGVmIExJVF9DTEVBUkNPQVRcXG4gc3BlY0x1bSArPSBkb3QoY2NTcGVjdWxhckxpZ2h0ICogbGl0U2hhZGVyQXJncy5jbGVhcmNvYXQuc3BlY3VsYXJpdHkgKyBjY1JlZmxlY3Rpb24ucmdiICogbGl0U2hhZGVyQXJncy5jbGVhcmNvYXQuc3BlY3VsYXJpdHksIHZlYzMoIDAuMjEyNiwgMC43MTUyLCAwLjA3MjIgKSk7XFxuI2VuZGlmXCIpO1xuICAgICAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKFwibGl0U2hhZGVyQXJncy5vcGFjaXR5ID0gY2xhbXAobGl0U2hhZGVyQXJncy5vcGFjaXR5ICsgZ2FtbWFDb3JyZWN0SW5wdXQoc3BlY0x1bSksIDAuMCwgMS4wKTtcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiYWNrZW5kLmFwcGVuZChcImxpdFNoYWRlckFyZ3Mub3BhY2l0eSAqPSBtYXRlcmlhbF9hbHBoYUZhZGU7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYmFja2VuZC5hcHBlbmQoY2h1bmtzLmVuZFBTKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYmxlbmRUeXBlID09PSBCTEVORF9OT1JNQUwgfHwgb3B0aW9ucy5ibGVuZFR5cGUgPT09IEJMRU5EX0FERElUSVZFQUxQSEEgfHwgb3B0aW9ucy5hbHBoYVRvQ292ZXJhZ2UpIHtcbiAgICAgICAgICAgIGJhY2tlbmQuYXBwZW5kKGNodW5rcy5vdXRwdXRBbHBoYVBTKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmJsZW5kVHlwZSA9PT0gQkxFTkRfUFJFTVVMVElQTElFRCkge1xuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoY2h1bmtzLm91dHB1dEFscGhhUHJlbXVsUFMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoY2h1bmtzLm91dHB1dEFscGhhT3BhcXVlUFMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlTXNkZikge1xuICAgICAgICAgICAgYmFja2VuZC5hcHBlbmQoXCIgICAgZ2xfRnJhZ0NvbG9yID0gYXBwbHlNc2RmKGdsX0ZyYWdDb2xvcik7XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYmFja2VuZC5hcHBlbmQoY2h1bmtzLm91dHB1dFBTKTtcbiAgICAgICAgYmFja2VuZC5hcHBlbmQoY2h1bmtzLmRlYnVnT3V0cHV0UFMpO1xuXG4gICAgICAgIGlmIChoYXNQb2ludExpZ2h0cykge1xuICAgICAgICAgICAgZnVuYy5wcmVwZW5kKGNodW5rcy5saWdodERpclBvaW50UFMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VzTGluZWFyRmFsbG9mZikge1xuICAgICAgICAgICAgZnVuYy5wcmVwZW5kKGNodW5rcy5mYWxsb2ZmTGluZWFyUFMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VzSW52U3F1YXJlZEZhbGxvZmYpIHtcbiAgICAgICAgICAgIGZ1bmMucHJlcGVuZChjaHVua3MuZmFsbG9mZkludlNxdWFyZWRQUyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXNTcG90KSB7XG4gICAgICAgICAgICBmdW5jLnByZXBlbmQoY2h1bmtzLnNwb3RQUyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXNDb29raWUgJiYgIW9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICAvLyBub24tY2x1c3RlcmVkIGxpZ2h0cyBjb29raWUgY29kZVxuICAgICAgICAgICAgZnVuYy5wcmVwZW5kKGNodW5rcy5jb29raWVQUyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0cnVjdENvZGUgPSBcIlwiO1xuXG4gICAgICAgIGNvbnN0IGJhY2tlbmRDb2RlID0gYHZvaWQgZXZhbHVhdGVCYWNrZW5kKExpdFNoYWRlckFyZ3VtZW50cyBsaXRTaGFkZXJBcmdzKSB7XFxuJHtiYWNrZW5kLmNvZGV9XFxufWA7XG4gICAgICAgIGZ1bmMuYXBwZW5kKGJhY2tlbmRDb2RlKTtcblxuICAgICAgICBjb2RlLmFwcGVuZChjaHVua3MuZGVidWdQcm9jZXNzRnJvbnRlbmRQUyk7XG5cbiAgICAgICAgY29kZS5hcHBlbmQoXCIgICAgZXZhbHVhdGVCYWNrZW5kKGxpdFNoYWRlckFyZ3MpO1wiKTtcblxuICAgICAgICBjb2RlLmFwcGVuZChlbmQoKSk7XG5cbiAgICAgICAgY29uc3QgbWVyZ2VkQ29kZSA9IGRlY2wuY29kZSArIGZ1bmMuY29kZSArIGNvZGUuY29kZTtcblxuICAgICAgICAvLyBMaWdodCBpbnB1dHNcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkVEJOXCIpKSBzdHJ1Y3RDb2RlICs9IFwibWF0MyBkVEJOO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRWZXJ0ZXhOb3JtYWxXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkVmVydGV4Tm9ybWFsVztcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkVGFuZ2VudFdcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRUYW5nZW50VztcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkQmlub3JtYWxXXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkQmlub3JtYWxXO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRWaWV3RGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZFZpZXdEaXJXO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRSZWZsRGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZFJlZmxEaXJXO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRIYWxmRGlyV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZEhhbGZEaXJXO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImNjUmVmbERpcldcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGNjUmVmbERpclc7XFxuXCI7XG5cbiAgICAgICAgLy8gUGVyLWxpZ2h0IHRlbXBvcmFyaWVzXG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZExpZ2h0RGlyTm9ybVdcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRMaWdodERpck5vcm1XO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRMaWdodERpcldcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRMaWdodERpclc7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZExpZ2h0UG9zV1wiKSkgc3RydWN0Q29kZSArPSBcInZlYzMgZExpZ2h0UG9zVztcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkU2hhZG93Q29vcmRcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRTaGFkb3dDb29yZDtcXG5cIjtcblxuICAgICAgICAvLyBPdXRwdXRzXG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZFJlZmxlY3Rpb25cIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWM0IGRSZWZsZWN0aW9uO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImREaWZmdXNlTGlnaHRcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGREaWZmdXNlTGlnaHQ7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiZFNwZWN1bGFyTGlnaHRcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIGRTcGVjdWxhckxpZ2h0O1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRBdHRlblwiKSkgc3RydWN0Q29kZSArPSBcImZsb2F0IGRBdHRlbjtcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkQXR0ZW5EXCIpKSBzdHJ1Y3RDb2RlICs9IFwiZmxvYXQgZEF0dGVuRDtcXG5cIjsgLy8gc2VwYXJhdGUgZGlmZnVzZSBhdHRlbnVhdGlvbiBmb3Igbm9uLXB1bmN0dWFsIGxpZ2h0IHNvdXJjZXNcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJkQXR0ZW4zXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBkQXR0ZW4zO1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcImRNc2RmXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjNCBkTXNkZjtcXG5cIjtcbiAgICAgICAgaWYgKG1lcmdlZENvZGUuaW5jbHVkZXMoXCJjY0ZyZXNuZWxcIikpIHN0cnVjdENvZGUgKz0gXCJmbG9hdCBjY0ZyZXNuZWw7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiY2NSZWZsZWN0aW9uXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBjY1JlZmxlY3Rpb247XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiY2NTcGVjdWxhckxpZ2h0XCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBjY1NwZWN1bGFyTGlnaHQ7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwiY2NTcGVjdWxhcml0eU5vRnJlc1wiKSkgc3RydWN0Q29kZSArPSBcImZsb2F0IGNjU3BlY3VsYXJpdHlOb0ZyZXM7XFxuXCI7XG4gICAgICAgIGlmIChtZXJnZWRDb2RlLmluY2x1ZGVzKFwic1NwZWN1bGFyTGlnaHRcIikpIHN0cnVjdENvZGUgKz0gXCJ2ZWMzIHNTcGVjdWxhckxpZ2h0O1xcblwiO1xuICAgICAgICBpZiAobWVyZ2VkQ29kZS5pbmNsdWRlcyhcInNSZWZsZWN0aW9uXCIpKSBzdHJ1Y3RDb2RlICs9IFwidmVjMyBzUmVmbGVjdGlvbjtcXG5cIjtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9mc0dldEJlZ2luQ29kZSgpICtcbiAgICAgICAgICAgIHRoaXMudmFyeWluZ3MgK1xuICAgICAgICAgICAgdGhpcy52YXJ5aW5nRGVmaW5lcyArXG4gICAgICAgICAgICB0aGlzLl9mc0dldEJhc2VDb2RlKCkgK1xuICAgICAgICAgICAgKG9wdGlvbnMuZGV0YWlsTW9kZXMgPyBjaHVua3MuZGV0YWlsTW9kZXNQUyA6IFwiXCIpICtcbiAgICAgICAgICAgIHN0cnVjdENvZGUgK1xuICAgICAgICAgICAgdGhpcy5mcm9udGVuZERlY2wgK1xuICAgICAgICAgICAgbWVyZ2VkQ29kZTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdlbmVyYXRlRnJhZ21lbnRTaGFkZXIoZnJvbnRlbmREZWNsLCBmcm9udGVuZENvZGUsIGZyb250ZW5kRnVuYywgbGlnaHRpbmdVdikge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIHRoaXMuZnJvbnRlbmREZWNsID0gZnJvbnRlbmREZWNsO1xuICAgICAgICB0aGlzLmZyb250ZW5kQ29kZSA9IGZyb250ZW5kQ29kZTtcbiAgICAgICAgdGhpcy5mcm9udGVuZEZ1bmMgPSBmcm9udGVuZEZ1bmM7XG4gICAgICAgIHRoaXMubGlnaHRpbmdVdiA9IGxpZ2h0aW5nVXY7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMucGFzcyA9PT0gU0hBREVSX1BJQ0spIHtcbiAgICAgICAgICAgIHRoaXMuZnNoYWRlciA9IHRoaXMuX2ZzR2V0UGlja1Bhc3NDb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wYXNzID09PSBTSEFERVJfREVQVEgpIHtcbiAgICAgICAgICAgIHRoaXMuZnNoYWRlciA9IHRoaXMuX2ZzR2V0RGVwdGhQYXNzQ29kZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2hhZG93UGFzcykge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXRTaGFkb3dQYXNzQ29kZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuY3VzdG9tRnJhZ21lbnRTaGFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZnNoYWRlciA9IHRoaXMuX2ZzR2V0QmVnaW5Db2RlKCkgKyBvcHRpb25zLmN1c3RvbUZyYWdtZW50U2hhZGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mc2hhZGVyID0gdGhpcy5fZnNHZXRMaXRQYXNzQ29kZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0RGVmaW5pdGlvbigpIHtcblxuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gU2hhZGVyVXRpbHMuY3JlYXRlRGVmaW5pdGlvbih0aGlzLmRldmljZSwge1xuICAgICAgICAgICAgbmFtZTogJ0xpdFNoYWRlcicsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0aGlzLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICB2ZXJ0ZXhDb2RlOiB0aGlzLnZzaGFkZXIsXG4gICAgICAgICAgICBmcmFnbWVudENvZGU6IHRoaXMuZnNoYWRlclxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmlzRm9yd2FyZFBhc3MpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24udGFnID0gU0hBREVSVEFHX01BVEVSSUFMO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfVxufVxuXG5leHBvcnQgeyBMaXRTaGFkZXIgfTtcbiJdLCJuYW1lcyI6WyJidWlsdGluQXR0cmlidXRlcyIsInZlcnRleF9ub3JtYWwiLCJTRU1BTlRJQ19OT1JNQUwiLCJ2ZXJ0ZXhfdGFuZ2VudCIsIlNFTUFOVElDX1RBTkdFTlQiLCJ2ZXJ0ZXhfdGV4Q29vcmQwIiwiU0VNQU5USUNfVEVYQ09PUkQwIiwidmVydGV4X3RleENvb3JkMSIsIlNFTUFOVElDX1RFWENPT1JEMSIsInZlcnRleF9jb2xvciIsIlNFTUFOVElDX0NPTE9SIiwidmVydGV4X2JvbmVXZWlnaHRzIiwiU0VNQU5USUNfQkxFTkRXRUlHSFQiLCJ2ZXJ0ZXhfYm9uZUluZGljZXMiLCJTRU1BTlRJQ19CTEVORElORElDRVMiLCJidWlsdGluVmFyeWluZ3MiLCJ2VmVydGV4Q29sb3IiLCJ2UG9zaXRpb25XIiwidk5vcm1hbFYiLCJ2Tm9ybWFsVyIsInZUYW5nZW50VyIsInZCaW5vcm1hbFciLCJ2T2JqZWN0U3BhY2VVcFciLCJ2VXYwIiwidlV2MSIsIkxpdFNoYWRlciIsImNvbnN0cnVjdG9yIiwiZGV2aWNlIiwib3B0aW9ucyIsImF0dHJpYnV0ZXMiLCJ2ZXJ0ZXhfcG9zaXRpb24iLCJTRU1BTlRJQ19QT1NJVElPTiIsImNodW5rcyIsInVzZXJDaHVua3MiLCJ2YWxpZGF0ZVVzZXJDaHVua3MiLCJjaHVua05hbWUiLCJzaGFkZXJDaHVua3MiLCJoYXNPd25Qcm9wZXJ0eSIsImNodW5rIiwiYSIsImluZGV4T2YiLCJzaGFkZXJQYXNzSW5mbyIsIlNoYWRlclBhc3MiLCJnZXQiLCJnZXRCeUluZGV4IiwicGFzcyIsInNoYWRvd1Bhc3MiLCJpc1NoYWRvdyIsImxpZ2h0aW5nIiwibGlnaHRzIiwibGVuZ3RoIiwiZGlyTGlnaHRNYXBFbmFibGVkIiwiY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkIiwicmVmbGVjdGlvbnMiLCJyZWZsZWN0aW9uU291cmNlIiwibmVlZHNOb3JtYWwiLCJ1c2VTcGVjdWxhciIsImFtYmllbnRTSCIsImhlaWdodE1hcEVuYWJsZWQiLCJlbmFibGVHR1hTcGVjdWxhciIsImNsZWFyQ29hdE5vcm1hbE1hcEVuYWJsZWQiLCJuZWVkc1NjZW5lQ29sb3IiLCJ1c2VEeW5hbWljUmVmcmFjdGlvbiIsIm5lZWRzU2NyZWVuU2l6ZSIsIm5lZWRzVHJhbnNmb3JtcyIsInZhcnlpbmdzIiwidmFyeWluZ0RlZmluZXMiLCJ2c2hhZGVyIiwiZnJvbnRlbmREZWNsIiwiZnJvbnRlbmRDb2RlIiwiZnJvbnRlbmRGdW5jIiwibGlnaHRpbmdVdiIsImRlZmluZXMiLCJmc2hhZGVyIiwiX3ZzQWRkQmFzZUNvZGUiLCJjb2RlIiwiYmFzZVZTIiwibmluZVNsaWNlZE1vZGUiLCJTUFJJVEVfUkVOREVSTU9ERV9TTElDRUQiLCJTUFJJVEVfUkVOREVSTU9ERV9USUxFRCIsImJhc2VOaW5lU2xpY2VkVlMiLCJfdnNBZGRUcmFuc2Zvcm1Db2RlIiwidHJhbnNmb3JtVlMiLCJfc2V0TWFwVHJhbnNmb3JtIiwiY29kZXMiLCJuYW1lIiwiaWQiLCJ1diIsImNoZWNrSWQiLCJ2YXJOYW1lIiwiX2ZzR2V0QmFzZUNvZGUiLCJyZXN1bHQiLCJiYXNlUFMiLCJiYXNlTmluZVNsaWNlZFBTIiwiYmFzZU5pbmVTbGljZWRUaWxlZFBTIiwiX2ZzR2V0U3RhcnRDb2RlIiwic3RhcnRQUyIsInN0YXJ0TmluZVNsaWNlZFBTIiwic3RhcnROaW5lU2xpY2VkVGlsZWRQUyIsIl9nZXRMaWdodFNvdXJjZVNoYXBlU3RyaW5nIiwic2hhcGUiLCJMSUdIVFNIQVBFX1JFQ1QiLCJMSUdIVFNIQVBFX0RJU0siLCJMSUdIVFNIQVBFX1NQSEVSRSIsImdlbmVyYXRlVmVydGV4U2hhZGVyIiwidXNlVXYiLCJ1c2VVbm1vZGlmaWVkVXYiLCJtYXBUcmFuc2Zvcm1zIiwiY29kZUJvZHkiLCJTSEFERVJfREVQVEgiLCJ1c2VJbnN0YW5jaW5nIiwiaW5zdGFuY2VfbGluZTEiLCJTRU1BTlRJQ19BVFRSMTIiLCJpbnN0YW5jZV9saW5lMiIsIlNFTUFOVElDX0FUVFIxMyIsImluc3RhbmNlX2xpbmUzIiwiU0VNQU5USUNfQVRUUjE0IiwiaW5zdGFuY2VfbGluZTQiLCJTRU1BTlRJQ19BVFRSMTUiLCJpbnN0YW5jaW5nVlMiLCJmcmFnbWVudFVuaWZvcm1zQ291bnQiLCJ2aWV3Tm9ybWFsVlMiLCJoYXNUYW5nZW50cyIsIm5vcm1hbE1hcEVuYWJsZWQiLCJ0YW5nZW50Qmlub3JtYWxWUyIsImV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMiLCJtYXhVdlNldHMiLCJpIiwiZm9yRWFjaCIsIm1hcFRyYW5zZm9ybSIsInZlcnRleENvbG9ycyIsInVzZU1zZGYiLCJtc2RmVGV4dEF0dHJpYnV0ZSIsInZlcnRleF9vdXRsaW5lUGFyYW1ldGVycyIsIlNFTUFOVElDX0FUVFI4IiwidmVydGV4X3NoYWRvd1BhcmFtZXRlcnMiLCJTRU1BTlRJQ19BVFRSOSIsIm1zZGZWUyIsInVzZU1vcnBoUG9zaXRpb24iLCJ1c2VNb3JwaE5vcm1hbCIsInVzZU1vcnBoVGV4dHVyZUJhc2VkIiwibW9ycGhfdmVydGV4X2lkIiwibW9ycGhJZFR5cGUiLCJpc1dlYkdQVSIsIm1vcnBoX3BvczAiLCJtb3JwaF9wb3MxIiwibW9ycGhfcG9zMiIsIlNFTUFOVElDX0FUVFIxMCIsIm1vcnBoX3BvczMiLCJTRU1BTlRJQ19BVFRSMTEiLCJtb3JwaF9ucm0wIiwibW9ycGhfbnJtMSIsIm1vcnBoX25ybTIiLCJtb3JwaF9ucm0zIiwibW9ycGhfcG9zNCIsIm1vcnBoX3BvczUiLCJtb3JwaF9wb3M2IiwibW9ycGhfcG9zNyIsIm1vcnBoX25ybTQiLCJtb3JwaF9ucm01IiwibW9ycGhfbnJtNiIsIm1vcnBoX25ybTciLCJza2luIiwic2tpbkNvZGUiLCJzY3JlZW5TcGFjZSIsInBpeGVsU25hcCIsIm5vcm1hbFZTIiwic3RhcnRWUyIsImVuZFZTIiwiT2JqZWN0Iiwia2V5cyIsInYiLCJ0b1VwcGVyQ2FzZSIsInNoYWRlclBhc3NEZWZpbmVzIiwic2hhZGVyRGVmaW5lcyIsIl9mc0dldEJlZ2luQ29kZSIsIl9mc0dldFBpY2tQYXNzQ29kZSIsImJlZ2luIiwiZW5kIiwiX2ZzR2V0RGVwdGhQYXNzQ29kZSIsInBhY2tEZXB0aFBTIiwiX2ZzR2V0U2hhZG93UGFzc0NvZGUiLCJsaWdodFR5cGUiLCJzaGFkb3dUeXBlIiwid2ViZ2wyIiwiU0hBRE9XX1ZTTTMyIiwidGV4dHVyZUZsb2F0SGlnaFByZWNpc2lvbiIsIlNIQURPV19WU00xNiIsIkxJR0hUVFlQRV9ESVJFQ1RJT05BTCIsInVzZVBhY2tlZERlcHRoIiwic3VwcG9ydHNEZXB0aFNoYWRvdyIsIlNIQURPV19QQ0YxIiwiU0hBRE9XX1BDRjMiLCJTSEFET1dfUENTUyIsIkxJR0hUVFlQRV9PTU5JIiwiU0hBRE9XX1ZTTTgiLCJsaW5lYXJpemVEZXB0aFBTIiwiaXNWc20iLCJhcHBseVNsb3BlU2NhbGVCaWFzIiwiY3VzdG9tRGVwdGgiLCJzdG9yZUVWU01QUyIsIl9mc0dldExpdFBhc3NDb2RlIiwiZGVjbCIsIkNodW5rQnVpbGRlciIsImZ1bmMiLCJiYWNrZW5kIiwib3BhY2l0eUZhZGVzU3BlY3VsYXIiLCJhcHBlbmQiLCJwdXNoIiwidXNlQ2xlYXJDb2F0IiwiZnJlc25lbE1vZGVsIiwiY29uc2VydmVFbmVyZ3kiLCJ1c2VTaGVlbiIsInVzZUlyaWRlc2NlbmNlIiwic2hhZG93VHlwZVVzZWQiLCJudW1TaGFkb3dMaWdodHMiLCJzaGFkb3dlZERpcmVjdGlvbmFsTGlnaHRVc2VkIiwidXNlVnNtIiwidXNlUGNzcyIsImhhc0FyZWFMaWdodHMiLCJzb21lIiwibGlnaHQiLCJfc2hhcGUiLCJMSUdIVFNIQVBFX1BVTkNUVUFMIiwiY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCIsImFyZWFMdXRzUHJlY2lzaW9uIiwiYXJlYUxpZ2h0THV0Rm9ybWF0IiwiUElYRUxGT1JNQVRfUkdCQTgiLCJfdHlwZSIsImxpZ2h0U2hhcGUiLCJfc2hhZG93VHlwZSIsImNhc3RTaGFkb3dzIiwibm9TaGFkb3ciLCJMSUdIVFRZUEVfU1BPVCIsIl9pc1BjZiIsIl9pc1ZzbSIsIl9jb29raWUiLCJfY3ViZW1hcCIsIl9jb29raWVUcmFuc2Zvcm0iLCJoYXNUQk4iLCJmYXN0VGJuIiwiVEJOZmFzdFBTIiwiVEJOUFMiLCJUQk5kZXJpdmF0aXZlUFMiLCJyZXBsYWNlIiwiVEJOT2JqZWN0U3BhY2VQUyIsInNwaGVyaWNhbFBTIiwiZGVjb2RlUFMiLCJnYW1tYUNvZGUiLCJnYW1tYSIsInRvbmVtYXBDb2RlIiwidG9uZU1hcCIsImZvZ0NvZGUiLCJmb2ciLCJ1c2VDdWJlTWFwUm90YXRpb24iLCJjdWJlTWFwUm90YXRlUFMiLCJjdWJlTWFwUHJvamVjdGlvbiIsImN1YmVNYXBQcm9qZWN0Qm94UFMiLCJjdWJlTWFwUHJvamVjdE5vbmVQUyIsInNreWJveEludGVuc2l0eSIsImVudk11bHRpcGx5UFMiLCJlbnZDb25zdFBTIiwidXNlTWV0YWxuZXNzIiwibWV0YWxuZXNzTW9kdWxhdGVQUyIsIkZSRVNORUxfU0NITElDSyIsImZyZXNuZWxTY2hsaWNrUFMiLCJpcmlkZXNjZW5jZURpZmZyYWN0aW9uUFMiLCJ1c2VBbyIsImFvTWFwRW5hYmxlZCIsInVzZUFvVmVydGV4Q29sb3JzIiwiYW9EaWZmdXNlT2NjUFMiLCJvY2NsdWRlU3BlY3VsYXIiLCJTUEVDT0NDX0FPIiwib2NjbHVkZVNwZWN1bGFyRmxvYXQiLCJhb1NwZWNPY2NTaW1wbGVQUyIsImFvU3BlY09jY0NvbnN0U2ltcGxlUFMiLCJTUEVDT0NDX0dMT1NTREVQRU5ERU5UIiwiYW9TcGVjT2NjUFMiLCJhb1NwZWNPY2NDb25zdFBTIiwiZml4U2VhbXMiLCJmaXhDdWJlbWFwU2VhbXNTdHJldGNoUFMiLCJmaXhDdWJlbWFwU2VhbXNOb25lUFMiLCJlbnZBdGxhc1BTIiwicmVmbGVjdGlvbkVudkhRUFMiLCJDaHVua1V0aWxzIiwiZGVjb2RlRnVuYyIsInJlZmxlY3Rpb25DdWJlbWFwRW5jb2RpbmciLCJyZWZsZWN0aW9uRW5jb2RpbmciLCJyZWZsZWN0aW9uRW52UFMiLCJyZWZsZWN0aW9uQ3ViZVBTIiwic2NvZGUiLCJyZWZsZWN0aW9uU3BoZXJlUFMiLCJyZWZsZWN0aW9uU3BoZXJlTG93UFMiLCJyZWZsZWN0aW9uQ0NQUyIsInJlZmxlY3Rpb25TaGVlblBTIiwidXNlUmVmcmFjdGlvbiIsInJlZnJhY3Rpb25EeW5hbWljUFMiLCJyZWZyYWN0aW9uQ3ViZVBTIiwibGlnaHRTaGVlblBTIiwiY2x1c3RlcmVkTGlnaHRVdGlsc1BTIiwiY2x1c3RlcmVkTGlnaHRpbmdDb29raWVzRW5hYmxlZCIsImNsdXN0ZXJlZExpZ2h0Q29va2llc1BTIiwiY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dzRW5hYmxlZCIsIlNIQURPV19QQ0Y1Iiwic2hhZG93Q2FzY2FkZXNQUyIsInNoYWRvd1N0YW5kYXJkUFMiLCJzaGFkb3dTdGFuZGFyZEdMMlBTIiwic2hhZG93VlNNX2NvbW1vblBTIiwic2hhZG93VlNNOFBTIiwiZXh0VGV4dHVyZUhhbGZGbG9hdExpbmVhciIsInNoYWRvd0VWU01QUyIsInNoYWRvd0VWU01uUFMiLCJleHRUZXh0dXJlRmxvYXRMaW5lYXIiLCJzaGFkb3dQQ1NTUFMiLCJiaWFzQ29uc3RQUyIsImxpZ2h0RGlmZnVzZUxhbWJlcnRQUyIsImx0Y1BTIiwidXNlT2xkQW1iaWVudCIsInNoYWRpbmdNb2RlbCIsIlNQRUNVTEFSX1BIT05HIiwibGlnaHRTcGVjdWxhclBob25nUFMiLCJsaWdodFNwZWN1bGFyQW5pc29HR1hQUyIsImxpZ2h0U3BlY3VsYXJCbGlublBTIiwiZGlmZnVzZU1hcEVuYWJsZWQiLCJjb21iaW5lUFMiLCJsaWdodE1hcEVuYWJsZWQiLCJ1c2VMaWdodE1hcFZlcnRleENvbG9ycyIsImxpZ2h0bWFwRGlyQWRkUFMiLCJsaWdodG1hcEFkZFBTIiwiYWRkQW1iaWVudCIsImxpZ2h0TWFwV2l0aG91dEFtYmllbnQiLCJhbWJpZW50U291cmNlIiwiYW1iaWVudFNIUFMiLCJhbWJpZW50RW52UFMiLCJhbWJpZW50RW5jb2RpbmciLCJhbWJpZW50Q29uc3RhbnRQUyIsInVzZUFtYmllbnRUaW50IiwibXNkZlBTIiwidmlld0RpclBTIiwicmVmbERpckFuaXNvUFMiLCJyZWZsRGlyUFMiLCJoYXNQb2ludExpZ2h0cyIsInVzZXNMaW5lYXJGYWxsb2ZmIiwidXNlc0ludlNxdWFyZWRGYWxsb2ZmIiwidXNlc1Nwb3QiLCJ1c2VzQ29va2llIiwidXNlc0Nvb2tpZU5vdyIsImZsb2F0VW5wYWNraW5nUFMiLCJsaWdodE1hc2tEeW5hbWljIiwic2hhZG93VHlwZVRvU3RyaW5nIiwiY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dUeXBlIiwiTGlnaHRzQnVmZmVyIiwiY2x1c3RlcmVkTGlnaHRTaGFkb3dzUFMiLCJjbHVzdGVyZWRMaWdodFBTIiwidHdvU2lkZWRMaWdodGluZyIsInNlcGFyYXRlQW1iaWVudCIsIm9jY2x1ZGVEaXJlY3QiLCJ1c2VTcGVjdWxhcml0eUZhY3RvciIsInNoYXBlU3RyaW5nIiwiX2Nvb2tpZUZhbGxvZmYiLCJfY29va2llQ2hhbm5lbCIsIl9mYWxsb2ZmTW9kZSIsIkxJR0hURkFMTE9GRl9MSU5FQVIiLCJwY3NzU2hhZG93cyIsInZzbVNoYWRvd3MiLCJwY2ZTaGFkb3dzIiwic2hhZG93UmVhZE1vZGUiLCJldnNtRXhwIiwiX25vcm1hbE9mZnNldEJpYXMiLCJjb29yZENvZGUiLCJzaGFkb3dTYW1wbGVDb29yZFBTIiwic2hhZG93TWF0cml4IiwibnVtQ2FzY2FkZXMiLCJzaGFkb3dDb29yZEFyZ3MiLCJwZW51bWJyYVNpemVBcmciLCJhZmZlY3RTcGVjdWxhcml0eSIsImNhbGNGcmVzbmVsIiwiYmxlbmRUeXBlIiwiQkxFTkRfTk9STUFMIiwiQkxFTkRfUFJFTVVMVElQTElFRCIsImVuZFBTIiwiQkxFTkRfQURESVRJVkVBTFBIQSIsImFscGhhVG9Db3ZlcmFnZSIsIm91dHB1dEFscGhhUFMiLCJvdXRwdXRBbHBoYVByZW11bFBTIiwib3V0cHV0QWxwaGFPcGFxdWVQUyIsIm91dHB1dFBTIiwiZGVidWdPdXRwdXRQUyIsInByZXBlbmQiLCJsaWdodERpclBvaW50UFMiLCJmYWxsb2ZmTGluZWFyUFMiLCJmYWxsb2ZmSW52U3F1YXJlZFBTIiwic3BvdFBTIiwiY29va2llUFMiLCJzdHJ1Y3RDb2RlIiwiYmFja2VuZENvZGUiLCJkZWJ1Z1Byb2Nlc3NGcm9udGVuZFBTIiwibWVyZ2VkQ29kZSIsImluY2x1ZGVzIiwiZGV0YWlsTW9kZXMiLCJkZXRhaWxNb2Rlc1BTIiwiZ2VuZXJhdGVGcmFnbWVudFNoYWRlciIsIlNIQURFUl9QSUNLIiwiY3VzdG9tRnJhZ21lbnRTaGFkZXIiLCJnZXREZWZpbml0aW9uIiwiZGVmaW5pdGlvbiIsIlNoYWRlclV0aWxzIiwiY3JlYXRlRGVmaW5pdGlvbiIsInZlcnRleENvZGUiLCJmcmFnbWVudENvZGUiLCJpc0ZvcndhcmRQYXNzIiwidGFnIiwiU0hBREVSVEFHX01BVEVSSUFMIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQThCQSxNQUFNQSxpQkFBaUIsR0FBRztBQUN0QkMsRUFBQUEsYUFBYSxFQUFFQyxlQUFlO0FBQzlCQyxFQUFBQSxjQUFjLEVBQUVDLGdCQUFnQjtBQUNoQ0MsRUFBQUEsZ0JBQWdCLEVBQUVDLGtCQUFrQjtBQUNwQ0MsRUFBQUEsZ0JBQWdCLEVBQUVDLGtCQUFr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
