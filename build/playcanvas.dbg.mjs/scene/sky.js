/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Mat3 } from '../math/mat3.js';
import { Mat4 } from '../math/mat4.js';
import { Vec3 } from '../math/vec3.js';
import { Quat } from '../math/quat.js';
import { CULLFACE_FRONT } from '../graphics/constants.js';
import { SHADER_FORWARDHDR, GAMMA_SRGBHDR, GAMMA_NONE, TONEMAP_LINEAR, LAYERID_SKYBOX } from './constants.js';
import { createBox } from './procedural.js';
import { GraphNode } from './graph-node.js';
import { Material } from './materials/material.js';
import { MeshInstance } from './mesh-instance.js';
import { skybox } from '../graphics/program-lib/programs/skybox.js';

let _mat4;

class Sky {
  constructor(device, scene, texture) {
    this.meshInstance = void 0;
    this._rotationMat3 = void 0;
    const material = new Material();

    material.getShaderVariant = function (dev, sc, defs, staticLightList, pass, sortedLights, viewUniformFormat, viewBindGroupFormat) {
      const library = device.getProgramLibrary();
      library.register('skybox', skybox);

      if (texture.cubemap) {
        return library.getProgram('skybox', {
          type: 'cubemap',
          encoding: texture.encoding,
          useIntensity: scene.skyboxIntensity !== 1 || scene.skyboxLuminance !== 0,
          mip: texture.fixCubemapSeams ? scene.skyboxMip : 0,
          fixSeams: texture.fixCubemapSeams,
          gamma: pass === SHADER_FORWARDHDR ? scene.gammaCorrection ? GAMMA_SRGBHDR : GAMMA_NONE : scene.gammaCorrection,
          toneMapping: pass === SHADER_FORWARDHDR ? TONEMAP_LINEAR : scene.toneMapping
        });
      }

      return library.getProgram('skybox', {
        type: 'envAtlas',
        encoding: texture.encoding,
        useIntensity: scene.skyboxIntensity !== 1 || scene.skyboxLuminance !== 0,
        gamma: pass === SHADER_FORWARDHDR ? scene.gammaCorrection ? GAMMA_SRGBHDR : GAMMA_NONE : scene.gammaCorrection,
        toneMapping: pass === SHADER_FORWARDHDR ? TONEMAP_LINEAR : scene.toneMapping
      });
    };

    if (texture.cubemap) {
      material.setParameter('texture_cubeMap', texture);
    } else {
      material.setParameter('texture_envAtlas', texture);
      material.setParameter('mipLevel', scene._skyboxMip);
    }

    if (!scene.skyboxRotation.equals(Quat.IDENTITY)) {
      _mat4 = _mat4 || new Mat4();
      this._rotationMat3 = this._rotationMat3 || new Mat3();

      _mat4.setTRS(Vec3.ZERO, scene._skyboxRotation, Vec3.ONE);

      _mat4.invertTo3x3(this._rotationMat3);

      material.setParameter('cubeMapRotationMatrix', this._rotationMat3.data);
    } else {
      material.setParameter('cubeMapRotationMatrix', Mat3.IDENTITY.data);
    }

    material.cull = CULLFACE_FRONT;
    material.depthWrite = false;
    const skyLayer = scene.layers.getLayerById(LAYERID_SKYBOX);

    if (skyLayer) {
      const node = new GraphNode('Skybox');
      const mesh = createBox(device);
      const meshInstance = new MeshInstance(mesh, material, node);
      this.meshInstance = meshInstance;
      meshInstance.cull = false;
      meshInstance._noDepthDrawGl1 = true;
      meshInstance.pick = false;
      skyLayer.addMeshInstances([meshInstance]);
      this.skyLayer = skyLayer;
    }
  }

  destroy() {
    if (this.meshInstance) {
      if (this.skyLayer) {
        this.skyLayer.removeMeshInstances([this.meshInstance]);
      }

      this.meshInstance.destroy();
      this.meshInstance = null;
    }
  }

}

export { Sky };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2t5LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2NlbmUvc2t5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdDMgfSBmcm9tICcuLi9tYXRoL21hdDMuanMnO1xuaW1wb3J0IHsgTWF0NCB9IGZyb20gJy4uL21hdGgvbWF0NC5qcyc7XG5pbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi4vbWF0aC92ZWMzLmpzJztcbmltcG9ydCB7IFF1YXQgfSBmcm9tICcuLi9tYXRoL3F1YXQuanMnO1xuXG5pbXBvcnQgeyBDVUxMRkFDRV9GUk9OVCB9IGZyb20gJy4uL2dyYXBoaWNzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCB7IEdBTU1BX05PTkUsIEdBTU1BX1NSR0JIRFIsIExBWUVSSURfU0tZQk9YLCBTSEFERVJfRk9SV0FSREhEUiwgVE9ORU1BUF9MSU5FQVIgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVCb3ggfSBmcm9tICcuL3Byb2NlZHVyYWwuanMnO1xuaW1wb3J0IHsgR3JhcGhOb2RlIH0gZnJvbSAnLi9ncmFwaC1ub2RlLmpzJztcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSAnLi9tYXRlcmlhbHMvbWF0ZXJpYWwuanMnO1xuaW1wb3J0IHsgTWVzaEluc3RhbmNlIH0gZnJvbSAnLi9tZXNoLWluc3RhbmNlLmpzJztcbmltcG9ydCB7IHNreWJveCB9IGZyb20gJy4uL2dyYXBoaWNzL3Byb2dyYW0tbGliL3Byb2dyYW1zL3NreWJveC5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9ncmFwaGljcy90ZXh0dXJlLmpzJykuVGV4dHVyZX0gVGV4dHVyZSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL2dyYXBoaWNzL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBHcmFwaGljc0RldmljZSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2NlbmUuanMnKS5TY2VuZX0gU2NlbmUgKi9cblxuLyoqIEB0eXBlIHtNYXQ0fSAqL1xubGV0IF9tYXQ0O1xuXG4vKipcbiAqIEEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBza3kuXG4gKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBTa3kge1xuICAgIC8qKlxuICAgICAqIE1lc2ggaW5zdGFuY2UgcmVwcmVzZW50aW5nIHRoZSB2aXN1YWxzIG9mIHRoZSBza3kuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TWVzaEluc3RhbmNlfVxuICAgICAqL1xuICAgIG1lc2hJbnN0YW5jZTtcblxuICAgIC8qKiBAdHlwZSB7TWF0M30gKi9cbiAgICBfcm90YXRpb25NYXQzO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtHcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlIGdyYXBoaWNzIGRldmljZS5cbiAgICAgKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSAtIFRoZSBzY2VuZSBvd25pbmcgdGhlIHNreS5cbiAgICAgKiBAcGFyYW0ge1RleHR1cmV9IHRleHR1cmUgLSBUaGUgdGV4dHVyZSBvZiB0aGUgc2t5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgc2NlbmUsIHRleHR1cmUpIHtcblxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgpO1xuXG4gICAgICAgIG1hdGVyaWFsLmdldFNoYWRlclZhcmlhbnQgPSBmdW5jdGlvbiAoZGV2LCBzYywgZGVmcywgc3RhdGljTGlnaHRMaXN0LCBwYXNzLCBzb3J0ZWRMaWdodHMsIHZpZXdVbmlmb3JtRm9ybWF0LCB2aWV3QmluZEdyb3VwRm9ybWF0KSB7XG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5ID0gZGV2aWNlLmdldFByb2dyYW1MaWJyYXJ5KCk7XG4gICAgICAgICAgICBsaWJyYXJ5LnJlZ2lzdGVyKCdza3lib3gnLCBza3lib3gpO1xuXG4gICAgICAgICAgICBpZiAodGV4dHVyZS5jdWJlbWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpYnJhcnkuZ2V0UHJvZ3JhbSgnc2t5Ym94Jywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY3ViZW1hcCcsXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nOiB0ZXh0dXJlLmVuY29kaW5nLFxuICAgICAgICAgICAgICAgICAgICB1c2VJbnRlbnNpdHk6IHNjZW5lLnNreWJveEludGVuc2l0eSAhPT0gMSB8fCBzY2VuZS5za3lib3hMdW1pbmFuY2UgIT09IDAsXG4gICAgICAgICAgICAgICAgICAgIG1pcDogdGV4dHVyZS5maXhDdWJlbWFwU2VhbXMgPyBzY2VuZS5za3lib3hNaXAgOiAwLFxuICAgICAgICAgICAgICAgICAgICBmaXhTZWFtczogdGV4dHVyZS5maXhDdWJlbWFwU2VhbXMsXG4gICAgICAgICAgICAgICAgICAgIGdhbW1hOiAocGFzcyA9PT0gU0hBREVSX0ZPUldBUkRIRFIgPyAoc2NlbmUuZ2FtbWFDb3JyZWN0aW9uID8gR0FNTUFfU1JHQkhEUiA6IEdBTU1BX05PTkUpIDogc2NlbmUuZ2FtbWFDb3JyZWN0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgdG9uZU1hcHBpbmc6IChwYXNzID09PSBTSEFERVJfRk9SV0FSREhEUiA/IFRPTkVNQVBfTElORUFSIDogc2NlbmUudG9uZU1hcHBpbmcpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsaWJyYXJ5LmdldFByb2dyYW0oJ3NreWJveCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZW52QXRsYXMnLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nOiB0ZXh0dXJlLmVuY29kaW5nLFxuICAgICAgICAgICAgICAgIHVzZUludGVuc2l0eTogc2NlbmUuc2t5Ym94SW50ZW5zaXR5ICE9PSAxIHx8IHNjZW5lLnNreWJveEx1bWluYW5jZSAhPT0gMCxcbiAgICAgICAgICAgICAgICBnYW1tYTogKHBhc3MgPT09IFNIQURFUl9GT1JXQVJESERSID8gKHNjZW5lLmdhbW1hQ29ycmVjdGlvbiA/IEdBTU1BX1NSR0JIRFIgOiBHQU1NQV9OT05FKSA6IHNjZW5lLmdhbW1hQ29ycmVjdGlvbiksXG4gICAgICAgICAgICAgICAgdG9uZU1hcHBpbmc6IChwYXNzID09PSBTSEFERVJfRk9SV0FSREhEUiA/IFRPTkVNQVBfTElORUFSIDogc2NlbmUudG9uZU1hcHBpbmcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGV4dHVyZS5jdWJlbWFwKSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3RleHR1cmVfY3ViZU1hcCcsIHRleHR1cmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd0ZXh0dXJlX2VudkF0bGFzJywgdGV4dHVyZSk7XG4gICAgICAgICAgICBtYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ21pcExldmVsJywgc2NlbmUuX3NreWJveE1pcCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNjZW5lLnNreWJveFJvdGF0aW9uLmVxdWFscyhRdWF0LklERU5USVRZKSkge1xuICAgICAgICAgICAgX21hdDQgPSBfbWF0NCB8fCBuZXcgTWF0NCgpO1xuICAgICAgICAgICAgdGhpcy5fcm90YXRpb25NYXQzID0gdGhpcy5fcm90YXRpb25NYXQzIHx8IG5ldyBNYXQzKCk7XG5cbiAgICAgICAgICAgIF9tYXQ0LnNldFRSUyhWZWMzLlpFUk8sIHNjZW5lLl9za3lib3hSb3RhdGlvbiwgVmVjMy5PTkUpO1xuICAgICAgICAgICAgX21hdDQuaW52ZXJ0VG8zeDModGhpcy5fcm90YXRpb25NYXQzKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcignY3ViZU1hcFJvdGF0aW9uTWF0cml4JywgdGhpcy5fcm90YXRpb25NYXQzLmRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCdjdWJlTWFwUm90YXRpb25NYXRyaXgnLCBNYXQzLklERU5USVRZLmRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWF0ZXJpYWwuY3VsbCA9IENVTExGQUNFX0ZST05UO1xuICAgICAgICBtYXRlcmlhbC5kZXB0aFdyaXRlID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3Qgc2t5TGF5ZXIgPSBzY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeUlkKExBWUVSSURfU0tZQk9YKTtcbiAgICAgICAgaWYgKHNreUxheWVyKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbmV3IEdyYXBoTm9kZSgnU2t5Ym94Jyk7XG4gICAgICAgICAgICBjb25zdCBtZXNoID0gY3JlYXRlQm94KGRldmljZSk7XG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSBuZXcgTWVzaEluc3RhbmNlKG1lc2gsIG1hdGVyaWFsLCBub2RlKTtcbiAgICAgICAgICAgIHRoaXMubWVzaEluc3RhbmNlID0gbWVzaEluc3RhbmNlO1xuXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UuY3VsbCA9IGZhbHNlO1xuICAgICAgICAgICAgbWVzaEluc3RhbmNlLl9ub0RlcHRoRHJhd0dsMSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGRpc2FibGUgcGlja2VyLCB0aGUgbWF0ZXJpYWwgaGFzIGN1c3RvbSB1cGRhdGUgc2hhZGVyIGFuZCBkb2VzIG5vdCBoYW5kbGUgcGlja2VyIHZhcmlhbnRcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5waWNrID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHNreUxheWVyLmFkZE1lc2hJbnN0YW5jZXMoW21lc2hJbnN0YW5jZV0pO1xuICAgICAgICAgICAgdGhpcy5za3lMYXllciA9IHNreUxheWVyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMubWVzaEluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5za3lMYXllcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2t5TGF5ZXIucmVtb3ZlTWVzaEluc3RhbmNlcyhbdGhpcy5tZXNoSW5zdGFuY2VdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVzaEluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMubWVzaEluc3RhbmNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHsgU2t5IH07XG4iXSwibmFtZXMiOlsiX21hdDQiLCJTa3kiLCJjb25zdHJ1Y3RvciIsImRldmljZSIsInNjZW5lIiwidGV4dHVyZSIsIm1lc2hJbnN0YW5jZSIsIl9yb3RhdGlvbk1hdDMiLCJtYXRlcmlhbCIsIk1hdGVyaWFsIiwiZ2V0U2hhZGVyVmFyaWFudCIsImRldiIsInNjIiwiZGVmcyIsInN0YXRpY0xpZ2h0TGlzdCIsInBhc3MiLCJzb3J0ZWRMaWdodHMiLCJ2aWV3VW5pZm9ybUZvcm1hdCIsInZpZXdCaW5kR3JvdXBGb3JtYXQiLCJsaWJyYXJ5IiwiZ2V0UHJvZ3JhbUxpYnJhcnkiLCJyZWdpc3RlciIsInNreWJveCIsImN1YmVtYXAiLCJnZXRQcm9ncmFtIiwidHlwZSIsImVuY29kaW5nIiwidXNlSW50ZW5zaXR5Iiwic2t5Ym94SW50ZW5zaXR5Iiwic2t5Ym94THVtaW5hbmNlIiwibWlwIiwiZml4Q3ViZW1hcFNlYW1zIiwic2t5Ym94TWlwIiwiZml4U2VhbXMiLCJnYW1tYSIsIlNIQURFUl9GT1JXQVJESERSIiwiZ2FtbWFDb3JyZWN0aW9uIiwiR0FNTUFfU1JHQkhEUiIsIkdBTU1BX05PTkUiLCJ0b25lTWFwcGluZyIsIlRPTkVNQVBfTElORUFSIiwic2V0UGFyYW1ldGVyIiwiX3NreWJveE1pcCIsInNreWJveFJvdGF0aW9uIiwiZXF1YWxzIiwiUXVhdCIsIklERU5USVRZIiwiTWF0NCIsIk1hdDMiLCJzZXRUUlMiLCJWZWMzIiwiWkVSTyIsIl9za3lib3hSb3RhdGlvbiIsIk9ORSIsImludmVydFRvM3gzIiwiZGF0YSIsImN1bGwiLCJDVUxMRkFDRV9GUk9OVCIsImRlcHRoV3JpdGUiLCJza3lMYXllciIsImxheWVycyIsImdldExheWVyQnlJZCIsIkxBWUVSSURfU0tZQk9YIiwibm9kZSIsIkdyYXBoTm9kZSIsIm1lc2giLCJjcmVhdGVCb3giLCJNZXNoSW5zdGFuY2UiLCJfbm9EZXB0aERyYXdHbDEiLCJwaWNrIiwiYWRkTWVzaEluc3RhbmNlcyIsImRlc3Ryb3kiLCJyZW1vdmVNZXNoSW5zdGFuY2VzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQSxJQUFJQSxLQUFKLENBQUE7O0FBT0EsTUFBTUMsR0FBTixDQUFVO0FBZ0JOQyxFQUFBQSxXQUFXLENBQUNDLE1BQUQsRUFBU0MsS0FBVCxFQUFnQkMsT0FBaEIsRUFBeUI7QUFBQSxJQUFBLElBQUEsQ0FWcENDLFlBVW9DLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FQcENDLGFBT29DLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFFaEMsSUFBQSxNQUFNQyxRQUFRLEdBQUcsSUFBSUMsUUFBSixFQUFqQixDQUFBOztBQUVBRCxJQUFBQSxRQUFRLENBQUNFLGdCQUFULEdBQTRCLFVBQVVDLEdBQVYsRUFBZUMsRUFBZixFQUFtQkMsSUFBbkIsRUFBeUJDLGVBQXpCLEVBQTBDQyxJQUExQyxFQUFnREMsWUFBaEQsRUFBOERDLGlCQUE5RCxFQUFpRkMsbUJBQWpGLEVBQXNHO0FBQzlILE1BQUEsTUFBTUMsT0FBTyxHQUFHaEIsTUFBTSxDQUFDaUIsaUJBQVAsRUFBaEIsQ0FBQTtBQUNBRCxNQUFBQSxPQUFPLENBQUNFLFFBQVIsQ0FBaUIsUUFBakIsRUFBMkJDLE1BQTNCLENBQUEsQ0FBQTs7TUFFQSxJQUFJakIsT0FBTyxDQUFDa0IsT0FBWixFQUFxQjtBQUNqQixRQUFBLE9BQU9KLE9BQU8sQ0FBQ0ssVUFBUixDQUFtQixRQUFuQixFQUE2QjtBQUNoQ0MsVUFBQUEsSUFBSSxFQUFFLFNBRDBCO1VBRWhDQyxRQUFRLEVBQUVyQixPQUFPLENBQUNxQixRQUZjO1VBR2hDQyxZ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
