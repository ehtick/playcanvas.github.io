/**
 * @license
 * PlayCanvas Engine v1.62.0-dev revision 7d088032c (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../core/debug.js';
import { Vec3 } from '../../core/math/vec3.js';
import { PIXELFORMAT_RGBA8, TEXTURETYPE_DEFAULT, TEXTURETYPE_RGBM } from '../../platform/graphics/constants.js';
import { createShaderFromCode } from '../shader-lib/utils.js';
import { drawQuadWithShader } from './quad-render-utils.js';
import { shaderChunks } from '../shader-lib/chunks/chunks.js';
import { RenderTarget } from '../../platform/graphics/render-target.js';
import { Texture } from '../../platform/graphics/texture.js';

// https://seblagarde.wordpress.com/2012/06/10/amd-cubemapgen-for-physically-based-rendering/
function areaElement(x, y) {
  return Math.atan2(x * y, Math.sqrt(x * x + y * y + 1));
}
function texelCoordSolidAngle(u, v, size) {
  // Scale up to [-1, 1] range (inclusive), offset by 0.5 to point to texel center.
  let _u = 2.0 * (u + 0.5) / size - 1.0;
  let _v = 2.0 * (v + 0.5) / size - 1.0;

  // fixSeams
  _u *= 1.0 - 1.0 / size;
  _v *= 1.0 - 1.0 / size;
  const invResolution = 1.0 / size;

  // U and V are the -1..1 texture coordinate on the current face.
  // Get projected area for this texel
  const x0 = _u - invResolution;
  const y0 = _v - invResolution;
  const x1 = _u + invResolution;
  const y1 = _v + invResolution;
  let solidAngle = areaElement(x0, y0) - areaElement(x0, y1) - areaElement(x1, y0) + areaElement(x1, y1);

  // fixSeams cut
  if (u === 0 && v === 0 || u === size - 1 && v === 0 || u === 0 && v === size - 1 || u === size - 1 && v === size - 1) {
    solidAngle /= 3;
  } else if (u === 0 || v === 0 || u === size - 1 || v === size - 1) {
    solidAngle *= 0.5;
  }
  return solidAngle;
}
function shFromCubemap(device, source, dontFlipX) {
  if (source.format !== PIXELFORMAT_RGBA8) {
    Debug.error("ERROR: SH: cubemap must be RGBA8");
    return null;
  }
  if (!source._levels[0] || !source._levels[0][0]) {
    Debug.error("ERROR: SH: cubemap must be synced to CPU");
    return null;
  }
  const cubeSize = source.width;
  if (!source._levels[0][0].length) {
    // Cubemap is not composed of arrays
    if (source._levels[0][0] instanceof HTMLImageElement) {
      // Cubemap is made of imgs - convert to arrays
      const shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.fullscreenQuadPS, "fsQuadSimple");
      const constantTexSource = device.scope.resolve("source");
      for (let face = 0; face < 6; face++) {
        const img = source._levels[0][face];
        const tex = new Texture(device, {
          name: 'prefiltered-cube',
          cubemap: false,
          type: TEXTURETYPE_DEFAULT,
          format: source.format,
          width: cubeSize,
          height: cubeSize,
          mipmaps: false
        });
        tex._levels[0] = img;
        tex.upload();
        const tex2 = new Texture(device, {
          name: 'prefiltered-cube',
          cubemap: false,
          type: TEXTURETYPE_DEFAULT,
          format: source.format,
          width: cubeSize,
          height: cubeSize,
          mipmaps: false
        });
        const targ = new RenderTarget({
          colorBuffer: tex2,
          depth: false
        });
        constantTexSource.setValue(tex);
        drawQuadWithShader(device, targ, shader);
        const gl = device.gl;
        gl.bindFramebuffer(gl.FRAMEBUFFER, targ.impl._glFrameBuffer);
        const pixels = new Uint8Array(cubeSize * cubeSize * 4);
        gl.readPixels(0, 0, tex.width, tex.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);
        source._levels[0][face] = pixels;
      }
    } else {
      Debug.error("ERROR: SH: cubemap must be composed of arrays or images");
      return null;
    }
  }
  const dirs = [];
  for (let y = 0; y < cubeSize; y++) {
    for (let x = 0; x < cubeSize; x++) {
      const u = x / (cubeSize - 1) * 2 - 1;
      const v = y / (cubeSize - 1) * 2 - 1;
      dirs[y * cubeSize + x] = new Vec3(u, v, 1.0).normalize();
    }
  }
  const sh = new Float32Array(9 * 3);
  const coef1 = 0;
  const coef2 = 1 * 3;
  const coef3 = 2 * 3;
  const coef4 = 3 * 3;
  const coef5 = 4 * 3;
  const coef6 = 5 * 3;
  const coef7 = 6 * 3;
  const coef8 = 7 * 3;
  const coef9 = 8 * 3;
  const nx = 0;
  const px = 1;
  const ny = 2;
  const py = 3;
  const nz = 4;
  const pz = 5;
  let accum = 0;
  for (let face = 0; face < 6; face++) {
    for (let y = 0; y < cubeSize; y++) {
      for (let x = 0; x < cubeSize; x++) {
        const addr = y * cubeSize + x;
        const weight = texelCoordSolidAngle(x, y, cubeSize);

        // http://home.comcast.net/~tom_forsyth/blog.wiki.html#[[Spherical%20Harmonics%20in%20Actual%20Games%20notes]]
        const weight1 = weight * 4 / 17;
        const weight2 = weight * 8 / 17;
        const weight3 = weight * 15 / 17;
        const weight4 = weight * 5 / 68;
        const weight5 = weight * 15 / 68;
        const dir = dirs[addr];
        let dx, dy, dz;
        if (face === nx) {
          dx = dir.z;
          dy = -dir.y;
          dz = -dir.x;
        } else if (face === px) {
          dx = -dir.z;
          dy = -dir.y;
          dz = dir.x;
        } else if (face === ny) {
          dx = dir.x;
          dy = dir.z;
          dz = dir.y;
        } else if (face === py) {
          dx = dir.x;
          dy = -dir.z;
          dz = -dir.y;
        } else if (face === nz) {
          dx = dir.x;
          dy = -dir.y;
          dz = dir.z;
        } else if (face === pz) {
          dx = -dir.x;
          dy = -dir.y;
          dz = -dir.z;
        }
        if (!dontFlipX) dx = -dx; // flip original cubemap x instead of doing it at runtime

        const a = source._levels[0][face][addr * 4 + 3] / 255.0;
        for (let c = 0; c < 3; c++) {
          let value = source._levels[0][face][addr * 4 + c] / 255.0;
          if (source.type === TEXTURETYPE_RGBM) {
            value *= a * 8.0;
            value *= value;
          } else {
            value = Math.pow(value, 2.2);
          }
          sh[coef1 + c] += value * weight1;
          sh[coef2 + c] += value * weight2 * dx;
          sh[coef3 + c] += value * weight2 * dy;
          sh[coef4 + c] += value * weight2 * dz;
          sh[coef5 + c] += value * weight3 * dx * dz;
          sh[coef6 + c] += value * weight3 * dz * dy;
          sh[coef7 + c] += value * weight3 * dy * dx;
          sh[coef8 + c] += value * weight4 * (3.0 * dz * dz - 1.0);
          sh[coef9 + c] += value * weight5 * (dx * dx - dy * dy);
          accum += weight;
        }
      }
    }
  }
  for (let c = 0; c < sh.length; c++) {
    sh[c] *= 4 * Math.PI / accum;
  }
  return sh;
}

export { shFromCubemap };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlZmlsdGVyLWN1YmVtYXAuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zY2VuZS9ncmFwaGljcy9wcmVmaWx0ZXItY3ViZW1hcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZyB9IGZyb20gJy4uLy4uL2NvcmUvZGVidWcuanMnO1xuaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC92ZWMzLmpzJztcblxuaW1wb3J0IHtcbiAgICBQSVhFTEZPUk1BVF9SR0JBOCwgVEVYVFVSRVRZUEVfREVGQVVMVCwgVEVYVFVSRVRZUEVfUkdCTVxufSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgY3JlYXRlU2hhZGVyRnJvbUNvZGUgfSBmcm9tICcuLi9zaGFkZXItbGliL3V0aWxzLmpzJztcbmltcG9ydCB7IGRyYXdRdWFkV2l0aFNoYWRlciB9IGZyb20gJy4vcXVhZC1yZW5kZXItdXRpbHMuanMnO1xuaW1wb3J0IHsgc2hhZGVyQ2h1bmtzIH0gZnJvbSAnLi4vc2hhZGVyLWxpYi9jaHVua3MvY2h1bmtzLmpzJztcbmltcG9ydCB7IFJlbmRlclRhcmdldCB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3JlbmRlci10YXJnZXQuanMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3RleHR1cmUuanMnO1xuXG4vLyBodHRwczovL3NlYmxhZ2FyZGUud29yZHByZXNzLmNvbS8yMDEyLzA2LzEwL2FtZC1jdWJlbWFwZ2VuLWZvci1waHlzaWNhbGx5LWJhc2VkLXJlbmRlcmluZy9cbmZ1bmN0aW9uIGFyZWFFbGVtZW50KHgsIHkpIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih4ICogeSwgTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyAxKSk7XG59XG5cbmZ1bmN0aW9uIHRleGVsQ29vcmRTb2xpZEFuZ2xlKHUsIHYsIHNpemUpIHtcbiAgICAvLyBTY2FsZSB1cCB0byBbLTEsIDFdIHJhbmdlIChpbmNsdXNpdmUpLCBvZmZzZXQgYnkgMC41IHRvIHBvaW50IHRvIHRleGVsIGNlbnRlci5cbiAgICBsZXQgX3UgPSAoMi4wICogKHUgKyAwLjUpIC8gc2l6ZSkgLSAxLjA7XG4gICAgbGV0IF92ID0gKDIuMCAqICh2ICsgMC41KSAvIHNpemUpIC0gMS4wO1xuXG4gICAgLy8gZml4U2VhbXNcbiAgICBfdSAqPSAxLjAgLSAxLjAgLyBzaXplO1xuICAgIF92ICo9IDEuMCAtIDEuMCAvIHNpemU7XG5cbiAgICBjb25zdCBpbnZSZXNvbHV0aW9uID0gMS4wIC8gc2l6ZTtcblxuICAgIC8vIFUgYW5kIFYgYXJlIHRoZSAtMS4uMSB0ZXh0dXJlIGNvb3JkaW5hdGUgb24gdGhlIGN1cnJlbnQgZmFjZS5cbiAgICAvLyBHZXQgcHJvamVjdGVkIGFyZWEgZm9yIHRoaXMgdGV4ZWxcbiAgICBjb25zdCB4MCA9IF91IC0gaW52UmVzb2x1dGlvbjtcbiAgICBjb25zdCB5MCA9IF92IC0gaW52UmVzb2x1dGlvbjtcbiAgICBjb25zdCB4MSA9IF91ICsgaW52UmVzb2x1dGlvbjtcbiAgICBjb25zdCB5MSA9IF92ICsgaW52UmVzb2x1dGlvbjtcbiAgICBsZXQgc29saWRBbmdsZSA9IGFyZWFFbGVtZW50KHgwLCB5MCkgLSBhcmVhRWxlbWVudCh4MCwgeTEpIC0gYXJlYUVsZW1lbnQoeDEsIHkwKSArIGFyZWFFbGVtZW50KHgxLCB5MSk7XG5cbiAgICAvLyBmaXhTZWFtcyBjdXRcbiAgICBpZiAoKHUgPT09IDAgJiYgdiA9PT0gMCkgfHwgKHUgPT09IHNpemUgLSAxICYmIHYgPT09IDApIHx8ICh1ID09PSAwICYmIHYgPT09IHNpemUgLSAxKSB8fCAodSA9PT0gc2l6ZSAtIDEgJiYgdiA9PT0gc2l6ZSAtIDEpKSB7XG4gICAgICAgIHNvbGlkQW5nbGUgLz0gMztcbiAgICB9IGVsc2UgaWYgKHUgPT09IDAgfHwgdiA9PT0gMCB8fCB1ID09PSBzaXplIC0gMSB8fCB2ID09PSBzaXplIC0gMSkge1xuICAgICAgICBzb2xpZEFuZ2xlICo9IDAuNTtcbiAgICB9XG5cbiAgICByZXR1cm4gc29saWRBbmdsZTtcbn1cblxuZnVuY3Rpb24gc2hGcm9tQ3ViZW1hcChkZXZpY2UsIHNvdXJjZSwgZG9udEZsaXBYKSB7XG4gICAgaWYgKHNvdXJjZS5mb3JtYXQgIT09IFBJWEVMRk9STUFUX1JHQkE4KSB7XG4gICAgICAgIERlYnVnLmVycm9yKFwiRVJST1I6IFNIOiBjdWJlbWFwIG11c3QgYmUgUkdCQThcIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIXNvdXJjZS5fbGV2ZWxzWzBdIHx8ICFzb3VyY2UuX2xldmVsc1swXVswXSkge1xuICAgICAgICBEZWJ1Zy5lcnJvcihcIkVSUk9SOiBTSDogY3ViZW1hcCBtdXN0IGJlIHN5bmNlZCB0byBDUFVcIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGN1YmVTaXplID0gc291cmNlLndpZHRoO1xuXG4gICAgaWYgKCFzb3VyY2UuX2xldmVsc1swXVswXS5sZW5ndGgpIHtcbiAgICAgICAgLy8gQ3ViZW1hcCBpcyBub3QgY29tcG9zZWQgb2YgYXJyYXlzXG4gICAgICAgIGlmIChzb3VyY2UuX2xldmVsc1swXVswXSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIEN1YmVtYXAgaXMgbWFkZSBvZiBpbWdzIC0gY29udmVydCB0byBhcnJheXNcbiAgICAgICAgICAgIGNvbnN0IHNoYWRlciA9IGNyZWF0ZVNoYWRlckZyb21Db2RlKGRldmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRlckNodW5rcy5mdWxsc2NyZWVuUXVhZFZTLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZGVyQ2h1bmtzLmZ1bGxzY3JlZW5RdWFkUFMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZzUXVhZFNpbXBsZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0YW50VGV4U291cmNlID0gZGV2aWNlLnNjb3BlLnJlc29sdmUoXCJzb3VyY2VcIik7XG4gICAgICAgICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IDY7IGZhY2UrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IHNvdXJjZS5fbGV2ZWxzWzBdW2ZhY2VdO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4ID0gbmV3IFRleHR1cmUoZGV2aWNlLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwcmVmaWx0ZXJlZC1jdWJlJyxcbiAgICAgICAgICAgICAgICAgICAgY3ViZW1hcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFRFWFRVUkVUWVBFX0RFRkFVTFQsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogc291cmNlLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGN1YmVTaXplLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGN1YmVTaXplLFxuICAgICAgICAgICAgICAgICAgICBtaXBtYXBzOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRleC5fbGV2ZWxzWzBdID0gaW1nO1xuICAgICAgICAgICAgICAgIHRleC51cGxvYWQoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRleDIgPSBuZXcgVGV4dHVyZShkZXZpY2UsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ByZWZpbHRlcmVkLWN1YmUnLFxuICAgICAgICAgICAgICAgICAgICBjdWJlbWFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogVEVYVFVSRVRZUEVfREVGQVVMVCxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBzb3VyY2UuZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogY3ViZVNpemUsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogY3ViZVNpemUsXG4gICAgICAgICAgICAgICAgICAgIG1pcG1hcHM6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnID0gbmV3IFJlbmRlclRhcmdldCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yQnVmZmVyOiB0ZXgyLFxuICAgICAgICAgICAgICAgICAgICBkZXB0aDogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdGFudFRleFNvdXJjZS5zZXRWYWx1ZSh0ZXgpO1xuICAgICAgICAgICAgICAgIGRyYXdRdWFkV2l0aFNoYWRlcihkZXZpY2UsIHRhcmcsIHNoYWRlcik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBnbCA9IGRldmljZS5nbDtcbiAgICAgICAgICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRhcmcuaW1wbC5fZ2xGcmFtZUJ1ZmZlcik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwaXhlbHMgPSBuZXcgVWludDhBcnJheShjdWJlU2l6ZSAqIGN1YmVTaXplICogNCk7XG4gICAgICAgICAgICAgICAgZ2wucmVhZFBpeGVscygwLCAwLCB0ZXgud2lkdGgsIHRleC5oZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIHBpeGVscyk7XG5cbiAgICAgICAgICAgICAgICBzb3VyY2UuX2xldmVsc1swXVtmYWNlXSA9IHBpeGVscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIERlYnVnLmVycm9yKFwiRVJST1I6IFNIOiBjdWJlbWFwIG11c3QgYmUgY29tcG9zZWQgb2YgYXJyYXlzIG9yIGltYWdlc1wiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGlycyA9IFtdO1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY3ViZVNpemU7IHkrKykge1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGN1YmVTaXplOyB4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoeCAvIChjdWJlU2l6ZSAtIDEpKSAqIDIgLSAxO1xuICAgICAgICAgICAgY29uc3QgdiA9ICh5IC8gKGN1YmVTaXplIC0gMSkpICogMiAtIDE7XG4gICAgICAgICAgICBkaXJzW3kgKiBjdWJlU2l6ZSArIHhdID0gbmV3IFZlYzModSwgdiwgMS4wKS5ub3JtYWxpemUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNoID0gbmV3IEZsb2F0MzJBcnJheSg5ICogMyk7XG4gICAgY29uc3QgY29lZjEgPSAwO1xuICAgIGNvbnN0IGNvZWYyID0gMSAqIDM7XG4gICAgY29uc3QgY29lZjMgPSAyICogMztcbiAgICBjb25zdCBjb2VmNCA9IDMgKiAzO1xuICAgIGNvbnN0IGNvZWY1ID0gNCAqIDM7XG4gICAgY29uc3QgY29lZjYgPSA1ICogMztcbiAgICBjb25zdCBjb2VmNyA9IDYgKiAzO1xuICAgIGNvbnN0IGNvZWY4ID0gNyAqIDM7XG4gICAgY29uc3QgY29lZjkgPSA4ICogMztcblxuICAgIGNvbnN0IG54ID0gMDtcbiAgICBjb25zdCBweCA9IDE7XG4gICAgY29uc3QgbnkgPSAyO1xuICAgIGNvbnN0IHB5ID0gMztcbiAgICBjb25zdCBueiA9IDQ7XG4gICAgY29uc3QgcHogPSA1O1xuXG4gICAgbGV0IGFjY3VtID0gMDtcblxuICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgNjsgZmFjZSsrKSB7XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY3ViZVNpemU7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjdWJlU2l6ZTsgeCsrKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBhZGRyID0geSAqIGN1YmVTaXplICsgeDtcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWlnaHQgPSB0ZXhlbENvb3JkU29saWRBbmdsZSh4LCB5LCBjdWJlU2l6ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vaG9tZS5jb21jYXN0Lm5ldC9+dG9tX2ZvcnN5dGgvYmxvZy53aWtpLmh0bWwjW1tTcGhlcmljYWwlMjBIYXJtb25pY3MlMjBpbiUyMEFjdHVhbCUyMEdhbWVzJTIwbm90ZXNdXVxuICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodDEgPSB3ZWlnaHQgKiA0IC8gMTc7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2VpZ2h0MiA9IHdlaWdodCAqIDggLyAxNztcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWlnaHQzID0gd2VpZ2h0ICogMTUgLyAxNztcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWlnaHQ0ID0gd2VpZ2h0ICogNSAvIDY4O1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodDUgPSB3ZWlnaHQgKiAxNSAvIDY4O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGlyID0gZGlyc1thZGRyXTtcblxuICAgICAgICAgICAgICAgIGxldCBkeCwgZHksIGR6O1xuICAgICAgICAgICAgICAgIGlmIChmYWNlID09PSBueCkge1xuICAgICAgICAgICAgICAgICAgICBkeCA9IGRpci56O1xuICAgICAgICAgICAgICAgICAgICBkeSA9IC1kaXIueTtcbiAgICAgICAgICAgICAgICAgICAgZHogPSAtZGlyLng7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmYWNlID09PSBweCkge1xuICAgICAgICAgICAgICAgICAgICBkeCA9IC1kaXIuejtcbiAgICAgICAgICAgICAgICAgICAgZHkgPSAtZGlyLnk7XG4gICAgICAgICAgICAgICAgICAgIGR6ID0gZGlyLng7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmYWNlID09PSBueSkge1xuICAgICAgICAgICAgICAgICAgICBkeCA9IGRpci54O1xuICAgICAgICAgICAgICAgICAgICBkeSA9IGRpci56O1xuICAgICAgICAgICAgICAgICAgICBkeiA9IGRpci55O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmFjZSA9PT0gcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZHggPSBkaXIueDtcbiAgICAgICAgICAgICAgICAgICAgZHkgPSAtZGlyLno7XG4gICAgICAgICAgICAgICAgICAgIGR6ID0gLWRpci55O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmFjZSA9PT0gbnopIHtcbiAgICAgICAgICAgICAgICAgICAgZHggPSBkaXIueDtcbiAgICAgICAgICAgICAgICAgICAgZHkgPSAtZGlyLnk7XG4gICAgICAgICAgICAgICAgICAgIGR6ID0gZGlyLno7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmYWNlID09PSBweikge1xuICAgICAgICAgICAgICAgICAgICBkeCA9IC1kaXIueDtcbiAgICAgICAgICAgICAgICAgICAgZHkgPSAtZGlyLnk7XG4gICAgICAgICAgICAgICAgICAgIGR6ID0gLWRpci56O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghZG9udEZsaXBYKSBkeCA9IC1keDsgLy8gZmxpcCBvcmlnaW5hbCBjdWJlbWFwIHggaW5zdGVhZCBvZiBkb2luZyBpdCBhdCBydW50aW1lXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhID0gc291cmNlLl9sZXZlbHNbMF1bZmFjZV1bYWRkciAqIDQgKyAzXSAvIDI1NS4wO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCAzOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gIHNvdXJjZS5fbGV2ZWxzWzBdW2ZhY2VdW2FkZHIgKiA0ICsgY10gLyAyNTUuMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS50eXBlID09PSBURVhUVVJFVFlQRV9SR0JNKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAqPSBhICogOC4wO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKj0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IE1hdGgucG93KHZhbHVlLCAyLjIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2hbY29lZjEgKyBjXSArPSB2YWx1ZSAqIHdlaWdodDE7XG4gICAgICAgICAgICAgICAgICAgIHNoW2NvZWYyICsgY10gKz0gdmFsdWUgKiB3ZWlnaHQyICogZHg7XG4gICAgICAgICAgICAgICAgICAgIHNoW2NvZWYzICsgY10gKz0gdmFsdWUgKiB3ZWlnaHQyICogZHk7XG4gICAgICAgICAgICAgICAgICAgIHNoW2NvZWY0ICsgY10gKz0gdmFsdWUgKiB3ZWlnaHQyICogZHo7XG5cbiAgICAgICAgICAgICAgICAgICAgc2hbY29lZjUgKyBjXSArPSB2YWx1ZSAqIHdlaWdodDMgKiBkeCAqIGR6O1xuICAgICAgICAgICAgICAgICAgICBzaFtjb2VmNiArIGNdICs9IHZhbHVlICogd2VpZ2h0MyAqIGR6ICogZHk7XG4gICAgICAgICAgICAgICAgICAgIHNoW2NvZWY3ICsgY10gKz0gdmFsdWUgKiB3ZWlnaHQzICogZHkgKiBkeDtcblxuICAgICAgICAgICAgICAgICAgICBzaFtjb2VmOCArIGNdICs9IHZhbHVlICogd2VpZ2h0NCAqICgzLjAgKiBkeiAqIGR6IC0gMS4wKTtcbiAgICAgICAgICAgICAgICAgICAgc2hbY29lZjkgKyBjXSArPSB2YWx1ZSAqIHdlaWdodDUgKiAoZHggKiBkeCAtIGR5ICogZHkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtICs9IHdlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBjID0gMDsgYyA8IHNoLmxlbmd0aDsgYysrKSB7XG4gICAgICAgIHNoW2NdICo9IDQgKiBNYXRoLlBJIC8gYWNjdW07XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoO1xufVxuXG5leHBvcnQgeyBzaEZyb21DdWJlbWFwIH07XG4iXSwibmFtZXMiOlsiYXJlYUVsZW1lbnQiLCJ4IiwieSIsIk1hdGgiLCJhdGFuMiIsInNxcnQiLCJ0ZXhlbENvb3JkU29saWRBbmdsZSIsInUiLCJ2Iiwic2l6ZSIsIl91IiwiX3YiLCJpbnZSZXNvbHV0aW9uIiwieDAiLCJ5MCIsIngxIiwieTEiLCJzb2xpZEFuZ2xlIiwic2hGcm9tQ3ViZW1hcCIsImRldmljZSIsInNvdXJjZSIsImRvbnRGbGlwWCIsImZvcm1hdCIsIlBJWEVMRk9STUFUX1JHQkE4IiwiRGVidWciLCJlcnJvciIsIl9sZXZlbHMiLCJjdWJlU2l6ZSIsIndpZHRoIiwibGVuZ3RoIiwiSFRNTEltYWdlRWxlbWVudCIsInNoYWRlciIsImNyZWF0ZVNoYWRlckZyb21Db2RlIiwic2hhZGVyQ2h1bmtzIiwiZnVsbHNjcmVlblF1YWRWUyIsImZ1bGxzY3JlZW5RdWFkUFMiLCJjb25zdGFudFRleFNvdXJjZSIsInNjb3BlIiwicmVzb2x2ZSIsImZhY2UiLCJpbWciLCJ0ZXgiLCJUZXh0dXJlIiwibmFtZSIsImN1YmVtYXAiLCJ0eXBlIiwiVEVYVFVSRVRZUEVfREVGQVVMVCIsImhlaWdodCIsIm1pcG1hcHMiLCJ1cGxvYWQiLCJ0ZXgyIiwidGFyZyIsIlJlbmRlclRhcmdldCIsImNvbG9yQnVmZmVyIiwiZGVwdGgiLCJzZXRWYWx1ZSIsImRyYXdRdWFkV2l0aFNoYWRlciIsImdsIiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJpbXBsIiwiX2dsRnJhbWVCdWZmZXIiLCJwaXhlbHMiLCJVaW50OEFycmF5IiwicmVhZFBpeGVscyIsIlJHQkEiLCJVTlNJR05FRF9CWVRFIiwiZGlycyIsIlZlYzMiLCJub3JtYWxpemUiLCJzaCIsIkZsb2F0MzJBcnJheSIsImNvZWYxIiwiY29lZjIiLCJjb2VmMyIsImNvZWY0IiwiY29lZjUiLCJjb2VmNiIsImNvZWY3IiwiY29lZjgiLCJjb2VmOSIsIm54IiwicHgiLCJueSIsInB5IiwibnoiLCJweiIsImFjY3VtIiwiYWRkciIsIndlaWdodCIsIndlaWdodDEiLCJ3ZWlnaHQyIiwid2VpZ2h0MyIsIndlaWdodDQiLCJ3ZWlnaHQ1IiwiZGlyIiwiZHgiLCJkeSIsImR6IiwieiIsImEiLCJjIiwidmFsdWUiLCJURVhUVVJFVFlQRV9SR0JNIiwicG93IiwiUEkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBWUE7QUFDQSxTQUFTQSxXQUFXLENBQUNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFO0VBQ3ZCLE9BQU9DLElBQUksQ0FBQ0MsS0FBSyxDQUFDSCxDQUFDLEdBQUdDLENBQUMsRUFBRUMsSUFBSSxDQUFDRSxJQUFJLENBQUNKLENBQUMsR0FBR0EsQ0FBQyxHQUFHQyxDQUFDLEdBQUdBLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFELENBQUE7QUFFQSxTQUFTSSxvQkFBb0IsQ0FBQ0MsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLElBQUksRUFBRTtBQUN0QztFQUNBLElBQUlDLEVBQUUsR0FBSSxHQUFHLElBQUlILENBQUMsR0FBRyxHQUFHLENBQUMsR0FBR0UsSUFBSSxHQUFJLEdBQUcsQ0FBQTtFQUN2QyxJQUFJRSxFQUFFLEdBQUksR0FBRyxJQUFJSCxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUdDLElBQUksR0FBSSxHQUFHLENBQUE7O0FBRXZDO0FBQ0FDLEVBQUFBLEVBQUUsSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHRCxJQUFJLENBQUE7QUFDdEJFLEVBQUFBLEVBQUUsSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHRixJQUFJLENBQUE7QUFFdEIsRUFBQSxNQUFNRyxhQUFhLEdBQUcsR0FBRyxHQUFHSCxJQUFJLENBQUE7O0FBRWhDO0FBQ0E7QUFDQSxFQUFBLE1BQU1JLEVBQUUsR0FBR0gsRUFBRSxHQUFHRSxhQUFh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
