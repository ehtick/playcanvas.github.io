/**
 * @license
 * PlayCanvas Engine v1.62.0-dev revision 7d088032c (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { DebugHelper, Debug } from '../../core/debug.js';
import { math } from '../../core/math/math.js';
import { Vec3 } from '../../core/math/vec3.js';
import { Mat4 } from '../../core/math/mat4.js';
import { BoundingBox } from '../../core/shape/bounding-box.js';
import { SHADOWUPDATE_NONE, SHADOWUPDATE_THISFRAME, LIGHTTYPE_DIRECTIONAL } from '../constants.js';
import { RenderPass } from '../../platform/graphics/render-pass.js';
import { ShadowMap } from './shadow-map.js';

const visibleSceneAabb = new BoundingBox();
const center = new Vec3();
const shadowCamView = new Mat4();
const aabbPoints = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];

// evaluate depth range the aabb takes in the space of the camera
const _depthRange = {
  min: 0,
  max: 0
};
function getDepthRange(cameraViewMatrix, aabbMin, aabbMax) {
  aabbPoints[0].x = aabbPoints[1].x = aabbPoints[2].x = aabbPoints[3].x = aabbMin.x;
  aabbPoints[1].y = aabbPoints[3].y = aabbPoints[7].y = aabbPoints[5].y = aabbMin.y;
  aabbPoints[2].z = aabbPoints[3].z = aabbPoints[6].z = aabbPoints[7].z = aabbMin.z;
  aabbPoints[4].x = aabbPoints[5].x = aabbPoints[6].x = aabbPoints[7].x = aabbMax.x;
  aabbPoints[0].y = aabbPoints[2].y = aabbPoints[4].y = aabbPoints[6].y = aabbMax.y;
  aabbPoints[0].z = aabbPoints[1].z = aabbPoints[4].z = aabbPoints[5].z = aabbMax.z;
  let minz = 9999999999;
  let maxz = -9999999999;
  for (let i = 0; i < 8; ++i) {
    cameraViewMatrix.transformPoint(aabbPoints[i], aabbPoints[i]);
    const z = aabbPoints[i].z;
    if (z < minz) minz = z;
    if (z > maxz) maxz = z;
  }
  _depthRange.min = minz;
  _depthRange.max = maxz;
  return _depthRange;
}

/**
 * @ignore
 */
class ShadowRendererDirectional {
  constructor(renderer, shadowRenderer) {
    this.renderer = renderer;
    this.shadowRenderer = shadowRenderer;
    this.device = renderer.device;
  }

  // cull directional shadow map
  cull(light, drawCalls, camera) {
    // force light visibility if function was manually called
    light.visibleThisFrame = true;
    if (!light._shadowMap) {
      light._shadowMap = ShadowMap.create(this.device, light);
    }

    // generate splits for the cascades
    const nearDist = camera._nearClip;
    this.generateSplitDistances(light, nearDist, light.shadowDistance);
    const shadowUpdateOverrides = light.shadowUpdateOverrides;
    for (let cascade = 0; cascade < light.numCascades; cascade++) {
      // if manually controlling cascade rendering and the cascade does not render this frame
      if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[cascade]) === SHADOWUPDATE_NONE) {
        break;
      }
      const lightRenderData = light.getRenderData(camera, cascade);
      const shadowCam = lightRenderData.shadowCamera;

      // assign render target
      // Note: this is done during rendering for all shadow maps, but do it here for the case shadow rendering for the directional light
      // is disabled - we need shadow map to be assigned for rendering to work even in this case. This needs further refactoring - as when
      // shadow rendering is set to SHADOWUPDATE_NONE, we should not even execute shadow map culling
      shadowCam.renderTarget = light._shadowMap.renderTargets[0];

      // viewport
      lightRenderData.shadowViewport.copy(light.cascades[cascade]);
      lightRenderData.shadowScissor.copy(light.cascades[cascade]);
      const shadowCamNode = shadowCam._node;
      const lightNode = light._node;
      shadowCamNode.setPosition(lightNode.getPosition());

      // Camera looks down the negative Z, and directional light points down the negative Y
      shadowCamNode.setRotation(lightNode.getRotation());
      shadowCamNode.rotateLocal(-90, 0, 0);

      // get camera's frustum corners for the cascade, convert them to world space and find their center
      const frustumNearDist = cascade === 0 ? nearDist : light._shadowCascadeDistances[cascade - 1];
      const frustumFarDist = light._shadowCascadeDistances[cascade];
      const frustumPoints = camera.getFrustumCorners(frustumNearDist, frustumFarDist);
      center.set(0, 0, 0);
      const cameraWorldMat = camera.node.getWorldTransform();
      for (let i = 0; i < 8; i++) {
        cameraWorldMat.transformPoint(frustumPoints[i], frustumPoints[i]);
        center.add(frustumPoints[i]);
      }
      center.mulScalar(1 / 8);

      // radius of the world space bounding sphere for the frustum slice
      let radius = 0;
      for (let i = 0; i < 8; i++) {
        const dist = frustumPoints[i].sub(center).length();
        if (dist > radius) radius = dist;
      }

      // axis of light coordinate system
      const right = shadowCamNode.right;
      const up = shadowCamNode.up;
      const lightDir = shadowCamNode.forward;

      // transform the sphere's center into the center of the shadow map, pixel aligned.
      // this makes the shadow map stable and avoids shimmering on the edges when the camera moves
      const sizeRatio = 0.25 * light._shadowResolution / radius;
      const x = Math.ceil(center.dot(up) * sizeRatio) / sizeRatio;
      const y = Math.ceil(center.dot(right) * sizeRatio) / sizeRatio;
      const scaledUp = up.mulScalar(x);
      const scaledRight = right.mulScalar(y);
      const dot = center.dot(lightDir);
      const scaledDir = lightDir.mulScalar(dot);
      center.add2(scaledUp, scaledRight).add(scaledDir);

      // look at the center from far away to include all casters during culling
      shadowCamNode.setPosition(center);
      shadowCamNode.translateLocal(0, 0, 1000000);
      shadowCam.nearClip = 0.01;
      shadowCam.farClip = 2000000;
      shadowCam.orthoHeight = radius;

      // cull shadow casters
      this.renderer.updateCameraFrustum(shadowCam);
      this.shadowRenderer.cullShadowCasters(drawCalls, lightRenderData.visibleCasters, shadowCam);

      // find out AABB of visible shadow casters
      let emptyAabb = true;
      const visibleCasters = lightRenderData.visibleCasters;
      for (let i = 0; i < visibleCasters.length; i++) {
        const meshInstance = visibleCasters[i];
        if (emptyAabb) {
          emptyAabb = false;
          visibleSceneAabb.copy(meshInstance.aabb);
        } else {
          visibleSceneAabb.add(meshInstance.aabb);
        }
      }

      // calculate depth range of the caster's AABB from the point of view of the shadow camera
      shadowCamView.copy(shadowCamNode.getWorldTransform()).invert();
      const depthRange = getDepthRange(shadowCamView, visibleSceneAabb.getMin(), visibleSceneAabb.getMax());

      // adjust shadow camera's near and far plane to the depth range of casters to maximize precision
      // of values stored in the shadow map. Make it slightly larger to avoid clipping on near / far plane.
      shadowCamNode.translateLocal(0, 0, depthRange.max + 0.1);
      shadowCam.farClip = depthRange.max - depthRange.min + 0.2;
    }
  }

  // function to generate frustum split distances
  generateSplitDistances(light, nearDist, farDist) {
    light._shadowCascadeDistances.fill(farDist);
    for (let i = 1; i < light.numCascades; i++) {
      //  lerp between linear and logarithmic distance, called practical split distance
      const fraction = i / light.numCascades;
      const linearDist = nearDist + (farDist - nearDist) * fraction;
      const logDist = nearDist * (farDist / nearDist) ** fraction;
      const dist = math.lerp(linearDist, logDist, light.cascadeDistribution);
      light._shadowCascadeDistances[i - 1] = dist;
    }
  }
  addLightRenderPasses(frameGraph, light, camera) {
    // shadow cascades have more faces rendered within a singe render pass
    const faceCount = light.numShadowFaces;
    const shadowUpdateOverrides = light.shadowUpdateOverrides;

    // prepare render targets / cameras for rendering
    let allCascadesRendering = true;
    let shadowCamera;
    for (let face = 0; face < faceCount; face++) {
      if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[face]) === SHADOWUPDATE_NONE) allCascadesRendering = false;
      shadowCamera = this.shadowRenderer.prepareFace(light, camera, face);
    }
    const renderPass = new RenderPass(this.device, () => {
      // inside the render pass, render all faces
      for (let face = 0; face < faceCount; face++) {
        if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[face]) !== SHADOWUPDATE_NONE) {
          this.shadowRenderer.renderFace(light, camera, face, !allCascadesRendering);
        }
        if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[face]) === SHADOWUPDATE_THISFRAME) {
          shadowUpdateOverrides[face] = SHADOWUPDATE_NONE;
        }
      }
    });
    renderPass.after = () => {
      // after the pass is done, apply VSM blur if needed
      this.shadowRenderer.renderVms(light, camera);
    };

    // setup render pass using any of the cameras, they all have the same pass related properties
    this.shadowRenderer.setupRenderPass(renderPass, shadowCamera, allCascadesRendering);
    DebugHelper.setName(renderPass, `DirShadow-${light._node.name}`);
    frameGraph.addRenderPass(renderPass);
  }

  /**
   * Builds a frame graph for rendering of directional shadows for the render action.
   *
   * @param {import('../frame-graph.js').FrameGraph} frameGraph - The frame-graph that is built.
   * @param {import('../composition/render-action.js').RenderAction} renderAction - The render
   * action.
   * @param {import('../../framework/components/camera/component.js').CameraComponent} camera - The camera.
   */
  buildFrameGraph(frameGraph, renderAction, camera) {
    // create required render passes per light
    const lights = renderAction.directionalLights;
    for (let i = 0; i < lights.length; i++) {
      const light = lights[i];
      Debug.assert(light && light._type === LIGHTTYPE_DIRECTIONAL);
      if (this.shadowRenderer.needsShadowRendering(light)) {
        this.addLightRenderPasses(frameGraph, light, camera.camera);
      }
    }
  }
}

export { ShadowRendererDirectional };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZG93LXJlbmRlcmVyLWRpcmVjdGlvbmFsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2NlbmUvcmVuZGVyZXIvc2hhZG93LXJlbmRlcmVyLWRpcmVjdGlvbmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnLCBEZWJ1Z0hlbHBlciB9IGZyb20gJy4uLy4uL2NvcmUvZGVidWcuanMnO1xuaW1wb3J0IHsgbWF0aCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9tYXRoLmpzJztcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvdmVjMy5qcyc7XG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSAnLi4vLi4vY29yZS9tYXRoL21hdDQuanMnO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tICcuLi8uLi9jb3JlL3NoYXBlL2JvdW5kaW5nLWJveC5qcyc7XG5cbmltcG9ydCB7XG4gICAgTElHSFRUWVBFX0RJUkVDVElPTkFMLCBTSEFET1dVUERBVEVfTk9ORSwgU0hBRE9XVVBEQVRFX1RISVNGUkFNRVxufSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgUmVuZGVyUGFzcyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3JlbmRlci1wYXNzLmpzJztcblxuaW1wb3J0IHsgU2hhZG93TWFwIH0gZnJvbSAnLi9zaGFkb3ctbWFwLmpzJztcblxuY29uc3QgdmlzaWJsZVNjZW5lQWFiYiA9IG5ldyBCb3VuZGluZ0JveCgpO1xuY29uc3QgY2VudGVyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNoYWRvd0NhbVZpZXcgPSBuZXcgTWF0NCgpO1xuXG5jb25zdCBhYWJiUG9pbnRzID0gW1xuICAgIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksXG4gICAgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKVxuXTtcblxuLy8gZXZhbHVhdGUgZGVwdGggcmFuZ2UgdGhlIGFhYmIgdGFrZXMgaW4gdGhlIHNwYWNlIG9mIHRoZSBjYW1lcmFcbmNvbnN0IF9kZXB0aFJhbmdlID0geyBtaW46IDAsIG1heDogMCB9O1xuZnVuY3Rpb24gZ2V0RGVwdGhSYW5nZShjYW1lcmFWaWV3TWF0cml4LCBhYWJiTWluLCBhYWJiTWF4KSB7XG4gICAgYWFiYlBvaW50c1swXS54ID0gYWFiYlBvaW50c1sxXS54ID0gYWFiYlBvaW50c1syXS54ID0gYWFiYlBvaW50c1szXS54ID0gYWFiYk1pbi54O1xuICAgIGFhYmJQb2ludHNbMV0ueSA9IGFhYmJQb2ludHNbM10ueSA9IGFhYmJQb2ludHNbN10ueSA9IGFhYmJQb2ludHNbNV0ueSA9IGFhYmJNaW4ueTtcbiAgICBhYWJiUG9pbnRzWzJdLnogPSBhYWJiUG9pbnRzWzNdLnogPSBhYWJiUG9pbnRzWzZdLnogPSBhYWJiUG9pbnRzWzddLnogPSBhYWJiTWluLno7XG4gICAgYWFiYlBvaW50c1s0XS54ID0gYWFiYlBvaW50c1s1XS54ID0gYWFiYlBvaW50c1s2XS54ID0gYWFiYlBvaW50c1s3XS54ID0gYWFiYk1heC54O1xuICAgIGFhYmJQb2ludHNbMF0ueSA9IGFhYmJQb2ludHNbMl0ueSA9IGFhYmJQb2ludHNbNF0ueSA9IGFhYmJQb2ludHNbNl0ueSA9IGFhYmJNYXgueTtcbiAgICBhYWJiUG9pbnRzWzBdLnogPSBhYWJiUG9pbnRzWzFdLnogPSBhYWJiUG9pbnRzWzRdLnogPSBhYWJiUG9pbnRzWzVdLnogPSBhYWJiTWF4Lno7XG5cbiAgICBsZXQgbWlueiA9IDk5OTk5OTk5OTk7XG4gICAgbGV0IG1heHogPSAtOTk5OTk5OTk5OTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgKytpKSB7XG4gICAgICAgIGNhbWVyYVZpZXdNYXRyaXgudHJhbnNmb3JtUG9pbnQoYWFiYlBvaW50c1tpXSwgYWFiYlBvaW50c1tpXSk7XG4gICAgICAgIGNvbnN0IHogPSBhYWJiUG9pbnRzW2ldLno7XG4gICAgICAgIGlmICh6IDwgbWlueikgbWlueiA9IHo7XG4gICAgICAgIGlmICh6ID4gbWF4eikgbWF4eiA9IHo7XG4gICAgfVxuXG4gICAgX2RlcHRoUmFuZ2UubWluID0gbWluejtcbiAgICBfZGVwdGhSYW5nZS5tYXggPSBtYXh6O1xuICAgIHJldHVybiBfZGVwdGhSYW5nZTtcbn1cblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIFNoYWRvd1JlbmRlcmVyRGlyZWN0aW9uYWwge1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBzaGFkb3dSZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuc2hhZG93UmVuZGVyZXIgPSBzaGFkb3dSZW5kZXJlcjtcbiAgICAgICAgdGhpcy5kZXZpY2UgPSByZW5kZXJlci5kZXZpY2U7XG4gICAgfVxuXG4gICAgLy8gY3VsbCBkaXJlY3Rpb25hbCBzaGFkb3cgbWFwXG4gICAgY3VsbChsaWdodCwgZHJhd0NhbGxzLCBjYW1lcmEpIHtcblxuICAgICAgICAvLyBmb3JjZSBsaWdodCB2aXNpYmlsaXR5IGlmIGZ1bmN0aW9uIHdhcyBtYW51YWxseSBjYWxsZWRcbiAgICAgICAgbGlnaHQudmlzaWJsZVRoaXNGcmFtZSA9IHRydWU7XG5cbiAgICAgICAgaWYgKCFsaWdodC5fc2hhZG93TWFwKSB7XG4gICAgICAgICAgICBsaWdodC5fc2hhZG93TWFwID0gU2hhZG93TWFwLmNyZWF0ZSh0aGlzLmRldmljZSwgbGlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgc3BsaXRzIGZvciB0aGUgY2FzY2FkZXNcbiAgICAgICAgY29uc3QgbmVhckRpc3QgPSBjYW1lcmEuX25lYXJDbGlwO1xuICAgICAgICB0aGlzLmdlbmVyYXRlU3BsaXREaXN0YW5jZXMobGlnaHQsIG5lYXJEaXN0LCBsaWdodC5zaGFkb3dEaXN0YW5jZSk7XG5cbiAgICAgICAgY29uc3Qgc2hhZG93VXBkYXRlT3ZlcnJpZGVzID0gbGlnaHQuc2hhZG93VXBkYXRlT3ZlcnJpZGVzO1xuICAgICAgICBmb3IgKGxldCBjYXNjYWRlID0gMDsgY2FzY2FkZSA8IGxpZ2h0Lm51bUNhc2NhZGVzOyBjYXNjYWRlKyspIHtcblxuICAgICAgICAgICAgLy8gaWYgbWFudWFsbHkgY29udHJvbGxpbmcgY2FzY2FkZSByZW5kZXJpbmcgYW5kIHRoZSBjYXNjYWRlIGRvZXMgbm90IHJlbmRlciB0aGlzIGZyYW1lXG4gICAgICAgICAgICBpZiAoc2hhZG93VXBkYXRlT3ZlcnJpZGVzPy5bY2FzY2FkZV0gPT09IFNIQURPV1VQREFURV9OT05FKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0UmVuZGVyRGF0YSA9IGxpZ2h0LmdldFJlbmRlckRhdGEoY2FtZXJhLCBjYXNjYWRlKTtcbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd0NhbSA9IGxpZ2h0UmVuZGVyRGF0YS5zaGFkb3dDYW1lcmE7XG5cbiAgICAgICAgICAgIC8vIGFzc2lnbiByZW5kZXIgdGFyZ2V0XG4gICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGlzIGRvbmUgZHVyaW5nIHJlbmRlcmluZyBmb3IgYWxsIHNoYWRvdyBtYXBzLCBidXQgZG8gaXQgaGVyZSBmb3IgdGhlIGNhc2Ugc2hhZG93IHJlbmRlcmluZyBmb3IgdGhlIGRpcmVjdGlvbmFsIGxpZ2h0XG4gICAgICAgICAgICAvLyBpcyBkaXNhYmxlZCAtIHdlIG5lZWQgc2hhZG93IG1hcCB0byBiZSBhc3NpZ25lZCBmb3IgcmVuZGVyaW5nIHRvIHdvcmsgZXZlbiBpbiB0aGlzIGNhc2UuIFRoaXMgbmVlZHMgZnVydGhlciByZWZhY3RvcmluZyAtIGFzIHdoZW5cbiAgICAgICAgICAgIC8vIHNoYWRvdyByZW5kZXJpbmcgaXMgc2V0IHRvIFNIQURPV1VQREFURV9OT05FLCB3ZSBzaG91bGQgbm90IGV2ZW4gZXhlY3V0ZSBzaGFkb3cgbWFwIGN1bGxpbmdcbiAgICAgICAgICAgIHNoYWRvd0NhbS5yZW5kZXJUYXJnZXQgPSBsaWdodC5fc2hhZG93TWFwLnJlbmRlclRhcmdldHNbMF07XG5cbiAgICAgICAgICAgIC8vIHZpZXdwb3J0XG4gICAgICAgICAgICBsaWdodFJlbmRlckRhdGEuc2hhZG93Vmlld3BvcnQuY29weShsaWdodC5jYXNjYWRlc1tjYXNjYWRlXSk7XG4gICAgICAgICAgICBsaWdodFJlbmRlckRhdGEuc2hhZG93U2Npc3Nvci5jb3B5KGxpZ2h0LmNhc2NhZGVzW2Nhc2NhZGVdKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hhZG93Q2FtTm9kZSA9IHNoYWRvd0NhbS5fbm9kZTtcbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0Tm9kZSA9IGxpZ2h0Ll9ub2RlO1xuXG4gICAgICAgICAgICBzaGFkb3dDYW1Ob2RlLnNldFBvc2l0aW9uKGxpZ2h0Tm9kZS5nZXRQb3NpdGlvbigpKTtcblxuICAgICAgICAgICAgLy8gQ2FtZXJhIGxvb2tzIGRvd24gdGhlIG5lZ2F0aXZlIFosIGFuZCBkaXJlY3Rpb25hbCBsaWdodCBwb2ludHMgZG93biB0aGUgbmVnYXRpdmUgWVxuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS5zZXRSb3RhdGlvbihsaWdodE5vZGUuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICBzaGFkb3dDYW1Ob2RlLnJvdGF0ZUxvY2FsKC05MCwgMCwgMCk7XG5cbiAgICAgICAgICAgIC8vIGdldCBjYW1lcmEncyBmcnVzdHVtIGNvcm5lcnMgZm9yIHRoZSBjYXNjYWRlLCBjb252ZXJ0IHRoZW0gdG8gd29ybGQgc3BhY2UgYW5kIGZpbmQgdGhlaXIgY2VudGVyXG4gICAgICAgICAgICBjb25zdCBmcnVzdHVtTmVhckRpc3QgPSBjYXNjYWRlID09PSAwID8gbmVhckRpc3QgOiBsaWdodC5fc2hhZG93Q2FzY2FkZURpc3RhbmNlc1tjYXNjYWRlIC0gMV07XG4gICAgICAgICAgICBjb25zdCBmcnVzdHVtRmFyRGlzdCA9IGxpZ2h0Ll9zaGFkb3dDYXNjYWRlRGlzdGFuY2VzW2Nhc2NhZGVdO1xuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bVBvaW50cyA9IGNhbWVyYS5nZXRGcnVzdHVtQ29ybmVycyhmcnVzdHVtTmVhckRpc3QsIGZydXN0dW1GYXJEaXN0KTtcbiAgICAgICAgICAgIGNlbnRlci5zZXQoMCwgMCwgMCk7XG4gICAgICAgICAgICBjb25zdCBjYW1lcmFXb3JsZE1hdCA9IGNhbWVyYS5ub2RlLmdldFdvcmxkVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNhbWVyYVdvcmxkTWF0LnRyYW5zZm9ybVBvaW50KGZydXN0dW1Qb2ludHNbaV0sIGZydXN0dW1Qb2ludHNbaV0pO1xuICAgICAgICAgICAgICAgIGNlbnRlci5hZGQoZnJ1c3R1bVBvaW50c1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjZW50ZXIubXVsU2NhbGFyKDEgLyA4KTtcblxuICAgICAgICAgICAgLy8gcmFkaXVzIG9mIHRoZSB3b3JsZCBzcGFjZSBib3VuZGluZyBzcGhlcmUgZm9yIHRoZSBmcnVzdHVtIHNsaWNlXG4gICAgICAgICAgICBsZXQgcmFkaXVzID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IGZydXN0dW1Qb2ludHNbaV0uc3ViKGNlbnRlcikubGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3QgPiByYWRpdXMpXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1cyA9IGRpc3Q7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGF4aXMgb2YgbGlnaHQgY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gc2hhZG93Q2FtTm9kZS5yaWdodDtcbiAgICAgICAgICAgIGNvbnN0IHVwID0gc2hhZG93Q2FtTm9kZS51cDtcbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0RGlyID0gc2hhZG93Q2FtTm9kZS5mb3J3YXJkO1xuXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm0gdGhlIHNwaGVyZSdzIGNlbnRlciBpbnRvIHRoZSBjZW50ZXIgb2YgdGhlIHNoYWRvdyBtYXAsIHBpeGVsIGFsaWduZWQuXG4gICAgICAgICAgICAvLyB0aGlzIG1ha2VzIHRoZSBzaGFkb3cgbWFwIHN0YWJsZSBhbmQgYXZvaWRzIHNoaW1tZXJpbmcgb24gdGhlIGVkZ2VzIHdoZW4gdGhlIGNhbWVyYSBtb3Zlc1xuICAgICAgICAgICAgY29uc3Qgc2l6ZVJhdGlvID0gMC4yNSAqIGxpZ2h0Ll9zaGFkb3dSZXNvbHV0aW9uIC8gcmFkaXVzO1xuICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguY2VpbChjZW50ZXIuZG90KHVwKSAqIHNpemVSYXRpbykgLyBzaXplUmF0aW87XG4gICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5jZWlsKGNlbnRlci5kb3QocmlnaHQpICogc2l6ZVJhdGlvKSAvIHNpemVSYXRpbztcblxuICAgICAgICAgICAgY29uc3Qgc2NhbGVkVXAgPSB1cC5tdWxTY2FsYXIoeCk7XG4gICAgICAgICAgICBjb25zdCBzY2FsZWRSaWdodCA9IHJpZ2h0Lm11bFNjYWxhcih5KTtcbiAgICAgICAgICAgIGNvbnN0IGRvdCA9IGNlbnRlci5kb3QobGlnaHREaXIpO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVkRGlyID0gbGlnaHREaXIubXVsU2NhbGFyKGRvdCk7XG4gICAgICAgICAgICBjZW50ZXIuYWRkMihzY2FsZWRVcCwgc2NhbGVkUmlnaHQpLmFkZChzY2FsZWREaXIpO1xuXG4gICAgICAgICAgICAvLyBsb29rIGF0IHRoZSBjZW50ZXIgZnJvbSBmYXIgYXdheSB0byBpbmNsdWRlIGFsbCBjYXN0ZXJzIGR1cmluZyBjdWxsaW5nXG4gICAgICAgICAgICBzaGFkb3dDYW1Ob2RlLnNldFBvc2l0aW9uKGNlbnRlcik7XG4gICAgICAgICAgICBzaGFkb3dDYW1Ob2RlLnRyYW5zbGF0ZUxvY2FsKDAsIDAsIDEwMDAwMDApO1xuICAgICAgICAgICAgc2hhZG93Q2FtLm5lYXJDbGlwID0gMC4wMTtcbiAgICAgICAgICAgIHNoYWRvd0NhbS5mYXJDbGlwID0gMjAwMDAwMDtcbiAgICAgICAgICAgIHNoYWRvd0NhbS5vcnRob0hlaWdodCA9IHJhZGl1cztcblxuICAgICAgICAgICAgLy8gY3VsbCBzaGFkb3cgY2FzdGVyc1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVDYW1lcmFGcnVzdHVtKHNoYWRvd0NhbSk7XG4gICAgICAgICAgICB0aGlzLnNoYWRvd1JlbmRlcmVyLmN1bGxTaGFkb3dDYXN0ZXJzKGRyYXdDYWxscywgbGlnaHRSZW5kZXJEYXRhLnZpc2libGVDYXN0ZXJzLCBzaGFkb3dDYW0pO1xuXG4gICAgICAgICAgICAvLyBmaW5kIG91dCBBQUJCIG9mIHZpc2libGUgc2hhZG93IGNhc3RlcnNcbiAgICAgICAgICAgIGxldCBlbXB0eUFhYmIgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgdmlzaWJsZUNhc3RlcnMgPSBsaWdodFJlbmRlckRhdGEudmlzaWJsZUNhc3RlcnM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpc2libGVDYXN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlID0gdmlzaWJsZUNhc3RlcnNbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAoZW1wdHlBYWJiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5QWFiYiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlU2NlbmVBYWJiLmNvcHkobWVzaEluc3RhbmNlLmFhYmIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVTY2VuZUFhYmIuYWRkKG1lc2hJbnN0YW5jZS5hYWJiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBkZXB0aCByYW5nZSBvZiB0aGUgY2FzdGVyJ3MgQUFCQiBmcm9tIHRoZSBwb2ludCBvZiB2aWV3IG9mIHRoZSBzaGFkb3cgY2FtZXJhXG4gICAgICAgICAgICBzaGFkb3dDYW1WaWV3LmNvcHkoc2hhZG93Q2FtTm9kZS5nZXRXb3JsZFRyYW5zZm9ybSgpKS5pbnZlcnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRlcHRoUmFuZ2UgPSBnZXREZXB0aFJhbmdlKHNoYWRvd0NhbVZpZXcsIHZpc2libGVTY2VuZUFhYmIuZ2V0TWluKCksIHZpc2libGVTY2VuZUFhYmIuZ2V0TWF4KCkpO1xuXG4gICAgICAgICAgICAvLyBhZGp1c3Qgc2hhZG93IGNhbWVyYSdzIG5lYXIgYW5kIGZhciBwbGFuZSB0byB0aGUgZGVwdGggcmFuZ2Ugb2YgY2FzdGVycyB0byBtYXhpbWl6ZSBwcmVjaXNpb25cbiAgICAgICAgICAgIC8vIG9mIHZhbHVlcyBzdG9yZWQgaW4gdGhlIHNoYWRvdyBtYXAuIE1ha2UgaXQgc2xpZ2h0bHkgbGFyZ2VyIHRvIGF2b2lkIGNsaXBwaW5nIG9uIG5lYXIgLyBmYXIgcGxhbmUuXG4gICAgICAgICAgICBzaGFkb3dDYW1Ob2RlLnRyYW5zbGF0ZUxvY2FsKDAsIDAsIGRlcHRoUmFuZ2UubWF4ICsgMC4xKTtcbiAgICAgICAgICAgIHNoYWRvd0NhbS5mYXJDbGlwID0gZGVwdGhSYW5nZS5tYXggLSBkZXB0aFJhbmdlLm1pbiArIDAuMjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGZydXN0dW0gc3BsaXQgZGlzdGFuY2VzXG4gICAgZ2VuZXJhdGVTcGxpdERpc3RhbmNlcyhsaWdodCwgbmVhckRpc3QsIGZhckRpc3QpIHtcblxuICAgICAgICBsaWdodC5fc2hhZG93Q2FzY2FkZURpc3RhbmNlcy5maWxsKGZhckRpc3QpO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpZ2h0Lm51bUNhc2NhZGVzOyBpKyspIHtcblxuICAgICAgICAgICAgLy8gIGxlcnAgYmV0d2VlbiBsaW5lYXIgYW5kIGxvZ2FyaXRobWljIGRpc3RhbmNlLCBjYWxsZWQgcHJhY3RpY2FsIHNwbGl0IGRpc3RhbmNlXG4gICAgICAgICAgICBjb25zdCBmcmFjdGlvbiA9IGkgLyBsaWdodC5udW1DYXNjYWRlcztcbiAgICAgICAgICAgIGNvbnN0IGxpbmVhckRpc3QgPSBuZWFyRGlzdCArIChmYXJEaXN0IC0gbmVhckRpc3QpICogZnJhY3Rpb247XG4gICAgICAgICAgICBjb25zdCBsb2dEaXN0ID0gbmVhckRpc3QgKiAoZmFyRGlzdCAvIG5lYXJEaXN0KSAqKiBmcmFjdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBtYXRoLmxlcnAobGluZWFyRGlzdCwgbG9nRGlzdCwgbGlnaHQuY2FzY2FkZURpc3RyaWJ1dGlvbik7XG4gICAgICAgICAgICBsaWdodC5fc2hhZG93Q2FzY2FkZURpc3RhbmNlc1tpIC0gMV0gPSBkaXN0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkTGlnaHRSZW5kZXJQYXNzZXMoZnJhbWVHcmFwaCwgbGlnaHQsIGNhbWVyYSkge1xuXG4gICAgICAgIC8vIHNoYWRvdyBjYXNjYWRlcyBoYXZlIG1vcmUgZmFjZXMgcmVuZGVyZWQgd2l0aGluIGEgc2luZ2UgcmVuZGVyIHBhc3NcbiAgICAgICAgY29uc3QgZmFjZUNvdW50ID0gbGlnaHQubnVtU2hhZG93RmFjZXM7XG4gICAgICAgIGNvbnN0IHNoYWRvd1VwZGF0ZU92ZXJyaWRlcyA9IGxpZ2h0LnNoYWRvd1VwZGF0ZU92ZXJyaWRlcztcblxuICAgICAgICAvLyBwcmVwYXJlIHJlbmRlciB0YXJnZXRzIC8gY2FtZXJhcyBmb3IgcmVuZGVyaW5nXG4gICAgICAgIGxldCBhbGxDYXNjYWRlc1JlbmRlcmluZyA9IHRydWU7XG4gICAgICAgIGxldCBzaGFkb3dDYW1lcmE7XG4gICAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgZmFjZUNvdW50OyBmYWNlKyspIHtcblxuICAgICAgICAgICAgaWYgKHNoYWRvd1VwZGF0ZU92ZXJyaWRlcz8uW2ZhY2VdID09PSBTSEFET1dVUERBVEVfTk9ORSlcbiAgICAgICAgICAgICAgICBhbGxDYXNjYWRlc1JlbmRlcmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBzaGFkb3dDYW1lcmEgPSB0aGlzLnNoYWRvd1JlbmRlcmVyLnByZXBhcmVGYWNlKGxpZ2h0LCBjYW1lcmEsIGZhY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVuZGVyUGFzcyA9IG5ldyBSZW5kZXJQYXNzKHRoaXMuZGV2aWNlLCAoKSA9PiB7XG5cbiAgICAgICAgICAgIC8vIGluc2lkZSB0aGUgcmVuZGVyIHBhc3MsIHJlbmRlciBhbGwgZmFjZXNcbiAgICAgICAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgZmFjZUNvdW50OyBmYWNlKyspIHtcblxuICAgICAgICAgICAgICAgIGlmIChzaGFkb3dVcGRhdGVPdmVycmlkZXM/LltmYWNlXSAhPT0gU0hBRE9XVVBEQVRFX05PTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFkb3dSZW5kZXJlci5yZW5kZXJGYWNlKGxpZ2h0LCBjYW1lcmEsIGZhY2UsICFhbGxDYXNjYWRlc1JlbmRlcmluZyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNoYWRvd1VwZGF0ZU92ZXJyaWRlcz8uW2ZhY2VdID09PSBTSEFET1dVUERBVEVfVEhJU0ZSQU1FKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRvd1VwZGF0ZU92ZXJyaWRlc1tmYWNlXSA9IFNIQURPV1VQREFURV9OT05FO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVuZGVyUGFzcy5hZnRlciA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIGFmdGVyIHRoZSBwYXNzIGlzIGRvbmUsIGFwcGx5IFZTTSBibHVyIGlmIG5lZWRlZFxuICAgICAgICAgICAgdGhpcy5zaGFkb3dSZW5kZXJlci5yZW5kZXJWbXMobGlnaHQsIGNhbWVyYSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gc2V0dXAgcmVuZGVyIHBhc3MgdXNpbmcgYW55IG9mIHRoZSBjYW1lcmFzLCB0aGV5IGFsbCBoYXZlIHRoZSBzYW1lIHBhc3MgcmVsYXRlZCBwcm9wZXJ0aWVzXG4gICAgICAgIHRoaXMuc2hhZG93UmVuZGVyZXIuc2V0dXBSZW5kZXJQYXNzKHJlbmRlclBhc3MsIHNoYWRvd0NhbWVyYSwgYWxsQ2FzY2FkZXNSZW5kZXJpbmcpO1xuICAgICAgICBEZWJ1Z0hlbHBlci5zZXROYW1lKHJlbmRlclBhc3MsIGBEaXJTaGFkb3ctJHtsaWdodC5fbm9kZS5uYW1lfWApO1xuXG4gICAgICAgIGZyYW1lR3JhcGguYWRkUmVuZGVyUGFzcyhyZW5kZXJQYXNzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBmcmFtZSBncmFwaCBmb3IgcmVuZGVyaW5nIG9mIGRpcmVjdGlvbmFsIHNoYWRvd3MgZm9yIHRoZSByZW5kZXIgYWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2ZyYW1lLWdyYXBoLmpzJykuRnJhbWVHcmFwaH0gZnJhbWVHcmFwaCAtIFRoZSBmcmFtZS1ncmFwaCB0aGF0IGlzIGJ1aWx0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9jb21wb3NpdGlvbi9yZW5kZXItYWN0aW9uLmpzJykuUmVuZGVyQWN0aW9ufSByZW5kZXJBY3Rpb24gLSBUaGUgcmVuZGVyXG4gICAgICogYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9mcmFtZXdvcmsvY29tcG9uZW50cy9jYW1lcmEvY29tcG9uZW50LmpzJykuQ2FtZXJhQ29tcG9uZW50fSBjYW1lcmEgLSBUaGUgY2FtZXJhLlxuICAgICAqL1xuICAgIGJ1aWxkRnJhbWVHcmFwaChmcmFtZUdyYXBoLCByZW5kZXJBY3Rpb24sIGNhbWVyYSkge1xuXG4gICAgICAgIC8vIGNyZWF0ZSByZXF1aXJlZCByZW5kZXIgcGFzc2VzIHBlciBsaWdodFxuICAgICAgICBjb25zdCBsaWdodHMgPSByZW5kZXJBY3Rpb24uZGlyZWN0aW9uYWxMaWdodHM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsaWdodCA9IGxpZ2h0c1tpXTtcbiAgICAgICAgICAgIERlYnVnLmFzc2VydChsaWdodCAmJiBsaWdodC5fdHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hhZG93UmVuZGVyZXIubmVlZHNTaGFkb3dSZW5kZXJpbmcobGlnaHQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRMaWdodFJlbmRlclBhc3NlcyhmcmFtZUdyYXBoLCBsaWdodCwgY2FtZXJhLmNhbWVyYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IFNoYWRvd1JlbmRlcmVyRGlyZWN0aW9uYWwgfTtcbiJdLCJuYW1lcyI6WyJ2aXNpYmxlU2NlbmVBYWJiIiwiQm91bmRpbmdCb3giLCJjZW50ZXIiLCJWZWMzIiwic2hhZG93Q2FtVmlldyIsIk1hdDQiLCJhYWJiUG9pbnRzIiwiX2RlcHRoUmFuZ2UiLCJtaW4iLCJtYXgiLCJnZXREZXB0aFJhbmdlIiwiY2FtZXJhVmlld01hdHJpeCIsImFhYmJNaW4iLCJhYWJiTWF4IiwieCIsInkiLCJ6IiwibWlueiIsIm1heHoiLCJpIiwidHJhbnNmb3JtUG9pbnQiLCJTaGFkb3dSZW5kZXJlckRpcmVjdGlvbmFsIiwiY29uc3RydWN0b3IiLCJyZW5kZXJlciIsInNoYWRvd1JlbmRlcmVyIiwiZGV2aWNlIiwiY3VsbCIsImxpZ2h0IiwiZHJhd0NhbGxzIiwiY2FtZXJhIiwidmlzaWJsZVRoaXNGcmFtZSIsIl9zaGFkb3dNYXAiLCJTaGFkb3dNYXAiLCJjcmVhdGUiLCJuZWFyRGlzdCIsIl9uZWFyQ2xpcCIsImdlbmVyYXRlU3BsaXREaXN0YW5jZXMiLCJzaGFkb3dEaXN0YW5jZSIsInNoYWRvd1VwZGF0ZU92ZXJyaWRlcyIsImNhc2NhZGUiLCJudW1DYXNjYWRlcyIsIlNIQURPV1VQREFURV9OT05FIiwibGlnaHRSZW5kZXJEYXRhIiwiZ2V0UmVuZGVyRGF0YSIsInNoYWRvd0NhbSIsInNoYWRvd0NhbWVyYSIsInJlbmRlclRhcmdldCIsInJlbmRlclRhcmdldHMiLCJzaGFkb3dWaWV3cG9ydCIsImNvcHkiLCJjYXNjYWRlcyIsInNoYWRvd1NjaXNzb3IiLCJzaGFkb3dDYW1Ob2RlIiwiX25vZGUiLCJsaWdodE5vZGUiLCJzZXRQb3NpdGlvbiIsImdldFBvc2l0aW9uIiwic2V0Um90YXRpb24iLCJnZXRSb3RhdGlvbiIsInJvdGF0ZUxvY2FsIiwiZnJ1c3R1bU5lYXJEaXN0IiwiX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXMiLCJmcnVzdHVtRmFyRGlzdCIsImZydXN0dW1Qb2ludHMiLCJnZXRGcnVzdHVtQ29ybmVycyIsInNldCIsImNhbWVyYVdvcmxkTWF0Iiwibm9kZSIsImdldFdvcmxkVHJhbnNmb3JtIiwiYWRkIiwibXVsU2NhbGFyIiwicmFkaXVzIiwiZGlzdCIsInN1YiIsImxlbmd0aCIsInJpZ2h0IiwidXAiLCJsaWdodERpciIsImZvcndhcmQiLCJzaXplUmF0aW8iLCJfc2hhZG93UmVzb2x1dGlvbiIsIk1hdGgiLCJjZWlsIiwiZG90Iiwic2NhbGVkVXAiLCJzY2FsZWRSaWdodCIsInNjYWxlZERpciIsImFkZDIiLCJ0cmFuc2xhdGVMb2NhbCIsIm5lYXJDbGlwIiwiZmFyQ2xpcCIsIm9ydGhvSGVpZ2h0IiwidXBkYXRlQ2FtZXJhRnJ1c3R1bSIsImN1bGxTaGFkb3dDYXN0ZXJzIiwidmlzaWJsZUNhc3RlcnMiLCJlbXB0eUFhYmIiLCJtZXNoSW5zdGFuY2UiLCJhYWJiIiwiaW52ZXJ0IiwiZGVwdGhSYW5nZSIsImdldE1pbiIsImdldE1heCIsImZhckRpc3QiLCJmaWxsIiwiZnJhY3Rpb24iLCJsaW5lYXJEaXN0IiwibG9nRGlzdCIsIm1hdGgiLCJsZXJwIiwiY2FzY2FkZURpc3RyaWJ1dGlvbiIsImFkZExpZ2h0UmVuZGVyUGFzc2VzIiwiZnJhbWVHcmFwaCIsImZhY2VDb3VudCIsIm51bVNoYWRvd0ZhY2VzIiwiYWxsQ2FzY2FkZXNSZW5kZXJpbmciLCJmYWNlIiwicHJlcGFyZUZhY2UiLCJyZW5kZXJQYXNzIiwiUmVuZGVyUGFzcyIsInJlbmRlckZhY2UiLCJTSEFET1dVUERBVEVfVEhJU0ZSQU1FIiwiYWZ0ZXIiLCJyZW5kZXJWbXMiLCJzZXR1cFJlbmRlclBhc3MiLCJEZWJ1Z0hlbHBlciIsInNldE5hbWUiLCJuYW1lIiwiYWRkUmVuZGVyUGFzcyIsImJ1aWxkRnJhbWVHcmFwaCIsInJlbmRlckFjdGlvbiIsImxpZ2h0cyIsImRpcmVjdGlvbmFsTGlnaHRzIiwiRGVidWciLCJhc3NlcnQiLCJfdHlwZSIsIkxJR0hUVFlQRV9ESVJFQ1RJT05BTCIsIm5lZWRzU2hhZG93UmVuZGVyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQWFBLE1BQU1BLGdCQUFnQixHQUFHLElBQUlDLFdBQVcsRUFBRSxDQUFBO0FBQzFDLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxJQUFJLEVBQUUsQ0FBQTtBQUN6QixNQUFNQyxhQUFhLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUE7QUFFaEMsTUFBTUMsVUFBVSxHQUFHLENBQ2YsSUFBSUgsSUFBSSxFQUFFLEVBQUUsSUFBSUEsSUFBSSxFQUFFLEVBQUUsSUFBSUEsSUFBSSxFQUFFLEVBQUUsSUFBSUEsSUFBSSxFQUFFLEVBQzlDLElBQUlBLElBQUksRUFBRSxFQUFFLElBQUlBLElBQUksRUFBRSxFQUFFLElBQUlBLElBQUksRUFBRSxFQUFFLElBQUlBLElBQUksRUFBRSxDQUNqRCxDQUFBOztBQUVEO0FBQ0EsTUFBTUksV0FBVyxHQUFHO0FBQUVDLEVBQUFBLEdBQUcsRUFBRSxDQUFDO0FBQUVD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
