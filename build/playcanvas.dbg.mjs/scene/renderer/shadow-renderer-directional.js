/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { DebugHelper, Debug } from '../../core/debug.js';
import { math } from '../../core/math/math.js';
import { Vec3 } from '../../core/math/vec3.js';
import { Mat4 } from '../../core/math/mat4.js';
import { BoundingBox } from '../../core/shape/bounding-box.js';
import { SHADOWUPDATE_NONE, SHADOWUPDATE_THISFRAME, LIGHTTYPE_DIRECTIONAL } from '../constants.js';
import { RenderPass } from '../../platform/graphics/render-pass.js';
import { ShadowRenderer } from './shadow-renderer.js';
import { ShadowMap } from './shadow-map.js';

const visibleSceneAabb = new BoundingBox();
const center = new Vec3();
const shadowCamView = new Mat4();
const aabbPoints = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];

const _depthRange = {
  min: 0,
  max: 0
};
function getDepthRange(cameraViewMatrix, aabbMin, aabbMax) {
  aabbPoints[0].x = aabbPoints[1].x = aabbPoints[2].x = aabbPoints[3].x = aabbMin.x;
  aabbPoints[1].y = aabbPoints[3].y = aabbPoints[7].y = aabbPoints[5].y = aabbMin.y;
  aabbPoints[2].z = aabbPoints[3].z = aabbPoints[6].z = aabbPoints[7].z = aabbMin.z;
  aabbPoints[4].x = aabbPoints[5].x = aabbPoints[6].x = aabbPoints[7].x = aabbMax.x;
  aabbPoints[0].y = aabbPoints[2].y = aabbPoints[4].y = aabbPoints[6].y = aabbMax.y;
  aabbPoints[0].z = aabbPoints[1].z = aabbPoints[4].z = aabbPoints[5].z = aabbMax.z;
  let minz = 9999999999;
  let maxz = -9999999999;
  for (let i = 0; i < 8; ++i) {
    cameraViewMatrix.transformPoint(aabbPoints[i], aabbPoints[i]);
    const z = aabbPoints[i].z;
    if (z < minz) minz = z;
    if (z > maxz) maxz = z;
  }
  _depthRange.min = minz;
  _depthRange.max = maxz;
  return _depthRange;
}

class ShadowRendererDirectional extends ShadowRenderer {
  cull(light, drawCalls, camera) {
    light.visibleThisFrame = true;
    if (!light._shadowMap) {
      light._shadowMap = ShadowMap.create(this.device, light);
    }

    const nearDist = camera._nearClip;
    this.generateSplitDistances(light, nearDist, light.shadowDistance);
    const shadowUpdateOverrides = light.shadowUpdateOverrides;
    for (let cascade = 0; cascade < light.numCascades; cascade++) {
      if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[cascade]) === SHADOWUPDATE_NONE) {
        break;
      }
      const lightRenderData = light.getRenderData(camera, cascade);
      const shadowCam = lightRenderData.shadowCamera;

      shadowCam.renderTarget = light._shadowMap.renderTargets[0];

      lightRenderData.shadowViewport.copy(light.cascades[cascade]);
      lightRenderData.shadowScissor.copy(light.cascades[cascade]);
      const shadowCamNode = shadowCam._node;
      const lightNode = light._node;
      shadowCamNode.setPosition(lightNode.getPosition());

      shadowCamNode.setRotation(lightNode.getRotation());
      shadowCamNode.rotateLocal(-90, 0, 0);

      const frustumNearDist = cascade === 0 ? nearDist : light._shadowCascadeDistances[cascade - 1];
      const frustumFarDist = light._shadowCascadeDistances[cascade];
      const frustumPoints = camera.getFrustumCorners(frustumNearDist, frustumFarDist);
      center.set(0, 0, 0);
      const cameraWorldMat = camera.node.getWorldTransform();
      for (let i = 0; i < 8; i++) {
        cameraWorldMat.transformPoint(frustumPoints[i], frustumPoints[i]);
        center.add(frustumPoints[i]);
      }
      center.mulScalar(1 / 8);

      let radius = 0;
      for (let i = 0; i < 8; i++) {
        const dist = frustumPoints[i].sub(center).length();
        if (dist > radius) radius = dist;
      }

      const right = shadowCamNode.right;
      const up = shadowCamNode.up;
      const lightDir = shadowCamNode.forward;

      const sizeRatio = 0.25 * light._shadowResolution / radius;
      const x = Math.ceil(center.dot(up) * sizeRatio) / sizeRatio;
      const y = Math.ceil(center.dot(right) * sizeRatio) / sizeRatio;
      const scaledUp = up.mulScalar(x);
      const scaledRight = right.mulScalar(y);
      const dot = center.dot(lightDir);
      const scaledDir = lightDir.mulScalar(dot);
      center.add2(scaledUp, scaledRight).add(scaledDir);

      shadowCamNode.setPosition(center);
      shadowCamNode.translateLocal(0, 0, 1000000);
      shadowCam.nearClip = 0.01;
      shadowCam.farClip = 2000000;
      shadowCam.orthoHeight = radius;

      this.renderer.updateCameraFrustum(shadowCam);
      this.cullShadowCasters(drawCalls, lightRenderData.visibleCasters, shadowCam);

      let emptyAabb = true;
      const visibleCasters = lightRenderData.visibleCasters;
      for (let i = 0; i < visibleCasters.length; i++) {
        const meshInstance = visibleCasters[i];
        if (emptyAabb) {
          emptyAabb = false;
          visibleSceneAabb.copy(meshInstance.aabb);
        } else {
          visibleSceneAabb.add(meshInstance.aabb);
        }
      }

      shadowCamView.copy(shadowCamNode.getWorldTransform()).invert();
      const depthRange = getDepthRange(shadowCamView, visibleSceneAabb.getMin(), visibleSceneAabb.getMax());

      shadowCamNode.translateLocal(0, 0, depthRange.max + 0.1);
      shadowCam.farClip = depthRange.max - depthRange.min + 0.2;
    }
  }

  generateSplitDistances(light, nearDist, farDist) {
    light._shadowCascadeDistances.fill(farDist);
    for (let i = 1; i < light.numCascades; i++) {
      const fraction = i / light.numCascades;
      const linearDist = nearDist + (farDist - nearDist) * fraction;
      const logDist = nearDist * (farDist / nearDist) ** fraction;
      const dist = math.lerp(linearDist, logDist, light.cascadeDistribution);
      light._shadowCascadeDistances[i - 1] = dist;
    }
  }
  addLightRenderPasses(frameGraph, light, camera) {
    const faceCount = light.numShadowFaces;
    const shadowUpdateOverrides = light.shadowUpdateOverrides;

    let allCascadesRendering = true;
    let shadowCamera;
    for (let face = 0; face < faceCount; face++) {
      if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[face]) === SHADOWUPDATE_NONE) allCascadesRendering = false;
      shadowCamera = this.prepareFace(light, camera, face);
    }
    const renderPass = new RenderPass(this.device, () => {
      for (let face = 0; face < faceCount; face++) {
        if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[face]) !== SHADOWUPDATE_NONE) {
          this.renderFace(light, camera, face, !allCascadesRendering);
        }
        if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[face]) === SHADOWUPDATE_THISFRAME) {
          shadowUpdateOverrides[face] = SHADOWUPDATE_NONE;
        }
      }
    }, () => {
      this.renderVms(light, camera);
    });

    this.setupRenderPass(renderPass, shadowCamera, allCascadesRendering);
    DebugHelper.setName(renderPass, `DirShadow-${light._node.name}`);
    frameGraph.addRenderPass(renderPass);
  }

  buildFrameGraph(frameGraph, renderAction, camera) {
    const lights = renderAction.directionalLights;
    for (let i = 0; i < lights.length; i++) {
      const light = lights[i];
      Debug.assert(light && light._type === LIGHTTYPE_DIRECTIONAL);
      if (this.needsShadowRendering(light)) {
        this.addLightRenderPasses(frameGraph, light, camera.camera);
      }
    }
  }
}

export { ShadowRendererDirectional };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZG93LXJlbmRlcmVyLWRpcmVjdGlvbmFsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2NlbmUvcmVuZGVyZXIvc2hhZG93LXJlbmRlcmVyLWRpcmVjdGlvbmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnLCBEZWJ1Z0hlbHBlciB9IGZyb20gJy4uLy4uL2NvcmUvZGVidWcuanMnO1xuaW1wb3J0IHsgbWF0aCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9tYXRoLmpzJztcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvdmVjMy5qcyc7XG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSAnLi4vLi4vY29yZS9tYXRoL21hdDQuanMnO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tICcuLi8uLi9jb3JlL3NoYXBlL2JvdW5kaW5nLWJveC5qcyc7XG5cbmltcG9ydCB7XG4gICAgTElHSFRUWVBFX0RJUkVDVElPTkFMLCBTSEFET1dVUERBVEVfTk9ORSwgU0hBRE9XVVBEQVRFX1RISVNGUkFNRVxufSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgUmVuZGVyUGFzcyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3JlbmRlci1wYXNzLmpzJztcblxuaW1wb3J0IHsgU2hhZG93UmVuZGVyZXIgfSBmcm9tIFwiLi9zaGFkb3ctcmVuZGVyZXIuanNcIjtcbmltcG9ydCB7IFNoYWRvd01hcCB9IGZyb20gJy4vc2hhZG93LW1hcC5qcyc7XG5cbmNvbnN0IHZpc2libGVTY2VuZUFhYmIgPSBuZXcgQm91bmRpbmdCb3goKTtcbmNvbnN0IGNlbnRlciA9IG5ldyBWZWMzKCk7XG5jb25zdCBzaGFkb3dDYW1WaWV3ID0gbmV3IE1hdDQoKTtcblxuY29uc3QgYWFiYlBvaW50cyA9IFtcbiAgICBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLFxuICAgIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKClcbl07XG5cbi8vIGV2YWx1YXRlIGRlcHRoIHJhbmdlIHRoZSBhYWJiIHRha2VzIGluIHRoZSBzcGFjZSBvZiB0aGUgY2FtZXJhXG5jb25zdCBfZGVwdGhSYW5nZSA9IHsgbWluOiAwLCBtYXg6IDAgfTtcbmZ1bmN0aW9uIGdldERlcHRoUmFuZ2UoY2FtZXJhVmlld01hdHJpeCwgYWFiYk1pbiwgYWFiYk1heCkge1xuICAgIGFhYmJQb2ludHNbMF0ueCA9IGFhYmJQb2ludHNbMV0ueCA9IGFhYmJQb2ludHNbMl0ueCA9IGFhYmJQb2ludHNbM10ueCA9IGFhYmJNaW4ueDtcbiAgICBhYWJiUG9pbnRzWzFdLnkgPSBhYWJiUG9pbnRzWzNdLnkgPSBhYWJiUG9pbnRzWzddLnkgPSBhYWJiUG9pbnRzWzVdLnkgPSBhYWJiTWluLnk7XG4gICAgYWFiYlBvaW50c1syXS56ID0gYWFiYlBvaW50c1szXS56ID0gYWFiYlBvaW50c1s2XS56ID0gYWFiYlBvaW50c1s3XS56ID0gYWFiYk1pbi56O1xuICAgIGFhYmJQb2ludHNbNF0ueCA9IGFhYmJQb2ludHNbNV0ueCA9IGFhYmJQb2ludHNbNl0ueCA9IGFhYmJQb2ludHNbN10ueCA9IGFhYmJNYXgueDtcbiAgICBhYWJiUG9pbnRzWzBdLnkgPSBhYWJiUG9pbnRzWzJdLnkgPSBhYWJiUG9pbnRzWzRdLnkgPSBhYWJiUG9pbnRzWzZdLnkgPSBhYWJiTWF4Lnk7XG4gICAgYWFiYlBvaW50c1swXS56ID0gYWFiYlBvaW50c1sxXS56ID0gYWFiYlBvaW50c1s0XS56ID0gYWFiYlBvaW50c1s1XS56ID0gYWFiYk1heC56O1xuXG4gICAgbGV0IG1pbnogPSA5OTk5OTk5OTk5O1xuICAgIGxldCBtYXh6ID0gLTk5OTk5OTk5OTk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7ICsraSkge1xuICAgICAgICBjYW1lcmFWaWV3TWF0cml4LnRyYW5zZm9ybVBvaW50KGFhYmJQb2ludHNbaV0sIGFhYmJQb2ludHNbaV0pO1xuICAgICAgICBjb25zdCB6ID0gYWFiYlBvaW50c1tpXS56O1xuICAgICAgICBpZiAoeiA8IG1pbnopIG1pbnogPSB6O1xuICAgICAgICBpZiAoeiA+IG1heHopIG1heHogPSB6O1xuICAgIH1cblxuICAgIF9kZXB0aFJhbmdlLm1pbiA9IG1pbno7XG4gICAgX2RlcHRoUmFuZ2UubWF4ID0gbWF4ejtcbiAgICByZXR1cm4gX2RlcHRoUmFuZ2U7XG59XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBTaGFkb3dSZW5kZXJlckRpcmVjdGlvbmFsIGV4dGVuZHMgU2hhZG93UmVuZGVyZXIge1xuICAgIC8vIGN1bGwgZGlyZWN0aW9uYWwgc2hhZG93IG1hcFxuICAgIGN1bGwobGlnaHQsIGRyYXdDYWxscywgY2FtZXJhKSB7XG5cbiAgICAgICAgLy8gZm9yY2UgbGlnaHQgdmlzaWJpbGl0eSBpZiBmdW5jdGlvbiB3YXMgbWFudWFsbHkgY2FsbGVkXG4gICAgICAgIGxpZ2h0LnZpc2libGVUaGlzRnJhbWUgPSB0cnVlO1xuXG4gICAgICAgIGlmICghbGlnaHQuX3NoYWRvd01hcCkge1xuICAgICAgICAgICAgbGlnaHQuX3NoYWRvd01hcCA9IFNoYWRvd01hcC5jcmVhdGUodGhpcy5kZXZpY2UsIGxpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdlbmVyYXRlIHNwbGl0cyBmb3IgdGhlIGNhc2NhZGVzXG4gICAgICAgIGNvbnN0IG5lYXJEaXN0ID0gY2FtZXJhLl9uZWFyQ2xpcDtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVNwbGl0RGlzdGFuY2VzKGxpZ2h0LCBuZWFyRGlzdCwgbGlnaHQuc2hhZG93RGlzdGFuY2UpO1xuXG4gICAgICAgIGNvbnN0IHNoYWRvd1VwZGF0ZU92ZXJyaWRlcyA9IGxpZ2h0LnNoYWRvd1VwZGF0ZU92ZXJyaWRlcztcbiAgICAgICAgZm9yIChsZXQgY2FzY2FkZSA9IDA7IGNhc2NhZGUgPCBsaWdodC5udW1DYXNjYWRlczsgY2FzY2FkZSsrKSB7XG5cbiAgICAgICAgICAgIC8vIGlmIG1hbnVhbGx5IGNvbnRyb2xsaW5nIGNhc2NhZGUgcmVuZGVyaW5nIGFuZCB0aGUgY2FzY2FkZSBkb2VzIG5vdCByZW5kZXIgdGhpcyBmcmFtZVxuICAgICAgICAgICAgaWYgKHNoYWRvd1VwZGF0ZU92ZXJyaWRlcz8uW2Nhc2NhZGVdID09PSBTSEFET1dVUERBVEVfTk9ORSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsaWdodFJlbmRlckRhdGEgPSBsaWdodC5nZXRSZW5kZXJEYXRhKGNhbWVyYSwgY2FzY2FkZSk7XG4gICAgICAgICAgICBjb25zdCBzaGFkb3dDYW0gPSBsaWdodFJlbmRlckRhdGEuc2hhZG93Q2FtZXJhO1xuXG4gICAgICAgICAgICAvLyBhc3NpZ24gcmVuZGVyIHRhcmdldFxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBpcyBkb25lIGR1cmluZyByZW5kZXJpbmcgZm9yIGFsbCBzaGFkb3cgbWFwcywgYnV0IGRvIGl0IGhlcmUgZm9yIHRoZSBjYXNlIHNoYWRvdyByZW5kZXJpbmcgZm9yIHRoZSBkaXJlY3Rpb25hbCBsaWdodFxuICAgICAgICAgICAgLy8gaXMgZGlzYWJsZWQgLSB3ZSBuZWVkIHNoYWRvdyBtYXAgdG8gYmUgYXNzaWduZWQgZm9yIHJlbmRlcmluZyB0byB3b3JrIGV2ZW4gaW4gdGhpcyBjYXNlLiBUaGlzIG5lZWRzIGZ1cnRoZXIgcmVmYWN0b3JpbmcgLSBhcyB3aGVuXG4gICAgICAgICAgICAvLyBzaGFkb3cgcmVuZGVyaW5nIGlzIHNldCB0byBTSEFET1dVUERBVEVfTk9ORSwgd2Ugc2hvdWxkIG5vdCBldmVuIGV4ZWN1dGUgc2hhZG93IG1hcCBjdWxsaW5nXG4gICAgICAgICAgICBzaGFkb3dDYW0ucmVuZGVyVGFyZ2V0ID0gbGlnaHQuX3NoYWRvd01hcC5yZW5kZXJUYXJnZXRzWzBdO1xuXG4gICAgICAgICAgICAvLyB2aWV3cG9ydFxuICAgICAgICAgICAgbGlnaHRSZW5kZXJEYXRhLnNoYWRvd1ZpZXdwb3J0LmNvcHkobGlnaHQuY2FzY2FkZXNbY2FzY2FkZV0pO1xuICAgICAgICAgICAgbGlnaHRSZW5kZXJEYXRhLnNoYWRvd1NjaXNzb3IuY29weShsaWdodC5jYXNjYWRlc1tjYXNjYWRlXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd0NhbU5vZGUgPSBzaGFkb3dDYW0uX25vZGU7XG4gICAgICAgICAgICBjb25zdCBsaWdodE5vZGUgPSBsaWdodC5fbm9kZTtcblxuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS5zZXRQb3NpdGlvbihsaWdodE5vZGUuZ2V0UG9zaXRpb24oKSk7XG5cbiAgICAgICAgICAgIC8vIENhbWVyYSBsb29rcyBkb3duIHRoZSBuZWdhdGl2ZSBaLCBhbmQgZGlyZWN0aW9uYWwgbGlnaHQgcG9pbnRzIGRvd24gdGhlIG5lZ2F0aXZlIFlcbiAgICAgICAgICAgIHNoYWRvd0NhbU5vZGUuc2V0Um90YXRpb24obGlnaHROb2RlLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS5yb3RhdGVMb2NhbCgtOTAsIDAsIDApO1xuXG4gICAgICAgICAgICAvLyBnZXQgY2FtZXJhJ3MgZnJ1c3R1bSBjb3JuZXJzIGZvciB0aGUgY2FzY2FkZSwgY29udmVydCB0aGVtIHRvIHdvcmxkIHNwYWNlIGFuZCBmaW5kIHRoZWlyIGNlbnRlclxuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bU5lYXJEaXN0ID0gY2FzY2FkZSA9PT0gMCA/IG5lYXJEaXN0IDogbGlnaHQuX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXNbY2FzY2FkZSAtIDFdO1xuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bUZhckRpc3QgPSBsaWdodC5fc2hhZG93Q2FzY2FkZURpc3RhbmNlc1tjYXNjYWRlXTtcbiAgICAgICAgICAgIGNvbnN0IGZydXN0dW1Qb2ludHMgPSBjYW1lcmEuZ2V0RnJ1c3R1bUNvcm5lcnMoZnJ1c3R1bU5lYXJEaXN0LCBmcnVzdHVtRmFyRGlzdCk7XG4gICAgICAgICAgICBjZW50ZXIuc2V0KDAsIDAsIDApO1xuICAgICAgICAgICAgY29uc3QgY2FtZXJhV29ybGRNYXQgPSBjYW1lcmEubm9kZS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjYW1lcmFXb3JsZE1hdC50cmFuc2Zvcm1Qb2ludChmcnVzdHVtUG9pbnRzW2ldLCBmcnVzdHVtUG9pbnRzW2ldKTtcbiAgICAgICAgICAgICAgICBjZW50ZXIuYWRkKGZydXN0dW1Qb2ludHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2VudGVyLm11bFNjYWxhcigxIC8gOCk7XG5cbiAgICAgICAgICAgIC8vIHJhZGl1cyBvZiB0aGUgd29ybGQgc3BhY2UgYm91bmRpbmcgc3BoZXJlIGZvciB0aGUgZnJ1c3R1bSBzbGljZVxuICAgICAgICAgICAgbGV0IHJhZGl1cyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBmcnVzdHVtUG9pbnRzW2ldLnN1YihjZW50ZXIpLmxlbmd0aCgpO1xuICAgICAgICAgICAgICAgIGlmIChkaXN0ID4gcmFkaXVzKVxuICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSBkaXN0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBheGlzIG9mIGxpZ2h0IGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgICAgICAgICBjb25zdCByaWdodCA9IHNoYWRvd0NhbU5vZGUucmlnaHQ7XG4gICAgICAgICAgICBjb25zdCB1cCA9IHNoYWRvd0NhbU5vZGUudXA7XG4gICAgICAgICAgICBjb25zdCBsaWdodERpciA9IHNoYWRvd0NhbU5vZGUuZm9yd2FyZDtcblxuICAgICAgICAgICAgLy8gdHJhbnNmb3JtIHRoZSBzcGhlcmUncyBjZW50ZXIgaW50byB0aGUgY2VudGVyIG9mIHRoZSBzaGFkb3cgbWFwLCBwaXhlbCBhbGlnbmVkLlxuICAgICAgICAgICAgLy8gdGhpcyBtYWtlcyB0aGUgc2hhZG93IG1hcCBzdGFibGUgYW5kIGF2b2lkcyBzaGltbWVyaW5nIG9uIHRoZSBlZGdlcyB3aGVuIHRoZSBjYW1lcmEgbW92ZXNcbiAgICAgICAgICAgIGNvbnN0IHNpemVSYXRpbyA9IDAuMjUgKiBsaWdodC5fc2hhZG93UmVzb2x1dGlvbiAvIHJhZGl1cztcbiAgICAgICAgICAgIGNvbnN0IHggPSBNYXRoLmNlaWwoY2VudGVyLmRvdCh1cCkgKiBzaXplUmF0aW8pIC8gc2l6ZVJhdGlvO1xuICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguY2VpbChjZW50ZXIuZG90KHJpZ2h0KSAqIHNpemVSYXRpbykgLyBzaXplUmF0aW87XG5cbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZFVwID0gdXAubXVsU2NhbGFyKHgpO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVkUmlnaHQgPSByaWdodC5tdWxTY2FsYXIoeSk7XG4gICAgICAgICAgICBjb25zdCBkb3QgPSBjZW50ZXIuZG90KGxpZ2h0RGlyKTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZERpciA9IGxpZ2h0RGlyLm11bFNjYWxhcihkb3QpO1xuICAgICAgICAgICAgY2VudGVyLmFkZDIoc2NhbGVkVXAsIHNjYWxlZFJpZ2h0KS5hZGQoc2NhbGVkRGlyKTtcblxuICAgICAgICAgICAgLy8gbG9vayBhdCB0aGUgY2VudGVyIGZyb20gZmFyIGF3YXkgdG8gaW5jbHVkZSBhbGwgY2FzdGVycyBkdXJpbmcgY3VsbGluZ1xuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS5zZXRQb3NpdGlvbihjZW50ZXIpO1xuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS50cmFuc2xhdGVMb2NhbCgwLCAwLCAxMDAwMDAwKTtcbiAgICAgICAgICAgIHNoYWRvd0NhbS5uZWFyQ2xpcCA9IDAuMDE7XG4gICAgICAgICAgICBzaGFkb3dDYW0uZmFyQ2xpcCA9IDIwMDAwMDA7XG4gICAgICAgICAgICBzaGFkb3dDYW0ub3J0aG9IZWlnaHQgPSByYWRpdXM7XG5cbiAgICAgICAgICAgIC8vIGN1bGwgc2hhZG93IGNhc3RlcnNcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQ2FtZXJhRnJ1c3R1bShzaGFkb3dDYW0pO1xuICAgICAgICAgICAgdGhpcy5jdWxsU2hhZG93Q2FzdGVycyhkcmF3Q2FsbHMsIGxpZ2h0UmVuZGVyRGF0YS52aXNpYmxlQ2FzdGVycywgc2hhZG93Q2FtKTtcblxuICAgICAgICAgICAgLy8gZmluZCBvdXQgQUFCQiBvZiB2aXNpYmxlIHNoYWRvdyBjYXN0ZXJzXG4gICAgICAgICAgICBsZXQgZW1wdHlBYWJiID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXN0ZXJzID0gbGlnaHRSZW5kZXJEYXRhLnZpc2libGVDYXN0ZXJzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aXNpYmxlQ2FzdGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZSA9IHZpc2libGVDYXN0ZXJzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVtcHR5QWFiYikge1xuICAgICAgICAgICAgICAgICAgICBlbXB0eUFhYmIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVNjZW5lQWFiYi5jb3B5KG1lc2hJbnN0YW5jZS5hYWJiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlU2NlbmVBYWJiLmFkZChtZXNoSW5zdGFuY2UuYWFiYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgZGVwdGggcmFuZ2Ugb2YgdGhlIGNhc3RlcidzIEFBQkIgZnJvbSB0aGUgcG9pbnQgb2YgdmlldyBvZiB0aGUgc2hhZG93IGNhbWVyYVxuICAgICAgICAgICAgc2hhZG93Q2FtVmlldy5jb3B5KHNoYWRvd0NhbU5vZGUuZ2V0V29ybGRUcmFuc2Zvcm0oKSkuaW52ZXJ0KCk7XG4gICAgICAgICAgICBjb25zdCBkZXB0aFJhbmdlID0gZ2V0RGVwdGhSYW5nZShzaGFkb3dDYW1WaWV3LCB2aXNpYmxlU2NlbmVBYWJiLmdldE1pbigpLCB2aXNpYmxlU2NlbmVBYWJiLmdldE1heCgpKTtcblxuICAgICAgICAgICAgLy8gYWRqdXN0IHNoYWRvdyBjYW1lcmEncyBuZWFyIGFuZCBmYXIgcGxhbmUgdG8gdGhlIGRlcHRoIHJhbmdlIG9mIGNhc3RlcnMgdG8gbWF4aW1pemUgcHJlY2lzaW9uXG4gICAgICAgICAgICAvLyBvZiB2YWx1ZXMgc3RvcmVkIGluIHRoZSBzaGFkb3cgbWFwLiBNYWtlIGl0IHNsaWdodGx5IGxhcmdlciB0byBhdm9pZCBjbGlwcGluZyBvbiBuZWFyIC8gZmFyIHBsYW5lLlxuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS50cmFuc2xhdGVMb2NhbCgwLCAwLCBkZXB0aFJhbmdlLm1heCArIDAuMSk7XG4gICAgICAgICAgICBzaGFkb3dDYW0uZmFyQ2xpcCA9IGRlcHRoUmFuZ2UubWF4IC0gZGVwdGhSYW5nZS5taW4gKyAwLjI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmdW5jdGlvbiB0byBnZW5lcmF0ZSBmcnVzdHVtIHNwbGl0IGRpc3RhbmNlc1xuICAgIGdlbmVyYXRlU3BsaXREaXN0YW5jZXMobGlnaHQsIG5lYXJEaXN0LCBmYXJEaXN0KSB7XG5cbiAgICAgICAgbGlnaHQuX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXMuZmlsbChmYXJEaXN0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsaWdodC5udW1DYXNjYWRlczsgaSsrKSB7XG5cbiAgICAgICAgICAgIC8vICBsZXJwIGJldHdlZW4gbGluZWFyIGFuZCBsb2dhcml0aG1pYyBkaXN0YW5jZSwgY2FsbGVkIHByYWN0aWNhbCBzcGxpdCBkaXN0YW5jZVxuICAgICAgICAgICAgY29uc3QgZnJhY3Rpb24gPSBpIC8gbGlnaHQubnVtQ2FzY2FkZXM7XG4gICAgICAgICAgICBjb25zdCBsaW5lYXJEaXN0ID0gbmVhckRpc3QgKyAoZmFyRGlzdCAtIG5lYXJEaXN0KSAqIGZyYWN0aW9uO1xuICAgICAgICAgICAgY29uc3QgbG9nRGlzdCA9IG5lYXJEaXN0ICogKGZhckRpc3QgLyBuZWFyRGlzdCkgKiogZnJhY3Rpb247XG4gICAgICAgICAgICBjb25zdCBkaXN0ID0gbWF0aC5sZXJwKGxpbmVhckRpc3QsIGxvZ0Rpc3QsIGxpZ2h0LmNhc2NhZGVEaXN0cmlidXRpb24pO1xuICAgICAgICAgICAgbGlnaHQuX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXNbaSAtIDFdID0gZGlzdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZExpZ2h0UmVuZGVyUGFzc2VzKGZyYW1lR3JhcGgsIGxpZ2h0LCBjYW1lcmEpIHtcblxuICAgICAgICAvLyBzaGFkb3cgY2FzY2FkZXMgaGF2ZSBtb3JlIGZhY2VzIHJlbmRlcmVkIHdpdGhpbiBhIHNpbmdlIHJlbmRlciBwYXNzXG4gICAgICAgIGNvbnN0IGZhY2VDb3VudCA9IGxpZ2h0Lm51bVNoYWRvd0ZhY2VzO1xuICAgICAgICBjb25zdCBzaGFkb3dVcGRhdGVPdmVycmlkZXMgPSBsaWdodC5zaGFkb3dVcGRhdGVPdmVycmlkZXM7XG5cbiAgICAgICAgLy8gcHJlcGFyZSByZW5kZXIgdGFyZ2V0cyAvIGNhbWVyYXMgZm9yIHJlbmRlcmluZ1xuICAgICAgICBsZXQgYWxsQ2FzY2FkZXNSZW5kZXJpbmcgPSB0cnVlO1xuICAgICAgICBsZXQgc2hhZG93Q2FtZXJhO1xuICAgICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGZhY2VDb3VudDsgZmFjZSsrKSB7XG5cbiAgICAgICAgICAgIGlmIChzaGFkb3dVcGRhdGVPdmVycmlkZXM/LltmYWNlXSA9PT0gU0hBRE9XVVBEQVRFX05PTkUpXG4gICAgICAgICAgICAgICAgYWxsQ2FzY2FkZXNSZW5kZXJpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgc2hhZG93Q2FtZXJhID0gdGhpcy5wcmVwYXJlRmFjZShsaWdodCwgY2FtZXJhLCBmYWNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlbmRlclBhc3MgPSBuZXcgUmVuZGVyUGFzcyh0aGlzLmRldmljZSwgKCkgPT4ge1xuXG4gICAgICAgICAgICAvLyBpbnNpZGUgdGhlIHJlbmRlciBwYXNzLCByZW5kZXIgYWxsIGZhY2VzXG4gICAgICAgICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGZhY2VDb3VudDsgZmFjZSsrKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VXBkYXRlT3ZlcnJpZGVzPy5bZmFjZV0gIT09IFNIQURPV1VQREFURV9OT05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRmFjZShsaWdodCwgY2FtZXJhLCBmYWNlLCAhYWxsQ2FzY2FkZXNSZW5kZXJpbmcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzaGFkb3dVcGRhdGVPdmVycmlkZXM/LltmYWNlXSA9PT0gU0hBRE9XVVBEQVRFX1RISVNGUkFNRSkge1xuICAgICAgICAgICAgICAgICAgICBzaGFkb3dVcGRhdGVPdmVycmlkZXNbZmFjZV0gPSBTSEFET1dVUERBVEVfTk9ORTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSwgKCkgPT4ge1xuXG4gICAgICAgICAgICAvLyBhZnRlciB0aGUgcGFzcyBpcyBkb25lLCBhcHBseSBWU00gYmx1ciBpZiBuZWVkZWRcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVm1zKGxpZ2h0LCBjYW1lcmEpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHNldHVwIHJlbmRlciBwYXNzIHVzaW5nIGFueSBvZiB0aGUgY2FtZXJhcywgdGhleSBhbGwgaGF2ZSB0aGUgc2FtZSBwYXNzIHJlbGF0ZWQgcHJvcGVydGllc1xuICAgICAgICB0aGlzLnNldHVwUmVuZGVyUGFzcyhyZW5kZXJQYXNzLCBzaGFkb3dDYW1lcmEsIGFsbENhc2NhZGVzUmVuZGVyaW5nKTtcbiAgICAgICAgRGVidWdIZWxwZXIuc2V0TmFtZShyZW5kZXJQYXNzLCBgRGlyU2hhZG93LSR7bGlnaHQuX25vZGUubmFtZX1gKTtcblxuICAgICAgICBmcmFtZUdyYXBoLmFkZFJlbmRlclBhc3MocmVuZGVyUGFzcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbGRzIGEgZnJhbWUgZ3JhcGggZm9yIHJlbmRlcmluZyBvZiBkaXJlY3Rpb25hbCBzaGFkb3dzIGZvciB0aGUgcmVuZGVyIGFjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9mcmFtZS1ncmFwaC5qcycpLkZyYW1lR3JhcGh9IGZyYW1lR3JhcGggLSBUaGUgZnJhbWUtZ3JhcGggdGhhdCBpcyBidWlsdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vY29tcG9zaXRpb24vcmVuZGVyLWFjdGlvbi5qcycpLlJlbmRlckFjdGlvbn0gcmVuZGVyQWN0aW9uIC0gVGhlIHJlbmRlclxuICAgICAqIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vZnJhbWV3b3JrL2NvbXBvbmVudHMvY2FtZXJhL2NvbXBvbmVudC5qcycpLkNhbWVyYUNvbXBvbmVudH0gY2FtZXJhIC0gVGhlIGNhbWVyYS5cbiAgICAgKi9cbiAgICBidWlsZEZyYW1lR3JhcGgoZnJhbWVHcmFwaCwgcmVuZGVyQWN0aW9uLCBjYW1lcmEpIHtcblxuICAgICAgICAvLyBjcmVhdGUgcmVxdWlyZWQgcmVuZGVyIHBhc3NlcyBwZXIgbGlnaHRcbiAgICAgICAgY29uc3QgbGlnaHRzID0gcmVuZGVyQWN0aW9uLmRpcmVjdGlvbmFsTGlnaHRzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBsaWdodHNbaV07XG4gICAgICAgICAgICBEZWJ1Zy5hc3NlcnQobGlnaHQgJiYgbGlnaHQuX3R5cGUgPT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm5lZWRzU2hhZG93UmVuZGVyaW5nKGxpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkTGlnaHRSZW5kZXJQYXNzZXMoZnJhbWVHcmFwaCwgbGlnaHQsIGNhbWVyYS5jYW1lcmEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBTaGFkb3dSZW5kZXJlckRpcmVjdGlvbmFsIH07XG4iXSwibmFtZXMiOlsidmlzaWJsZVNjZW5lQWFiYiIsIkJvdW5kaW5nQm94IiwiY2VudGVyIiwiVmVjMyIsInNoYWRvd0NhbVZpZXciLCJNYXQ0IiwiYWFiYlBvaW50cyIsIl9kZXB0aFJhbmdlIiwibWluIiwibWF4IiwiZ2V0RGVwdGhSYW5nZSIsImNhbWVyYVZpZXdNYXRyaXgiLCJhYWJiTWluIiwiYWFiYk1heCIsIngiLCJ5IiwieiIsIm1pbnoiLCJtYXh6IiwiaSIsInRyYW5zZm9ybVBvaW50IiwiU2hhZG93UmVuZGVyZXJEaXJlY3Rpb25hbCIsIlNoYWRvd1JlbmRlcmVyIiwiY3VsbCIsImxpZ2h0IiwiZHJhd0NhbGxzIiwiY2FtZXJhIiwidmlzaWJsZVRoaXNGcmFtZSIsIl9zaGFkb3dNYXAiLCJTaGFkb3dNYXAiLCJjcmVhdGUiLCJkZXZpY2UiLCJuZWFyRGlzdCIsIl9uZWFyQ2xpcCIsImdlbmVyYXRlU3BsaXREaXN0YW5jZXMiLCJzaGFkb3dEaXN0YW5jZSIsInNoYWRvd1VwZGF0ZU92ZXJyaWRlcyIsImNhc2NhZGUiLCJudW1DYXNjYWRlcyIsIlNIQURPV1VQREFURV9OT05FIiwibGlnaHRSZW5kZXJEYXRhIiwiZ2V0UmVuZGVyRGF0YSIsInNoYWRvd0NhbSIsInNoYWRvd0NhbWVyYSIsInJlbmRlclRhcmdldCIsInJlbmRlclRhcmdldHMiLCJzaGFkb3dWaWV3cG9ydCIsImNvcHkiLCJjYXNjYWRlcyIsInNoYWRvd1NjaXNzb3IiLCJzaGFkb3dDYW1Ob2RlIiwiX25vZGUiLCJsaWdodE5vZGUiLCJzZXRQb3NpdGlvbiIsImdldFBvc2l0aW9uIiwic2V0Um90YXRpb24iLCJnZXRSb3RhdGlvbiIsInJvdGF0ZUxvY2FsIiwiZnJ1c3R1bU5lYXJEaXN0IiwiX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXMiLCJmcnVzdHVtRmFyRGlzdCIsImZydXN0dW1Qb2ludHMiLCJnZXRGcnVzdHVtQ29ybmVycyIsInNldCIsImNhbWVyYVdvcmxkTWF0Iiwibm9kZSIsImdldFdvcmxkVHJhbnNmb3JtIiwiYWRkIiwibXVsU2NhbGFyIiwicmFkaXVzIiwiZGlzdCIsInN1YiIsImxlbmd0aCIsInJpZ2h0IiwidXAiLCJsaWdodERpciIsImZvcndhcmQiLCJzaXplUmF0aW8iLCJfc2hhZG93UmVzb2x1dGlvbiIsIk1hdGgiLCJjZWlsIiwiZG90Iiwic2NhbGVkVXAiLCJzY2FsZWRSaWdodCIsInNjYWxlZERpciIsImFkZDIiLCJ0cmFuc2xhdGVMb2NhbCIsIm5lYXJDbGlwIiwiZmFyQ2xpcCIsIm9ydGhvSGVpZ2h0IiwicmVuZGVyZXIiLCJ1cGRhdGVDYW1lcmFGcnVzdHVtIiwiY3VsbFNoYWRvd0Nhc3RlcnMiLCJ2aXNpYmxlQ2FzdGVycyIsImVtcHR5QWFiYiIsIm1lc2hJbnN0YW5jZSIsImFhYmIiLCJpbnZlcnQiLCJkZXB0aFJhbmdlIiwiZ2V0TWluIiwiZ2V0TWF4IiwiZmFyRGlzdCIsImZpbGwiLCJmcmFjdGlvbiIsImxpbmVhckRpc3QiLCJsb2dEaXN0IiwibWF0aCIsImxlcnAiLCJjYXNjYWRlRGlzdHJpYnV0aW9uIiwiYWRkTGlnaHRSZW5kZXJQYXNzZXMiLCJmcmFtZUdyYXBoIiwiZmFjZUNvdW50IiwibnVtU2hhZG93RmFjZXMiLCJhbGxDYXNjYWRlc1JlbmRlcmluZyIsImZhY2UiLCJwcmVwYXJlRmFjZSIsInJlbmRlclBhc3MiLCJSZW5kZXJQYXNzIiwicmVuZGVyRmFjZSIsIlNIQURPV1VQREFURV9USElTRlJBTUUiLCJyZW5kZXJWbXMiLCJzZXR1cFJlbmRlclBhc3MiLCJEZWJ1Z0hlbHBlciIsInNldE5hbWUiLCJuYW1lIiwiYWRkUmVuZGVyUGFzcyIsImJ1aWxkRnJhbWVHcmFwaCIsInJlbmRlckFjdGlvbiIsImxpZ2h0cyIsImRpcmVjdGlvbmFsTGlnaHRzIiwiRGVidWciLCJhc3NlcnQiLCJfdHlwZSIsIkxJR0hUVFlQRV9ESVJFQ1RJT05BTCIsIm5lZWRzU2hhZG93UmVuZGVyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFjQSxNQUFNQSxnQkFBZ0IsR0FBRyxJQUFJQyxXQUFXLEVBQUUsQ0FBQTtBQUMxQyxNQUFNQyxNQUFNLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUE7QUFDekIsTUFBTUMsYUFBYSxHQUFHLElBQUlDLElBQUksRUFBRSxDQUFBO0FBRWhDLE1BQU1DLFVBQVUsR0FBRyxDQUNmLElBQUlILElBQUksRUFBRSxFQUFFLElBQUlBLElBQUksRUFBRSxFQUFFLElBQUlBLElBQUksRUFBRSxFQUFFLElBQUlBLElBQUksRUFBRSxFQUM5QyxJQUFJQSxJQUFJLEVBQUUsRUFBRSxJQUFJQSxJQUFJLEVBQUUsRUFBRSxJQUFJQSxJQUFJLEVBQUUsRUFBRSxJQUFJQSxJQUFJLEVBQUUsQ0FDakQsQ0FBQTs7QUFHRCxNQUFNSSxXQUFXLEdBQUc7QUFBRUMsRUFBQUEsR0FBRyxFQUFFLENBQUM7QUFBRUMsRUFBQUEsR0FBRyxFQUFFLENBQUE7QUFBRSxDQUFDLENBQUE7QUFDdEMsU0FBU0MsYUFBYSxDQUFDQyxnQkFBZ0IsRUFBRUMsT0FBTyxFQUFFQyxPQUFPLEVBQUU7QUFDdkRQLEVBQUFBLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQ1EsQ0FBQyxHQUFHUixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUNRLENBQUMsR0FBR1IsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDUSxDQUFDLEdBQUdSLFVBQVUsQ0FBQyxDQUFDLENB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
