/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { PRIMITIVE_TRISTRIP } from '../../graphics/constants.js';
import { shaderChunks } from '../../graphics/program-lib/chunks/chunks.js';
import { createShaderFromCode } from '../../graphics/program-lib/utils.js';
import { BLEND_NORMAL } from '../constants.js';
import { BasicMaterial } from '../materials/basic-material.js';
import { GraphNode } from '../graph-node.js';
import { Mesh } from '../mesh.js';
import { MeshInstance } from '../mesh-instance.js';
import { ImmediateBatches } from './immediate-batches.js';

const tempPoints = [];

class Immediate {
  constructor(device) {
    this.device = device;
    this.quadMesh = null;
    this.textureShader = null;
    this.depthTextureShader = null;
    this.cubeLocalPos = null;
    this.cubeWorldPos = null;
    this.batchesMap = new Map();
    this.allBatches = new Set();
    this.updatedLayers = new Set();
    this._materialDepth = null;
    this._materialNoDepth = null;
    this.layerMeshInstances = new Map();
  }

  createMaterial(depthTest) {
    const material = new BasicMaterial();
    material.vertexColors = true;
    material.blend = true;
    material.blendType = BLEND_NORMAL;
    material.depthTest = depthTest;
    material.update();
    return material;
  }

  get materialDepth() {
    if (!this._materialDepth) {
      this._materialDepth = this.createMaterial(true);
    }

    return this._materialDepth;
  }

  get materialNoDepth() {
    if (!this._materialNoDepth) {
      this._materialNoDepth = this.createMaterial(false);
    }

    return this._materialNoDepth;
  }

  getBatch(layer, depthTest) {
    let batches = this.batchesMap.get(layer);

    if (!batches) {
      batches = new ImmediateBatches(this.device);
      this.batchesMap.set(layer, batches);
    }

    this.allBatches.add(batches);
    const material = depthTest ? this.materialDepth : this.materialNoDepth;
    return batches.getBatch(material, layer);
  }

  static getTextureVS() {
    return `
            attribute vec2 vertex_position;
            uniform mat4 matrix_model;
            varying vec2 uv0;
            void main(void) {
                gl_Position = matrix_model * vec4(vertex_position, 0, 1);
                uv0 = vertex_position.xy + 0.5;
            }
        `;
  }

  getTextureShader() {
    if (!this.textureShader) {
      const fshader = `
                varying vec2 uv0;
                uniform sampler2D colorMap;
                void main (void) {
                    gl_FragColor = vec4(texture2D(colorMap, uv0).xyz, 1);
                }
            `;
      this.textureShader = createShaderFromCode(this.device, Immediate.getTextureVS(), fshader, 'DebugTextureShader');
    }

    return this.textureShader;
  }

  getDepthTextureShader() {
    if (!this.depthTextureShader) {
      const fshader = `
                ${shaderChunks.screenDepthPS}
                varying vec2 uv0;
                void main() {
                    float depth = getLinearScreenDepth(uv0) * camera_params.x;
                    gl_FragColor = vec4(vec3(depth), 1.0);
                }
            `;
      this.depthTextureShader = createShaderFromCode(this.device, Immediate.getTextureVS(), fshader, 'DebugDepthTextureShader');
    }

    return this.depthTextureShader;
  }

  getQuadMesh() {
    if (!this.quadMesh) {
      this.quadMesh = new Mesh(this.device);
      this.quadMesh.setPositions([-0.5, -0.5, 0, 0.5, -0.5, 0, -0.5, 0.5, 0, 0.5, 0.5, 0]);
      this.quadMesh.update(PRIMITIVE_TRISTRIP);
    }

    return this.quadMesh;
  }

  drawMesh(material, matrix, mesh, meshInstance, layer) {
    if (!meshInstance) {
      const graphNode = this.getGraphNode(matrix);
      meshInstance = new MeshInstance(mesh, material, graphNode);
    }

    let layerMeshInstances = this.layerMeshInstances.get(layer);

    if (!layerMeshInstances) {
      layerMeshInstances = [];
      this.layerMeshInstances.set(layer, layerMeshInstances);
    }

    layerMeshInstances.push(meshInstance);
  }

  drawWireAlignedBox(min, max, color, depthTest, layer) {
    tempPoints.push(min.x, min.y, min.z, min.x, max.y, min.z, min.x, max.y, min.z, max.x, max.y, min.z, max.x, max.y, min.z, max.x, min.y, min.z, max.x, min.y, min.z, min.x, min.y, min.z, min.x, min.y, max.z, min.x, max.y, max.z, min.x, max.y, max.z, max.x, max.y, max.z, max.x, max.y, max.z, max.x, min.y, max.z, max.x, min.y, max.z, min.x, min.y, max.z, min.x, min.y, min.z, min.x, min.y, max.z, min.x, max.y, min.z, min.x, max.y, max.z, max.x, max.y, min.z, max.x, max.y, max.z, max.x, min.y, min.z, max.x, min.y, max.z);
    const batch = this.getBatch(layer, depthTest);
    batch.addLinesArrays(tempPoints, color);
    tempPoints.length = 0;
  }

  drawWireSphere(center, radius, color, numSegments, depthTest, layer) {
    const step = 2 * Math.PI / numSegments;
    let angle = 0;

    for (let i = 0; i < numSegments; i++) {
      const sin0 = Math.sin(angle);
      const cos0 = Math.cos(angle);
      angle += step;
      const sin1 = Math.sin(angle);
      const cos1 = Math.cos(angle);
      tempPoints.push(center.x + radius * sin0, center.y, center.z + radius * cos0);
      tempPoints.push(center.x + radius * sin1, center.y, center.z + radius * cos1);
      tempPoints.push(center.x + radius * sin0, center.y + radius * cos0, center.z);
      tempPoints.push(center.x + radius * sin1, center.y + radius * cos1, center.z);
      tempPoints.push(center.x, center.y + radius * sin0, center.z + radius * cos0);
      tempPoints.push(center.x, center.y + radius * sin1, center.z + radius * cos1);
    }

    const batch = this.getBatch(layer, depthTest);
    batch.addLinesArrays(tempPoints, color);
    tempPoints.length = 0;
  }

  getGraphNode(matrix) {
    const graphNode = new GraphNode('ImmediateDebug');
    graphNode.worldTransform = matrix;
    graphNode._dirtyWorld = graphNode._dirtyNormal = false;
    return graphNode;
  }

  onPreRenderLayer(layer, visibleList, transparent) {
    this.batchesMap.forEach((batches, batchLayer) => {
      if (batchLayer === layer) {
        batches.onPreRender(visibleList, transparent);
      }
    });

    if (!this.updatedLayers.has(layer)) {
      this.updatedLayers.add(layer);
      const meshInstances = this.layerMeshInstances.get(layer);

      if (meshInstances) {
        for (let i = 0; i < meshInstances.length; i++) {
          visibleList.list[visibleList.length + i] = meshInstances[i];
        }

        visibleList.length += meshInstances.length;
        meshInstances.length = 0;
      }
    }
  }

  onPostRender() {
    this.allBatches.clear();
    this.updatedLayers.clear();
  }

}

export { Immediate };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1tZWRpYXRlLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2NlbmUvaW1tZWRpYXRlL2ltbWVkaWF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQUklNSVRJVkVfVFJJU1RSSVAgfSBmcm9tICcuLi8uLi9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgc2hhZGVyQ2h1bmtzIH0gZnJvbSAnLi4vLi4vZ3JhcGhpY3MvcHJvZ3JhbS1saWIvY2h1bmtzL2NodW5rcy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTaGFkZXJGcm9tQ29kZSB9IGZyb20gJy4uLy4uL2dyYXBoaWNzL3Byb2dyYW0tbGliL3V0aWxzLmpzJztcblxuaW1wb3J0IHsgQkxFTkRfTk9STUFMIH0gZnJvbSAnLi4vLi4vc2NlbmUvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IEJhc2ljTWF0ZXJpYWwgfSBmcm9tICcuLi8uLi9zY2VuZS9tYXRlcmlhbHMvYmFzaWMtbWF0ZXJpYWwuanMnO1xuaW1wb3J0IHsgR3JhcGhOb2RlIH0gZnJvbSAnLi4vLi4vc2NlbmUvZ3JhcGgtbm9kZS5qcyc7XG5pbXBvcnQgeyBNZXNoIH0gZnJvbSAnLi4vLi4vc2NlbmUvbWVzaC5qcyc7XG5pbXBvcnQgeyBNZXNoSW5zdGFuY2UgfSBmcm9tICcuLi8uLi9zY2VuZS9tZXNoLWluc3RhbmNlLmpzJztcbmltcG9ydCB7IEltbWVkaWF0ZUJhdGNoZXMgfSBmcm9tICcuLi9pbW1lZGlhdGUvaW1tZWRpYXRlLWJhdGNoZXMuanMnO1xuXG5jb25zdCB0ZW1wUG9pbnRzID0gW107XG5cbmNsYXNzIEltbWVkaWF0ZSB7XG4gICAgY29uc3RydWN0b3IoZGV2aWNlKSB7XG4gICAgICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xuICAgICAgICB0aGlzLnF1YWRNZXNoID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZXh0dXJlU2hhZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXB0aFRleHR1cmVTaGFkZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmN1YmVMb2NhbFBvcyA9IG51bGw7XG4gICAgICAgIHRoaXMuY3ViZVdvcmxkUG9zID0gbnVsbDtcblxuICAgICAgICAvLyBtYXAgb2YgTGF5ZXIgdG8gSW1tZWRpYXRlQmF0Y2hlcywgc3RvcmluZyBsaW5lIGJhdGNoZXMgZm9yIGEgbGF5ZXJcbiAgICAgICAgdGhpcy5iYXRjaGVzTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8vIHNldCBvZiBhbGwgYmF0Y2hlcyB0aGF0IHdlcmUgdXNlZCBpbiB0aGUgZnJhbWVcbiAgICAgICAgdGhpcy5hbGxCYXRjaGVzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIC8vIHNldCBvZiBhbGwgbGF5ZXJzIHVwZGF0ZWQgZHVyaW5nIHRoaXMgZnJhbWVcbiAgICAgICAgdGhpcy51cGRhdGVkTGF5ZXJzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIC8vIGxpbmUgbWF0ZXJpYWxzXG4gICAgICAgIHRoaXMuX21hdGVyaWFsRGVwdGggPSBudWxsO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbE5vRGVwdGggPSBudWxsO1xuXG4gICAgICAgIC8vIG1hcCBvZiBtZXNoZXMgaW5zdGFuY2VzIGFkZGVkIHRvIGEgbGF5ZXIuIFRoZSBrZXkgaXMgbGF5ZXIsIHRoZSB2YWx1ZSBpcyBhbiBhcnJheSBvZiBtZXNoIGluc3RhbmNlc1xuICAgICAgICB0aGlzLmxheWVyTWVzaEluc3RhbmNlcyA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGVzIG1hdGVyaWFsIGZvciBsaW5lIHJlbmRlcmluZ1xuICAgIGNyZWF0ZU1hdGVyaWFsKGRlcHRoVGVzdCkge1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBCYXNpY01hdGVyaWFsKCk7XG4gICAgICAgIG1hdGVyaWFsLnZlcnRleENvbG9ycyA9IHRydWU7XG4gICAgICAgIG1hdGVyaWFsLmJsZW5kID0gdHJ1ZTtcbiAgICAgICAgbWF0ZXJpYWwuYmxlbmRUeXBlID0gQkxFTkRfTk9STUFMO1xuICAgICAgICBtYXRlcmlhbC5kZXB0aFRlc3QgPSBkZXB0aFRlc3Q7XG4gICAgICAgIG1hdGVyaWFsLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgLy8gbWF0ZXJpYWwgZm9yIGxpbmUgcmVuZGVyaW5nIHdpdGggZGVwdGggdGVzdGluZyBvblxuICAgIGdldCBtYXRlcmlhbERlcHRoKCkge1xuICAgICAgICBpZiAoIXRoaXMuX21hdGVyaWFsRGVwdGgpIHtcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsRGVwdGggPSB0aGlzLmNyZWF0ZU1hdGVyaWFsKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbERlcHRoO1xuICAgIH1cblxuICAgIC8vIG1hdGVyaWFsIGZvciBsaW5lIHJlbmRlcmluZyB3aXRoIGRlcHRoIHRlc3Rpbmcgb2ZmXG4gICAgZ2V0IG1hdGVyaWFsTm9EZXB0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9tYXRlcmlhbE5vRGVwdGgpIHtcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsTm9EZXB0aCA9IHRoaXMuY3JlYXRlTWF0ZXJpYWwoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbE5vRGVwdGg7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJucyBhIGJhdGNoIGZvciByZW5kZXJpbmcgbGluZXMgdG8gYSBsYXllciB3aXRoIHJlcXVpcmVkIGRlcHRoIHRlc3Rpbmcgc3RhdGVcbiAgICBnZXRCYXRjaChsYXllciwgZGVwdGhUZXN0KSB7XG5cbiAgICAgICAgLy8gZ2V0IGJhdGNoZXMgZm9yIHRoZSBsYXllclxuICAgICAgICBsZXQgYmF0Y2hlcyA9IHRoaXMuYmF0Y2hlc01hcC5nZXQobGF5ZXIpO1xuICAgICAgICBpZiAoIWJhdGNoZXMpIHtcbiAgICAgICAgICAgIGJhdGNoZXMgPSBuZXcgSW1tZWRpYXRlQmF0Y2hlcyh0aGlzLmRldmljZSk7XG4gICAgICAgICAgICB0aGlzLmJhdGNoZXNNYXAuc2V0KGxheWVyLCBiYXRjaGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBpdCBmb3IgcmVuZGVyaW5nXG4gICAgICAgIHRoaXMuYWxsQmF0Y2hlcy5hZGQoYmF0Y2hlcyk7XG5cbiAgICAgICAgLy8gZ2V0IGJhdGNoIGZvciB0aGUgbWF0ZXJpYWxcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBkZXB0aFRlc3QgPyB0aGlzLm1hdGVyaWFsRGVwdGggOiB0aGlzLm1hdGVyaWFsTm9EZXB0aDtcbiAgICAgICAgcmV0dXJuIGJhdGNoZXMuZ2V0QmF0Y2gobWF0ZXJpYWwsIGxheWVyKTtcbiAgICB9XG5cbiAgICAvLyBzaGFyZWQgdmVydGV4IHNoYWRlciBmb3IgdGV4dHVyZWQgcXVhZCByZW5kZXJpbmdcbiAgICBzdGF0aWMgZ2V0VGV4dHVyZVZTKCkge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgYXR0cmlidXRlIHZlYzIgdmVydGV4X3Bvc2l0aW9uO1xuICAgICAgICAgICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF9tb2RlbDtcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB1djA7XG4gICAgICAgICAgICB2b2lkIG1haW4odm9pZCkge1xuICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gbWF0cml4X21vZGVsICogdmVjNCh2ZXJ0ZXhfcG9zaXRpb24sIDAsIDEpO1xuICAgICAgICAgICAgICAgIHV2MCA9IHZlcnRleF9wb3NpdGlvbi54eSArIDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICAvLyBzaGFkZXIgdXNlZCB0byBkaXNwbGF5IHRleHR1cmVcbiAgICBnZXRUZXh0dXJlU2hhZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMudGV4dHVyZVNoYWRlcikge1xuICAgICAgICAgICAgY29uc3QgZnNoYWRlciA9IGBcbiAgICAgICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdXYwO1xuICAgICAgICAgICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIGNvbG9yTWFwO1xuICAgICAgICAgICAgICAgIHZvaWQgbWFpbiAodm9pZCkge1xuICAgICAgICAgICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHRleHR1cmUyRChjb2xvck1hcCwgdXYwKS54eXosIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG5cbiAgICAgICAgICAgIHRoaXMudGV4dHVyZVNoYWRlciA9IGNyZWF0ZVNoYWRlckZyb21Db2RlKHRoaXMuZGV2aWNlLCBJbW1lZGlhdGUuZ2V0VGV4dHVyZVZTKCksIGZzaGFkZXIsICdEZWJ1Z1RleHR1cmVTaGFkZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnRleHR1cmVTaGFkZXI7XG4gICAgfVxuXG4gICAgLy8gc2hhZGVyIHVzZWQgdG8gZGlzcGxheSBkZXB0aCB0ZXh0dXJlXG4gICAgZ2V0RGVwdGhUZXh0dXJlU2hhZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGVwdGhUZXh0dXJlU2hhZGVyKSB7XG4gICAgICAgICAgICBjb25zdCBmc2hhZGVyID0gYFxuICAgICAgICAgICAgICAgICR7c2hhZGVyQ2h1bmtzLnNjcmVlbkRlcHRoUFN9XG4gICAgICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHV2MDtcbiAgICAgICAgICAgICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IGRlcHRoID0gZ2V0TGluZWFyU2NyZWVuRGVwdGgodXYwKSAqIGNhbWVyYV9wYXJhbXMueDtcbiAgICAgICAgICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGRlcHRoKSwgMS4wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICB0aGlzLmRlcHRoVGV4dHVyZVNoYWRlciA9IGNyZWF0ZVNoYWRlckZyb21Db2RlKHRoaXMuZGV2aWNlLCBJbW1lZGlhdGUuZ2V0VGV4dHVyZVZTKCksIGZzaGFkZXIsICdEZWJ1Z0RlcHRoVGV4dHVyZVNoYWRlcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGVwdGhUZXh0dXJlU2hhZGVyO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZXMgbWVzaCB1c2VkIHRvIHJlbmRlciBhIHF1YWRcbiAgICBnZXRRdWFkTWVzaCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnF1YWRNZXNoKSB7XG4gICAgICAgICAgICB0aGlzLnF1YWRNZXNoID0gbmV3IE1lc2godGhpcy5kZXZpY2UpO1xuICAgICAgICAgICAgdGhpcy5xdWFkTWVzaC5zZXRQb3NpdGlvbnMoW1xuICAgICAgICAgICAgICAgIC0wLjUsIC0wLjUsIDAsXG4gICAgICAgICAgICAgICAgMC41LCAtMC41LCAwLFxuICAgICAgICAgICAgICAgIC0wLjUsIDAuNSwgMCxcbiAgICAgICAgICAgICAgICAwLjUsIDAuNSwgMFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB0aGlzLnF1YWRNZXNoLnVwZGF0ZShQUklNSVRJVkVfVFJJU1RSSVApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1YWRNZXNoO1xuICAgIH1cblxuICAgIC8vIERyYXcgbWVzaCBhdCB0aGlzIGZyYW1lXG4gICAgZHJhd01lc2gobWF0ZXJpYWwsIG1hdHJpeCwgbWVzaCwgbWVzaEluc3RhbmNlLCBsYXllcikge1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhIG1lc2ggaW5zdGFuY2UgZm9yIHRoZSBtZXNoIGlmIG5lZWRlZFxuICAgICAgICBpZiAoIW1lc2hJbnN0YW5jZSkge1xuICAgICAgICAgICAgY29uc3QgZ3JhcGhOb2RlID0gdGhpcy5nZXRHcmFwaE5vZGUobWF0cml4KTtcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZSA9IG5ldyBNZXNoSW5zdGFuY2UobWVzaCwgbWF0ZXJpYWwsIGdyYXBoTm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgdGhlIG1lc2ggaW5zdGFuY2UgdG8gYW4gYXJyYXkgcGVyIGxheWVyLCB0aGV5IGdldCBhZGRlZCB0byBsYXllcnMgYmVmb3JlIHJlbmRlcmluZ1xuICAgICAgICBsZXQgbGF5ZXJNZXNoSW5zdGFuY2VzID0gdGhpcy5sYXllck1lc2hJbnN0YW5jZXMuZ2V0KGxheWVyKTtcbiAgICAgICAgaWYgKCFsYXllck1lc2hJbnN0YW5jZXMpIHtcbiAgICAgICAgICAgIGxheWVyTWVzaEluc3RhbmNlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5sYXllck1lc2hJbnN0YW5jZXMuc2V0KGxheWVyLCBsYXllck1lc2hJbnN0YW5jZXMpO1xuICAgICAgICB9XG4gICAgICAgIGxheWVyTWVzaEluc3RhbmNlcy5wdXNoKG1lc2hJbnN0YW5jZSk7XG4gICAgfVxuXG4gICAgZHJhd1dpcmVBbGlnbmVkQm94KG1pbiwgbWF4LCBjb2xvciwgZGVwdGhUZXN0LCBsYXllcikge1xuICAgICAgICB0ZW1wUG9pbnRzLnB1c2goXG4gICAgICAgICAgICBtaW4ueCwgbWluLnksIG1pbi56LCBtaW4ueCwgbWF4LnksIG1pbi56LFxuICAgICAgICAgICAgbWluLngsIG1heC55LCBtaW4ueiwgbWF4LngsIG1heC55LCBtaW4ueixcbiAgICAgICAgICAgIG1heC54LCBtYXgueSwgbWluLnosIG1heC54LCBtaW4ueSwgbWluLnosXG4gICAgICAgICAgICBtYXgueCwgbWluLnksIG1pbi56LCBtaW4ueCwgbWluLnksIG1pbi56LFxuICAgICAgICAgICAgbWluLngsIG1pbi55LCBtYXgueiwgbWluLngsIG1heC55LCBtYXgueixcbiAgICAgICAgICAgIG1pbi54LCBtYXgueSwgbWF4LnosIG1heC54LCBtYXgueSwgbWF4LnosXG4gICAgICAgICAgICBtYXgueCwgbWF4LnksIG1heC56LCBtYXgueCwgbWluLnksIG1heC56LFxuICAgICAgICAgICAgbWF4LngsIG1pbi55LCBtYXgueiwgbWluLngsIG1pbi55LCBtYXgueixcbiAgICAgICAgICAgIG1pbi54LCBtaW4ueSwgbWluLnosIG1pbi54LCBtaW4ueSwgbWF4LnosXG4gICAgICAgICAgICBtaW4ueCwgbWF4LnksIG1pbi56LCBtaW4ueCwgbWF4LnksIG1heC56LFxuICAgICAgICAgICAgbWF4LngsIG1heC55LCBtaW4ueiwgbWF4LngsIG1heC55LCBtYXgueixcbiAgICAgICAgICAgIG1heC54LCBtaW4ueSwgbWluLnosIG1heC54LCBtaW4ueSwgbWF4LnpcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuZ2V0QmF0Y2gobGF5ZXIsIGRlcHRoVGVzdCk7XG4gICAgICAgIGJhdGNoLmFkZExpbmVzQXJyYXlzKHRlbXBQb2ludHMsIGNvbG9yKTtcbiAgICAgICAgdGVtcFBvaW50cy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGRyYXdXaXJlU3BoZXJlKGNlbnRlciwgcmFkaXVzLCBjb2xvciwgbnVtU2VnbWVudHMsIGRlcHRoVGVzdCwgbGF5ZXIpIHtcblxuICAgICAgICBjb25zdCBzdGVwID0gMiAqIE1hdGguUEkgLyBudW1TZWdtZW50cztcbiAgICAgICAgbGV0IGFuZ2xlID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVNlZ21lbnRzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbjAgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgICAgICBjb25zdCBjb3MwID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICAgICAgYW5nbGUgKz0gc3RlcDtcbiAgICAgICAgICAgIGNvbnN0IHNpbjEgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgICAgICBjb25zdCBjb3MxID0gTWF0aC5jb3MoYW5nbGUpO1xuXG4gICAgICAgICAgICB0ZW1wUG9pbnRzLnB1c2goY2VudGVyLnggKyByYWRpdXMgKiBzaW4wLCBjZW50ZXIueSwgY2VudGVyLnogKyByYWRpdXMgKiBjb3MwKTtcbiAgICAgICAgICAgIHRlbXBQb2ludHMucHVzaChjZW50ZXIueCArIHJhZGl1cyAqIHNpbjEsIGNlbnRlci55LCBjZW50ZXIueiArIHJhZGl1cyAqIGNvczEpO1xuICAgICAgICAgICAgdGVtcFBvaW50cy5wdXNoKGNlbnRlci54ICsgcmFkaXVzICogc2luMCwgY2VudGVyLnkgKyByYWRpdXMgKiBjb3MwLCBjZW50ZXIueik7XG4gICAgICAgICAgICB0ZW1wUG9pbnRzLnB1c2goY2VudGVyLnggKyByYWRpdXMgKiBzaW4xLCBjZW50ZXIueSArIHJhZGl1cyAqIGNvczEsIGNlbnRlci56KTtcbiAgICAgICAgICAgIHRlbXBQb2ludHMucHVzaChjZW50ZXIueCwgY2VudGVyLnkgKyByYWRpdXMgKiBzaW4wLCBjZW50ZXIueiArIHJhZGl1cyAqIGNvczApO1xuICAgICAgICAgICAgdGVtcFBvaW50cy5wdXNoKGNlbnRlci54LCBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjEsIGNlbnRlci56ICsgcmFkaXVzICogY29zMSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuZ2V0QmF0Y2gobGF5ZXIsIGRlcHRoVGVzdCk7XG4gICAgICAgIGJhdGNoLmFkZExpbmVzQXJyYXlzKHRlbXBQb2ludHMsIGNvbG9yKTtcbiAgICAgICAgdGVtcFBvaW50cy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGdldEdyYXBoTm9kZShtYXRyaXgpIHtcbiAgICAgICAgY29uc3QgZ3JhcGhOb2RlID0gbmV3IEdyYXBoTm9kZSgnSW1tZWRpYXRlRGVidWcnKTtcbiAgICAgICAgZ3JhcGhOb2RlLndvcmxkVHJhbnNmb3JtID0gbWF0cml4O1xuICAgICAgICBncmFwaE5vZGUuX2RpcnR5V29ybGQgPSBncmFwaE5vZGUuX2RpcnR5Tm9ybWFsID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIGdyYXBoTm9kZTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGlzIGNhbGxlZCBqdXN0IGJlZm9yZSB0aGUgbGF5ZXIgaXMgcmVuZGVyZWQgdG8gYWxsb3cgbGluZXMgZm9yIHRoZSBsYXllciB0byBiZSBhZGRlZCBmcm9tIGluc2lkZVxuICAgIC8vIHRoZSBmcmFtZSBnZXR0aW5nIHJlbmRlcmVkXG4gICAgb25QcmVSZW5kZXJMYXllcihsYXllciwgdmlzaWJsZUxpc3QsIHRyYW5zcGFyZW50KSB7XG5cbiAgICAgICAgLy8gdXBkYXRlIGxpbmUgYmF0Y2hlcyBmb3IgdGhlIHNwZWNpZmllZCBzdWItbGF5ZXJcbiAgICAgICAgdGhpcy5iYXRjaGVzTWFwLmZvckVhY2goKGJhdGNoZXMsIGJhdGNoTGF5ZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChiYXRjaExheWVyID09PSBsYXllcikge1xuICAgICAgICAgICAgICAgIGJhdGNoZXMub25QcmVSZW5kZXIodmlzaWJsZUxpc3QsIHRyYW5zcGFyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gb25seSB1cGRhdGUgbWVzaGVzIG9uY2UgZm9yIGVhY2ggbGF5ZXIgKHRoZXkncmUgbm90IHBlciBzdWItbGF5ZXIgYXQgdGhlIG1vbWVudClcbiAgICAgICAgaWYgKCF0aGlzLnVwZGF0ZWRMYXllcnMuaGFzKGxheWVyKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVkTGF5ZXJzLmFkZChsYXllcik7XG5cbiAgICAgICAgICAgIC8vIGFkZCBtZXNoIGluc3RhbmNlcyBmb3Igc3BlY2lmaWVkIGxheWVyIHRvIHZpc2libGUgbGlzdFxuICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlcyA9IHRoaXMubGF5ZXJNZXNoSW5zdGFuY2VzLmdldChsYXllcik7XG4gICAgICAgICAgICBpZiAobWVzaEluc3RhbmNlcykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzaEluc3RhbmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlTGlzdC5saXN0W3Zpc2libGVMaXN0Lmxlbmd0aCArIGldID0gbWVzaEluc3RhbmNlc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlzaWJsZUxpc3QubGVuZ3RoICs9IG1lc2hJbnN0YW5jZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNhbGxlZCBhZnRlciB0aGUgZnJhbWUgd2FzIHJlbmRlcmVkLCBjbGVhcnMgZGF0YVxuICAgIG9uUG9zdFJlbmRlcigpIHtcblxuICAgICAgICAvLyBjbGVhbiB1cCBsaW5lIGJhdGNoZXNcbiAgICAgICAgdGhpcy5hbGxCYXRjaGVzLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gYWxsIGJhdGNoZXMgbmVlZCB1cGRhdGluZyBuZXh0IGZyYW1lXG4gICAgICAgIHRoaXMudXBkYXRlZExheWVycy5jbGVhcigpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgSW1tZWRpYXRlIH07XG4iXSwibmFtZXMiOlsidGVtcFBvaW50cyIsIkltbWVkaWF0ZSIsImNvbnN0cnVjdG9yIiwiZGV2aWNlIiwicXVhZE1lc2giLCJ0ZXh0dXJlU2hhZGVyIiwiZGVwdGhUZXh0dXJlU2hhZGVyIiwiY3ViZUxvY2FsUG9zIiwiY3ViZVdvcmxkUG9zIiwiYmF0Y2hlc01hcCIsIk1hcCIsImFsbEJhdGNoZXMiLCJTZXQiLCJ1cGRhdGVkTGF5ZXJzIiwiX21hdGVyaWFsRGVwdGgiLCJfbWF0ZXJpYWxOb0RlcHRoIiwibGF5ZXJNZXNoSW5zdGFuY2VzIiwiY3JlYXRlTWF0ZXJpYWwiLCJkZXB0aFRlc3QiLCJtYXRlcmlhbCIsIkJhc2ljTWF0ZXJpYWwiLCJ2ZXJ0ZXhDb2xvcnMiLCJibGVuZCIsImJsZW5kVHlwZSIsIkJMRU5EX05PUk1BTCIsInVwZGF0ZSIsIm1hdGVyaWFsRGVwdGgiLCJtYXRlcmlhbE5vRGVwdGgiLCJnZXRCYXRjaCIsImxheWVyIiwiYmF0Y2hlcyIsImdldCIsIkltbWVkaWF0ZUJhdGNoZXMiLCJzZXQiLCJhZGQiLCJnZXRUZXh0dXJlVlMiLCJnZXRUZXh0dXJlU2hhZGVyIiwiZnNoYWRlciIsImNyZWF0ZVNoYWRlckZyb21Db2RlIiwiZ2V0RGVwdGhUZXh0dXJlU2hhZGVyIiwic2hhZGVyQ2h1bmtzIiwic2NyZWVuRGVwdGhQUyIsImdldFF1YWRNZXNoIiwiTWVzaCIsInNldFBvc2l0aW9ucyIsIlBSSU1JVElWRV9UUklTVFJJUCIsImRyYXdNZXNoIiwibWF0cml4IiwibWVzaCIsIm1lc2hJbnN0YW5jZSIsImdyYXBoTm9kZSIsImdldEdyYXBoTm9kZSIsIk1lc2hJbnN0YW5jZSIsInB1c2giLCJkcmF3V2lyZUFsaWduZWRCb3giLCJtaW4iLCJtYXgiLCJjb2xvciIsIngiLCJ5IiwieiIsImJhdGNoIiwiYWRkTGluZXNBcnJheXMiLCJsZW5ndGgiLCJkcmF3V2lyZVNwaGVyZSIsImNlbnRlciIsInJhZGl1cyIsIm51bVNlZ21lbnRzIiwic3RlcCIsIk1hdGgiLCJQSSIsImFuZ2xlIiwiaSIsInNpbjAiLCJzaW4iLCJjb3MwIiwiY29zIiwic2luMSIsImNvczEiLCJHcmFwaE5vZGUiLCJ3b3JsZFRyYW5zZm9ybSIsIl9kaXJ0eVdvcmxkIiwiX2RpcnR5Tm9ybWFsIiwib25QcmVSZW5kZXJMYXllciIsInZpc2libGVMaXN0IiwidHJhbnNwYXJlbnQiLCJmb3JFYWNoIiwiYmF0Y2hMYXllciIsIm9uUHJlUmVuZGVyIiwiaGFzIiwibWVzaEluc3RhbmNlcyIsImxpc3QiLCJvblBvc3RSZW5kZXIiLCJjbGVhciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBV0EsTUFBTUEsVUFBVSxHQUFHLEVBQW5CLENBQUE7O0FBRUEsTUFBTUMsU0FBTixDQUFnQjtFQUNaQyxXQUFXLENBQUNDLE1BQUQsRUFBUztJQUNoQixJQUFLQSxDQUFBQSxNQUFMLEdBQWNBLE1BQWQsQ0FBQTtJQUNBLElBQUtDLENBQUFBLFFBQUwsR0FBZ0IsSUFBaEIsQ0FBQTtJQUNBLElBQUtDLENBQUFBLGFBQUwsR0FBcUIsSUFBckIsQ0FBQTtJQUNBLElBQUtDLENBQUFBLGtCQUFM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
