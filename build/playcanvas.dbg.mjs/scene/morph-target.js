/**
 * @license
 * PlayCanvas Engine v1.62.0-dev revision 7d088032c (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../core/debug.js';
import { BoundingBox } from '../core/shape/bounding-box.js';
import { BUFFER_STATIC, TYPE_FLOAT32, SEMANTIC_ATTR0 } from '../platform/graphics/constants.js';
import { VertexBuffer } from '../platform/graphics/vertex-buffer.js';
import { VertexFormat } from '../platform/graphics/vertex-format.js';

/**
 * A Morph Target (also known as Blend Shape) contains deformation data to apply to existing mesh.
 * Multiple morph targets can be blended together on a mesh. This is useful for effects that are
 * hard to achieve with conventional animation and skinning.
 */
class MorphTarget {
  /**
   * A used flag. A morph target can be used / owned by the Morph class only one time.
   *
   * @type {boolean}
   */

  /**
   * Create a new MorphTarget instance.
   *
   * @param {object} options - Object for passing optional arguments.
   * @param {ArrayBuffer} options.deltaPositions - An array of 3-dimensional vertex position
   * offsets.
   * @param {number} options.deltaPositionsType - A format to store position offsets inside
   * {@link VertexBuffer}. Defaults to {@link TYPE_FLOAT32} if not provided.
   * @param {ArrayBuffer} [options.deltaNormals] - An array of 3-dimensional vertex normal
   * offsets.
   * @param {number} options.deltaNormalsType - A format to store normal offsets inside
   * {@link VertexBuffer}. Defaults to {@link TYPE_FLOAT32} if not provided.
   * @param {string} [options.name] - Name.
   * @param {BoundingBox} [options.aabb] - Bounding box. Will be automatically generated, if
   * undefined.
   * @param {number} [options.defaultWeight] - Default blend weight to use for this morph target.
   * @param {boolean} [options.preserveData] - When true, the morph target keeps its data passed using the options,
   * allowing the clone operation.
   */
  constructor(options) {
    this.used = false;
    if (arguments.length === 2) {
      Debug.deprecated('Passing graphicsDevice to MorphTarget is deprecated, please remove the parameter.');
      options = arguments[1];
    }
    this.options = options;
    this._name = options.name;
    this._defaultWeight = options.defaultWeight || 0;

    // bounds
    this.aabb = options.aabb;
    if (!this.aabb) {
      this.aabb = new BoundingBox();
      if (options.deltaPositions) this.aabb.compute(options.deltaPositions);
    }

    // store delta positions, used by aabb evaluation
    this.deltaPositions = options.deltaPositions;
  }
  destroy() {
    var _this$_vertexBufferPo, _this$_vertexBufferNo, _this$texturePosition, _this$textureNormals;
    (_this$_vertexBufferPo = this._vertexBufferPositions) == null ? void 0 : _this$_vertexBufferPo.destroy();
    this._vertexBufferPositions = null;
    (_this$_vertexBufferNo = this._vertexBufferNormals) == null ? void 0 : _this$_vertexBufferNo.destroy();
    this._vertexBufferNormals = null;
    (_this$texturePosition = this.texturePositions) == null ? void 0 : _this$texturePosition.destroy();
    this.texturePositions = null;
    (_this$textureNormals = this.textureNormals) == null ? void 0 : _this$textureNormals.destroy();
    this.textureNormals = null;
  }

  /**
   * The name of the morph target.
   *
   * @type {string}
   */
  get name() {
    return this._name;
  }

  /**
   * The default weight of the morph target.
   *
   * @type {number}
   */
  get defaultWeight() {
    return this._defaultWeight;
  }
  get morphPositions() {
    return !!this._vertexBufferPositions || !!this.texturePositions;
  }
  get morphNormals() {
    return !!this._vertexBufferNormals || !!this.textureNormals;
  }

  /**
   * Returns an identical copy of the specified morph target. This can only be used if the morph target
   * was created with options.preserveData set to true.
   *
   * @returns {MorphTarget} A morph target instance containing the result of the cloning.
   */
  clone() {
    Debug.assert(this.options, 'MorphTarget cannot be cloned, was it created with a preserveData option?');
    return new MorphTarget(this.options);
  }
  _postInit() {
    // release original data
    if (!this.options.preserveData) {
      this.options = null;
    }

    // mark it as used
    this.used = true;
  }
  _initVertexBuffers(graphicsDevice) {
    const options = this.options;
    this._vertexBufferPositions = this._createVertexBuffer(graphicsDevice, options.deltaPositions, options.deltaPositionsType);
    this._vertexBufferNormals = this._createVertexBuffer(graphicsDevice, options.deltaNormals, options.deltaNormalsType);

    // access positions from vertex buffer when needed
    if (this._vertexBufferPositions) {
      this.deltaPositions = this._vertexBufferPositions.lock();
    }
  }
  _createVertexBuffer(device, data, dataType = TYPE_FLOAT32) {
    if (data) {
      // create vertex buffer with specified type (or float32), and semantic of ATTR0 which gets replaced at runtime with actual semantic
      const formatDesc = [{
        semantic: SEMANTIC_ATTR0,
        components: 3,
        type: dataType
      }];
      return new VertexBuffer(device, new VertexFormat(device, formatDesc), data.length / 3, BUFFER_STATIC, data);
    }
    return null;
  }
  _setTexture(name, texture) {
    this[name] = texture;
  }
}

export { MorphTarget };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9ycGgtdGFyZ2V0LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2NlbmUvbW9ycGgtdGFyZ2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnIH0gZnJvbSAnLi4vY29yZS9kZWJ1Zy5qcyc7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gJy4uL2NvcmUvc2hhcGUvYm91bmRpbmctYm94LmpzJztcblxuaW1wb3J0IHsgQlVGRkVSX1NUQVRJQywgU0VNQU5USUNfQVRUUjAsIFRZUEVfRkxPQVQzMiB9IGZyb20gJy4uL3BsYXRmb3JtL2dyYXBoaWNzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBWZXJ0ZXhCdWZmZXIgfSBmcm9tICcuLi9wbGF0Zm9ybS9ncmFwaGljcy92ZXJ0ZXgtYnVmZmVyLmpzJztcbmltcG9ydCB7IFZlcnRleEZvcm1hdCB9IGZyb20gJy4uL3BsYXRmb3JtL2dyYXBoaWNzL3ZlcnRleC1mb3JtYXQuanMnO1xuXG4vKipcbiAqIEEgTW9ycGggVGFyZ2V0IChhbHNvIGtub3duIGFzIEJsZW5kIFNoYXBlKSBjb250YWlucyBkZWZvcm1hdGlvbiBkYXRhIHRvIGFwcGx5IHRvIGV4aXN0aW5nIG1lc2guXG4gKiBNdWx0aXBsZSBtb3JwaCB0YXJnZXRzIGNhbiBiZSBibGVuZGVkIHRvZ2V0aGVyIG9uIGEgbWVzaC4gVGhpcyBpcyB1c2VmdWwgZm9yIGVmZmVjdHMgdGhhdCBhcmVcbiAqIGhhcmQgdG8gYWNoaWV2ZSB3aXRoIGNvbnZlbnRpb25hbCBhbmltYXRpb24gYW5kIHNraW5uaW5nLlxuICovXG5jbGFzcyBNb3JwaFRhcmdldCB7XG4gICAgLyoqXG4gICAgICogQSB1c2VkIGZsYWcuIEEgbW9ycGggdGFyZ2V0IGNhbiBiZSB1c2VkIC8gb3duZWQgYnkgdGhlIE1vcnBoIGNsYXNzIG9ubHkgb25lIHRpbWUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB1c2VkID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgTW9ycGhUYXJnZXQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9iamVjdCBmb3IgcGFzc2luZyBvcHRpb25hbCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gb3B0aW9ucy5kZWx0YVBvc2l0aW9ucyAtIEFuIGFycmF5IG9mIDMtZGltZW5zaW9uYWwgdmVydGV4IHBvc2l0aW9uXG4gICAgICogb2Zmc2V0cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5kZWx0YVBvc2l0aW9uc1R5cGUgLSBBIGZvcm1hdCB0byBzdG9yZSBwb3NpdGlvbiBvZmZzZXRzIGluc2lkZVxuICAgICAqIHtAbGluayBWZXJ0ZXhCdWZmZXJ9LiBEZWZhdWx0cyB0byB7QGxpbmsgVFlQRV9GTE9BVDMyfSBpZiBub3QgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gW29wdGlvbnMuZGVsdGFOb3JtYWxzXSAtIEFuIGFycmF5IG9mIDMtZGltZW5zaW9uYWwgdmVydGV4IG5vcm1hbFxuICAgICAqIG9mZnNldHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuZGVsdGFOb3JtYWxzVHlwZSAtIEEgZm9ybWF0IHRvIHN0b3JlIG5vcm1hbCBvZmZzZXRzIGluc2lkZVxuICAgICAqIHtAbGluayBWZXJ0ZXhCdWZmZXJ9LiBEZWZhdWx0cyB0byB7QGxpbmsgVFlQRV9GTE9BVDMyfSBpZiBub3QgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm5hbWVdIC0gTmFtZS5cbiAgICAgKiBAcGFyYW0ge0JvdW5kaW5nQm94fSBbb3B0aW9ucy5hYWJiXSAtIEJvdW5kaW5nIGJveC4gV2lsbCBiZSBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCwgaWZcbiAgICAgKiB1bmRlZmluZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmRlZmF1bHRXZWlnaHRdIC0gRGVmYXVsdCBibGVuZCB3ZWlnaHQgdG8gdXNlIGZvciB0aGlzIG1vcnBoIHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnByZXNlcnZlRGF0YV0gLSBXaGVuIHRydWUsIHRoZSBtb3JwaCB0YXJnZXQga2VlcHMgaXRzIGRhdGEgcGFzc2VkIHVzaW5nIHRoZSBvcHRpb25zLFxuICAgICAqIGFsbG93aW5nIHRoZSBjbG9uZSBvcGVyYXRpb24uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICBEZWJ1Zy5kZXByZWNhdGVkKCdQYXNzaW5nIGdyYXBoaWNzRGV2aWNlIHRvIE1vcnBoVGFyZ2V0IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSByZW1vdmUgdGhlIHBhcmFtZXRlci4nKTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl9uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgICAgICB0aGlzLl9kZWZhdWx0V2VpZ2h0ID0gb3B0aW9ucy5kZWZhdWx0V2VpZ2h0IHx8IDA7XG5cbiAgICAgICAgLy8gYm91bmRzXG4gICAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYjtcbiAgICAgICAgaWYgKCF0aGlzLmFhYmIpIHtcbiAgICAgICAgICAgIHRoaXMuYWFiYiA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVsdGFQb3NpdGlvbnMpXG4gICAgICAgICAgICAgICAgdGhpcy5hYWJiLmNvbXB1dGUob3B0aW9ucy5kZWx0YVBvc2l0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdG9yZSBkZWx0YSBwb3NpdGlvbnMsIHVzZWQgYnkgYWFiYiBldmFsdWF0aW9uXG4gICAgICAgIHRoaXMuZGVsdGFQb3NpdGlvbnMgPSBvcHRpb25zLmRlbHRhUG9zaXRpb25zO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG5cbiAgICAgICAgdGhpcy5fdmVydGV4QnVmZmVyUG9zaXRpb25zPy5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuX3ZlcnRleEJ1ZmZlclBvc2l0aW9ucyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fdmVydGV4QnVmZmVyTm9ybWFscz8uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLl92ZXJ0ZXhCdWZmZXJOb3JtYWxzID0gbnVsbDtcblxuICAgICAgICB0aGlzLnRleHR1cmVQb3NpdGlvbnM/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy50ZXh0dXJlUG9zaXRpb25zID0gbnVsbDtcblxuICAgICAgICB0aGlzLnRleHR1cmVOb3JtYWxzPy5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMudGV4dHVyZU5vcm1hbHMgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBtb3JwaCB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCB3ZWlnaHQgb2YgdGhlIG1vcnBoIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGRlZmF1bHRXZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZhdWx0V2VpZ2h0O1xuICAgIH1cblxuICAgIGdldCBtb3JwaFBvc2l0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fdmVydGV4QnVmZmVyUG9zaXRpb25zIHx8ICEhdGhpcy50ZXh0dXJlUG9zaXRpb25zO1xuICAgIH1cblxuICAgIGdldCBtb3JwaE5vcm1hbHMoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX3ZlcnRleEJ1ZmZlck5vcm1hbHMgfHwgISF0aGlzLnRleHR1cmVOb3JtYWxzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gaWRlbnRpY2FsIGNvcHkgb2YgdGhlIHNwZWNpZmllZCBtb3JwaCB0YXJnZXQuIFRoaXMgY2FuIG9ubHkgYmUgdXNlZCBpZiB0aGUgbW9ycGggdGFyZ2V0XG4gICAgICogd2FzIGNyZWF0ZWQgd2l0aCBvcHRpb25zLnByZXNlcnZlRGF0YSBzZXQgdG8gdHJ1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtNb3JwaFRhcmdldH0gQSBtb3JwaCB0YXJnZXQgaW5zdGFuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIHRoZSBjbG9uaW5nLlxuICAgICAqL1xuICAgIGNsb25lKCkge1xuICAgICAgICBEZWJ1Zy5hc3NlcnQodGhpcy5vcHRpb25zLCAnTW9ycGhUYXJnZXQgY2Fubm90IGJlIGNsb25lZCwgd2FzIGl0IGNyZWF0ZWQgd2l0aCBhIHByZXNlcnZlRGF0YSBvcHRpb24/Jyk7XG4gICAgICAgIHJldHVybiBuZXcgTW9ycGhUYXJnZXQodGhpcy5vcHRpb25zKTtcbiAgICB9XG5cbiAgICBfcG9zdEluaXQoKSB7XG5cbiAgICAgICAgLy8gcmVsZWFzZSBvcmlnaW5hbCBkYXRhXG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnByZXNlcnZlRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1hcmsgaXQgYXMgdXNlZFxuICAgICAgICB0aGlzLnVzZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIF9pbml0VmVydGV4QnVmZmVycyhncmFwaGljc0RldmljZSkge1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHRoaXMuX3ZlcnRleEJ1ZmZlclBvc2l0aW9ucyA9IHRoaXMuX2NyZWF0ZVZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZSwgb3B0aW9ucy5kZWx0YVBvc2l0aW9ucywgb3B0aW9ucy5kZWx0YVBvc2l0aW9uc1R5cGUpO1xuICAgICAgICB0aGlzLl92ZXJ0ZXhCdWZmZXJOb3JtYWxzID0gdGhpcy5fY3JlYXRlVmVydGV4QnVmZmVyKGdyYXBoaWNzRGV2aWNlLCBvcHRpb25zLmRlbHRhTm9ybWFscywgb3B0aW9ucy5kZWx0YU5vcm1hbHNUeXBlKTtcblxuICAgICAgICAvLyBhY2Nlc3MgcG9zaXRpb25zIGZyb20gdmVydGV4IGJ1ZmZlciB3aGVuIG5lZWRlZFxuICAgICAgICBpZiAodGhpcy5fdmVydGV4QnVmZmVyUG9zaXRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmRlbHRhUG9zaXRpb25zID0gdGhpcy5fdmVydGV4QnVmZmVyUG9zaXRpb25zLmxvY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jcmVhdGVWZXJ0ZXhCdWZmZXIoZGV2aWNlLCBkYXRhLCBkYXRhVHlwZSA9IFRZUEVfRkxPQVQzMikge1xuXG4gICAgICAgIGlmIChkYXRhKSB7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSB2ZXJ0ZXggYnVmZmVyIHdpdGggc3BlY2lmaWVkIHR5cGUgKG9yIGZsb2F0MzIpLCBhbmQgc2VtYW50aWMgb2YgQVRUUjAgd2hpY2ggZ2V0cyByZXBsYWNlZCBhdCBydW50aW1lIHdpdGggYWN0dWFsIHNlbWFudGljXG4gICAgICAgICAgICBjb25zdCBmb3JtYXREZXNjID0gW3sgc2VtYW50aWM6IFNFTUFOVElDX0FUVFIwLCBjb21wb25lbnRzOiAzLCB0eXBlOiBkYXRhVHlwZSB9XTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVydGV4QnVmZmVyKGRldmljZSwgbmV3IFZlcnRleEZvcm1hdChkZXZpY2UsIGZvcm1hdERlc2MpLCBkYXRhLmxlbmd0aCAvIDMsIEJVRkZFUl9TVEFUSUMsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgX3NldFRleHR1cmUobmFtZSwgdGV4dHVyZSkge1xuICAgICAgICB0aGlzW25hbWVdID0gdGV4dHVyZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IE1vcnBoVGFyZ2V0IH07XG4iXSwibmFtZXMiOlsiTW9ycGhUYXJnZXQiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ1c2VkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiRGVidWciLCJkZXByZWNhdGVkIiwiX25hbWUiLCJuYW1lIiwiX2RlZmF1bHRXZWlnaHQiLCJkZWZhdWx0V2VpZ2h0IiwiYWFiYiIsIkJvdW5kaW5nQm94IiwiZGVsdGFQb3NpdGlvbnMiLCJjb21wdXRlIiwiZGVzdHJveSIsIl92ZXJ0ZXhCdWZmZXJQb3NpdGlvbnMiLCJfdmVydGV4QnVmZmVyTm9ybWFscyIsInRleHR1cmVQb3NpdGlvbnMiLCJ0ZXh0dXJlTm9ybWFscyIsIm1vcnBoUG9zaXRpb25zIiwibW9ycGhOb3JtYWxzIiwiY2xvbmUiLCJhc3NlcnQiLCJfcG9zdEluaXQiLCJwcmVzZXJ2ZURhdGEiLCJfaW5pdFZlcnRleEJ1ZmZlcnMiLCJncmFwaGljc0RldmljZSIsIl9jcmVhdGVWZXJ0ZXhCdWZmZXIiLCJkZWx0YVBvc2l0aW9uc1R5cGUiLCJkZWx0YU5vcm1hbHMiLCJkZWx0YU5vcm1hbHNUeXBlIiwibG9jayIsImRldmljZSIsImRhdGEiLCJkYXRhVHlwZSIsIlRZUEVfRkxPQVQzMiIsImZvcm1hdERlc2MiLCJzZW1hbnRpYyIsIlNFTUFOVElDX0FUVFIwIiwiY29tcG9uZW50cyIsInR5cGUiLCJWZXJ0ZXhCdWZmZXIiLCJWZXJ0ZXhGb3JtYXQiLCJCVUZGRVJfU1RBVElDIiwiX3NldFRleHR1cmUiLCJ0ZXh0dXJlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxXQUFXLENBQUM7QUFDZDtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUdJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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
