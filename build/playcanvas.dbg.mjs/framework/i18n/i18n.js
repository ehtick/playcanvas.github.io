/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { EventHandler } from '../../core/event-handler.js';
import { Asset } from '../asset/asset.js';
import { I18nParser } from './i18n-parser.js';
import { DEFAULT_LOCALE, DEFAULT_LOCALE_FALLBACKS } from './constants.js';
import { getLang, replaceLang, getPluralFn, findAvailableLocale } from './utils.js';

class I18n extends EventHandler {
  constructor(app) {
    super();
    this.locale = DEFAULT_LOCALE;
    this._translations = {};
    this._availableLangs = {};
    this._app = app;
    this._assets = [];
    this._parser = new I18nParser();
  }

  set assets(value) {
    const index = {};

    for (let _i = 0, len = value.length; _i < len; _i++) {
      const id = value[_i] instanceof Asset ? value[_i].id : value[_i];
      index[id] = true;
    }

    let i = this._assets.length;
    while (i--) {
      const id = this._assets[i];
      if (!index[id]) {
        this._app.assets.off('add:' + id, this._onAssetAdd, this);
        const asset = this._app.assets.get(id);
        if (asset) {
          this._onAssetRemove(asset);
        }
        this._assets.splice(i, 1);
      }
    }

    for (const id in index) {
      const idNum = parseInt(id, 10);
      if (this._assets.indexOf(idNum) !== -1) continue;
      this._assets.push(idNum);
      const asset = this._app.assets.get(idNum);
      if (!asset) {
        this._app.assets.once('add:' + idNum, this._onAssetAdd, this);
      } else {
        this._onAssetAdd(asset);
      }
    }
  }
  get assets() {
    return this._assets;
  }

  set locale(value) {
    if (this._locale === value) {
      return;
    }

    let lang = getLang(value);
    if (lang === 'in') {
      lang = 'id';
      value = replaceLang(value, lang);
      if (this._locale === value) {
        return;
      }
    }
    const old = this._locale;
    this._locale = value;
    this._lang = lang;
    this._pluralFn = getPluralFn(this._lang);

    this.fire('set:locale', value, old);
  }
  get locale() {
    return this._locale;
  }

  static findAvailableLocale(desiredLocale, availableLocales) {
    return findAvailableLocale(desiredLocale, availableLocales);
  }

  findAvailableLocale(desiredLocale) {
    if (this._translations[desiredLocale]) {
      return desiredLocale;
    }
    const lang = getLang(desiredLocale);
    return this._findFallbackLocale(desiredLocale, lang);
  }

  getText(key, locale) {
    let result = key;
    let lang;
    if (!locale) {
      locale = this._locale;
      lang = this._lang;
    }
    let translations = this._translations[locale];
    if (!translations) {
      if (!lang) {
        lang = getLang(locale);
      }
      locale = this._findFallbackLocale(locale, lang);
      translations = this._translations[locale];
    }
    if (translations && translations.hasOwnProperty(key)) {
      result = translations[key];

      if (Array.isArray(result)) {
        result = result[0];
      }

      if (result === null || result === undefined) {
        result = key;
      }
    }
    return result;
  }

  getPluralText(key, n, locale) {
    let result = key;
    let lang;
    let pluralFn;
    if (!locale) {
      locale = this._locale;
      lang = this._lang;
      pluralFn = this._pluralFn;
    } else {
      lang = getLang(locale);
      pluralFn = getPluralFn(lang);
    }
    let translations = this._translations[locale];
    if (!translations) {
      locale = this._findFallbackLocale(locale, lang);
      lang = getLang(locale);
      pluralFn = getPluralFn(lang);
      translations = this._translations[locale];
    }
    if (translations && translations[key] && pluralFn) {
      const index = pluralFn(n);
      result = translations[key][index];

      if (result === null || result === undefined) {
        result = key;
      }
    }
    return result;
  }

  addData(data) {
    let parsed;
    try {
      parsed = this._parser.parse(data);
    } catch (err) {
      console.error(err);
      return;
    }
    for (let i = 0, len = parsed.length; i < len; i++) {
      const entry = parsed[i];
      const locale = entry.info.locale;
      const messages = entry.messages;
      if (!this._translations[locale]) {
        this._translations[locale] = {};
        const lang = getLang(locale);

        if (!this._availableLangs[lang]) {
          this._availableLangs[lang] = locale;
        }
      }
      Object.assign(this._translations[locale], messages);
      this.fire('data:add', locale, messages);
    }
  }

  removeData(data) {
    let parsed;
    try {
      parsed = this._parser.parse(data);
    } catch (err) {
      console.error(err);
      return;
    }
    for (let i = 0, len = parsed.length; i < len; i++) {
      const entry = parsed[i];
      const locale = entry.info.locale;
      const translations = this._translations[locale];
      if (!translations) continue;
      const messages = entry.messages;
      for (const key in messages) {
        delete translations[key];
      }

      if (Object.keys(translations).length === 0) {
        delete this._translations[locale];
        delete this._availableLangs[getLang(locale)];
      }
      this.fire('data:remove', locale, messages);
    }
  }

  destroy() {
    this._translations = null;
    this._availableLangs = null;
    this._assets = null;
    this._parser = null;
    this.off();
  }

  _findFallbackLocale(locale, lang) {
    let result = DEFAULT_LOCALE_FALLBACKS[locale];
    if (result && this._translations[result]) {
      return result;
    }
    result = DEFAULT_LOCALE_FALLBACKS[lang];
    if (result && this._translations[result]) {
      return result;
    }
    result = this._availableLangs[lang];
    if (result && this._translations[result]) {
      return result;
    }
    return DEFAULT_LOCALE;
  }
  _onAssetAdd(asset) {
    asset.on('load', this._onAssetLoad, this);
    asset.on('change', this._onAssetChange, this);
    asset.on('remove', this._onAssetRemove, this);
    asset.on('unload', this._onAssetUnload, this);
    if (asset.resource) {
      this._onAssetLoad(asset);
    }
  }
  _onAssetLoad(asset) {
    this.addData(asset.resource);
  }
  _onAssetChange(asset) {
    if (asset.resource) {
      this.addData(asset.resource);
    }
  }
  _onAssetRemove(asset) {
    asset.off('load', this._onAssetLoad, this);
    asset.off('change', this._onAssetChange, this);
    asset.off('remove', this._onAssetRemove, this);
    asset.off('unload', this._onAssetUnload, this);
    if (asset.resource) {
      this.removeData(asset.resource);
    }
    this._app.assets.once('add:' + asset.id, this._onAssetAdd, this);
  }
  _onAssetUnload(asset) {
    if (asset.resource) {
      this.removeData(asset.resource);
    }
  }
}

export { I18n };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaTE4bi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2ZyYW1ld29yay9pMThuL2kxOG4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vY29yZS9ldmVudC1oYW5kbGVyLmpzJztcblxuaW1wb3J0IHsgQXNzZXQgfSBmcm9tICcuLi9hc3NldC9hc3NldC5qcyc7XG5pbXBvcnQgeyBJMThuUGFyc2VyIH0gZnJvbSAnLi9pMThuLXBhcnNlci5qcyc7XG5cbmltcG9ydCB7XG4gICAgREVGQVVMVF9MT0NBTEUsXG4gICAgREVGQVVMVF9MT0NBTEVfRkFMTEJBQ0tTXG59IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IHtcbiAgICByZXBsYWNlTGFuZyxcbiAgICBnZXRMYW5nLFxuICAgIGdldFBsdXJhbEZuLFxuICAgIGZpbmRBdmFpbGFibGVMb2NhbGVcbn0gZnJvbSAnLi91dGlscy5qcyc7XG5cbi8qKlxuICogSGFuZGxlcyBsb2NhbGl6YXRpb24uIFJlc3BvbnNpYmxlIGZvciBsb2FkaW5nIGxvY2FsaXphdGlvbiBhc3NldHMgYW5kIHJldHVybmluZyB0cmFuc2xhdGlvbnMgZm9yXG4gKiBhIGNlcnRhaW4ga2V5LiBDYW4gYWxzbyBoYW5kbGUgcGx1cmFsIGZvcm1zLiBUbyBvdmVycmlkZSBpdHMgZGVmYXVsdCBiZWhhdmlvciBkZWZpbmUgYSBkaWZmZXJlbnRcbiAqIGltcGxlbWVudGF0aW9uIGZvciB7QGxpbmsgSTE4biNnZXRUZXh0fSBhbmQge0BsaW5rIEkxOG4jZ2V0UGx1cmFsVGV4dH0uXG4gKlxuICogQGF1Z21lbnRzIEV2ZW50SGFuZGxlclxuICovXG5jbGFzcyBJMThuIGV4dGVuZHMgRXZlbnRIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgSTE4biBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9hcHAtYmFzZS5qcycpLkFwcEJhc2V9IGFwcCAtIFRoZSBhcHBsaWNhdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmxvY2FsZSA9IERFRkFVTFRfTE9DQUxFO1xuICAgICAgICB0aGlzLl90cmFuc2xhdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5fYXZhaWxhYmxlTGFuZ3MgPSB7fTtcbiAgICAgICAgdGhpcy5fYXBwID0gYXBwO1xuICAgICAgICB0aGlzLl9hc3NldHMgPSBbXTtcbiAgICAgICAgdGhpcy5fcGFyc2VyID0gbmV3IEkxOG5QYXJzZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBvZiBhc3NldCBpZHMgb3IgYXNzZXRzIHRoYXQgY29udGFpbiBsb2NhbGl6YXRpb24gZGF0YSBpbiB0aGUgZXhwZWN0ZWQgZm9ybWF0LiBJMThuXG4gICAgICogd2lsbCBhdXRvbWF0aWNhbGx5IGxvYWQgdHJhbnNsYXRpb25zIGZyb20gdGhlc2UgYXNzZXRzIGFzIHRoZSBhc3NldHMgYXJlIGxvYWRlZCBhbmQgaXQgd2lsbFxuICAgICAqIGFsc28gYXV0b21hdGljYWxseSB1bmxvYWQgdHJhbnNsYXRpb25zIGlmIHRoZSBhc3NldHMgZ2V0IHJlbW92ZWQgb3IgdW5sb2FkZWQgYXQgcnVudGltZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJbXXxBc3NldFtdfVxuICAgICAqL1xuICAgIHNldCBhc3NldHModmFsdWUpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB7fTtcblxuICAgICAgICAvLyBjb252ZXJ0IGFycmF5IHRvIGRpY3RcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHZhbHVlW2ldIGluc3RhbmNlb2YgQXNzZXQgPyB2YWx1ZVtpXS5pZCA6IHZhbHVlW2ldO1xuICAgICAgICAgICAgaW5kZXhbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSBhc3NldHMgbm90IGluIHZhbHVlXG4gICAgICAgIGxldCBpID0gdGhpcy5fYXNzZXRzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLl9hc3NldHNbaV07XG4gICAgICAgICAgICBpZiAoIWluZGV4W2lkXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FwcC5hc3NldHMub2ZmKCdhZGQ6JyArIGlkLCB0aGlzLl9vbkFzc2V0QWRkLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IHRoaXMuX2FwcC5hc3NldHMuZ2V0KGlkKTtcbiAgICAgICAgICAgICAgICBpZiAoYXNzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Bc3NldFJlbW92ZShhc3NldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2Fzc2V0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgYXNzZXRzIGluIHZhbHVlIHRoYXQgZG8gbm90IGFscmVhZHkgZXhpc3QgaGVyZVxuICAgICAgICBmb3IgKGNvbnN0IGlkIGluIGluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBpZE51bSA9IHBhcnNlSW50KGlkLCAxMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fYXNzZXRzLmluZGV4T2YoaWROdW0pICE9PSAtMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHRoaXMuX2Fzc2V0cy5wdXNoKGlkTnVtKTtcbiAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gdGhpcy5fYXBwLmFzc2V0cy5nZXQoaWROdW0pO1xuICAgICAgICAgICAgaWYgKCFhc3NldCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FwcC5hc3NldHMub25jZSgnYWRkOicgKyBpZE51bSwgdGhpcy5fb25Bc3NldEFkZCwgdGhpcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX29uQXNzZXRBZGQoYXNzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGFzc2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Fzc2V0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBsb2NhbGUgZm9yIGV4YW1wbGUgXCJlbi1VU1wiLiBDaGFuZ2luZyB0aGUgbG9jYWxlIHdpbGwgcmFpc2UgYW4gZXZlbnQgd2hpY2ggd2lsbFxuICAgICAqIGNhdXNlIGxvY2FsaXplZCBUZXh0IEVsZW1lbnRzIHRvIGNoYW5nZSBsYW5ndWFnZSB0byB0aGUgbmV3IGxvY2FsZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgc2V0IGxvY2FsZSh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5fbG9jYWxlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVwbGFjZSAnaW4nIGxhbmd1YWdlIHdpdGggJ2lkJ1xuICAgICAgICAvLyBmb3IgSW5kb25lc2lhbiBiZWNhdXNlIGJvdGggY29kZXMgYXJlIHZhbGlkXG4gICAgICAgIC8vIHNvIHRoYXQgdXNlcnMgb25seSBuZWVkIHRvIHVzZSB0aGUgJ2lkJyBjb2RlXG4gICAgICAgIGxldCBsYW5nID0gZ2V0TGFuZyh2YWx1ZSk7XG4gICAgICAgIGlmIChsYW5nID09PSAnaW4nKSB7XG4gICAgICAgICAgICBsYW5nID0gJ2lkJztcbiAgICAgICAgICAgIHZhbHVlID0gcmVwbGFjZUxhbmcodmFsdWUsIGxhbmcpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvbGQgPSB0aGlzLl9sb2NhbGU7XG4gICAgICAgIC8vIGNhY2hlIGxvY2FsZSwgbGFuZyBhbmQgcGx1cmFsIGZ1bmN0aW9uXG4gICAgICAgIHRoaXMuX2xvY2FsZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9sYW5nID0gbGFuZztcbiAgICAgICAgdGhpcy5fcGx1cmFsRm4gPSBnZXRQbHVyYWxGbih0aGlzLl9sYW5nKTtcblxuICAgICAgICAvLyByYWlzZSBldmVudFxuICAgICAgICB0aGlzLmZpcmUoJ3NldDpsb2NhbGUnLCB2YWx1ZSwgb2xkKTtcbiAgICB9XG5cbiAgICBnZXQgbG9jYWxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9jYWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IGF2YWlsYWJsZSBsb2NhbGUgYmFzZWQgb24gdGhlIGRlc2lyZWQgbG9jYWxlIHNwZWNpZmllZC4gRmlyc3QgdHJpZXMgdG9cbiAgICAgKiBmaW5kIHRoZSBkZXNpcmVkIGxvY2FsZSBhbmQgdGhlbiB0cmllcyB0byBmaW5kIGFuIGFsdGVybmF0aXZlIGxvY2FsZSBiYXNlZCBvbiB0aGUgbGFuZ3VhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzaXJlZExvY2FsZSAtIFRoZSBkZXNpcmVkIGxvY2FsZSBlLmcuIGVuLVVTLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhdmFpbGFibGVMb2NhbGVzIC0gQSBkaWN0aW9uYXJ5IHdoZXJlIGVhY2gga2V5IGlzIGFuIGF2YWlsYWJsZSBsb2NhbGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGxvY2FsZSBmb3VuZCBvciBpZiBubyBsb2NhbGUgaXMgYXZhaWxhYmxlIHJldHVybnMgdGhlIGRlZmF1bHQgZW4tVVNcbiAgICAgKiBsb2NhbGUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBXaXRoIGEgZGVmaW5lZCBkaWN0aW9uYXJ5IG9mIGxvY2FsZXNcbiAgICAgKiB2YXIgYXZhaWxhYmxlTG9jYWxlcyA9IHsgZW46ICdlbi1VUycsIGZyOiAnZnItRlInIH07XG4gICAgICogdmFyIGxvY2FsZSA9IHBjLkkxOG4uZ2V0VGV4dCgnZW4tVVMnLCBhdmFpbGFibGVMb2NhbGVzKTtcbiAgICAgKiAvLyByZXR1cm5zICdlbidcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgc3RhdGljIGZpbmRBdmFpbGFibGVMb2NhbGUoZGVzaXJlZExvY2FsZSwgYXZhaWxhYmxlTG9jYWxlcykge1xuICAgICAgICByZXR1cm4gZmluZEF2YWlsYWJsZUxvY2FsZShkZXNpcmVkTG9jYWxlLCBhdmFpbGFibGVMb2NhbGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBhdmFpbGFibGUgbG9jYWxlIGJhc2VkIG9uIHRoZSBkZXNpcmVkIGxvY2FsZSBzcGVjaWZpZWQuIEZpcnN0IHRyaWVzIHRvXG4gICAgICogZmluZCB0aGUgZGVzaXJlZCBsb2NhbGUgaW4gdGhlIGxvYWRlZCB0cmFuc2xhdGlvbnMgYW5kIHRoZW4gdHJpZXMgdG8gZmluZCBhbiBhbHRlcm5hdGl2ZVxuICAgICAqIGxvY2FsZSBiYXNlZCBvbiB0aGUgbGFuZ3VhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzaXJlZExvY2FsZSAtIFRoZSBkZXNpcmVkIGxvY2FsZSBlLmcuIGVuLVVTLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBsb2NhbGUgZm91bmQgb3IgaWYgbm8gbG9jYWxlIGlzIGF2YWlsYWJsZSByZXR1cm5zIHRoZSBkZWZhdWx0IGVuLVVTXG4gICAgICogbG9jYWxlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIGxvY2FsZSA9IHRoaXMuYXBwLmkxOG4uZ2V0VGV4dCgnZW4tVVMnKTtcbiAgICAgKi9cbiAgICBmaW5kQXZhaWxhYmxlTG9jYWxlKGRlc2lyZWRMb2NhbGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zbGF0aW9uc1tkZXNpcmVkTG9jYWxlXSkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2lyZWRMb2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsYW5nID0gZ2V0TGFuZyhkZXNpcmVkTG9jYWxlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRGYWxsYmFja0xvY2FsZShkZXNpcmVkTG9jYWxlLCBsYW5nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBrZXkgYW5kIGxvY2FsZS4gSWYgdGhlIGxvY2FsZSBpcyBub3Qgc3BlY2lmaWVkIGl0XG4gICAgICogd2lsbCB1c2UgdGhlIGN1cnJlbnQgbG9jYWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBsb2NhbGl6YXRpb24ga2V5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbG9jYWxlXSAtIFRoZSBkZXNpcmVkIGxvY2FsZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdHJhbnNsYXRlZCB0ZXh0LiBJZiBubyB0cmFuc2xhdGlvbnMgYXJlIGZvdW5kIGF0IGFsbCBmb3IgdGhlIGxvY2FsZVxuICAgICAqIHRoZW4gaXQgd2lsbCByZXR1cm4gdGhlIGVuLVVTIHRyYW5zbGF0aW9uLiBJZiBubyB0cmFuc2xhdGlvbiBleGlzdHMgZm9yIHRoYXQga2V5IHRoZW4gaXQgd2lsbFxuICAgICAqIHJldHVybiB0aGUgbG9jYWxpemF0aW9uIGtleS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHZhciBsb2NhbGl6ZWQgPSB0aGlzLmFwcC5pMThuLmdldFRleHQoJ2xvY2FsaXphdGlvbi1rZXknKTtcbiAgICAgKiB2YXIgbG9jYWxpemVkRnJlbmNoID0gdGhpcy5hcHAuaTE4bi5nZXRUZXh0KCdsb2NhbGl6YXRpb24ta2V5JywgJ2ZyLUZSJyk7XG4gICAgICovXG4gICAgZ2V0VGV4dChrZXksIGxvY2FsZSkge1xuICAgICAgICAvLyBkZWZhdWx0IHRyYW5zbGF0aW9uIGlzIHRoZSBrZXlcbiAgICAgICAgbGV0IHJlc3VsdCA9IGtleTtcblxuICAgICAgICBsZXQgbGFuZztcbiAgICAgICAgaWYgKCFsb2NhbGUpIHtcbiAgICAgICAgICAgIGxvY2FsZSA9IHRoaXMuX2xvY2FsZTtcbiAgICAgICAgICAgIGxhbmcgPSB0aGlzLl9sYW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRyYW5zbGF0aW9ucyA9IHRoaXMuX3RyYW5zbGF0aW9uc1tsb2NhbGVdO1xuICAgICAgICBpZiAoIXRyYW5zbGF0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFsYW5nKSB7XG4gICAgICAgICAgICAgICAgbGFuZyA9IGdldExhbmcobG9jYWxlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9jYWxlID0gdGhpcy5fZmluZEZhbGxiYWNrTG9jYWxlKGxvY2FsZSwgbGFuZyk7XG4gICAgICAgICAgICB0cmFuc2xhdGlvbnMgPSB0aGlzLl90cmFuc2xhdGlvbnNbbG9jYWxlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFuc2xhdGlvbnMgJiYgdHJhbnNsYXRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRyYW5zbGF0aW9uc1trZXldO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgcGx1cmFsIGtleSB0aGVuIHJldHVybiB0aGUgZmlyc3QgZW50cnkgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiBudWxsIG9yIHVuZGVmaW5lZCBzd2l0Y2ggYmFjayB0byB0aGUga2V5IChlbXB0eSBzdHJpbmcgaXMgYWxsb3dlZClcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHBsdXJhbGl6ZWQgdHJhbnNsYXRpb24gZm9yIHRoZSBzcGVjaWZpZWQga2V5LCBudW1iZXIgbiBhbmQgbG9jYWxlLiBJZiB0aGUgbG9jYWxlXG4gICAgICogaXMgbm90IHNwZWNpZmllZCBpdCB3aWxsIHVzZSB0aGUgY3VycmVudCBsb2NhbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIGxvY2FsaXphdGlvbiBrZXkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gLSBUaGUgbnVtYmVyIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIHBsdXJhbCBmb3JtIHRvIHVzZS4gRS5nLiBGb3IgdGhlXG4gICAgICogcGhyYXNlIFwiNSBBcHBsZXNcIiBuIGVxdWFscyA1LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbG9jYWxlXSAtIFRoZSBkZXNpcmVkIGxvY2FsZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdHJhbnNsYXRlZCB0ZXh0LiBJZiBubyB0cmFuc2xhdGlvbnMgYXJlIGZvdW5kIGF0IGFsbCBmb3IgdGhlIGxvY2FsZVxuICAgICAqIHRoZW4gaXQgd2lsbCByZXR1cm4gdGhlIGVuLVVTIHRyYW5zbGF0aW9uLiBJZiBubyB0cmFuc2xhdGlvbiBleGlzdHMgZm9yIHRoYXQga2V5IHRoZW4gaXRcbiAgICAgKiB3aWxsIHJldHVybiB0aGUgbG9jYWxpemF0aW9uIGtleS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIG1hbnVhbGx5IHJlcGxhY2Uge251bWJlcn0gaW4gdGhlIHJlc3VsdGluZyB0cmFuc2xhdGlvbiB3aXRoIG91ciBudW1iZXJcbiAgICAgKiB2YXIgbG9jYWxpemVkID0gdGhpcy5hcHAuaTE4bi5nZXRQbHVyYWxUZXh0KCd7bnVtYmVyfSBhcHBsZXMnLCBudW1iZXIpLnJlcGxhY2UoXCJ7bnVtYmVyfVwiLCBudW1iZXIpO1xuICAgICAqL1xuICAgIGdldFBsdXJhbFRleHQoa2V5LCBuLCBsb2NhbGUpIHtcbiAgICAgICAgLy8gZGVmYXVsdCB0cmFuc2xhdGlvbiBpcyB0aGUga2V5XG4gICAgICAgIGxldCByZXN1bHQgPSBrZXk7XG5cbiAgICAgICAgbGV0IGxhbmc7XG4gICAgICAgIGxldCBwbHVyYWxGbjtcblxuICAgICAgICBpZiAoIWxvY2FsZSkge1xuICAgICAgICAgICAgbG9jYWxlID0gdGhpcy5fbG9jYWxlO1xuICAgICAgICAgICAgbGFuZyA9IHRoaXMuX2xhbmc7XG4gICAgICAgICAgICBwbHVyYWxGbiA9IHRoaXMuX3BsdXJhbEZuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGFuZyA9IGdldExhbmcobG9jYWxlKTtcbiAgICAgICAgICAgIHBsdXJhbEZuID0gZ2V0UGx1cmFsRm4obGFuZyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdHJhbnNsYXRpb25zID0gdGhpcy5fdHJhbnNsYXRpb25zW2xvY2FsZV07XG4gICAgICAgIGlmICghdHJhbnNsYXRpb25zKSB7XG4gICAgICAgICAgICBsb2NhbGUgPSB0aGlzLl9maW5kRmFsbGJhY2tMb2NhbGUobG9jYWxlLCBsYW5nKTtcbiAgICAgICAgICAgIGxhbmcgPSBnZXRMYW5nKGxvY2FsZSk7XG4gICAgICAgICAgICBwbHVyYWxGbiA9IGdldFBsdXJhbEZuKGxhbmcpO1xuICAgICAgICAgICAgdHJhbnNsYXRpb25zID0gdGhpcy5fdHJhbnNsYXRpb25zW2xvY2FsZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNsYXRpb25zICYmIHRyYW5zbGF0aW9uc1trZXldICYmIHBsdXJhbEZuKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHBsdXJhbEZuKG4pO1xuICAgICAgICAgICAgcmVzdWx0ID0gdHJhbnNsYXRpb25zW2tleV1baW5kZXhdO1xuXG4gICAgICAgICAgICAvLyBpZiBudWxsIG9yIHVuZGVmaW5lZCBzd2l0Y2ggYmFjayB0byB0aGUga2V5IChlbXB0eSBzdHJpbmcgaXMgYWxsb3dlZClcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgbG9jYWxpemF0aW9uIGRhdGEuIElmIHRoZSBsb2NhbGUgYW5kIGtleSBmb3IgYSB0cmFuc2xhdGlvbiBhbHJlYWR5IGV4aXN0cyBpdCB3aWxsIGJlXG4gICAgICogb3ZlcndyaXR0ZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIFRoZSBsb2NhbGl6YXRpb24gZGF0YS4gU2VlIGV4YW1wbGUgZm9yIHRoZSBleHBlY3RlZCBmb3JtYXQgb2YgdGhlXG4gICAgICogZGF0YS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHRoaXMuYXBwLmkxOG4uYWRkRGF0YSh7XG4gICAgICogICAgIGhlYWRlcjoge1xuICAgICAqICAgICAgICAgdmVyc2lvbjogMVxuICAgICAqICAgICB9LFxuICAgICAqICAgICBkYXRhOiBbe1xuICAgICAqICAgICAgICAgaW5mbzoge1xuICAgICAqICAgICAgICAgICAgIGxvY2FsZTogJ2VuLVVTJ1xuICAgICAqICAgICAgICAgfSxcbiAgICAgKiAgICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICogICAgICAgICAgICAgXCJrZXlcIjogXCJ0cmFuc2xhdGlvblwiLFxuICAgICAqICAgICAgICAgICAgIC8vIFRoZSBudW1iZXIgb2YgcGx1cmFsIGZvcm1zIGRlcGVuZHMgb24gdGhlIGxvY2FsZS4gU2VlIHRoZSBtYW51YWwgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICogICAgICAgICAgICAgXCJwbHVyYWxfa2V5XCI6IFtcIm9uZSBpdGVtXCIsIFwibW9yZSB0aGFuIG9uZSBpdGVtc1wiXVxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICB9LCB7XG4gICAgICogICAgICAgICBpbmZvOiB7XG4gICAgICogICAgICAgICAgICAgbG9jYWxlOiAnZnItRlInXG4gICAgICogICAgICAgICB9LFxuICAgICAqICAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgKiAgICAgICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgfV1cbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBhZGREYXRhKGRhdGEpIHtcbiAgICAgICAgbGV0IHBhcnNlZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMuX3BhcnNlci5wYXJzZShkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcGFyc2VkLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IHBhcnNlZFtpXTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsZSA9IGVudHJ5LmluZm8ubG9jYWxlO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBlbnRyeS5tZXNzYWdlcztcbiAgICAgICAgICAgIGlmICghdGhpcy5fdHJhbnNsYXRpb25zW2xvY2FsZV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2xhdGlvbnNbbG9jYWxlXSA9IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhbmcgPSBnZXRMYW5nKGxvY2FsZSk7XG5cbiAgICAgICAgICAgICAgICAvLyByZW1lbWJlciB0aGUgZmlyc3QgbG9jYWxlIHdlJ3ZlIGZvdW5kIGZvciB0aGF0IGxhbmd1YWdlXG4gICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3ZSBuZWVkIHRvIGZhbGwgYmFjayB0byBpdFxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fYXZhaWxhYmxlTGFuZ3NbbGFuZ10pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXZhaWxhYmxlTGFuZ3NbbGFuZ10gPSBsb2NhbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuX3RyYW5zbGF0aW9uc1tsb2NhbGVdLCBtZXNzYWdlcyk7XG5cbiAgICAgICAgICAgIHRoaXMuZmlyZSgnZGF0YTphZGQnLCBsb2NhbGUsIG1lc3NhZ2VzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgbG9jYWxpemF0aW9uIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIFRoZSBsb2NhbGl6YXRpb24gZGF0YS4gVGhlIGRhdGEgaXMgZXhwZWN0ZWQgdG8gYmUgaW4gdGhlIHNhbWUgZm9ybWF0XG4gICAgICogYXMge0BsaW5rIEkxOG4jYWRkRGF0YX0uXG4gICAgICovXG4gICAgcmVtb3ZlRGF0YShkYXRhKSB7XG4gICAgICAgIGxldCBwYXJzZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLl9wYXJzZXIucGFyc2UoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHBhcnNlZC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBwYXJzZWRbaV07XG4gICAgICAgICAgICBjb25zdCBsb2NhbGUgPSBlbnRyeS5pbmZvLmxvY2FsZTtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0aW9ucyA9IHRoaXMuX3RyYW5zbGF0aW9uc1tsb2NhbGVdO1xuICAgICAgICAgICAgaWYgKCF0cmFuc2xhdGlvbnMpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGVudHJ5Lm1lc3NhZ2VzO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWVzc2FnZXMpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdHJhbnNsYXRpb25zW2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIG5vIG1vcmUgZW50cmllcyBmb3IgdGhhdCBsb2NhbGUgdGhlblxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBsb2NhbGVcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0cmFuc2xhdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl90cmFuc2xhdGlvbnNbbG9jYWxlXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fYXZhaWxhYmxlTGFuZ3NbZ2V0TGFuZyhsb2NhbGUpXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5maXJlKCdkYXRhOnJlbW92ZScsIGxvY2FsZSwgbWVzc2FnZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnJlZXMgdXAgbWVtb3J5LlxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3RyYW5zbGF0aW9ucyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2F2YWlsYWJsZUxhbmdzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYXNzZXRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyc2VyID0gbnVsbDtcbiAgICAgICAgdGhpcy5vZmYoKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kcyBhIGZhbGxiYWNrIGxvY2FsZSBmb3IgdGhlIHNwZWNpZmllZCBsb2NhbGUgYW5kIGxhbmd1YWdlLlxuICAgIC8vIDEpIEZpcnN0IHRyaWVzIERFRkFVTFRfTE9DQUxFX0ZBTExCQUNLU1xuICAgIC8vIDIpIElmIG5vIHRyYW5zbGF0aW9uIGV4aXN0cyBmb3IgdGhhdCBsb2NhbGUgcmV0dXJuIHRoZSBmaXJzdCBsb2NhbGUgYXZhaWxhYmxlIGZvciB0aGF0IGxhbmd1YWdlLlxuICAgIC8vIDMpIElmIG5vIHRyYW5zbGF0aW9uIGV4aXN0cyBmb3IgdGhhdCBlaXRoZXIgdGhlbiByZXR1cm4gdGhlIERFRkFVTFRfTE9DQUxFXG4gICAgX2ZpbmRGYWxsYmFja0xvY2FsZShsb2NhbGUsIGxhbmcpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IERFRkFVTFRfTE9DQUxFX0ZBTExCQUNLU1tsb2NhbGVdO1xuICAgICAgICBpZiAocmVzdWx0ICYmIHRoaXMuX3RyYW5zbGF0aW9uc1tyZXN1bHRdKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0ID0gREVGQVVMVF9MT0NBTEVfRkFMTEJBQ0tTW2xhbmddO1xuICAgICAgICBpZiAocmVzdWx0ICYmIHRoaXMuX3RyYW5zbGF0aW9uc1tyZXN1bHRdKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0ID0gdGhpcy5fYXZhaWxhYmxlTGFuZ3NbbGFuZ107XG4gICAgICAgIGlmIChyZXN1bHQgJiYgdGhpcy5fdHJhbnNsYXRpb25zW3Jlc3VsdF0pIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gREVGQVVMVF9MT0NBTEU7XG4gICAgfVxuXG4gICAgX29uQXNzZXRBZGQoYXNzZXQpIHtcbiAgICAgICAgYXNzZXQub24oJ2xvYWQnLCB0aGlzLl9vbkFzc2V0TG9hZCwgdGhpcyk7XG4gICAgICAgIGFzc2V0Lm9uKCdjaGFuZ2UnLCB0aGlzLl9vbkFzc2V0Q2hhbmdlLCB0aGlzKTtcbiAgICAgICAgYXNzZXQub24oJ3JlbW92ZScsIHRoaXMuX29uQXNzZXRSZW1vdmUsIHRoaXMpO1xuICAgICAgICBhc3NldC5vbigndW5sb2FkJywgdGhpcy5fb25Bc3NldFVubG9hZCwgdGhpcyk7XG5cbiAgICAgICAgaWYgKGFzc2V0LnJlc291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLl9vbkFzc2V0TG9hZChhc3NldCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25Bc3NldExvYWQoYXNzZXQpIHtcbiAgICAgICAgdGhpcy5hZGREYXRhKGFzc2V0LnJlc291cmNlKTtcbiAgICB9XG5cbiAgICBfb25Bc3NldENoYW5nZShhc3NldCkge1xuICAgICAgICBpZiAoYXNzZXQucmVzb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRGF0YShhc3NldC5yZXNvdXJjZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25Bc3NldFJlbW92ZShhc3NldCkge1xuICAgICAgICBhc3NldC5vZmYoJ2xvYWQnLCB0aGlzLl9vbkFzc2V0TG9hZCwgdGhpcyk7XG4gICAgICAgIGFzc2V0Lm9mZignY2hhbmdlJywgdGhpcy5fb25Bc3NldENoYW5nZSwgdGhpcyk7XG4gICAgICAgIGFzc2V0Lm9mZigncmVtb3ZlJywgdGhpcy5fb25Bc3NldFJlbW92ZSwgdGhpcyk7XG4gICAgICAgIGFzc2V0Lm9mZigndW5sb2FkJywgdGhpcy5fb25Bc3NldFVubG9hZCwgdGhpcyk7XG5cbiAgICAgICAgaWYgKGFzc2V0LnJlc291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZURhdGEoYXNzZXQucmVzb3VyY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYXBwLmFzc2V0cy5vbmNlKCdhZGQ6JyArIGFzc2V0LmlkLCB0aGlzLl9vbkFzc2V0QWRkLCB0aGlzKTtcbiAgICB9XG5cbiAgICBfb25Bc3NldFVubG9hZChhc3NldCkge1xuICAgICAgICBpZiAoYXNzZXQucmVzb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRGF0YShhc3NldC5yZXNvdXJjZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IEkxOG4gfTtcbiJdLCJuYW1lcyI6WyJJMThuIiwiRXZlbnRIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJhcHAiLCJsb2NhbGUiLCJERUZBVUxUX0xPQ0FMRSIsIl90cmFuc2xhdGlvbnMiLCJfYXZhaWxhYmxlTGFuZ3MiLCJfYXBwIiwiX2Fzc2V0cyIsIl9wYXJzZXIiLCJJMThuUGFyc2VyIiwiYXNzZXRzIiwidmFsdWUiLCJpbmRleCIsImkiLCJsZW4iLCJsZW5ndGgiLCJpZCIsIkFzc2V0Iiwib2ZmIiwiX29uQXNzZXRBZGQiLCJhc3NldCIsImdldCIsIl9vbkFzc2V0UmVtb3ZlIiwic3BsaWNlIiwiaWROdW0iLCJwYXJzZUludCIsImluZGV4T2YiLCJwdXNoIiwib25jZSIsIl9sb2NhbGUiLCJsYW5nIiwiZ2V0TGFuZyIsInJlcGxhY2VMYW5nIiwib2xkIiwiX2xhbmciLCJfcGx1cmFsRm4iLCJnZXRQbHVyYWxGbiIsImZpcmUiLCJmaW5kQXZhaWxhYmxlTG9jYWxlIiwiZGVzaXJlZExvY2FsZSIsImF2YWlsYWJsZUxvY2FsZXMiLCJfZmluZEZhbGxiYWNrTG9jYWxlIiwiZ2V0VGV4dCIsImtleSIsInJlc3VsdCIsInRyYW5zbGF0aW9ucyIsImhhc093blByb3BlcnR5IiwiQXJyYXkiLCJpc0FycmF5IiwidW5kZWZpbmVkIiwiZ2V0UGx1cmFsVGV4dCIsIm4iLCJwbHVyYWxGbiIsImFkZERhdGEiLCJkYXRhIiwicGFyc2VkIiwicGFyc2UiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJlbnRyeSIsImluZm8iLCJtZXNzYWdlcyIsIk9iamVjdCIsImFzc2lnbiIsInJlbW92ZURhdGEiLCJrZXlzIiwiZGVzdHJveSIsIkRFRkFVTFRfTE9DQUxFX0ZBTExCQUNLUyIsIm9uIiwiX29uQXNzZXRMb2FkIiwiX29uQXNzZXRDaGFuZ2UiLCJfb25Bc3NldFVubG9hZCIsInJlc291cmNlIl0sIm1hcHBpbmdzIjoi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
