/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { IndexedList } from '../../../core/indexed-list.js';
import { Vec2 } from '../../../math/vec2.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { ScreenComponent } from './component.js';
import { ScreenComponentData } from './data.js';

const _schema = ['enabled'];

class ScreenComponentSystem extends ComponentSystem {
  constructor(app) {
    super(app);
    this.id = 'screen';
    this.ComponentType = ScreenComponent;
    this.DataType = ScreenComponentData;
    this.schema = _schema;
    this.windowResolution = new Vec2();
    this._drawOrderSyncQueue = new IndexedList();
    this.app.graphicsDevice.on('resizecanvas', this._onResize, this);
    this.app.systems.on('update', this._onUpdate, this);
    this.on('beforeremove', this.onRemoveComponent, this);
  }

  initializeComponentData(component, data, properties) {
    if (data.priority !== undefined) component.priority = data.priority;
    if (data.screenSpace !== undefined) component.screenSpace = data.screenSpace;
    component.cull = component.screenSpace;
    if (data.scaleMode !== undefined) component.scaleMode = data.scaleMode;
    if (data.scaleBlend !== undefined) component.scaleBlend = data.scaleBlend;

    if (data.resolution !== undefined) {
      if (data.resolution instanceof Vec2) {
        component._resolution.copy(data.resolution);
      } else {
        component._resolution.set(data.resolution[0], data.resolution[1]);
      }

      component.resolution = component._resolution;
    }

    if (data.referenceResolution !== undefined) {
      if (data.referenceResolution instanceof Vec2) {
        component._referenceResolution.copy(data.referenceResolution);
      } else {
        component._referenceResolution.set(data.referenceResolution[0], data.referenceResolution[1]);
      }

      component.referenceResolution = component._referenceResolution;
    }

    component.syncDrawOrder();
    super.initializeComponentData(component, data, properties);
  }

  destroy() {
    super.destroy();
    this.app.graphicsDevice.off('resizecanvas', this._onResize, this);
    this.app.systems.off('update', this._onUpdate, this);
  }

  _onUpdate(dt) {
    const components = this.store;

    for (const id in components) {
      if (components[id].entity.screen.update) components[id].entity.screen.update(dt);
    }
  }

  _onResize(width, height) {
    this.windowResolution.x = width;
    this.windowResolution.y = height;
  }

  cloneComponent(entity, clone) {
    const screen = entity.screen;
    return this.addComponent(clone, {
      enabled: screen.enabled,
      screenSpace: screen.screenSpace,
      scaleMode: screen.scaleMode,
      resolution: screen.resolution.clone(),
      referenceResolution: screen.referenceResolution.clone()
    });
  }

  onRemoveComponent(entity, component) {
    component.onRemove();
  }

  processDrawOrderSyncQueue() {
    const list = this._drawOrderSyncQueue.list();

    for (let i = 0; i < list.length; i++) {
      const item = list[i];
      item.callback.call(item.scope);
    }

    this._drawOrderSyncQueue.clear();
  }

  queueDrawOrderSync(id, fn, scope) {
    if (!this._drawOrderSyncQueue.list().length) {
      this.app.once('prerender', this.processDrawOrderSyncQueue, this);
    }

    if (!this._drawOrderSyncQueue.has(id)) {
      this._drawOrderSyncQueue.push(id, {
        callback: fn,
        scope: scope
      });
    }
  }

}

Component._buildAccessors(ScreenComponent.prototype, _schema);

export { ScreenComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvc2NyZWVuL3N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmRleGVkTGlzdCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvaW5kZXhlZC1saXN0LmpzJztcblxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4uLy4uLy4uL21hdGgvdmVjMi5qcyc7XG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBDb21wb25lbnRTeXN0ZW0gfSBmcm9tICcuLi9zeXN0ZW0uanMnO1xuXG5pbXBvcnQgeyBTY3JlZW5Db21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBTY3JlZW5Db21wb25lbnREYXRhIH0gZnJvbSAnLi9kYXRhLmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uLy4uL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gQXBwQmFzZSAqL1xuXG5jb25zdCBfc2NoZW1hID0gWydlbmFibGVkJ107XG5cbi8qKlxuICogTWFuYWdlcyBjcmVhdGlvbiBvZiB7QGxpbmsgU2NyZWVuQ29tcG9uZW50fXMuXG4gKlxuICogQGF1Z21lbnRzIENvbXBvbmVudFN5c3RlbVxuICovXG5jbGFzcyBTY3JlZW5Db21wb25lbnRTeXN0ZW0gZXh0ZW5kcyBDb21wb25lbnRTeXN0ZW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBTY3JlZW5Db21wb25lbnRTeXN0ZW0gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FwcEJhc2V9IGFwcCAtIFRoZSBhcHBsaWNhdGlvbi5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG5cbiAgICAgICAgdGhpcy5pZCA9ICdzY3JlZW4nO1xuXG4gICAgICAgIHRoaXMuQ29tcG9uZW50VHlwZSA9IFNjcmVlbkNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5EYXRhVHlwZSA9IFNjcmVlbkNvbXBvbmVudERhdGE7XG5cbiAgICAgICAgdGhpcy5zY2hlbWEgPSBfc2NoZW1hO1xuXG4gICAgICAgIHRoaXMud2luZG93UmVzb2x1dGlvbiA9IG5ldyBWZWMyKCk7XG5cbiAgICAgICAgLy8gcXVldWUgb2YgY2FsbGJhY2tzXG4gICAgICAgIHRoaXMuX2RyYXdPcmRlclN5bmNRdWV1ZSA9IG5ldyBJbmRleGVkTGlzdCgpO1xuXG4gICAgICAgIHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLm9uKCdyZXNpemVjYW52YXMnLCB0aGlzLl9vblJlc2l6ZSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vbigndXBkYXRlJywgdGhpcy5fb25VcGRhdGUsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMub24oJ2JlZm9yZXJlbW92ZScsIHRoaXMub25SZW1vdmVDb21wb25lbnQsIHRoaXMpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemVDb21wb25lbnREYXRhKGNvbXBvbmVudCwgZGF0YSwgcHJvcGVydGllcykge1xuICAgICAgICBpZiAoZGF0YS5wcmlvcml0eSAhPT0gdW5kZWZpbmVkKSBjb21wb25lbnQucHJpb3JpdHkgPSBkYXRhLnByaW9yaXR5O1xuICAgICAgICBpZiAoZGF0YS5zY3JlZW5TcGFjZSAhPT0gdW5kZWZpbmVkKSBjb21wb25lbnQuc2NyZWVuU3BhY2UgPSBkYXRhLnNjcmVlblNwYWNlO1xuICAgICAgICBjb21wb25lbnQuY3VsbCA9IGNvbXBvbmVudC5zY3JlZW5TcGFjZTtcbiAgICAgICAgaWYgKGRhdGEuc2NhbGVNb2RlICE9PSB1bmRlZmluZWQpIGNvbXBvbmVudC5zY2FsZU1vZGUgPSBkYXRhLnNjYWxlTW9kZTtcbiAgICAgICAgaWYgKGRhdGEuc2NhbGVCbGVuZCAhPT0gdW5kZWZpbmVkKSBjb21wb25lbnQuc2NhbGVCbGVuZCA9IGRhdGEuc2NhbGVCbGVuZDtcbiAgICAgICAgaWYgKGRhdGEucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNvbHV0aW9uIGluc3RhbmNlb2YgVmVjMikge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVzb2x1dGlvbi5jb3B5KGRhdGEucmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVzb2x1dGlvbi5zZXQoZGF0YS5yZXNvbHV0aW9uWzBdLCBkYXRhLnJlc29sdXRpb25bMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LnJlc29sdXRpb24gPSBjb21wb25lbnQuX3Jlc29sdXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEucmVmZXJlbmNlUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5yZWZlcmVuY2VSZXNvbHV0aW9uIGluc3RhbmNlb2YgVmVjMikge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVmZXJlbmNlUmVzb2x1dGlvbi5jb3B5KGRhdGEucmVmZXJlbmNlUmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVmZXJlbmNlUmVzb2x1dGlvbi5zZXQoZGF0YS5yZWZlcmVuY2VSZXNvbHV0aW9uWzBdLCBkYXRhLnJlZmVyZW5jZVJlc29sdXRpb25bMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LnJlZmVyZW5jZVJlc29sdXRpb24gPSBjb21wb25lbnQuX3JlZmVyZW5jZVJlc29sdXRpb247XG4gICAgICAgIH1cblxuICAgICAgICAvLyBxdWV1ZSB1cCBhIGRyYXcgb3JkZXIgc3luY1xuICAgICAgICBjb21wb25lbnQuc3luY0RyYXdPcmRlcigpO1xuICAgICAgICBzdXBlci5pbml0aWFsaXplQ29tcG9uZW50RGF0YShjb21wb25lbnQsIGRhdGEsIHByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcblxuICAgICAgICB0aGlzLmFwcC5ncmFwaGljc0RldmljZS5vZmYoJ3Jlc2l6ZWNhbnZhcycsIHRoaXMuX29uUmVzaXplLCB0aGlzKTtcbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vZmYoJ3VwZGF0ZScsIHRoaXMuX29uVXBkYXRlLCB0aGlzKTtcbiAgICB9XG5cbiAgICBfb25VcGRhdGUoZHQpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHRoaXMuc3RvcmU7XG5cbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBjb21wb25lbnRzKSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50c1tpZF0uZW50aXR5LnNjcmVlbi51cGRhdGUpIGNvbXBvbmVudHNbaWRdLmVudGl0eS5zY3JlZW4udXBkYXRlKGR0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMud2luZG93UmVzb2x1dGlvbi54ID0gd2lkdGg7XG4gICAgICAgIHRoaXMud2luZG93UmVzb2x1dGlvbi55ID0gaGVpZ2h0O1xuICAgIH1cblxuICAgIGNsb25lQ29tcG9uZW50KGVudGl0eSwgY2xvbmUpIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuID0gZW50aXR5LnNjcmVlbjtcblxuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb21wb25lbnQoY2xvbmUsIHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNjcmVlbi5lbmFibGVkLFxuICAgICAgICAgICAgc2NyZWVuU3BhY2U6IHNjcmVlbi5zY3JlZW5TcGFjZSxcbiAgICAgICAgICAgIHNjYWxlTW9kZTogc2NyZWVuLnNjYWxlTW9kZSxcbiAgICAgICAgICAgIHJlc29sdXRpb246IHNjcmVlbi5yZXNvbHV0aW9uLmNsb25lKCksXG4gICAgICAgICAgICByZWZlcmVuY2VSZXNvbHV0aW9uOiBzY3JlZW4ucmVmZXJlbmNlUmVzb2x1dGlvbi5jbG9uZSgpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uUmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgY29tcG9uZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5vblJlbW92ZSgpO1xuICAgIH1cblxuICAgIHByb2Nlc3NEcmF3T3JkZXJTeW5jUXVldWUoKSB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLl9kcmF3T3JkZXJTeW5jUXVldWUubGlzdCgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGxpc3RbaV07XG4gICAgICAgICAgICBpdGVtLmNhbGxiYWNrLmNhbGwoaXRlbS5zY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZHJhd09yZGVyU3luY1F1ZXVlLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgcXVldWVEcmF3T3JkZXJTeW5jKGlkLCBmbiwgc2NvcGUpIHtcbiAgICAgICAgLy8gZmlyc3QgcXVldWVkIHN5bmMgdGhpcyBmcmFtZVxuICAgICAgICAvLyBhdHRhY2ggYW4gZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgaWYgKCF0aGlzLl9kcmF3T3JkZXJTeW5jUXVldWUubGlzdCgpLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hcHAub25jZSgncHJlcmVuZGVyJywgdGhpcy5wcm9jZXNzRHJhd09yZGVyU3luY1F1ZXVlLCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fZHJhd09yZGVyU3luY1F1ZXVlLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2RyYXdPcmRlclN5bmNRdWV1ZS5wdXNoKGlkLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZuLFxuICAgICAgICAgICAgICAgIHNjb3BlOiBzY29wZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkNvbXBvbmVudC5fYnVpbGRBY2Nlc3NvcnMoU2NyZWVuQ29tcG9uZW50LnByb3RvdHlwZSwgX3NjaGVtYSk7XG5cbmV4cG9ydCB7IFNjcmVlbkNvbXBvbmVudFN5c3RlbSB9O1xuIl0sIm5hbWVzIjpbIl9zY2hlbWEiLCJTY3JlZW5Db21wb25lbnRTeXN0ZW0iLCJDb21wb25lbnRTeXN0ZW0iLCJjb25zdHJ1Y3RvciIsImFwcCIsImlkIiwiQ29tcG9uZW50VHlwZSIsIlNjcmVlbkNvbXBvbmVudCIsIkRhdGFUeXBlIiwiU2NyZWVuQ29tcG9uZW50RGF0YSIsInNjaGVtYSIsIndpbmRvd1Jlc29sdXRpb24iLCJWZWMyIiwiX2RyYXdPcmRlclN5bmNRdWV1ZSIsIkluZGV4ZWRMaXN0IiwiZ3JhcGhpY3NEZXZpY2UiLCJvbiIsIl9vblJlc2l6ZSIsInN5c3RlbXMiLCJfb25VcGRhdGUiLCJvblJlbW92ZUNvbXBvbmVudCIsImluaXRpYWxpemVDb21wb25lbnREYXRhIiwiY29tcG9uZW50IiwiZGF0YSIsInByb3BlcnRpZXMiLCJwcmlvcml0eSIsInVuZGVmaW5lZCIsInNjcmVlblNwYWNlIiwiY3VsbCIsInNjYWxlTW9kZSIsInNjYWxlQmxlbmQiLCJyZXNvbHV0aW9uIiwiX3Jlc29sdXRpb24iLCJjb3B5Iiwic2V0IiwicmVmZXJlbmNlUmVzb2x1dGlvbiIsIl9yZWZlcmVuY2VSZXNvbHV0aW9uIiwic3luY0RyYXdPcmRlciIsImRlc3Ryb3kiLCJvZmYiLCJkdCIsImNvbXBvbmVudHMiLCJzdG9yZSIsImVudGl0eSIsInNjcmVlbiIsInVwZGF0ZSIsIndpZHRoIiwiaGVpZ2h0IiwieCIsInkiLCJjbG9uZUNvbXBvbmVudCIsImNsb25lIiwiYWRkQ29tcG9uZW50IiwiZW5hYmxlZCIsIm9uUmVtb3ZlIiwicHJvY2Vzc0RyYXdPcmRlclN5bmNRdWV1ZSIsImxpc3QiLCJpIiwibGVuZ3RoIiwiaXRlbSIsImNhbGxiYWNrIiwiY2FsbCIsInNjb3BlIiwiY2xlYXIiLCJxdWV1ZURyYXdPcmRlclN5bmMiLCJmbiIsIm9uY2UiLCJoYXMiLCJwdXNoIiwiQ29tcG9uZW50IiwiX2J1aWxkQWNjZXNzb3JzIiwicHJvdG90eXBlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFZQSxNQUFNQSxPQUFPLEdBQUcsQ0FBQyxTQUFELENBQWhCLENBQUE7O0FBT0EsTUFBTUMscUJBQU4sU0FBb0NDLGVBQXBDLENBQW9EO0VBT2hEQyxXQUFXLENBQUNDLEdBQUQsRUFBTTtBQUNiLElBQUEsS0FBQSxDQUFNQSxHQUFOLENBQUEsQ0FBQTtJQUVBLElBQUtDLENBQUFBLEVBQUwsR0FBVSxRQUFWLENBQUE7SUFFQSxJQUFLQyxDQUFBQSxhQUFMLEdBQXFCQyxlQUFyQixDQUFBO0lBQ0EsSUFBS0MsQ0FBQUEsUUFBTCxHQUFnQkMsbUJBQWhCLENBQUE7SUFFQSxJQUFLQyxDQUFBQSxNQUFMLEdBQWNWLE9BQWQsQ0FBQTtBQUVBLElBQUEsSUFBQSxDQUFLVyxnQkFBTCxHQUF3QixJQUFJQyxJQUFKLEVBQXhCLENBQUE7QUFHQSxJQUFBLElBQUEsQ0FBS0MsbUJBQUwsR0FBMkIsSUFBSUMsV0FBSixFQUEzQixDQUFBO0lBRUEsSUFBS1YsQ0FBQUEsR0FBTCxDQUFTVyxjQUFULENBQXdCQyxFQUF4QixDQUEyQixjQUEzQixFQUEyQyxJQUFBLENBQUtDLFNBQWhELEVBQTJELElBQTNELENBQUEsQ0FBQTtJQUVBLElBQUtiLENBQUFBLEdBQUwsQ0FBU2MsT0FBVCxDQUFpQkYsRUFBakIsQ0FBb0IsUUFBcEIsRUFBOEIsSUFBQSxDQUFLRyxTQUFuQyxFQUE4QyxJQUE5QyxDQUFBLENBQUE7QUFFQSxJQUFBLElBQUEsQ0FBS0gsRUFBTCxDQUFRLGNBQVIsRUFBd0IsSUFBS0ksQ0FBQUEsaUJBQTdCLEVBQWdELElBQWhELENBQUEsQ0FBQTtBQUNILEdBQUE7O0FBRURDLEVBQUFBLHVCQUF1QixDQUFDQyxTQUFELEVBQVlDLElBQVosRUFBa0JDLFVBQWxCLEVBQThCO0FBQ2pELElBQUEsSUFB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
