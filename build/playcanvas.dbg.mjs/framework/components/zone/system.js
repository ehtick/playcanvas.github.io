/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Vec3 } from '../../../math/vec3.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { ZoneComponent } from './component.js';
import { ZoneComponentData } from './data.js';

const _schema = ['enabled'];

class ZoneComponentSystem extends ComponentSystem {
  constructor(app) {
    super(app);
    this.id = 'zone';
    this.ComponentType = ZoneComponent;
    this.DataType = ZoneComponentData;
    this.schema = _schema;
    this.on('beforeremove', this._onBeforeRemove, this);
  }

  initializeComponentData(component, data, properties) {
    component.enabled = data.hasOwnProperty('enabled') ? !!data.enabled : true;

    if (data.size) {
      if (data.size instanceof Vec3) {
        component.size.copy(data.size);
      } else if (data.size instanceof Array && data.size.length >= 3) {
        component.size.set(data.size[0], data.size[1], data.size[2]);
      }
    }
  }

  cloneComponent(entity, clone) {
    const data = {
      size: entity.zone.size
    };
    return this.addComponent(clone, data);
  }

  _onBeforeRemove(entity, component) {
    component._onBeforeRemove();
  }

}

Component._buildAccessors(ZoneComponent.prototype, _schema);

export { ZoneComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvem9uZS9zeXN0ZW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4uLy4uLy4uL21hdGgvdmVjMy5qcyc7XG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBDb21wb25lbnRTeXN0ZW0gfSBmcm9tICcuLi9zeXN0ZW0uanMnO1xuXG5pbXBvcnQgeyBab25lQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnQuanMnO1xuaW1wb3J0IHsgWm9uZUNvbXBvbmVudERhdGEgfSBmcm9tICcuL2RhdGEuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vLi4vYXBwLWJhc2UuanMnKS5BcHBCYXNlfSBBcHBCYXNlICovXG5cbmNvbnN0IF9zY2hlbWEgPSBbJ2VuYWJsZWQnXTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuZCBtYW5hZ2VzIHtAbGluayBab25lQ29tcG9uZW50fSBpbnN0YW5jZXMuXG4gKlxuICogQGF1Z21lbnRzIENvbXBvbmVudFN5c3RlbVxuICogQGlnbm9yZVxuICovXG5jbGFzcyBab25lQ29tcG9uZW50U3lzdGVtIGV4dGVuZHMgQ29tcG9uZW50U3lzdGVtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgWm9uZUNvbXBvbmVudFN5c3RlbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXBwQmFzZX0gYXBwIC0gVGhlIGFwcGxpY2F0aW9uLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcblxuICAgICAgICB0aGlzLmlkID0gJ3pvbmUnO1xuXG4gICAgICAgIHRoaXMuQ29tcG9uZW50VHlwZSA9IFpvbmVDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuRGF0YVR5cGUgPSBab25lQ29tcG9uZW50RGF0YTtcblxuICAgICAgICB0aGlzLnNjaGVtYSA9IF9zY2hlbWE7XG5cbiAgICAgICAgdGhpcy5vbignYmVmb3JlcmVtb3ZlJywgdGhpcy5fb25CZWZvcmVSZW1vdmUsIHRoaXMpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemVDb21wb25lbnREYXRhKGNvbXBvbmVudCwgZGF0YSwgcHJvcGVydGllcykge1xuICAgICAgICBjb21wb25lbnQuZW5hYmxlZCA9IGRhdGEuaGFzT3duUHJvcGVydHkoJ2VuYWJsZWQnKSA/ICEhZGF0YS5lbmFibGVkIDogdHJ1ZTtcblxuICAgICAgICBpZiAoZGF0YS5zaXplKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zaXplIGluc3RhbmNlb2YgVmVjMykge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zaXplLmNvcHkoZGF0YS5zaXplKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zaXplIGluc3RhbmNlb2YgQXJyYXkgJiYgZGF0YS5zaXplLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnNpemUuc2V0KGRhdGEuc2l6ZVswXSwgZGF0YS5zaXplWzFdLCBkYXRhLnNpemVbMl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xvbmVDb21wb25lbnQoZW50aXR5LCBjbG9uZSkge1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgc2l6ZTogZW50aXR5LnpvbmUuc2l6ZVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzLmFkZENvbXBvbmVudChjbG9uZSwgZGF0YSk7XG4gICAgfVxuXG4gICAgX29uQmVmb3JlUmVtb3ZlKGVudGl0eSwgY29tcG9uZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5fb25CZWZvcmVSZW1vdmUoKTtcbiAgICB9XG59XG5cbkNvbXBvbmVudC5fYnVpbGRBY2Nlc3NvcnMoWm9uZUNvbXBvbmVudC5wcm90b3R5cGUsIF9zY2hlbWEpO1xuXG5leHBvcnQgeyBab25lQ29tcG9uZW50U3lzdGVtIH07XG4iXSwibmFtZXMiOlsiX3NjaGVtYSIsIlpvbmVDb21wb25lbnRTeXN0ZW0iLCJDb21wb25lbnRTeXN0ZW0iLCJjb25zdHJ1Y3RvciIsImFwcCIsImlkIiwiQ29tcG9uZW50VHlwZSIsIlpvbmVDb21wb25lbnQiLCJEYXRhVHlwZSIsIlpvbmVDb21wb25lbnREYXRhIiwic2NoZW1hIiwib24iLCJfb25CZWZvcmVSZW1vdmUiLCJpbml0aWFsaXplQ29tcG9uZW50RGF0YSIsImNvbXBvbmVudCIsImRhdGEiLCJwcm9wZXJ0aWVzIiwiZW5hYmxlZCIsImhhc093blByb3BlcnR5Iiwic2l6ZSIsIlZlYzMiLCJjb3B5IiwiQXJyYXkiLCJsZW5ndGgiLCJzZXQiLCJjbG9uZUNvbXBvbmVudCIsImVudGl0eSIsImNsb25lIiwiem9uZSIsImFkZENvbXBvbmVudCIsIkNvbXBvbmVudCIsIl9idWlsZEFjY2Vzc29ycyIsInByb3RvdHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFVQSxNQUFNQSxPQUFPLEdBQUcsQ0FBQyxTQUFELENBQWhCLENBQUE7O0FBUUEsTUFBTUMsbUJBQU4sU0FBa0NDLGVBQWxDLENBQWtEO0VBTzlDQyxXQUFXLENBQUNDLEdBQUQsRUFBTTtBQUNiLElBQUEsS0FBQSxDQUFNQSxHQUFOLENBQUEsQ0FBQTtJQUVBLElBQUtDLENBQUFBLEVBQUwsR0FBVSxNQUFWLENBQUE7SUFFQSxJQUFLQyxDQUFBQSxhQUFMLEdBQXFCQyxhQUFyQixDQUFBO0lBQ0EsSUFBS0MsQ0FBQUEsUUFBTCxHQUFnQkMsaUJBQWhCLENBQUE7SUFFQSxJQUFLQyxDQUFBQSxNQUFMLEdBQWNWLE9BQWQsQ0FBQTtBQUVBLElBQUEsSUFBQSxDQUFLVyxFQUFMLENBQVEsY0FBUixFQUF3QixJQUFLQyxDQUFBQSxlQUE3QixFQUE4QyxJQUE5QyxDQUFBLENBQUE7QUFDSCxHQUFBOztBQUVEQyxFQUFBQSx1QkFBdUIsQ0FBQ0MsU0FBRCxFQUFZQyxJQUFaLEVBQWtCQyxVQUFsQixFQUE4QjtBQUNqREYsSUFBQUEsU0FBUyxDQUFDRyxPQUFWLEdBQW9CRixJQUFJLENBQUNHLGNBQUwsQ0FBb0IsU0FBcEIsQ0FBQSxHQUFpQyxDQUFDLENBQUNILElBQUksQ0FBQ0UsT0FBeEMsR0FBa0QsSUFBdEUsQ0FBQTs7SUFFQSxJQUFJRixJQUFJLENBQUNJLElBQVQsRUFBZTtBQUNYLE1BQUEsSUFBSUosSUFBSSxDQUFDSSxJQUFMLFlBQXFCQyxJQUF6QixFQUErQjtBQUMzQk4sUUFBQUEsU0FBUyxDQUFDSyxJQUFWLENBQWVFLElBQWYsQ0FBb0JOLElBQUksQ0FBQ0ksSUFBekIsQ0FBQSxDQUFBO0FBQ0gsT0FGRCxNQUVPLElBQUlKLElBQUksQ0FBQ0ksSUFBTCxZQUFxQkcsS0FBckIsSUFBOEJQLElBQUksQ0FBQ0ksSUFBTCxDQUFVSSxNQUFWLElBQW9CLENBQXRELEVBQXlEO1FBQzVEVCxTQUFTLENBQUNLLElBQVYsQ0FBZUssR0FBZixDQUFtQlQsSUFBSSxDQUFDSSxJQUFMLENBQVUsQ0FBVixDQUFuQixFQUFpQ0osSUFBSSxDQUFDSSxJQUFMLENBQVUsQ0FBVixDQUFqQyxFQUErQ0osSUFBSSxDQUFDSSxJQUFMLENBQVUsQ0FBVixDQUEvQyxDQUFBLENBQUE7QUFDSCxPQUFBO0FBQ0osS0FBQTtBQUNKLEdBQUE7O0FBRURNLEVBQUFBLGNBQWMsQ0FBQ0MsTUFBRCxFQUFTQyxLQUFULEVBQWdCO0FBQzFCLElBQUEsTUFBTVosSUFBSSxHQUFHO0FBQ1RJLE1BQUFBLElBQUksRUFBRU8sTUFBTSxDQUFDRSxJQUFQLENBQVlULElBQUFBO0tBRHRCLENBQUE7QUFJQSxJQUFBLE9BQU8sS0FBS1UsWUFBTCxDQUFrQkYsS0FBbEIsRUFBeUJaLElBQXpCLENBQVAsQ0FBQTtBQUNILEdBQUE7O0FBRURILEVBQUFBLGVBQWUsQ0FBQ2MsTUFBRCxFQUFTWixTQUFULEVBQW9CO0FBQy9CQSxJQUFBQSxTQUFTLENBQUNGLGVBQVYsRUFBQSxDQUFBO0FBQ0gsR0FBQTs7QUExQzZDLENBQUE7O0FBNkNsRGtCLFNBQVMsQ0FBQ0MsZUFBVixDQUEwQnhCLGFBQWEsQ0FBQ3lCLFNBQXhDLEVBQW1EaEMsT0FBbkQsQ0FBQTs7OzsifQ==
