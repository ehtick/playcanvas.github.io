/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../../core/debug.js';
import { AnimTrack } from '../../../anim/evaluator/anim-track.js';
import { AnimTransition } from '../../../anim/controller/anim-transition.js';
import { ANIM_LAYER_OVERWRITE } from '../../../anim/controller/constants.js';
import { math } from '../../../math/math.js';

class AnimComponentLayer {
  constructor(name, controller, component, weight = 1, blendType = ANIM_LAYER_OVERWRITE, normalizedWeight = true) {
    this._name = name;
    this._controller = controller;
    this._component = component;
    this._weight = weight;
    this._blendType = blendType;
    this._normalizedWeight = normalizedWeight;
    this._mask = null;
    this._blendTime = 0;
    this._blendTimeElapsed = 0;
    this._startingWeight = 0;
    this._targetWeight = 0;
  }

  get name() {
    return this._name;
  }

  set playing(value) {
    this._controller.playing = value;
  }

  get playing() {
    return this._controller.playing;
  }

  get playable() {
    return this._controller.playable;
  }

  get activeState() {
    return this._controller.activeStateName;
  }

  get previousState() {
    return this._controller.previousStateName;
  }

  get activeStateProgress() {
    return this._controller.activeStateProgress;
  }

  get activeStateDuration() {
    return this._controller.activeStateDuration;
  }

  set activeStateCurrentTime(time) {
    const controller = this._controller;
    const layerPlaying = controller.playing;
    controller.playing = true;
    controller.activeStateCurrentTime = time;

    if (!layerPlaying) {
      controller.update(0);
    }

    controller.playing = layerPlaying;
  }

  get activeStateCurrentTime() {
    return this._controller.activeStateCurrentTime;
  }

  get transitioning() {
    return this._controller.transitioning;
  }

  get transitionProgress() {
    if (this.transitioning) {
      return this._controller.transitionProgress;
    }

    return null;
  }

  get states() {
    return this._controller.states;
  }

  set weight(value) {
    this._weight = value;

    this._component.dirtifyTargets();
  }

  get weight() {
    return this._weight;
  }

  set blendType(value) {
    if (value !== this._blendType) {
      this._blendType = value;

      if (this._controller.normalizeWeights) {
        this._component.rebind();
      }
    }
  }

  get blendType() {
    return this._blendType;
  }

  set mask(value) {
    if (this._controller.assignMask(value)) {
      this._component.rebind();
    }

    this._mask = value;
  }

  get mask() {
    return this._mask;
  }

  play(name) {
    this._controller.play(name);
  }

  pause() {
    this._controller.pause();
  }

  reset() {
    this._controller.reset();
  }

  rebind() {
    this._controller.rebind();
  }

  update(dt) {
    if (this._blendTime) {
      if (this._blendTimeElapsed < this._blendTime) {
        this.weight = math.lerp(this._startingWeight, this._targetWeight, this._blendTimeElapsed / this._blendTime);
        this._blendTimeElapsed += dt;
      } else {
        this.weight = this._targetWeight;
        this._blendTime = 0;
        this._blendTimeElapsed = 0;
        this._startingWeight = 0;
        this._targetWeight = 0;
      }
    }

    this._controller.update(dt);
  }

  blendToWeight(weight, time) {
    this._startingWeight = this.weight;
    this._targetWeight = weight;
    this._blendTime = Math.max(0, time);
    this._blendTimeElapsed = 0;
  }

  assignMask(mask) {
    Debug.deprecated('The pc.AnimComponentLayer#assignMask function is now deprecated. Assign masks to the pc.AnimComponentLayer#mask property instead.');

    if (this._controller.assignMask(mask)) {
      this._component.rebind();
    }

    this._mask = mask;
  }

  assignAnimation(nodePath, animTrack, speed, loop) {
    if (animTrack.constructor !== AnimTrack) {
      Debug.error('assignAnimation: animTrack supplied to function was not of type AnimTrack');
      return;
    }

    this._controller.assignAnimation(nodePath, animTrack, speed, loop);

    if (this._controller._transitions.length === 0) {
      this._controller._transitions.push(new AnimTransition({
        from: 'START',
        to: nodePath
      }));
    }

    if (this._component.activate && this._component.playable) {
      this._component.playing = true;
    }
  }

  removeNodeAnimations(nodeName) {
    if (this._controller.removeNodeAnimations(nodeName)) {
      this._component.playing = false;
    }
  }

  getAnimationAsset(stateName) {
    return this._component.animationAssets[`${this.name}:${stateName}`];
  }

  transition(to, time = 0, transitionOffset = null) {
    this._controller.updateStateFromTransition(new AnimTransition({
      from: this._controller.activeStateName,
      to,
      time,
      transitionOffset
    }));
  }

}

export { AnimComponentLayer };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LWxheWVyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvYW5pbS9jb21wb25lbnQtbGF5ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IEFuaW1UcmFjayB9IGZyb20gJy4uLy4uLy4uL2FuaW0vZXZhbHVhdG9yL2FuaW0tdHJhY2suanMnO1xuaW1wb3J0IHsgQW5pbVRyYW5zaXRpb24gfSBmcm9tICcuLi8uLi8uLi9hbmltL2NvbnRyb2xsZXIvYW5pbS10cmFuc2l0aW9uLmpzJztcbmltcG9ydCB7IEFOSU1fTEFZRVJfT1ZFUldSSVRFIH0gZnJvbSAnLi4vLi4vLi4vYW5pbS9jb250cm9sbGVyL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBtYXRoIH0gZnJvbSAnLi4vLi4vLi4vbWF0aC9tYXRoLmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vY29tcG9uZW50LmpzJykuQW5pbUNvbXBvbmVudH0gQW5pbUNvbXBvbmVudCAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uLy4uLy4uL2Fzc2V0L2Fzc2V0LmpzJykuQXNzZXR9IEFzc2V0ICovXG5cbi8qKlxuICogVGhlIEFuaW0gQ29tcG9uZW50IExheWVyIGFsbG93cyBtYW5hZ2VycyBhIHNpbmdsZSBsYXllciBvZiB0aGUgYW5pbWF0aW9uIHN0YXRlIGdyYXBoLlxuICovXG5jbGFzcyBBbmltQ29tcG9uZW50TGF5ZXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBbmltQ29tcG9uZW50TGF5ZXIgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gY29udHJvbGxlciAtIFRoZSBjb250cm9sbGVyIHRvIG1hbmFnZSB0aGlzIGxheWVycyBhbmltYXRpb25zLlxuICAgICAqIEBwYXJhbSB7QW5pbUNvbXBvbmVudH0gY29tcG9uZW50IC0gVGhlIGNvbXBvbmVudCB0aGF0IHRoaXMgbGF5ZXIgaXMgYSBtZW1iZXIgb2YuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt3ZWlnaHRdIC0gVGhlIHdlaWdodCBvZiB0aGlzIGxheWVyLiBEZWZhdWx0cyB0byAxLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYmxlbmRUeXBlXSAtIFRoZSBibGVuZCB0eXBlIG9mIHRoaXMgbGF5ZXIuIERlZmF1bHRzIHRvIHtAbGluayBBTklNX0xBWUVSX09WRVJXUklURX0uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbbm9ybWFsaXplZFdlaWdodF0gLSBXaGV0aGVyIHRoZSB3ZWlnaHQgb2YgdGhpcyBsYXllciBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyB0aGUgdG90YWwgd2VpZ2h0IG9mIGFsbCBsYXllcnMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udHJvbGxlciwgY29tcG9uZW50LCB3ZWlnaHQgPSAxLCBibGVuZFR5cGUgPSBBTklNX0xBWUVSX09WRVJXUklURSwgbm9ybWFsaXplZFdlaWdodCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICB0aGlzLl9jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICAgIHRoaXMuX3dlaWdodCA9IHdlaWdodDtcbiAgICAgICAgdGhpcy5fYmxlbmRUeXBlID0gYmxlbmRUeXBlO1xuICAgICAgICB0aGlzLl9ub3JtYWxpemVkV2VpZ2h0ID0gbm9ybWFsaXplZFdlaWdodDtcbiAgICAgICAgdGhpcy5fbWFzayA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JsZW5kVGltZSA9IDA7XG4gICAgICAgIHRoaXMuX2JsZW5kVGltZUVsYXBzZWQgPSAwO1xuICAgICAgICB0aGlzLl9zdGFydGluZ1dlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuX3RhcmdldFdlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbmFtZSBvZiB0aGUgbGF5ZXIuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHNldCBwbGF5aW5nKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIucGxheWluZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBwbGF5aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udHJvbGxlci5wbGF5aW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhIHN0YXRlIGdyYXBoIGhhcyBiZWVuIGxvYWRlZCBhbmQgYWxsIHN0YXRlcyBpbiB0aGUgZ3JhcGggaGF2ZSBiZWVuIGFzc2lnbmVkXG4gICAgICogYW5pbWF0aW9uIHRyYWNrcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IHBsYXlhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udHJvbGxlci5wbGF5YWJsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYWN0aXZlIHN0YXRlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBhY3RpdmVTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRyb2xsZXIuYWN0aXZlU3RhdGVOYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZXZpb3VzbHkgYWN0aXZlIHN0YXRlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBwcmV2aW91c1N0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udHJvbGxlci5wcmV2aW91c1N0YXRlTmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYWN0aXZlIHN0YXRlcyBwcm9ncmVzcyBhcyBhIHZhbHVlIG5vcm1hbGl6ZWQgYnkgdGhlIHN0YXRlcyBhbmltYXRpb25cbiAgICAgKiBkdXJhdGlvbi4gTG9vcGVkIGFuaW1hdGlvbnMgd2lsbCByZXR1cm4gdmFsdWVzIGdyZWF0ZXIgdGhhbiAxLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgYWN0aXZlU3RhdGVQcm9ncmVzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRyb2xsZXIuYWN0aXZlU3RhdGVQcm9ncmVzcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYWN0aXZlIHN0YXRlcyBkdXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGFjdGl2ZVN0YXRlRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250cm9sbGVyLmFjdGl2ZVN0YXRlRHVyYXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGFjdGl2ZSBzdGF0ZXMgdGltZSBpbiBzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlU3RhdGVDdXJyZW50VGltZSh0aW1lKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLl9jb250cm9sbGVyO1xuICAgICAgICBjb25zdCBsYXllclBsYXlpbmcgPSBjb250cm9sbGVyLnBsYXlpbmc7XG4gICAgICAgIGNvbnRyb2xsZXIucGxheWluZyA9IHRydWU7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlU3RhdGVDdXJyZW50VGltZSA9IHRpbWU7XG4gICAgICAgIGlmICghbGF5ZXJQbGF5aW5nKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLnVwZGF0ZSgwKTtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLnBsYXlpbmcgPSBsYXllclBsYXlpbmc7XG4gICAgfVxuXG4gICAgZ2V0IGFjdGl2ZVN0YXRlQ3VycmVudFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250cm9sbGVyLmFjdGl2ZVN0YXRlQ3VycmVudFRpbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBhbmltIGNvbXBvbmVudCBsYXllciBpcyBjdXJyZW50bHkgdHJhbnNpdGlvbmluZyBiZXR3ZWVuIHN0YXRlcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCB0cmFuc2l0aW9uaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udHJvbGxlci50cmFuc2l0aW9uaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBhbmltIGNvbXBvbmVudCBsYXllciBpcyBjdXJyZW50bHkgdHJhbnNpdGlvbmluZyBiZXR3ZWVuIHN0YXRlcywgcmV0dXJucyB0aGUgcHJvZ3Jlc3MuXG4gICAgICogT3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ8bnVsbH1cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNpdGlvblByb2dyZXNzKCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udHJvbGxlci50cmFuc2l0aW9uUHJvZ3Jlc3M7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdHMgYWxsIGF2YWlsYWJsZSBzdGF0ZXMgaW4gdGhpcyBsYXllcnMgc3RhdGUgZ3JhcGguXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nW119XG4gICAgICovXG4gICAgZ2V0IHN0YXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRyb2xsZXIuc3RhdGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBibGVuZGluZyB3ZWlnaHQgb2YgdGhpcyBsYXllci4gVXNlZCB3aGVuIGNhbGN1bGF0aW5nIHRoZSB2YWx1ZSBvZiBwcm9wZXJ0aWVzIHRoYXQgYXJlXG4gICAgICogYW5pbWF0ZWQgYnkgbW9yZSB0aGFuIG9uZSBsYXllci5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHdlaWdodCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl93ZWlnaHQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50LmRpcnRpZnlUYXJnZXRzKCk7XG4gICAgfVxuXG4gICAgZ2V0IHdlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dlaWdodDtcbiAgICB9XG5cbiAgICBzZXQgYmxlbmRUeXBlKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fYmxlbmRUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLl9ibGVuZFR5cGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb250cm9sbGVyLm5vcm1hbGl6ZVdlaWdodHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb21wb25lbnQucmViaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgYmxlbmRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmxlbmRUeXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbWFzayBvZiBib25lcyB3aGljaCBzaG91bGQgYmUgYW5pbWF0ZWQgb3IgaWdub3JlZCBieSB0aGlzIGxheWVyLlxuICAgICAqXG4gICAgICogQHR5cGUge29iamVjdH1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGVudGl0eS5hbmltLmJhc2VMYXllci5tYXNrID0ge1xuICAgICAqICAgICAvLyBpbmNsdWRlIHRoZSBzcGluZSBvZiB0aGUgY3VycmVudCBtb2RlbCBhbmQgYWxsIG9mIGl0cyBjaGlsZHJlblxuICAgICAqICAgICBcInBhdGgvdG8vc3BpbmVcIjoge1xuICAgICAqICAgICAgICAgY2hpbGRyZW46IHRydWVcbiAgICAgKiAgICAgfSxcbiAgICAgKiAgICAgLy8gaW5jbHVkZSB0aGUgaGlwIG9mIHRoZSBjdXJyZW50IG1vZGVsIGJ1dCBub3QgYWxsIG9mIGl0cyBjaGlsZHJlblxuICAgICAqICAgICBcInBhdGgvdG8vaGlwXCI6IHRydWVcbiAgICAgKiB9O1xuICAgICAqL1xuICAgIHNldCBtYXNrKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb250cm9sbGVyLmFzc2lnbk1hc2sodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wb25lbnQucmViaW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWFzayA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBtYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFzaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFydCBwbGF5aW5nIHRoZSBhbmltYXRpb24gaW4gdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIC0gSWYgcHJvdmlkZWQsIHdpbGwgYmVnaW4gcGxheWluZyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc3RhdGUgd2l0aFxuICAgICAqIHRoaXMgbmFtZS5cbiAgICAgKi9cbiAgICBwbGF5KG5hbWUpIHtcbiAgICAgICAgdGhpcy5fY29udHJvbGxlci5wbGF5KG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHRoZSBhbmltYXRpb24gaW4gdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICovXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIucGF1c2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgYW5pbWF0aW9uIGNvbXBvbmVudCB0byBpdHMgaW5pdGlhbCBzdGF0ZSwgaW5jbHVkaW5nIGFsbCBwYXJhbWV0ZXJzLiBUaGUgc3lzdGVtXG4gICAgICogd2lsbCBiZSBwYXVzZWQuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIucmVzZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWJpbmQgYW55IGFuaW1hdGlvbnMgaW4gdGhlIGxheWVyIHRvIHRoZSBjdXJyZW50bHkgcHJlc2VudCBjb21wb25lbnRzIGFuZCBtb2RlbCBvZiB0aGUgYW5pbVxuICAgICAqIGNvbXBvbmVudHMgZW50aXR5LlxuICAgICAqL1xuICAgIHJlYmluZCgpIHtcbiAgICAgICAgdGhpcy5fY29udHJvbGxlci5yZWJpbmQoKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2JsZW5kVGltZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2JsZW5kVGltZUVsYXBzZWQgPCB0aGlzLl9ibGVuZFRpbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndlaWdodCA9IG1hdGgubGVycCh0aGlzLl9zdGFydGluZ1dlaWdodCwgdGhpcy5fdGFyZ2V0V2VpZ2h0LCB0aGlzLl9ibGVuZFRpbWVFbGFwc2VkIC8gdGhpcy5fYmxlbmRUaW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9ibGVuZFRpbWVFbGFwc2VkICs9IGR0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLndlaWdodCA9IHRoaXMuX3RhcmdldFdlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLl9ibGVuZFRpbWUgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuX2JsZW5kVGltZUVsYXBzZWQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0aW5nV2VpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLl90YXJnZXRXZWlnaHQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIudXBkYXRlKGR0KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEJsZW5kIGZyb20gdGhlIGN1cnJlbnQgd2VpZ2h0IHZhbHVlIHRvIHRoZSBwcm92aWRlZCB3ZWlnaHQgdmFsdWUgb3ZlciBhIGdpdmVuIGFtb3VudCBvZiB0aW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdlaWdodCAtIFRoZSBuZXcgd2VpZ2h0IHZhbHVlIHRvIGJsZW5kIHRvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIC0gVGhlIGR1cmF0aW9uIG9mIHRoZSBibGVuZCBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGJsZW5kVG9XZWlnaHQod2VpZ2h0LCB0aW1lKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0aW5nV2VpZ2h0ID0gdGhpcy53ZWlnaHQ7XG4gICAgICAgIHRoaXMuX3RhcmdldFdlaWdodCA9IHdlaWdodDtcbiAgICAgICAgdGhpcy5fYmxlbmRUaW1lID0gTWF0aC5tYXgoMCwgdGltZSk7XG4gICAgICAgIHRoaXMuX2JsZW5kVGltZUVsYXBzZWQgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG1hc2sgdG8gdGhpcyBsYXllci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbbWFza10gLSBUaGUgbWFzayB0byBhc3NpZ24gdG8gdGhlIGxheWVyLiBJZiBub3QgcHJvdmlkZWQgdGhlIGN1cnJlbnQgbWFza1xuICAgICAqIGluIHRoZSBsYXllciB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBlbnRpdHkuYW5pbS5iYXNlTGF5ZXIuYXNzaWduTWFzayh7XG4gICAgICogICAgIC8vIGluY2x1ZGUgdGhlIHNwaW5lIG9mIHRoZSBjdXJyZW50IG1vZGVsIGFuZCBhbGwgb2YgaXRzIGNoaWxkcmVuXG4gICAgICogICAgIFwicGF0aC90by9zcGluZVwiOiB7XG4gICAgICogICAgICAgICBjaGlsZHJlbjogdHJ1ZVxuICAgICAqICAgICB9LFxuICAgICAqICAgICAvLyBpbmNsdWRlIHRoZSBoaXAgb2YgdGhlIGN1cnJlbnQgbW9kZWwgYnV0IG5vdCBhbGwgb2YgaXRzIGNoaWxkcmVuXG4gICAgICogICAgIFwicGF0aC90by9oaXBcIjogdHJ1ZVxuICAgICAqIH0pO1xuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBhc3NpZ25NYXNrKG1hc2spIHtcbiAgICAgICAgRGVidWcuZGVwcmVjYXRlZCgnVGhlIHBjLkFuaW1Db21wb25lbnRMYXllciNhc3NpZ25NYXNrIGZ1bmN0aW9uIGlzIG5vdyBkZXByZWNhdGVkLiBBc3NpZ24gbWFza3MgdG8gdGhlIHBjLkFuaW1Db21wb25lbnRMYXllciNtYXNrIHByb3BlcnR5IGluc3RlYWQuJyk7XG4gICAgICAgIGlmICh0aGlzLl9jb250cm9sbGVyLmFzc2lnbk1hc2sobWFzaykpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudC5yZWJpbmQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXNrID0gbWFzaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIGFuIGFuaW1hdGlvbiB0cmFjayB0byBhIHN0YXRlIG9yIGJsZW5kIHRyZWUgbm9kZSBpbiB0aGUgY3VycmVudCBncmFwaC4gSWYgYSBzdGF0ZVxuICAgICAqIGZvciB0aGUgZ2l2ZW4gbm9kZVBhdGggZG9lc24ndCBleGlzdCwgaXQgd2lsbCBiZSBjcmVhdGVkLiBJZiBhbGwgc3RhdGVzIG5vZGVzIGFyZSBsaW5rZWQgYW5kXG4gICAgICogdGhlIHtAbGluayBBbmltQ29tcG9uZW50I2FjdGl2YXRlfSB2YWx1ZSB3YXMgc2V0IHRvIHRydWUgdGhlbiB0aGUgY29tcG9uZW50IHdpbGwgYmVnaW5cbiAgICAgKiBwbGF5aW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5vZGVQYXRoIC0gRWl0aGVyIHRoZSBzdGF0ZSBuYW1lIG9yIHRoZSBwYXRoIHRvIGEgYmxlbmQgdHJlZSBub2RlIHRoYXQgdGhpc1xuICAgICAqIGFuaW1hdGlvbiBzaG91bGQgYmUgYXNzb2NpYXRlZCB3aXRoLiBFYWNoIHNlY3Rpb24gb2YgYSBibGVuZCB0cmVlIHBhdGggaXMgc3BsaXQgdXNpbmcgYVxuICAgICAqIHBlcmlvZCAoYC5gKSB0aGVyZWZvcmUgc3RhdGUgbmFtZXMgc2hvdWxkIG5vdCBpbmNsdWRlIHRoaXMgY2hhcmFjdGVyIChlLmcgXCJNeVN0YXRlTmFtZVwiIG9yXG4gICAgICogXCJNeVN0YXRlTmFtZS5CbGVuZFRyZWVOb2RlXCIpLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbmltVHJhY2sgLSBUaGUgYW5pbWF0aW9uIHRyYWNrIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGlzIHN0YXRlIGFuZFxuICAgICAqIHBsYXllZCB3aGVuZXZlciB0aGlzIHN0YXRlIGlzIGFjdGl2ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NwZWVkXSAtIFVwZGF0ZSB0aGUgc3BlZWQgb2YgdGhlIHN0YXRlIHlvdSBhcmUgYXNzaWduaW5nIGFuIGFuaW1hdGlvbiB0by5cbiAgICAgKiBEZWZhdWx0cyB0byAxLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2xvb3BdIC0gVXBkYXRlIHRoZSBsb29wIHByb3BlcnR5IG9mIHRoZSBzdGF0ZSB5b3UgYXJlIGFzc2lnbmluZyBhblxuICAgICAqIGFuaW1hdGlvbiB0by4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgKi9cbiAgICBhc3NpZ25BbmltYXRpb24obm9kZVBhdGgsIGFuaW1UcmFjaywgc3BlZWQsIGxvb3ApIHtcbiAgICAgICAgaWYgKGFuaW1UcmFjay5jb25zdHJ1Y3RvciAhPT0gQW5pbVRyYWNrKSB7XG4gICAgICAgICAgICBEZWJ1Zy5lcnJvcignYXNzaWduQW5pbWF0aW9uOiBhbmltVHJhY2sgc3VwcGxpZWQgdG8gZnVuY3Rpb24gd2FzIG5vdCBvZiB0eXBlIEFuaW1UcmFjaycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIuYXNzaWduQW5pbWF0aW9uKG5vZGVQYXRoLCBhbmltVHJhY2ssIHNwZWVkLCBsb29wKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRyb2xsZXIuX3RyYW5zaXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fY29udHJvbGxlci5fdHJhbnNpdGlvbnMucHVzaChuZXcgQW5pbVRyYW5zaXRpb24oe1xuICAgICAgICAgICAgICAgIGZyb206ICdTVEFSVCcsXG4gICAgICAgICAgICAgICAgdG86IG5vZGVQYXRoXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2NvbXBvbmVudC5hY3RpdmF0ZSAmJiB0aGlzLl9jb21wb25lbnQucGxheWFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudC5wbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW5pbWF0aW9ucyBmcm9tIGEgbm9kZSBpbiB0aGUgbG9hZGVkIHN0YXRlIGdyYXBoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5vZGVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIG5vZGUgdGhhdCBzaG91bGQgaGF2ZSBpdHMgYW5pbWF0aW9uIHRyYWNrcyByZW1vdmVkLlxuICAgICAqL1xuICAgIHJlbW92ZU5vZGVBbmltYXRpb25zKG5vZGVOYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb250cm9sbGVyLnJlbW92ZU5vZGVBbmltYXRpb25zKG5vZGVOYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5fY29tcG9uZW50LnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFzc2V0IHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0ZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgc3RhdGUgdG8gZ2V0IHRoZSBhc3NldCBmb3IuXG4gICAgICogQHJldHVybnMge0Fzc2V0fSBUaGUgYXNzZXQgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBzdGF0ZS5cbiAgICAgKi9cbiAgICBnZXRBbmltYXRpb25Bc3NldChzdGF0ZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudC5hbmltYXRpb25Bc3NldHNbYCR7dGhpcy5uYW1lfToke3N0YXRlTmFtZX1gXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2l0aW9uIHRvIGFueSBzdGF0ZSBpbiB0aGUgY3VycmVudCBsYXllcnMgZ3JhcGguIFRyYW5zaXRpb25zIGNhbiBiZSBpbnN0YW50IG9yIHRha2UgYW5cbiAgICAgKiBvcHRpb25hbCBibGVuZCB0aW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRvIC0gVGhlIHN0YXRlIHRoYXQgdGhpcyB0cmFuc2l0aW9uIHdpbGwgdHJhbnNpdGlvbiB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVdIC0gVGhlIGR1cmF0aW9uIG9mIHRoZSB0cmFuc2l0aW9uIGluIHNlY29uZHMuIERlZmF1bHRzIHRvIDAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt0cmFuc2l0aW9uT2Zmc2V0XSAtIElmIHByb3ZpZGVkLCB0aGUgZGVzdGluYXRpb24gc3RhdGUgd2lsbCBiZWdpbiBwbGF5aW5nXG4gICAgICogaXRzIGFuaW1hdGlvbiBhdCB0aGlzIHRpbWUuIEdpdmVuIGluIG5vcm1hbGl6ZWQgdGltZSwgYmFzZWQgb24gdGhlIHN0YXRlcyBkdXJhdGlvbiAmIG11c3QgYmVcbiAgICAgKiBiZXR3ZWVuIDAgYW5kIDEuIERlZmF1bHRzIHRvIG51bGwuXG4gICAgICovXG4gICAgdHJhbnNpdGlvbih0bywgdGltZSA9IDAsIHRyYW5zaXRpb25PZmZzZXQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIudXBkYXRlU3RhdGVGcm9tVHJhbnNpdGlvbihuZXcgQW5pbVRyYW5zaXRpb24oe1xuICAgICAgICAgICAgZnJvbTogdGhpcy5fY29udHJvbGxlci5hY3RpdmVTdGF0ZU5hbWUsXG4gICAgICAgICAgICB0byxcbiAgICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgICB0cmFuc2l0aW9uT2Zmc2V0XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEFuaW1Db21wb25lbnRMYXllciB9O1xuIl0sIm5hbWVzIjpbIkFuaW1Db21wb25lbnRMYXllciIsImNvbnN0cnVjdG9yIiwibmFtZSIsImNvbnRyb2xsZXIiLCJjb21wb25lbnQiLCJ3ZWlnaHQiLCJibGVuZFR5cGUiLCJBTklNX0xBWUVSX09WRVJXUklURSIsIm5vcm1hbGl6ZWRXZWlnaHQiLCJfbmFtZSIsIl9jb250cm9sbGVyIiwiX2NvbXBvbmVudCIsIl93ZWlnaHQiLCJfYmxlbmRUeXBlIiwiX25vcm1hbGl6ZWRXZWlnaHQiLCJfbWFzayIsIl9ibGVuZFRpbWUiLCJfYmxlbmRUaW1lRWxhcHNlZCIsIl9zdGFydGluZ1dlaWdodCIsIl90YXJnZXRXZWlnaHQiLCJwbGF5aW5nIiwidmFsdWUiLCJwbGF5YWJsZSIsImFjdGl2ZVN0YXRlIiwiYWN0aXZlU3RhdGVOYW1lIiwicHJldmlvdXNTdGF0ZSIsInByZXZpb3VzU3RhdGVOYW1lIiwiYWN0aXZlU3RhdGVQcm9ncmVzcyIsImFjdGl2ZVN0YXRlRHVyYXRpb24iLCJhY3RpdmVTdGF0ZUN1cnJlbnRUaW1lIiwidGltZSIsImxheWVyUGxheWluZyIsInVwZGF0ZSIsInRyYW5zaXRpb25pbmciLCJ0cmFuc2l0aW9uUHJvZ3Jlc3MiLCJzdGF0ZXMiLCJkaXJ0aWZ5VGFyZ2V0cyIsIm5vcm1hbGl6ZVdlaWdodHMiLCJyZWJpbmQiLCJtYXNrIiwiYXNzaWduTWFzayIsInBsYXkiLCJwYXVzZSIsInJlc2V0IiwiZHQiLCJtYXRoIiwibGVycCIsImJsZW5kVG9XZWlnaHQiLCJNYXRoIiwibWF4IiwiRGVidWciLCJkZXByZWNhdGVkIiwiYXNzaWduQW5pbWF0aW9uIiwibm9kZVBhdGgiLCJhbmltVHJhY2siLCJzcGVlZCIsImxvb3AiLCJBbmltVHJhY2siLCJlcnJvciIsIl90cmFuc2l0aW9ucyIsImxlbmd0aCIsInB1c2giLCJBbmltVHJhbnNpdGlvbiIsImZyb20iLCJ0byIsImFjdGl2YXRlIiwicmVtb3ZlTm9kZUFuaW1hdGlvbnMiLCJub2RlTmFtZSIsImdldEFuaW1hdGlvbkFzc2V0Iiwic3RhdGVOYW1lIiwiYW5pbWF0aW9uQXNzZXRzIiwidHJhbnNpdGlvbiIsInRyYW5zaXRpb25PZmZzZXQiLCJ1cGRhdGVTdGF0ZUZyb21UcmFuc2l0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQVlBLE1BQU1BLGtCQUFOLENBQXlCO0FBV3JCQyxFQUFBQSxXQUFXLENBQUNDLElBQUQsRUFBT0MsVUFBUCxFQUFtQkMsU0FBbkIsRUFBOEJDLE1BQU0sR0FBRyxDQUF2QyxFQUEwQ0MsU0FBUyxHQUFHQyxvQkFBdEQsRUFBNEVDLGdCQUFnQixHQUFHLElBQS9GLEVBQXFHO0lBQzVHLElBQUtDLENBQUFBLEtBQUwsR0FBYVAsSUFBYixDQUFBO0lBQ0EsSUFBS1EsQ0FBQUEsV0FBTCxHQUFtQlAsVUFBbkIsQ0FBQTtJQUNBLElBQUtRLENBQUFBLFVBQUwsR0FBa0JQLFNBQWxCLENBQUE7SUFDQSxJQUFLUSxDQUFBQSxPQUFMLEdBQWVQLE1BQWYsQ0FBQTtJQUNBLElBQUtRLENBQUFBLFVBQUwsR0FBa0JQLFNBQWxC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
