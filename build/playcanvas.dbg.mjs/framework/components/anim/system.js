/**
 * @license
 * PlayCanvas Engine v1.62.0-dev revision 7d088032c (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { AnimComponent } from './component.js';
import { AnimComponentData } from './data.js';

const _schema = ['enabled'];

/**
 * The AnimComponentSystem manages creating and deleting AnimComponents.
 *
 * @augments ComponentSystem
 */
class AnimComponentSystem extends ComponentSystem {
  /**
   * Create an AnimComponentSystem instance.
   *
   * @param {import('../../app-base.js').AppBase} app - The application managing this system.
   * @hideconstructor
   */
  constructor(app) {
    super(app);
    this.id = 'anim';
    this.ComponentType = AnimComponent;
    this.DataType = AnimComponentData;
    this.schema = _schema;
    this.on('beforeremove', this.onBeforeRemove, this);
    this.app.systems.on('animationUpdate', this.onAnimationUpdate, this);
  }
  initializeComponentData(component, data, properties) {
    super.initializeComponentData(component, data, _schema);
    const complexProperties = ['animationAssets', 'stateGraph', 'layers', 'masks'];
    Object.keys(data).forEach(key => {
      // these properties will be initialized manually below
      if (complexProperties.includes(key)) return;
      component[key] = data[key];
    });
    if (data.stateGraph) {
      component.stateGraph = data.stateGraph;
      component.loadStateGraph(component.stateGraph);
    }
    if (data.layers) {
      data.layers.forEach((layer, i) => {
        layer._controller.states.forEach(stateKey => {
          layer._controller._states[stateKey]._animationList.forEach(node => {
            component.layers[i].assignAnimation(node.name, node.animTrack);
          });
        });
      });
    } else if (data.animationAssets) {
      component.animationAssets = Object.assign(component.animationAssets, data.animationAssets);
    }
    if (data.masks) {
      Object.keys(data.masks).forEach(key => {
        if (component.layers[key]) {
          const maskData = data.masks[key].mask;
          const mask = {};
          Object.keys(maskData).forEach(maskKey => {
            mask[decodeURI(maskKey)] = maskData[maskKey];
          });
          component.layers[key].mask = mask;
        }
      });
    }
  }
  onAnimationUpdate(dt) {
    const components = this.store;
    for (const id in components) {
      if (components.hasOwnProperty(id)) {
        const component = components[id].entity.anim;
        const componentData = component.data;
        if (componentData.enabled && component.entity.enabled && component.playing) {
          component.update(dt);
        }
      }
    }
  }
  cloneComponent(entity, clone) {
    let masks;
    // If the component animaites from the components entity, any layer mask hierarchy should be updated from the old entity to the cloned entity.
    if (!entity.anim.rootBone || entity.anim.rootBone === entity) {
      masks = {};
      entity.anim.layers.forEach((layer, i) => {
        if (layer.mask) {
          const mask = {};
          Object.keys(layer.mask).forEach(path => {
            // The base of all mask paths should be mapped from the previous entity to the cloned entity
            const pathArr = path.split('/');
            pathArr.shift();
            const clonePath = [clone.name, ...pathArr].join('/');
            mask[clonePath] = layer.mask[path];
          });
          masks[i] = {
            mask
          };
        }
      });
    }
    const data = {
      stateGraphAsset: entity.anim.stateGraphAsset,
      animationAssets: entity.anim.animationAssets,
      speed: entity.anim.speed,
      activate: entity.anim.activate,
      playing: entity.anim.playing,
      rootBone: entity.anim.rootBone,
      stateGraph: entity.anim.stateGraph,
      layers: entity.anim.layers,
      layerIndices: entity.anim.layerIndices,
      parameters: entity.anim.parameters,
      normalizeWeights: entity.anim.normalizeWeights,
      masks
    };
    return this.addComponent(clone, data);
  }
  onBeforeRemove(entity, component) {
    component.onBeforeRemove();
  }
  destroy() {
    super.destroy();
    this.app.systems.off('animationUpdate', this.onAnimationUpdate, this);
  }
}
Component._buildAccessors(AnimComponent.prototype, _schema);

export { AnimComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvYW5pbS9zeXN0ZW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENvbXBvbmVudFN5c3RlbSB9IGZyb20gJy4uL3N5c3RlbS5qcyc7XG5cbmltcG9ydCB7IEFuaW1Db21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBBbmltQ29tcG9uZW50RGF0YSB9IGZyb20gJy4vZGF0YS5qcyc7XG5cbmNvbnN0IF9zY2hlbWEgPSBbXG4gICAgJ2VuYWJsZWQnXG5dO1xuXG4vKipcbiAqIFRoZSBBbmltQ29tcG9uZW50U3lzdGVtIG1hbmFnZXMgY3JlYXRpbmcgYW5kIGRlbGV0aW5nIEFuaW1Db21wb25lbnRzLlxuICpcbiAqIEBhdWdtZW50cyBDb21wb25lbnRTeXN0ZW1cbiAqL1xuY2xhc3MgQW5pbUNvbXBvbmVudFN5c3RlbSBleHRlbmRzIENvbXBvbmVudFN5c3RlbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIEFuaW1Db21wb25lbnRTeXN0ZW0gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vYXBwLWJhc2UuanMnKS5BcHBCYXNlfSBhcHAgLSBUaGUgYXBwbGljYXRpb24gbWFuYWdpbmcgdGhpcyBzeXN0ZW0uXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuXG4gICAgICAgIHRoaXMuaWQgPSAnYW5pbSc7XG5cbiAgICAgICAgdGhpcy5Db21wb25lbnRUeXBlID0gQW5pbUNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5EYXRhVHlwZSA9IEFuaW1Db21wb25lbnREYXRhO1xuXG4gICAgICAgIHRoaXMuc2NoZW1hID0gX3NjaGVtYTtcblxuICAgICAgICB0aGlzLm9uKCdiZWZvcmVyZW1vdmUnLCB0aGlzLm9uQmVmb3JlUmVtb3ZlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vbignYW5pbWF0aW9uVXBkYXRlJywgdGhpcy5vbkFuaW1hdGlvblVwZGF0ZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZUNvbXBvbmVudERhdGEoY29tcG9uZW50LCBkYXRhLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyLmluaXRpYWxpemVDb21wb25lbnREYXRhKGNvbXBvbmVudCwgZGF0YSwgX3NjaGVtYSk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXhQcm9wZXJ0aWVzID0gWydhbmltYXRpb25Bc3NldHMnLCAnc3RhdGVHcmFwaCcsICdsYXllcnMnLCAnbWFza3MnXTtcbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAvLyB0aGVzZSBwcm9wZXJ0aWVzIHdpbGwgYmUgaW5pdGlhbGl6ZWQgbWFudWFsbHkgYmVsb3dcbiAgICAgICAgICAgIGlmIChjb21wbGV4UHJvcGVydGllcy5pbmNsdWRlcyhrZXkpKSByZXR1cm47XG4gICAgICAgICAgICBjb21wb25lbnRba2V5XSA9IGRhdGFba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChkYXRhLnN0YXRlR3JhcGgpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZUdyYXBoID0gZGF0YS5zdGF0ZUdyYXBoO1xuICAgICAgICAgICAgY29tcG9uZW50LmxvYWRTdGF0ZUdyYXBoKGNvbXBvbmVudC5zdGF0ZUdyYXBoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5sYXllcnMpIHtcbiAgICAgICAgICAgIGRhdGEubGF5ZXJzLmZvckVhY2goKGxheWVyLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgbGF5ZXIuX2NvbnRyb2xsZXIuc3RhdGVzLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyLl9jb250cm9sbGVyLl9zdGF0ZXNbc3RhdGVLZXldLl9hbmltYXRpb25MaXN0LmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5sYXllcnNbaV0uYXNzaWduQW5pbWF0aW9uKG5vZGUubmFtZSwgbm9kZS5hbmltVHJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuYW5pbWF0aW9uQXNzZXRzKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuYW5pbWF0aW9uQXNzZXRzID0gT2JqZWN0LmFzc2lnbihjb21wb25lbnQuYW5pbWF0aW9uQXNzZXRzLCBkYXRhLmFuaW1hdGlvbkFzc2V0cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5tYXNrcykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YS5tYXNrcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5sYXllcnNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXNrRGF0YSA9IGRhdGEubWFza3Nba2V5XS5tYXNrO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXNrID0ge307XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1hc2tEYXRhKS5mb3JFYWNoKChtYXNrS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrW2RlY29kZVVSSShtYXNrS2V5KV0gPSBtYXNrRGF0YVttYXNrS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5sYXllcnNba2V5XS5tYXNrID0gbWFzaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQW5pbWF0aW9uVXBkYXRlKGR0KSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB0aGlzLnN0b3JlO1xuXG4gICAgICAgIGZvciAoY29uc3QgaWQgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgaWYgKGNvbXBvbmVudHMuaGFzT3duUHJvcGVydHkoaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gY29tcG9uZW50c1tpZF0uZW50aXR5LmFuaW07XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50RGF0YSA9IGNvbXBvbmVudC5kYXRhO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudERhdGEuZW5hYmxlZCAmJiBjb21wb25lbnQuZW50aXR5LmVuYWJsZWQgJiYgY29tcG9uZW50LnBsYXlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnVwZGF0ZShkdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xvbmVDb21wb25lbnQoZW50aXR5LCBjbG9uZSkge1xuICAgICAgICBsZXQgbWFza3M7XG4gICAgICAgIC8vIElmIHRoZSBjb21wb25lbnQgYW5pbWFpdGVzIGZyb20gdGhlIGNvbXBvbmVudHMgZW50aXR5LCBhbnkgbGF5ZXIgbWFzayBoaWVyYXJjaHkgc2hvdWxkIGJlIHVwZGF0ZWQgZnJvbSB0aGUgb2xkIGVudGl0eSB0byB0aGUgY2xvbmVkIGVudGl0eS5cbiAgICAgICAgaWYgKCFlbnRpdHkuYW5pbS5yb290Qm9uZSB8fCBlbnRpdHkuYW5pbS5yb290Qm9uZSA9PT0gZW50aXR5KSB7XG4gICAgICAgICAgICBtYXNrcyA9IHt9O1xuICAgICAgICAgICAgZW50aXR5LmFuaW0ubGF5ZXJzLmZvckVhY2goKGxheWVyLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyLm1hc2spIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFzayA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhsYXllci5tYXNrKS5mb3JFYWNoKChwYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYmFzZSBvZiBhbGwgbWFzayBwYXRocyBzaG91bGQgYmUgbWFwcGVkIGZyb20gdGhlIHByZXZpb3VzIGVudGl0eSB0byB0aGUgY2xvbmVkIGVudGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aEFyciA9IHBhdGguc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhBcnIuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lUGF0aCA9IFtjbG9uZS5uYW1lLCAuLi5wYXRoQXJyXS5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrW2Nsb25lUGF0aF0gPSBsYXllci5tYXNrW3BhdGhdO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbWFza3NbaV0gPSB7IG1hc2sgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgc3RhdGVHcmFwaEFzc2V0OiBlbnRpdHkuYW5pbS5zdGF0ZUdyYXBoQXNzZXQsXG4gICAgICAgICAgICBhbmltYXRpb25Bc3NldHM6IGVudGl0eS5hbmltLmFuaW1hdGlvbkFzc2V0cyxcbiAgICAgICAgICAgIHNwZWVkOiBlbnRpdHkuYW5pbS5zcGVlZCxcbiAgICAgICAgICAgIGFjdGl2YXRlOiBlbnRpdHkuYW5pbS5hY3RpdmF0ZSxcbiAgICAgICAgICAgIHBsYXlpbmc6IGVudGl0eS5hbmltLnBsYXlpbmcsXG4gICAgICAgICAgICByb290Qm9uZTogZW50aXR5LmFuaW0ucm9vdEJvbmUsXG4gICAgICAgICAgICBzdGF0ZUdyYXBoOiBlbnRpdHkuYW5pbS5zdGF0ZUdyYXBoLFxuICAgICAgICAgICAgbGF5ZXJzOiBlbnRpdHkuYW5pbS5sYXllcnMsXG4gICAgICAgICAgICBsYXllckluZGljZXM6IGVudGl0eS5hbmltLmxheWVySW5kaWNlcyxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGVudGl0eS5hbmltLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICBub3JtYWxpemVXZWlnaHRzOiBlbnRpdHkuYW5pbS5ub3JtYWxpemVXZWlnaHRzLFxuICAgICAgICAgICAgbWFza3NcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkQ29tcG9uZW50KGNsb25lLCBkYXRhKTtcbiAgICB9XG5cbiAgICBvbkJlZm9yZVJlbW92ZShlbnRpdHksIGNvbXBvbmVudCkge1xuICAgICAgICBjb21wb25lbnQub25CZWZvcmVSZW1vdmUoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vZmYoJ2FuaW1hdGlvblVwZGF0ZScsIHRoaXMub25BbmltYXRpb25VcGRhdGUsIHRoaXMpO1xuICAgIH1cbn1cblxuQ29tcG9uZW50Ll9idWlsZEFjY2Vzc29ycyhBbmltQ29tcG9uZW50LnByb3RvdHlwZSwgX3NjaGVtYSk7XG5cbmV4cG9ydCB7IEFuaW1Db21wb25lbnRTeXN0ZW0gfTtcbiJdLCJuYW1lcyI6WyJfc2NoZW1hIiwiQW5pbUNvbXBvbmVudFN5c3RlbSIsIkNvbXBvbmVudFN5c3RlbSIsImNvbnN0cnVjdG9yIiwiYXBwIiwiaWQiLCJDb21wb25lbnRUeXBlIiwiQW5pbUNvbXBvbmVudCIsIkRhdGFUeXBlIiwiQW5pbUNvbXBvbmVudERhdGEiLCJzY2hlbWEiLCJvbiIsIm9uQmVmb3JlUmVtb3ZlIiwic3lzdGVtcyIsIm9uQW5pbWF0aW9uVXBkYXRlIiwiaW5pdGlhbGl6ZUNvbXBvbmVudERhdGEiLCJjb21wb25lbnQiLCJkYXRhIiwicHJvcGVydGllcyIsImNvbXBsZXhQcm9wZXJ0aWVzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJpbmNsdWRlcyIsInN0YXRlR3JhcGgiLCJsb2FkU3RhdGVHcmFwaCIsImxheWVycyIsImxheWVyIiwiaSIsIl9jb250cm9sbGVyIiwic3RhdGVzIiwic3RhdGVLZXkiLCJfc3RhdGVzIiwiX2FuaW1hdGlvbkxpc3QiLCJub2RlIiwiYXNzaWduQW5pbWF0aW9uIiwibmFtZSIsImFuaW1UcmFjayIsImFuaW1hdGlvbkFzc2V0cyIsImFzc2lnbiIsIm1hc2tzIiwibWFza0RhdGEiLCJtYXNrIiwibWFza0tleSIsImRlY29kZVVSSSIsImR0IiwiY29tcG9uZW50cyIsInN0b3JlIiwiaGFzT3duUHJvcGVydHkiLCJlbnRpdHkiLCJhbmltIiwiY29tcG9uZW50RGF0YSIsImVuYWJsZWQiLCJwbGF5aW5nIiwidXBkYXRlIiwiY2xvbmVDb21wb25lbnQiLCJjbG9uZSIsInJvb3RCb25lIiwicGF0aCIsInBhdGhBcnIiLCJzcGxpdCIsInNoaWZ0IiwiY2xvbmVQYXRoIiwiam9pbiIsInN0YXRlR3JhcGhBc3NldCIsInNwZWVkIiwiYWN0aXZhdGUiLCJsYXllckluZGljZXMiLCJwYXJhbWV0ZXJzIiwibm9ybWFsaXplV2VpZ2h0cyIsImFkZENvbXBvbmVudCIsImRlc3Ryb3kiLCJvZmYiLCJDb21wb25lbnQiLCJfYnVpbGRBY2Nlc3NvcnMiLCJwcm90b3R5cGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFNQSxNQUFNQSxPQUFPLEdBQUcsQ0FDWixTQUFTLENBQ1osQ0FBQTs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsbUJBQW1CLFNBQVNDLGVBQWUsQ0FBQztBQUM5QztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUMsV0FBVyxDQUFDQyxHQUFHLEVBQUU7SUFDYixLQUFLLENBQUNBLEdBQUcsQ0FBQyxDQUFBO0lBRVYsSUFBSSxDQUFDQyxFQUFFLEdBQUcsTUFBTSxD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
