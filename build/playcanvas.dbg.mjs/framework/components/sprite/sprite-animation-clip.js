/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { EventHandler } from '../../../core/event-handler.js';
import { math } from '../../../math/math.js';
import { Asset } from '../../../asset/asset.js';
import { SPRITE_RENDERMODE_SIMPLE } from '../../../scene/constants.js';

class SpriteAnimationClip extends EventHandler {
  constructor(component, data) {
    super();
    this._component = component;
    this._frame = 0;
    this._sprite = null;
    this._spriteAsset = null;
    this.spriteAsset = data.spriteAsset;
    this.name = data.name;
    this.fps = data.fps || 0;
    this.loop = data.loop || false;
    this._playing = false;
    this._paused = false;
    this._time = 0;
  }

  get duration() {
    if (this._sprite) {
      const fps = this.fps || Number.MIN_VALUE;
      return this._sprite.frameKeys.length / Math.abs(fps);
    }

    return 0;
  }

  set frame(value) {
    this._setFrame(value);

    const fps = this.fps || Number.MIN_VALUE;

    this._setTime(this._frame / fps);
  }

  get frame() {
    return this._frame;
  }

  get isPaused() {
    return this._paused;
  }

  get isPlaying() {
    return this._playing;
  }

  set sprite(value) {
    if (this._sprite) {
      this._sprite.off('set:meshes', this._onSpriteMeshesChange, this);

      this._sprite.off('set:pixelsPerUnit', this._onSpritePpuChanged, this);

      this._sprite.off('set:atlas', this._onSpriteMeshesChange, this);

      if (this._sprite.atlas) {
        this._sprite.atlas.off('set:texture', this._onSpriteMeshesChange, this);
      }
    }

    this._sprite = value;

    if (this._sprite) {
      this._sprite.on('set:meshes', this._onSpriteMeshesChange, this);

      this._sprite.on('set:pixelsPerUnit', this._onSpritePpuChanged, this);

      this._sprite.on('set:atlas', this._onSpriteMeshesChange, this);

      if (this._sprite.atlas) {
        this._sprite.atlas.on('set:texture', this._onSpriteMeshesChange, this);
      }
    }

    if (this._component.currentClip === this) {
      let mi;

      if (!value || !value.atlas) {
        mi = this._component._meshInstance;

        if (mi) {
          mi.deleteParameter('texture_emissiveMap');
          mi.deleteParameter('texture_opacityMap');
        }

        this._component._hideModel();
      } else {
        if (value.atlas.texture) {
          mi = this._component._meshInstance;

          if (mi) {
            mi.setParameter('texture_emissiveMap', value.atlas.texture);
            mi.setParameter('texture_opacityMap', value.atlas.texture);
          }

          if (this._component.enabled && this._component.entity.enabled) {
            this._component._showModel();
          }
        }

        if (this.time && this.fps) {
          this.time = this.time;
        } else {
          this.frame = this.frame;
        }
      }
    }
  }

  get sprite() {
    return this._sprite;
  }

  set spriteAsset(value) {
    const assets = this._component.system.app.assets;
    let id = value;

    if (value instanceof Asset) {
      id = value.id;
    }

    if (this._spriteAsset !== id) {
      if (this._spriteAsset) {
        const prev = assets.get(this._spriteAsset);

        if (prev) {
          this._unbindSpriteAsset(prev);
        }
      }

      this._spriteAsset = id;

      if (this._spriteAsset) {
        const asset = assets.get(this._spriteAsset);

        if (!asset) {
          this.sprite = null;
          assets.on('add:' + this._spriteAsset, this._onSpriteAssetAdded, this);
        } else {
          this._bindSpriteAsset(asset);
        }
      } else {
        this.sprite = null;
      }
    }
  }

  get spriteAsset() {
    return this._spriteAsset;
  }

  set time(value) {
    this._setTime(value);

    if (this._sprite) {
      this.frame = Math.min(this._sprite.frameKeys.length - 1, Math.floor(this._time * Math.abs(this.fps)));
    } else {
      this.frame = 0;
    }
  }

  get time() {
    return this._time;
  }

  _onSpriteAssetAdded(asset) {
    this._component.system.app.assets.off('add:' + asset.id, this._onSpriteAssetAdded, this);

    if (this._spriteAsset === asset.id) {
      this._bindSpriteAsset(asset);
    }
  }

  _bindSpriteAsset(asset) {
    asset.on('load', this._onSpriteAssetLoad, this);
    asset.on('remove', this._onSpriteAssetRemove, this);

    if (asset.resource) {
      this._onSpriteAssetLoad(asset);
    } else {
      this._component.system.app.assets.load(asset);
    }
  }

  _unbindSpriteAsset(asset) {
    asset.off('load', this._onSpriteAssetLoad, this);
    asset.off('remove', this._onSpriteAssetRemove, this);

    if (asset.resource && asset.resource.atlas) {
      this._component.system.app.assets.off('load:' + asset.data.textureAtlasAsset, this._onTextureAtlasLoad, this);
    }
  }

  _onSpriteAssetLoad(asset) {
    if (!asset.resource) {
      this.sprite = null;
    } else {
      if (!asset.resource.atlas) {
        const atlasAssetId = asset.data.textureAtlasAsset;
        const assets = this._component.system.app.assets;
        assets.off('load:' + atlasAssetId, this._onTextureAtlasLoad, this);
        assets.once('load:' + atlasAssetId, this._onTextureAtlasLoad, this);
      } else {
        this.sprite = asset.resource;
      }
    }
  }

  _onTextureAtlasLoad(atlasAsset) {
    const spriteAsset = this._spriteAsset;

    if (spriteAsset instanceof Asset) {
      this._onSpriteAssetLoad(spriteAsset);
    } else {
      this._onSpriteAssetLoad(this._component.system.app.assets.get(spriteAsset));
    }
  }

  _onSpriteAssetRemove(asset) {
    this.sprite = null;
  }

  _onSpriteMeshesChange() {
    if (this._component.currentClip === this) {
      this._component._showFrame(this.frame);
    }
  }

  _onSpritePpuChanged() {
    if (this._component.currentClip === this) {
      if (this.sprite.renderMode !== SPRITE_RENDERMODE_SIMPLE) {
        this._component._showFrame(this.frame);
      }
    }
  }

  _update(dt) {
    if (this.fps === 0) return;
    if (!this._playing || this._paused || !this._sprite) return;
    const dir = this.fps < 0 ? -1 : 1;
    const time = this._time + dt * this._component.speed * dir;
    const duration = this.duration;
    const end = time > duration || time < 0;

    this._setTime(time);

    let frame = this.frame;

    if (this._sprite) {
      frame = Math.floor(this._sprite.frameKeys.length * this._time / duration);
    } else {
      frame = 0;
    }

    if (frame !== this._frame) {
      this._setFrame(frame);
    }

    if (end) {
      if (this.loop) {
        this.fire('loop');

        this._component.fire('loop', this);
      } else {
        this._playing = false;
        this._paused = false;
        this.fire('end');

        this._component.fire('end', this);
      }
    }
  }

  _setTime(value) {
    this._time = value;
    const duration = this.duration;

    if (this._time < 0) {
      if (this.loop) {
        this._time = this._time % duration + duration;
      } else {
        this._time = 0;
      }
    } else if (this._time > duration) {
      if (this.loop) {
        this._time %= duration;
      } else {
        this._time = duration;
      }
    }
  }

  _setFrame(value) {
    if (this._sprite) {
      this._frame = math.clamp(value, 0, this._sprite.frameKeys.length - 1);
    } else {
      this._frame = value;
    }

    if (this._component.currentClip === this) {
      this._component._showFrame(this._frame);
    }
  }

  _destroy() {
    if (this._sprite) {
      this.sprite = null;
    }

    if (this._spriteAsset) {
      this.spriteAsset = null;
    }
  }

  play() {
    if (this._playing) return;
    this._playing = true;
    this._paused = false;
    this.frame = 0;
    this.fire('play');

    this._component.fire('play', this);
  }

  pause() {
    if (!this._playing || this._paused) return;
    this._paused = true;
    this.fire('pause');

    this._component.fire('pause', this);
  }

  resume() {
    if (!this._paused) return;
    this._paused = false;
    this.fire('resume');

    this._component.fire('resume', this);
  }

  stop() {
    if (!this._playing) return;
    this._playing = false;
    this._paused = false;
    this._time = 0;
    this.frame = 0;
    this.fire('stop');

    this._component.fire('stop', this);
  }

}

export { SpriteAnimationClip };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ByaXRlLWFuaW1hdGlvbi1jbGlwLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvc3ByaXRlL3Nwcml0ZS1hbmltYXRpb24tY2xpcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEhhbmRsZXIgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2V2ZW50LWhhbmRsZXIuanMnO1xuXG5pbXBvcnQgeyBtYXRoIH0gZnJvbSAnLi4vLi4vLi4vbWF0aC9tYXRoLmpzJztcblxuaW1wb3J0IHsgQXNzZXQgfSBmcm9tICcuLi8uLi8uLi9hc3NldC9hc3NldC5qcyc7XG5cbmltcG9ydCB7IFNQUklURV9SRU5ERVJNT0RFX1NJTVBMRSB9IGZyb20gJy4uLy4uLy4uL3NjZW5lL2NvbnN0YW50cy5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9zY2VuZS9zcHJpdGUuanMnKS5TcHJpdGV9IFNwcml0ZSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vY29tcG9uZW50LmpzJykuU3ByaXRlQ29tcG9uZW50fSBTcHJpdGVDb21wb25lbnQgKi9cblxuLyoqXG4gKiBIYW5kbGVzIHBsYXlpbmcgb2Ygc3ByaXRlIGFuaW1hdGlvbnMgYW5kIGxvYWRpbmcgb2YgcmVsZXZhbnQgc3ByaXRlIGFzc2V0cy5cbiAqXG4gKiBAYXVnbWVudHMgRXZlbnRIYW5kbGVyXG4gKi9cbmNsYXNzIFNwcml0ZUFuaW1hdGlvbkNsaXAgZXh0ZW5kcyBFdmVudEhhbmRsZXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBTcHJpdGVBbmltYXRpb25DbGlwIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTcHJpdGVDb21wb25lbnR9IGNvbXBvbmVudCAtIFRoZSBzcHJpdGUgY29tcG9uZW50IG1hbmFnaW5nIHRoaXMgY2xpcC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIERhdGEgZm9yIHRoZSBuZXcgYW5pbWF0aW9uIGNsaXAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXRhLmZwc10gLSBGcmFtZXMgcGVyIHNlY29uZCBmb3IgdGhlIGFuaW1hdGlvbiBjbGlwLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RhdGEubG9vcF0gLSBXaGV0aGVyIHRvIGxvb3AgdGhlIGFuaW1hdGlvbiBjbGlwLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZGF0YS5uYW1lXSAtIFRoZSBuYW1lIG9mIHRoZSBuZXcgYW5pbWF0aW9uIGNsaXAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXRhLnNwcml0ZUFzc2V0XSAtIFRoZSBpZCBvZiB0aGUgc3ByaXRlIGFzc2V0IHRoYXQgdGhpcyBjbGlwIHdpbGwgcGxheS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnQsIGRhdGEpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLl9jb21wb25lbnQgPSBjb21wb25lbnQ7XG5cbiAgICAgICAgdGhpcy5fZnJhbWUgPSAwO1xuICAgICAgICB0aGlzLl9zcHJpdGUgPSBudWxsO1xuICAgICAgICB0aGlzLl9zcHJpdGVBc3NldCA9IG51bGw7XG4gICAgICAgIHRoaXMuc3ByaXRlQXNzZXQgPSBkYXRhLnNwcml0ZUFzc2V0O1xuXG4gICAgICAgIHRoaXMubmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5mcHMgPSBkYXRhLmZwcyB8fCAwO1xuICAgICAgICB0aGlzLmxvb3AgPSBkYXRhLmxvb3AgfHwgZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fcGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl90aW1lID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBjbGlwIHN0YXJ0cyBwbGF5aW5nLlxuICAgICAqXG4gICAgICogQGV2ZW50IFNwcml0ZUFuaW1hdGlvbkNsaXAjcGxheVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiB0aGUgY2xpcCBpcyBwYXVzZWQuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgU3ByaXRlQW5pbWF0aW9uQ2xpcCNwYXVzZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiB0aGUgY2xpcCBpcyByZXN1bWVkLlxuICAgICAqXG4gICAgICogQGV2ZW50IFNwcml0ZUFuaW1hdGlvbkNsaXAjcmVzdW1lXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBjbGlwIGlzIHN0b3BwZWQuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgU3ByaXRlQW5pbWF0aW9uQ2xpcCNzdG9wXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBjbGlwIHN0b3BzIHBsYXlpbmcgYmVjYXVzZSBpdCByZWFjaGVkIGl0cyBlbmRpbmcuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgU3ByaXRlQW5pbWF0aW9uQ2xpcCNlbmRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gdGhlIGNsaXAgcmVhY2hlZCB0aGUgZW5kIG9mIGl0cyBjdXJyZW50IGxvb3AuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgU3ByaXRlQW5pbWF0aW9uQ2xpcCNsb29wXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpbiBzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9zcHJpdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZwcyA9IHRoaXMuZnBzIHx8IE51bWJlci5NSU5fVkFMVUU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3ByaXRlLmZyYW1lS2V5cy5sZW5ndGggLyBNYXRoLmFicyhmcHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgZnJhbWUgb2YgdGhlIHtAbGluayBTcHJpdGV9IGN1cnJlbnRseSBiZWluZyByZW5kZXJlZC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IGZyYW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NldEZyYW1lKHZhbHVlKTtcblxuICAgICAgICAvLyB1cGRhdGUgdGltZSB0byBzdGFydCBvZiBmcmFtZVxuICAgICAgICBjb25zdCBmcHMgPSB0aGlzLmZwcyB8fCBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgICAgICB0aGlzLl9zZXRUaW1lKHRoaXMuX2ZyYW1lIC8gZnBzKTtcbiAgICB9XG5cbiAgICBnZXQgZnJhbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBhbmltYXRpb24gaXMgY3VycmVudGx5IHBhdXNlZC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBpc1BhdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhdXNlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBhbmltYXRpb24gaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgaXNQbGF5aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGxheWluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzcHJpdGUgdXNlZCB0byBwbGF5IHRoZSBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7U3ByaXRlfVxuICAgICAqL1xuICAgIHNldCBzcHJpdGUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nwcml0ZSkge1xuICAgICAgICAgICAgdGhpcy5fc3ByaXRlLm9mZignc2V0Om1lc2hlcycsIHRoaXMuX29uU3ByaXRlTWVzaGVzQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX3Nwcml0ZS5vZmYoJ3NldDpwaXhlbHNQZXJVbml0JywgdGhpcy5fb25TcHJpdGVQcHVDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX3Nwcml0ZS5vZmYoJ3NldDphdGxhcycsIHRoaXMuX29uU3ByaXRlTWVzaGVzQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zcHJpdGUuYXRsYXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zcHJpdGUuYXRsYXMub2ZmKCdzZXQ6dGV4dHVyZScsIHRoaXMuX29uU3ByaXRlTWVzaGVzQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3Nwcml0ZSA9IHZhbHVlO1xuXG4gICAgICAgIGlmICh0aGlzLl9zcHJpdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nwcml0ZS5vbignc2V0Om1lc2hlcycsIHRoaXMuX29uU3ByaXRlTWVzaGVzQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX3Nwcml0ZS5vbignc2V0OnBpeGVsc1BlclVuaXQnLCB0aGlzLl9vblNwcml0ZVBwdUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fc3ByaXRlLm9uKCdzZXQ6YXRsYXMnLCB0aGlzLl9vblNwcml0ZU1lc2hlc0NoYW5nZSwgdGhpcyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9zcHJpdGUuYXRsYXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zcHJpdGUuYXRsYXMub24oJ3NldDp0ZXh0dXJlJywgdGhpcy5fb25TcHJpdGVNZXNoZXNDaGFuZ2UsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbXBvbmVudC5jdXJyZW50Q2xpcCA9PT0gdGhpcykge1xuICAgICAgICAgICAgbGV0IG1pO1xuXG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmUgY2xlYXJpbmcgdGhlIHNwcml0ZSBjbGVhciBvbGQgbWVzaCBpbnN0YW5jZSBwYXJhbWV0ZXJzXG4gICAgICAgICAgICBpZiAoIXZhbHVlIHx8ICF2YWx1ZS5hdGxhcykge1xuICAgICAgICAgICAgICAgIG1pID0gdGhpcy5fY29tcG9uZW50Ll9tZXNoSW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgaWYgKG1pKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pLmRlbGV0ZVBhcmFtZXRlcigndGV4dHVyZV9lbWlzc2l2ZU1hcCcpO1xuICAgICAgICAgICAgICAgICAgICBtaS5kZWxldGVQYXJhbWV0ZXIoJ3RleHR1cmVfb3BhY2l0eU1hcCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudC5faGlkZU1vZGVsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBzaG93IHNwcml0ZVxuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRleHR1cmVcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuYXRsYXMudGV4dHVyZSkge1xuICAgICAgICAgICAgICAgICAgICBtaSA9IHRoaXMuX2NvbXBvbmVudC5fbWVzaEluc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pLnNldFBhcmFtZXRlcigndGV4dHVyZV9lbWlzc2l2ZU1hcCcsIHZhbHVlLmF0bGFzLnRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWkuc2V0UGFyYW1ldGVyKCd0ZXh0dXJlX29wYWNpdHlNYXAnLCB2YWx1ZS5hdGxhcy50ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb21wb25lbnQuZW5hYmxlZCAmJiB0aGlzLl9jb21wb25lbnQuZW50aXR5LmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudC5fc2hvd01vZGVsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgdGltZSB0aGVuIGZvcmNlIHVwZGF0ZVxuICAgICAgICAgICAgICAgIC8vIGZyYW1lIGJhc2VkIG9uIHRoZSB0aW1lIChjaGVjayBpZiBmcHMgaXMgbm90IDAgb3RoZXJ3aXNlIHRpbWUgd2lsbCBiZSBJbmZpbml0eSlcblxuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlbGYtYXNzaWduICovXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGltZSAmJiB0aGlzLmZwcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWUgPSB0aGlzLnRpbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHRpbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlbiBmb3JjZSB1cGRhdGUgZnJhbWUgY291bnRlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5mcmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1zZWxmLWFzc2lnbiAqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHNwcml0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nwcml0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaWQgb2YgdGhlIHNwcml0ZSBhc3NldCB1c2VkIHRvIHBsYXkgdGhlIGFuaW1hdGlvbi5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHNwcml0ZUFzc2V0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGFzc2V0cyA9IHRoaXMuX2NvbXBvbmVudC5zeXN0ZW0uYXBwLmFzc2V0cztcbiAgICAgICAgbGV0IGlkID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXNzZXQpIHtcbiAgICAgICAgICAgIGlkID0gdmFsdWUuaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fc3ByaXRlQXNzZXQgIT09IGlkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fc3ByaXRlQXNzZXQpIHtcbiAgICAgICAgICAgICAgICAvLyBjbGVhbiBvbGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IGFzc2V0cy5nZXQodGhpcy5fc3ByaXRlQXNzZXQpO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3VuYmluZFNwcml0ZUFzc2V0KHByZXYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc3ByaXRlQXNzZXQgPSBpZDtcblxuICAgICAgICAgICAgLy8gYmluZCBzcHJpdGUgYXNzZXRcbiAgICAgICAgICAgIGlmICh0aGlzLl9zcHJpdGVBc3NldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gYXNzZXRzLmdldCh0aGlzLl9zcHJpdGVBc3NldCk7XG4gICAgICAgICAgICAgICAgaWYgKCFhc3NldCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0cy5vbignYWRkOicgKyB0aGlzLl9zcHJpdGVBc3NldCwgdGhpcy5fb25TcHJpdGVBc3NldEFkZGVkLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9iaW5kU3ByaXRlQXNzZXQoYXNzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zcHJpdGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHNwcml0ZUFzc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3ByaXRlQXNzZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdGltZSBvZiB0aGUgYW5pbWF0aW9uIGluIHNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCB0aW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NldFRpbWUodmFsdWUpO1xuXG4gICAgICAgIGlmICh0aGlzLl9zcHJpdGUpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSBNYXRoLm1pbih0aGlzLl9zcHJpdGUuZnJhbWVLZXlzLmxlbmd0aCAtIDEsIE1hdGguZmxvb3IodGhpcy5fdGltZSAqIE1hdGguYWJzKHRoaXMuZnBzKSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgdGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWU7XG4gICAgfVxuXG4gICAgLy8gV2hlbiBzcHJpdGUgYXNzZXQgaXMgYWRkZWQgYmluZCBpdFxuICAgIF9vblNwcml0ZUFzc2V0QWRkZWQoYXNzZXQpIHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50LnN5c3RlbS5hcHAuYXNzZXRzLm9mZignYWRkOicgKyBhc3NldC5pZCwgdGhpcy5fb25TcHJpdGVBc3NldEFkZGVkLCB0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuX3Nwcml0ZUFzc2V0ID09PSBhc3NldC5pZCkge1xuICAgICAgICAgICAgdGhpcy5fYmluZFNwcml0ZUFzc2V0KGFzc2V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhvb2sgdXAgZXZlbnQgaGFuZGxlcnMgb24gc3ByaXRlIGFzc2V0XG4gICAgX2JpbmRTcHJpdGVBc3NldChhc3NldCkge1xuICAgICAgICBhc3NldC5vbignbG9hZCcsIHRoaXMuX29uU3ByaXRlQXNzZXRMb2FkLCB0aGlzKTtcbiAgICAgICAgYXNzZXQub24oJ3JlbW92ZScsIHRoaXMuX29uU3ByaXRlQXNzZXRSZW1vdmUsIHRoaXMpO1xuXG4gICAgICAgIGlmIChhc3NldC5yZXNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5fb25TcHJpdGVBc3NldExvYWQoYXNzZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY29tcG9uZW50LnN5c3RlbS5hcHAuYXNzZXRzLmxvYWQoYXNzZXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VuYmluZFNwcml0ZUFzc2V0KGFzc2V0KSB7XG4gICAgICAgIGFzc2V0Lm9mZignbG9hZCcsIHRoaXMuX29uU3ByaXRlQXNzZXRMb2FkLCB0aGlzKTtcbiAgICAgICAgYXNzZXQub2ZmKCdyZW1vdmUnLCB0aGlzLl9vblNwcml0ZUFzc2V0UmVtb3ZlLCB0aGlzKTtcblxuICAgICAgICAvLyB1bmJpbmQgYXRsYXNcbiAgICAgICAgaWYgKGFzc2V0LnJlc291cmNlICYmIGFzc2V0LnJlc291cmNlLmF0bGFzKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wb25lbnQuc3lzdGVtLmFwcC5hc3NldHMub2ZmKCdsb2FkOicgKyBhc3NldC5kYXRhLnRleHR1cmVBdGxhc0Fzc2V0LCB0aGlzLl9vblRleHR1cmVBdGxhc0xvYWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBzcHJpdGUgYXNzZXQgaXMgbG9hZGVkIG1ha2Ugc3VyZSB0aGUgdGV4dHVyZSBhdGxhcyBhc3NldCBpcyBsb2FkZWQgdG9vXG4gICAgLy8gSWYgc28gdGhlbiBzZXQgdGhlIHNwcml0ZSwgb3RoZXJ3aXNlIHdhaXQgZm9yIHRoZSBhdGxhcyB0byBiZSBsb2FkZWQgZmlyc3RcbiAgICBfb25TcHJpdGVBc3NldExvYWQoYXNzZXQpIHtcbiAgICAgICAgaWYgKCFhc3NldC5yZXNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5zcHJpdGUgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFhc3NldC5yZXNvdXJjZS5hdGxhcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0bGFzQXNzZXRJZCA9IGFzc2V0LmRhdGEudGV4dHVyZUF0bGFzQXNzZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgYXNzZXRzID0gdGhpcy5fY29tcG9uZW50LnN5c3RlbS5hcHAuYXNzZXRzO1xuICAgICAgICAgICAgICAgIGFzc2V0cy5vZmYoJ2xvYWQ6JyArIGF0bGFzQXNzZXRJZCwgdGhpcy5fb25UZXh0dXJlQXRsYXNMb2FkLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBhc3NldHMub25jZSgnbG9hZDonICsgYXRsYXNBc3NldElkLCB0aGlzLl9vblRleHR1cmVBdGxhc0xvYWQsIHRoaXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZSA9IGFzc2V0LnJlc291cmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBhdGxhcyBpcyBsb2FkZWQgdHJ5IHRvIHJlc2V0IHRoZSBzcHJpdGUgYXNzZXRcbiAgICBfb25UZXh0dXJlQXRsYXNMb2FkKGF0bGFzQXNzZXQpIHtcbiAgICAgICAgY29uc3Qgc3ByaXRlQXNzZXQgPSB0aGlzLl9zcHJpdGVBc3NldDtcbiAgICAgICAgaWYgKHNwcml0ZUFzc2V0IGluc3RhbmNlb2YgQXNzZXQpIHtcbiAgICAgICAgICAgIHRoaXMuX29uU3ByaXRlQXNzZXRMb2FkKHNwcml0ZUFzc2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX29uU3ByaXRlQXNzZXRMb2FkKHRoaXMuX2NvbXBvbmVudC5zeXN0ZW0uYXBwLmFzc2V0cy5nZXQoc3ByaXRlQXNzZXQpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblNwcml0ZUFzc2V0UmVtb3ZlKGFzc2V0KSB7XG4gICAgICAgIHRoaXMuc3ByaXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgbWVzaGVzIGFyZSByZS1jcmVhdGVkIG1ha2Ugc3VyZVxuICAgIC8vIHdlIHVwZGF0ZSB0aGVtIGluIHRoZSBtZXNoIGluc3RhbmNlXG4gICAgX29uU3ByaXRlTWVzaGVzQ2hhbmdlKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tcG9uZW50LmN1cnJlbnRDbGlwID09PSB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wb25lbnQuX3Nob3dGcmFtZSh0aGlzLmZyYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBmcmFtZSBpZiBwcHUgY2hhbmdlcyBmb3IgOS1zbGljZWQgc3ByaXRlc1xuICAgIF9vblNwcml0ZVBwdUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb21wb25lbnQuY3VycmVudENsaXAgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNwcml0ZS5yZW5kZXJNb2RlICE9PSBTUFJJVEVfUkVOREVSTU9ERV9TSU1QTEUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb21wb25lbnQuX3Nob3dGcmFtZSh0aGlzLmZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBhbmltYXRpb24sIGxvb3BpbmcgaWYgbmVjZXNzYXJ5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR0IC0gVGhlIGRlbHRhIHRpbWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICh0aGlzLmZwcyA9PT0gMCkgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMuX3BsYXlpbmcgfHwgdGhpcy5fcGF1c2VkIHx8ICF0aGlzLl9zcHJpdGUpIHJldHVybjtcblxuICAgICAgICBjb25zdCBkaXIgPSB0aGlzLmZwcyA8IDAgPyAtMSA6IDE7XG4gICAgICAgIGNvbnN0IHRpbWUgPSB0aGlzLl90aW1lICsgZHQgKiB0aGlzLl9jb21wb25lbnQuc3BlZWQgKiBkaXI7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbjtcbiAgICAgICAgY29uc3QgZW5kID0gKHRpbWUgPiBkdXJhdGlvbiB8fCB0aW1lIDwgMCk7XG5cbiAgICAgICAgdGhpcy5fc2V0VGltZSh0aW1lKTtcblxuICAgICAgICBsZXQgZnJhbWUgPSB0aGlzLmZyYW1lO1xuICAgICAgICBpZiAodGhpcy5fc3ByaXRlKSB7XG4gICAgICAgICAgICBmcmFtZSA9IE1hdGguZmxvb3IodGhpcy5fc3ByaXRlLmZyYW1lS2V5cy5sZW5ndGggKiB0aGlzLl90aW1lIC8gZHVyYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJhbWUgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyYW1lICE9PSB0aGlzLl9mcmFtZSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0RnJhbWUoZnJhbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubG9vcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyZSgnbG9vcCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudC5maXJlKCdsb29wJywgdGhpcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcmUoJ2VuZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudC5maXJlKCdlbmQnLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zZXRUaW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3RpbWUgPSB2YWx1ZTtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uO1xuICAgICAgICBpZiAodGhpcy5fdGltZSA8IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxvb3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lID0gdGhpcy5fdGltZSAlIGR1cmF0aW9uICsgZHVyYXRpb247XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWUgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3RpbWUgPiBkdXJhdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMubG9vcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWUgJT0gZHVyYXRpb247XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWUgPSBkdXJhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zZXRGcmFtZSh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5fc3ByaXRlKSB7XG4gICAgICAgICAgICAvLyBjbGFtcCBmcmFtZVxuICAgICAgICAgICAgdGhpcy5fZnJhbWUgPSBtYXRoLmNsYW1wKHZhbHVlLCAwLCB0aGlzLl9zcHJpdGUuZnJhbWVLZXlzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZnJhbWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9jb21wb25lbnQuY3VycmVudENsaXAgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudC5fc2hvd0ZyYW1lKHRoaXMuX2ZyYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9kZXN0cm95KCkge1xuICAgICAgICAvLyByZW1vdmUgc3ByaXRlXG4gICAgICAgIGlmICh0aGlzLl9zcHJpdGUpIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSBzcHJpdGUgYXNzZXRcbiAgICAgICAgaWYgKHRoaXMuX3Nwcml0ZUFzc2V0KSB7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZUFzc2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXlzIHRoZSBhbmltYXRpb24uIElmIGl0J3MgYWxyZWFkeSBwbGF5aW5nIHRoZW4gdGhpcyBkb2VzIG5vdGhpbmcuXG4gICAgICovXG4gICAgcGxheSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BsYXlpbmcpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5fcGxheWluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZyYW1lID0gMDtcblxuICAgICAgICB0aGlzLmZpcmUoJ3BsYXknKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50LmZpcmUoJ3BsYXknLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXVzZXMgdGhlIGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wbGF5aW5nIHx8IHRoaXMuX3BhdXNlZClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZmlyZSgncGF1c2UnKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50LmZpcmUoJ3BhdXNlJywgdGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzdW1lcyB0aGUgcGF1c2VkIGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICByZXN1bWUoKSB7XG4gICAgICAgIGlmICghdGhpcy5fcGF1c2VkKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZmlyZSgncmVzdW1lJyk7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudC5maXJlKCdyZXN1bWUnLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgYW5pbWF0aW9uIGFuZCByZXNldHMgdGhlIGFuaW1hdGlvbiB0byB0aGUgZmlyc3QgZnJhbWUuXG4gICAgICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wbGF5aW5nKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5fcGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdGltZSA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWUgPSAwO1xuXG4gICAgICAgIHRoaXMuZmlyZSgnc3RvcCcpO1xuICAgICAgICB0aGlzLl9jb21wb25lbnQuZmlyZSgnc3RvcCcsIHRoaXMpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgU3ByaXRlQW5pbWF0aW9uQ2xpcCB9O1xuIl0sIm5hbWVzIjpbIlNwcml0ZUFuaW1hdGlvbkNsaXAiLCJFdmVudEhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImNvbXBvbmVudCIsImRhdGEiLCJfY29tcG9uZW50IiwiX2ZyYW1lIiwiX3Nwcml0ZSIsIl9zcHJpdGVBc3NldCIsInNwcml0ZUFzc2V0IiwibmFtZSIsImZwcyIsImxvb3AiLCJfcGxheWluZyIsIl9wYXVzZWQiLCJfdGltZSIsImR1cmF0aW9uIiwiTnVtYmVyIiwiTUlOX1ZBTFVFIiwiZnJhbWVLZXlzIiwibGVuZ3RoIiwiTWF0aCIsImFicyIsImZyYW1lIiwidmFsdWUiLCJfc2V0RnJhbWUiLCJfc2V0VGltZSIsImlzUGF1c2VkIiwiaXNQbGF5aW5nIiwic3ByaXRlIiwib2ZmIiwiX29uU3ByaXRlTWVzaGVzQ2hhbmdlIiwiX29uU3ByaXRlUHB1Q2hhbmdlZCIsImF0bGFzIiwib24iLCJjdXJyZW50Q2xpcCIsIm1pIiwiX21lc2hJbnN0YW5jZSIsImRlbGV0ZVBhcmFtZXRlciIsIl9oaWRlTW9kZWwiLCJ0ZXh0dXJlIiwic2V0UGFyYW1ldGVyIiwiZW5hYmxlZCIsImVudGl0eSIsIl9zaG93TW9kZWwiLCJ0aW1lIiwiYXNzZXRzIiwic3lzdGVtIiwiYXBwIiwiaWQiLCJBc3NldCIsInByZXYiLCJnZXQiLCJfdW5iaW5kU3ByaXRlQXNzZXQiLCJhc3NldCIsIl9vblNwcml0ZUFzc2V0QWRkZWQiLCJfYmluZFNwcml0ZUFzc2V0IiwibWluIiwiZmxvb3IiLCJfb25TcHJpdGVBc3NldExvYWQiLCJfb25TcHJpdGVBc3NldFJlbW92ZSIsInJlc291cmNlIiwibG9hZCIsInRleHR1cmVBdGxhc0Fzc2V0IiwiX29uVGV4dHVyZUF0bGFzTG9hZCIsImF0bGFzQXNzZXRJZCIsIm9uY2UiLCJhdGxhc0Fzc2V0IiwiX3Nob3dGcmFtZSIsInJlbmRlck1vZGUiLCJTUFJJVEVfUkVOREVSTU9ERV9TSU1QTEUiLCJfdXBkYXRlIiwiZHQiLCJkaXIiLCJzcGVlZCIsImVuZCIsImZpcmUiLCJtYXRoIiwiY2xhbXAiLCJfZGVzdHJveSIsInBsYXkiLCJwYXVzZSIsInJlc3VtZSIsInN0b3AiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFnQkEsTUFBTUEsbUJBQU4sU0FBa0NDLFlBQWxDLENBQStDO0FBVzNDQyxFQUFBQSxXQUFXLENBQUNDLFNBQUQsRUFBWUMsSUFBWixFQUFrQjtBQUN6QixJQUFBLEtBQUEsRUFBQSxDQUFBO0lBRUEsSUFBS0MsQ0FBQUEsVUFBTCxHQUFrQkYsU0FBbEIsQ0FBQTtJQUVBLElBQUtHLENBQUFBLE1BQUwsR0FBYyxDQUFkLENBQUE7SUFDQSxJQUFLQyxDQUFBQSxPQUFMLEdBQWUsSUFBZixDQUFBO0lBQ0EsSUFBS0MsQ0FBQUEsWUFBTCxHQUFvQixJQUFwQixDQUFBO0FBQ0EsSUFBQSxJQUFBLENBQUtD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
