import { sortPriority } from '../../../core/sort.js';
import { Color } from '../../../core/math/color.js';
import { Vec4 } from '../../../core/math/vec4.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { CameraComponent } from './component.js';
import { CameraComponentData } from './data.js';

const _schema = ['enabled'];

/**
 * Used to add and remove {@link CameraComponent}s from Entities. It also holds an array of all
 * active cameras.
 *
 * @augments ComponentSystem
 */
class CameraComponentSystem extends ComponentSystem {
  /**
   * Holds all the active camera components.
   *
   * @type {CameraComponent[]}
   */

  /**
   * Create a new CameraComponentSystem instance.
   *
   * @param {import('../../app-base.js').AppBase} app - The Application.
   * @hideconstructor
   */
  constructor(app) {
    super(app);
    this.cameras = [];
    this.id = 'camera';
    this.ComponentType = CameraComponent;
    this.DataType = CameraComponentData;
    this.schema = _schema;
    this.on('beforeremove', this.onBeforeRemove, this);
    this.app.on('prerender', this.onAppPrerender, this);
    this.app.systems.on('update', this.onUpdate, this);
  }
  initializeComponentData(component, data, properties) {
    properties = ['aspectRatio', 'aspectRatioMode', 'calculateProjection', 'calculateTransform', 'clearColor', 'clearColorBuffer', 'clearDepthBuffer', 'clearStencilBuffer', 'renderSceneColorMap', 'renderSceneDepthMap', 'cullFaces', 'farClip', 'flipFaces', 'fov', 'frustumCulling', 'horizontalFov', 'layers', 'renderTarget', 'nearClip', 'orthoHeight', 'projection', 'priority', 'rect', 'scissorRect', 'aperture', 'shutter', 'sensitivity'];
    for (let i = 0; i < properties.length; i++) {
      const property = properties[i];
      if (data.hasOwnProperty(property)) {
        const value = data[property];
        switch (property) {
          case 'rect':
          case 'scissorRect':
            if (Array.isArray(value)) {
              component[property] = new Vec4(value[0], value[1], value[2], value[3]);
            } else {
              component[property] = value;
            }
            break;
          case 'clearColor':
            if (Array.isArray(value)) {
              component[property] = new Color(value[0], value[1], value[2], value[3]);
            } else {
              component[property] = value;
            }
            break;
          default:
            component[property] = value;
            break;
        }
      }
    }
    super.initializeComponentData(component, data, ['enabled']);
  }
  cloneComponent(entity, clone) {
    const c = entity.camera;
    return this.addComponent(clone, {
      aspectRatio: c.aspectRatio,
      aspectRatioMode: c.aspectRatioMode,
      calculateProjection: c.calculateProjection,
      calculateTransform: c.calculateTransform,
      clearColor: c.clearColor,
      clearColorBuffer: c.clearColorBuffer,
      clearDepthBuffer: c.clearDepthBuffer,
      clearStencilBuffer: c.clearStencilBuffer,
      renderSceneDepthMap: c.renderSceneDepthMap,
      renderSceneColorMap: c.renderSceneColorMap,
      cullFaces: c.cullFaces,
      enabled: c.enabled,
      farClip: c.farClip,
      flipFaces: c.flipFaces,
      fov: c.fov,
      frustumCulling: c.frustumCulling,
      horizontalFov: c.horizontalFov,
      layers: c.layers,
      renderTarget: c.renderTarget,
      nearClip: c.nearClip,
      orthoHeight: c.orthoHeight,
      projection: c.projection,
      priority: c.priority,
      rect: c.rect,
      scissorRect: c.scissorRect,
      aperture: c.aperture,
      sensitivity: c.sensitivity,
      shutter: c.shutter
    });
  }
  onBeforeRemove(entity, component) {
    this.removeCamera(component);
  }
  onUpdate(dt) {}
  onAppPrerender() {
    for (let i = 0, len = this.cameras.length; i < len; i++) {
      this.cameras[i].onAppPrerender();
    }
  }
  addCamera(camera) {
    this.cameras.push(camera);
    sortPriority(this.cameras);
  }
  removeCamera(camera) {
    const index = this.cameras.indexOf(camera);
    if (index >= 0) {
      this.cameras.splice(index, 1);
      sortPriority(this.cameras);
    }
  }
  destroy() {
    super.destroy();
    this.app.systems.off('update', this.onUpdate, this);
  }
}
Component._buildAccessors(CameraComponent.prototype, _schema);

export { CameraComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvY2FtZXJhL3N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzb3J0UHJpb3JpdHkgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NvcnQuanMnO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuLi8uLi8uLi9jb3JlL21hdGgvY29sb3IuanMnO1xuaW1wb3J0IHsgVmVjNCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJztcblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENvbXBvbmVudFN5c3RlbSB9IGZyb20gJy4uL3N5c3RlbS5qcyc7XG5cbmltcG9ydCB7IENhbWVyYUNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENhbWVyYUNvbXBvbmVudERhdGEgfSBmcm9tICcuL2RhdGEuanMnO1xuXG5jb25zdCBfc2NoZW1hID0gWydlbmFibGVkJ107XG5cbi8qKlxuICogVXNlZCB0byBhZGQgYW5kIHJlbW92ZSB7QGxpbmsgQ2FtZXJhQ29tcG9uZW50fXMgZnJvbSBFbnRpdGllcy4gSXQgYWxzbyBob2xkcyBhbiBhcnJheSBvZiBhbGxcbiAqIGFjdGl2ZSBjYW1lcmFzLlxuICpcbiAqIEBhdWdtZW50cyBDb21wb25lbnRTeXN0ZW1cbiAqL1xuY2xhc3MgQ2FtZXJhQ29tcG9uZW50U3lzdGVtIGV4dGVuZHMgQ29tcG9uZW50U3lzdGVtIHtcbiAgICAvKipcbiAgICAgKiBIb2xkcyBhbGwgdGhlIGFjdGl2ZSBjYW1lcmEgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtDYW1lcmFDb21wb25lbnRbXX1cbiAgICAgKi9cbiAgICBjYW1lcmFzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQ2FtZXJhQ29tcG9uZW50U3lzdGVtIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gYXBwIC0gVGhlIEFwcGxpY2F0aW9uLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcblxuICAgICAgICB0aGlzLmlkID0gJ2NhbWVyYSc7XG5cbiAgICAgICAgdGhpcy5Db21wb25lbnRUeXBlID0gQ2FtZXJhQ29tcG9uZW50O1xuICAgICAgICB0aGlzLkRhdGFUeXBlID0gQ2FtZXJhQ29tcG9uZW50RGF0YTtcblxuICAgICAgICB0aGlzLnNjaGVtYSA9IF9zY2hlbWE7XG5cbiAgICAgICAgdGhpcy5vbignYmVmb3JlcmVtb3ZlJywgdGhpcy5vbkJlZm9yZVJlbW92ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuYXBwLm9uKCdwcmVyZW5kZXInLCB0aGlzLm9uQXBwUHJlcmVuZGVyLCB0aGlzKTtcblxuICAgICAgICB0aGlzLmFwcC5zeXN0ZW1zLm9uKCd1cGRhdGUnLCB0aGlzLm9uVXBkYXRlLCB0aGlzKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplQ29tcG9uZW50RGF0YShjb21wb25lbnQsIGRhdGEsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcGVydGllcyA9IFtcbiAgICAgICAgICAgICdhc3BlY3RSYXRpbycsXG4gICAgICAgICAgICAnYXNwZWN0UmF0aW9Nb2RlJyxcbiAgICAgICAgICAgICdjYWxjdWxhdGVQcm9qZWN0aW9uJyxcbiAgICAgICAgICAgICdjYWxjdWxhdGVUcmFuc2Zvcm0nLFxuICAgICAgICAgICAgJ2NsZWFyQ29sb3InLFxuICAgICAgICAgICAgJ2NsZWFyQ29sb3JCdWZmZXInLFxuICAgICAgICAgICAgJ2NsZWFyRGVwdGhCdWZmZXInLFxuICAgICAgICAgICAgJ2NsZWFyU3RlbmNpbEJ1ZmZlcicsXG4gICAgICAgICAgICAncmVuZGVyU2NlbmVDb2xvck1hcCcsXG4gICAgICAgICAgICAncmVuZGVyU2NlbmVEZXB0aE1hcCcsXG4gICAgICAgICAgICAnY3VsbEZhY2VzJyxcbiAgICAgICAgICAgICdmYXJDbGlwJyxcbiAgICAgICAgICAgICdmbGlwRmFjZXMnLFxuICAgICAgICAgICAgJ2ZvdicsXG4gICAgICAgICAgICAnZnJ1c3R1bUN1bGxpbmcnLFxuICAgICAgICAgICAgJ2hvcml6b250YWxGb3YnLFxuICAgICAgICAgICAgJ2xheWVycycsXG4gICAgICAgICAgICAncmVuZGVyVGFyZ2V0JyxcbiAgICAgICAgICAgICduZWFyQ2xpcCcsXG4gICAgICAgICAgICAnb3J0aG9IZWlnaHQnLFxuICAgICAgICAgICAgJ3Byb2plY3Rpb24nLFxuICAgICAgICAgICAgJ3ByaW9yaXR5JyxcbiAgICAgICAgICAgICdyZWN0JyxcbiAgICAgICAgICAgICdzY2lzc29yUmVjdCcsXG4gICAgICAgICAgICAnYXBlcnR1cmUnLFxuICAgICAgICAgICAgJ3NodXR0ZXInLFxuICAgICAgICAgICAgJ3NlbnNpdGl2aXR5J1xuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlY3QnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY2lzc29yUmVjdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gbmV3IFZlYzQodmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSwgdmFsdWVbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xlYXJDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gbmV3IENvbG9yKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0sIHZhbHVlWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci5pbml0aWFsaXplQ29tcG9uZW50RGF0YShjb21wb25lbnQsIGRhdGEsIFsnZW5hYmxlZCddKTtcbiAgICB9XG5cbiAgICBjbG9uZUNvbXBvbmVudChlbnRpdHksIGNsb25lKSB7XG4gICAgICAgIGNvbnN0IGMgPSBlbnRpdHkuY2FtZXJhO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb21wb25lbnQoY2xvbmUsIHtcbiAgICAgICAgICAgIGFzcGVjdFJhdGlvOiBjLmFzcGVjdFJhdGlvLFxuICAgICAgICAgICAgYXNwZWN0UmF0aW9Nb2RlOiBjLmFzcGVjdFJhdGlvTW9kZSxcbiAgICAgICAgICAgIGNhbGN1bGF0ZVByb2plY3Rpb246IGMuY2FsY3VsYXRlUHJvamVjdGlvbixcbiAgICAgICAgICAgIGNhbGN1bGF0ZVRyYW5zZm9ybTogYy5jYWxjdWxhdGVUcmFuc2Zvcm0sXG4gICAgICAgICAgICBjbGVhckNvbG9yOiBjLmNsZWFyQ29sb3IsXG4gICAgICAgICAgICBjbGVhckNvbG9yQnVmZmVyOiBjLmNsZWFyQ29sb3JCdWZmZXIsXG4gICAgICAgICAgICBjbGVhckRlcHRoQnVmZmVyOiBjLmNsZWFyRGVwdGhCdWZmZXIsXG4gICAgICAgICAgICBjbGVhclN0ZW5jaWxCdWZmZXI6IGMuY2xlYXJTdGVuY2lsQnVmZmVyLFxuICAgICAgICAgICAgcmVuZGVyU2NlbmVEZXB0aE1hcDogYy5yZW5kZXJTY2VuZURlcHRoTWFwLFxuICAgICAgICAgICAgcmVuZGVyU2NlbmVDb2xvck1hcDogYy5yZW5kZXJTY2VuZUNvbG9yTWFwLFxuICAgICAgICAgICAgY3VsbEZhY2VzOiBjLmN1bGxGYWNlcyxcbiAgICAgICAgICAgIGVuYWJsZWQ6IGMuZW5hYmxlZCxcbiAgICAgICAgICAgIGZhckNsaXA6IGMuZmFyQ2xpcCxcbiAgICAgICAgICAgIGZsaXBGYWNlczogYy5mbGlwRmFjZXMsXG4gICAgICAgICAgICBmb3Y6IGMuZm92LFxuICAgICAgICAgICAgZnJ1c3R1bUN1bGxpbmc6IGMuZnJ1c3R1bUN1bGxpbmcsXG4gICAgICAgICAgICBob3Jpem9udGFsRm92OiBjLmhvcml6b250YWxGb3YsXG4gICAgICAgICAgICBsYXllcnM6IGMubGF5ZXJzLFxuICAgICAgICAgICAgcmVuZGVyVGFyZ2V0OiBjLnJlbmRlclRhcmdldCxcbiAgICAgICAgICAgIG5lYXJDbGlwOiBjLm5lYXJDbGlwLFxuICAgICAgICAgICAgb3J0aG9IZWlnaHQ6IGMub3J0aG9IZWlnaHQsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBjLnByb2plY3Rpb24sXG4gICAgICAgICAgICBwcmlvcml0eTogYy5wcmlvcml0eSxcbiAgICAgICAgICAgIHJlY3Q6IGMucmVjdCxcbiAgICAgICAgICAgIHNjaXNzb3JSZWN0OiBjLnNjaXNzb3JSZWN0LFxuICAgICAgICAgICAgYXBlcnR1cmU6IGMuYXBlcnR1cmUsXG4gICAgICAgICAgICBzZW5zaXRpdml0eTogYy5zZW5zaXRpdml0eSxcbiAgICAgICAgICAgIHNodXR0ZXI6IGMuc2h1dHRlclxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkJlZm9yZVJlbW92ZShlbnRpdHksIGNvbXBvbmVudCkge1xuICAgICAgICB0aGlzLnJlbW92ZUNhbWVyYShjb21wb25lbnQpO1xuICAgIH1cblxuICAgIG9uVXBkYXRlKGR0KSB7XG4gICAgfVxuXG4gICAgb25BcHBQcmVyZW5kZXIoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmNhbWVyYXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhc1tpXS5vbkFwcFByZXJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkQ2FtZXJhKGNhbWVyYSkge1xuICAgICAgICB0aGlzLmNhbWVyYXMucHVzaChjYW1lcmEpO1xuICAgICAgICBzb3J0UHJpb3JpdHkodGhpcy5jYW1lcmFzKTtcbiAgICB9XG5cbiAgICByZW1vdmVDYW1lcmEoY2FtZXJhKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jYW1lcmFzLmluZGV4T2YoY2FtZXJhKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgc29ydFByaW9yaXR5KHRoaXMuY2FtZXJhcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vZmYoJ3VwZGF0ZScsIHRoaXMub25VcGRhdGUsIHRoaXMpO1xuICAgIH1cbn1cblxuQ29tcG9uZW50Ll9idWlsZEFjY2Vzc29ycyhDYW1lcmFDb21wb25lbnQucHJvdG90eXBlLCBfc2NoZW1hKTtcblxuZXhwb3J0IHsgQ2FtZXJhQ29tcG9uZW50U3lzdGVtIH07XG4iXSwibmFtZXMiOlsiX3NjaGVtYSIsIkNhbWVyYUNvbXBvbmVudFN5c3RlbSIsIkNvbXBvbmVudFN5c3RlbSIsImNvbnN0cnVjdG9yIiwiYXBwIiwiY2FtZXJhcyIsImlkIiwiQ29tcG9uZW50VHlwZSIsIkNhbWVyYUNvbXBvbmVudCIsIkRhdGFUeXBlIiwiQ2FtZXJhQ29tcG9uZW50RGF0YSIsInNjaGVtYSIsIm9uIiwib25CZWZvcmVSZW1vdmUiLCJvbkFwcFByZXJlbmRlciIsInN5c3RlbXMiLCJvblVwZGF0ZSIsImluaXRpYWxpemVDb21wb25lbnREYXRhIiwiY29tcG9uZW50IiwiZGF0YSIsInByb3BlcnRpZXMiLCJpIiwibGVuZ3RoIiwicHJvcGVydHkiLCJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwiVmVjNCIsIkNvbG9yIiwiY2xvbmVDb21wb25lbnQiLCJlbnRpdHkiLCJjbG9uZSIsImMiLCJjYW1lcmEiLCJhZGRDb21wb25lbnQiLCJhc3BlY3RSYXRpbyIsImFzcGVjdFJhdGlvTW9kZSIsImNhbGN1bGF0ZVByb2plY3Rpb24iLCJjYWxjdWxhdGVUcmFuc2Zvcm0iLCJjbGVhckNvbG9yIiwiY2xlYXJDb2xvckJ1ZmZlciIsImNsZWFyRGVwdGhCdWZmZXIiLCJjbGVhclN0ZW5jaWxCdWZmZXIiLCJyZW5kZXJTY2VuZURlcHRoTWFwIiwicmVuZGVyU2NlbmVDb2xvck1hcCIsImN1bGxGYWNlcyIsImVuYWJsZWQiLCJmYXJDbGlwIiwiZmxpcEZhY2VzIiwiZm92IiwiZnJ1c3R1bUN1bGxpbmciLCJob3Jpem9udGFsRm92IiwibGF5ZXJzIiwicmVuZGVyVGFyZ2V0IiwibmVhckNsaXAiLCJvcnRob0hlaWdodCIsInByb2plY3Rpb24iLCJwcmlvcml0eSIsInJlY3QiLCJzY2lzc29yUmVjdCIsImFwZXJ0dXJlIiwic2Vuc2l0aXZpdHkiLCJzaHV0dGVyIiwicmVtb3ZlQ2FtZXJhIiwiZHQiLCJsZW4iLCJhZGRDYW1lcmEiLCJwdXNoIiwic29ydFByaW9yaXR5IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZGVzdHJveSIsIm9mZiIsIkNvbXBvbmVudCIsIl9idWlsZEFjY2Vzc29ycyIsInByb3RvdHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFVQSxNQUFNQSxPQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQTs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMscUJBQXFCLFNBQVNDLGVBQWUsQ0FBQztBQUNoRDtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUdJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxXQUFXQSxDQUFDQyxHQUFHLEVBQUU7SUFDYixLQUFLLENBQUNBLEdBQUcsQ0FBQyxDQUFBO0lBQUMsSUFUZkMsQ0FBQUEsT0FBTyxHQUFHLEVBQUUsQ0FBQTtJQVdSLElBQUksQ0FBQ0MsRUFBRSxHQUFHLFFBQVEsQ0FBQTtJQUVsQixJQUFJLENBQUNDLGFBQWEsR0FBR0MsZUFBZSxDQUFBO0lBQ3BDLElBQUksQ0FBQ0MsUUFBUSxHQUFHQyxtQkFBbUIsQ0FBQTtJQUVuQyxJQUFJLENBQUNDLE1BQU0sR0FBR1gsT0FBTyxDQUFBO0lBRXJCLElBQUksQ0FBQ1ksRUFBRSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUNDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUNsRCxJQUFBLElBQUksQ0FBQ1QsR0FBRyxDQUFDUSxFQUFFLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQ0UsY0FBYyxFQUFF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
