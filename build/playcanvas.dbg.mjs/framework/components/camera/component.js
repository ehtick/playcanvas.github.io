/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { LAYERID_UI, LAYERID_DEPTH, ASPECT_AUTO } from '../../../scene/constants.js';
import { Camera } from '../../../scene/camera.js';
import { Component } from '../component.js';
import { PostEffectQueue } from './post-effect-queue.js';
import { Debug } from '../../../core/debug.js';

const properties = [{
  name: 'aspectRatio',
  readonly: false
}, {
  name: 'aspectRatioMode',
  readonly: false
}, {
  name: 'calculateProjection',
  readonly: false
}, {
  name: 'calculateTransform',
  readonly: false
}, {
  name: 'clearColor',
  readonly: false
}, {
  name: 'cullFaces',
  readonly: false
}, {
  name: 'farClip',
  readonly: false
}, {
  name: 'flipFaces',
  readonly: false
}, {
  name: 'fov',
  readonly: false
}, {
  name: 'frustumCulling',
  readonly: false
}, {
  name: 'horizontalFov',
  readonly: false
}, {
  name: 'nearClip',
  readonly: false
}, {
  name: 'orthoHeight',
  readonly: false
}, {
  name: 'projection',
  readonly: false
}, {
  name: 'scissorRect',
  readonly: false
}, {
  name: 'aperture',
  readonly: false
}, {
  name: 'shutter',
  readonly: false
}, {
  name: 'sensitivity',
  readonly: false
}];

class CameraComponent extends Component {

  constructor(system, entity) {
    super(system, entity);
    this.onPostprocessing = null;
    this.onPreRender = null;
    this.onPostRender = null;
    this._renderSceneDepthMap = 0;
    this._renderSceneColorMap = 0;
    this._camera = new Camera();
    this._camera.node = entity;
    this._priority = 0;

    this._disablePostEffectsLayer = LAYERID_UI;

    this._postEffects = new PostEffectQueue(system.app, this);
    this._sceneDepthMapRequested = false;
    this._sceneColorMapRequested = false;
  }

  get camera() {
    return this._camera;
  }

  set clearColorBuffer(value) {
    this._camera.clearColorBuffer = value;
    this.dirtyLayerCompositionCameras();
  }
  get clearColorBuffer() {
    return this._camera.clearColorBuffer;
  }

  set clearDepthBuffer(value) {
    this._camera.clearDepthBuffer = value;
    this.dirtyLayerCompositionCameras();
  }
  get clearDepthBuffer() {
    return this._camera.clearDepthBuffer;
  }

  set clearStencilBuffer(value) {
    this._camera.clearStencilBuffer = value;
    this.dirtyLayerCompositionCameras();
  }
  get clearStencilBuffer() {
    return this._camera.clearStencilBuffer;
  }

  set disablePostEffectsLayer(layer) {
    this._disablePostEffectsLayer = layer;
    this.dirtyLayerCompositionCameras();
  }
  get disablePostEffectsLayer() {
    return this._disablePostEffectsLayer;
  }

  _enableDepthLayer(value) {
    const hasDepthLayer = this.layers.find(layerId => layerId === LAYERID_DEPTH);
    if (hasDepthLayer) {
      const depthLayer = this.system.app.scene.layers.getLayerById(LAYERID_DEPTH);
      if (value) {
        depthLayer == null ? void 0 : depthLayer.incrementCounter();
      } else {
        depthLayer == null ? void 0 : depthLayer.decrementCounter();
      }
    } else if (value) {
      return false;
    }
    return true;
  }

  requestSceneColorMap(enabled) {
    this._renderSceneColorMap += enabled ? 1 : -1;
    Debug.assert(this._renderSceneColorMap >= 0);
    const ok = this._enableDepthLayer(enabled);
    if (!ok) {
      Debug.warnOnce('CameraComponent.requestSceneColorMap was called, but the camera does not have a Depth layer, ignoring.');
    }
  }
  set renderSceneColorMap(value) {
    if (value && !this._sceneColorMapRequested) {
      this.requestSceneColorMap(true);
      this._sceneColorMapRequested = true;
    } else if (this._sceneColorMapRequested) {
      this.requestSceneColorMap(false);
      this._sceneColorMapRequested = false;
    }
  }
  get renderSceneColorMap() {
    return this._renderSceneColorMap > 0;
  }

  requestSceneDepthMap(enabled) {
    this._renderSceneDepthMap += enabled ? 1 : -1;
    Debug.assert(this._renderSceneDepthMap >= 0);
    const ok = this._enableDepthLayer(enabled);
    if (!ok) {
      Debug.warnOnce('CameraComponent.requestSceneDepthMap was called, but the camera does not have a Depth layer, ignoring.');
    }
  }
  set renderSceneDepthMap(value) {
    if (value && !this._sceneDepthMapRequested) {
      this.requestSceneDepthMap(true);
      this._sceneDepthMapRequested = true;
    } else if (this._sceneDepthMapRequested) {
      this.requestSceneDepthMap(false);
      this._sceneDepthMapRequested = false;
    }
  }
  get renderSceneDepthMap() {
    return this._renderSceneDepthMap > 0;
  }

  get frustum() {
    return this._camera.frustum;
  }

  set layers(newValue) {
    const layers = this._camera.layers;
    for (let i = 0; i < layers.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(layers[i]);
      if (!layer) continue;
      layer.removeCamera(this);
    }
    this._camera.layers = newValue;
    if (!this.enabled || !this.entity.enabled) return;
    for (let i = 0; i < newValue.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(newValue[i]);
      if (!layer) continue;
      layer.addCamera(this);
    }
  }
  get layers() {
    return this._camera.layers;
  }
  get layersSet() {
    return this._camera.layersSet;
  }

  get postEffectsEnabled() {
    return this._postEffects.enabled;
  }
  get postEffects() {
    return this._postEffects;
  }

  set priority(newValue) {
    this._priority = newValue;
    this.dirtyLayerCompositionCameras();
  }
  get priority() {
    return this._priority;
  }

  get projectionMatrix() {
    return this._camera.projectionMatrix;
  }

  set aperture(newValue) {
    this._camera.aperture = newValue;
  }
  get aperture() {
    return this._camera.aperture;
  }

  set sensitivity(newValue) {
    this._camera.sensitivity = newValue;
  }
  get sensitivity() {
    return this._camera.sensitivity;
  }

  set shutter(newValue) {
    this._camera.shutter = newValue;
  }
  get shutter() {
    return this._camera.shutter;
  }

  set rect(value) {
    this._camera.rect = value;
    this.fire('set:rect', this._camera.rect);
  }
  get rect() {
    return this._camera.rect;
  }

  set renderTarget(value) {
    this._camera.renderTarget = value;
    this.dirtyLayerCompositionCameras();
  }
  get renderTarget() {
    return this._camera.renderTarget;
  }

  get viewMatrix() {
    return this._camera.viewMatrix;
  }
  dirtyLayerCompositionCameras() {
    const layerComp = this.system.app.scene.layers;
    layerComp._dirtyCameras = true;
  }

  screenToWorld(screenx, screeny, cameraz, worldCoord) {
    const device = this.system.app.graphicsDevice;
    const w = device.clientRect.width;
    const h = device.clientRect.height;
    return this._camera.screenToWorld(screenx, screeny, cameraz, w, h, worldCoord);
  }

  worldToScreen(worldCoord, screenCoord) {
    const device = this.system.app.graphicsDevice;
    const w = device.clientRect.width;
    const h = device.clientRect.height;
    return this._camera.worldToScreen(worldCoord, w, h, screenCoord);
  }

  onAppPrerender() {
    this._camera._viewMatDirty = true;
    this._camera._viewProjMatDirty = true;
  }
  addCameraToLayers() {
    const layers = this.layers;
    for (let i = 0; i < layers.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(layers[i]);
      if (layer) {
        layer.addCamera(this);
      }
    }
  }
  removeCameraFromLayers() {
    const layers = this.layers;
    for (let i = 0; i < layers.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(layers[i]);
      if (layer) {
        layer.removeCamera(this);
      }
    }
  }
  onLayersChanged(oldComp, newComp) {
    this.addCameraToLayers();
    oldComp.off('add', this.onLayerAdded, this);
    oldComp.off('remove', this.onLayerRemoved, this);
    newComp.on('add', this.onLayerAdded, this);
    newComp.on('remove', this.onLayerRemoved, this);
  }
  onLayerAdded(layer) {
    const index = this.layers.indexOf(layer.id);
    if (index < 0) return;
    layer.addCamera(this);
  }
  onLayerRemoved(layer) {
    const index = this.layers.indexOf(layer.id);
    if (index < 0) return;
    layer.removeCamera(this);
  }
  onEnable() {
    const system = this.system;
    const scene = system.app.scene;
    const layers = scene.layers;
    system.addCamera(this);
    scene.on('set:layers', this.onLayersChanged, this);
    if (layers) {
      layers.on('add', this.onLayerAdded, this);
      layers.on('remove', this.onLayerRemoved, this);
    }
    if (this.enabled && this.entity.enabled) {
      this.addCameraToLayers();
    }
    this.postEffects.enable();
  }
  onDisable() {
    const system = this.system;
    const scene = system.app.scene;
    const layers = scene.layers;
    this.postEffects.disable();
    this.removeCameraFromLayers();
    scene.off('set:layers', this.onLayersChanged, this);
    if (layers) {
      layers.off('add', this.onLayerAdded, this);
      layers.off('remove', this.onLayerRemoved, this);
    }
    system.removeCamera(this);
  }
  onRemove() {
    this.onDisable();
    this.off();
  }

  calculateAspectRatio(rt) {
    const device = this.system.app.graphicsDevice;
    const width = rt ? rt.width : device.width;
    const height = rt ? rt.height : device.height;
    return width * this.rect.z / (height * this.rect.w);
  }

  frameUpdate(rt) {
    if (this.aspectRatioMode === ASPECT_AUTO) {
      this.aspectRatio = this.calculateAspectRatio(rt);
    }
  }

  startXr(type, spaceType, options) {
    this.system.app.xr.start(this, type, spaceType, options);
  }

  endXr(callback) {
    if (!this._camera.xr) {
      if (callback) callback(new Error('Camera is not in XR'));
      return;
    }
    this._camera.xr.end(callback);
  }

  copy(source) {
    properties.forEach(property => {
      if (!property.readonly) {
        const name = property.name;
        this[name] = source[name];
      }
    });

    this.clearColorBuffer = source.clearColorBuffer;
    this.clearDepthBuffer = source.clearDepthBuffer;
    this.clearStencilBuffer = source.clearStencilBuffer;
    this.disablePostEffectsLayer = source.disablePostEffectsLayer;
    this.layers = source.layers;
    this.priority = source.priority;
    this.renderTarget = source.renderTarget;
    this.rect = source.rect;
    this.aperture = source.aperture;
    this.sensitivity = source.sensitivity;
    this.shutter = source.shutter;
  }
}

properties.forEach(function (property) {
  const name = property.name;
  const options = {};

  options.get = function () {
    return this._camera[name];
  };

  if (!property.readonly) {
    options.set = function (newValue) {
      this._camera[name] = newValue;
    };
  }
  Object.defineProperty(CameraComponent.prototype, name, options);
});

export { CameraComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvY2FtZXJhL2NvbXBvbmVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBU1BFQ1RfQVVUTywgTEFZRVJJRF9VSSwgTEFZRVJJRF9ERVBUSCB9IGZyb20gJy4uLy4uLy4uL3NjZW5lL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tICcuLi8uLi8uLi9zY2VuZS9jYW1lcmEuanMnO1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnQuanMnO1xuXG5pbXBvcnQgeyBQb3N0RWZmZWN0UXVldWUgfSBmcm9tICcuL3Bvc3QtZWZmZWN0LXF1ZXVlLmpzJztcbmltcG9ydCB7IERlYnVnIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9kZWJ1Zy5qcyc7XG5cbi8vIG5vdGU6IHdoZW4gdGhpcyBsaXN0IGlzIG1vZGlmaWVkLCB0aGUgY29weSgpIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIGFkanVzdGVkXG5jb25zdCBwcm9wZXJ0aWVzID0gW1xuICAgIHsgbmFtZTogJ2FzcGVjdFJhdGlvJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnYXNwZWN0UmF0aW9Nb2RlJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnY2FsY3VsYXRlUHJvamVjdGlvbicsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ2NhbGN1bGF0ZVRyYW5zZm9ybScsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ2NsZWFyQ29sb3InLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdjdWxsRmFjZXMnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdmYXJDbGlwJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnZmxpcEZhY2VzJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnZm92JywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnZnJ1c3R1bUN1bGxpbmcnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdob3Jpem9udGFsRm92JywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnbmVhckNsaXAnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdvcnRob0hlaWdodCcsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ3Byb2plY3Rpb24nLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdzY2lzc29yUmVjdCcsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ2FwZXJ0dXJlJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnc2h1dHRlcicsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ3NlbnNpdGl2aXR5JywgcmVhZG9ubHk6IGZhbHNlIH1cbl07XG5cbi8qKlxuICogQ2FsbGJhY2sgdXNlZCBieSB7QGxpbmsgQ2FtZXJhQ29tcG9uZW50I2NhbGN1bGF0ZVRyYW5zZm9ybX0gYW5kIHtAbGluayBDYW1lcmFDb21wb25lbnQjY2FsY3VsYXRlUHJvamVjdGlvbn0uXG4gKlxuICogQGNhbGxiYWNrIENhbGN1bGF0ZU1hdHJpeENhbGxiYWNrXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vLi4vY29yZS9tYXRoL21hdDQuanMnKS5NYXQ0fSB0cmFuc2Zvcm1NYXRyaXggLSBPdXRwdXQgb2YgdGhlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHZpZXcgLSBUeXBlIG9mIHZpZXcuIENhbiBiZSB7QGxpbmsgVklFV19DRU5URVJ9LCB7QGxpbmsgVklFV19MRUZUfSBvciB7QGxpbmsgVklFV19SSUdIVH0uIExlZnQgYW5kIHJpZ2h0IGFyZSBvbmx5IHVzZWQgaW4gc3RlcmVvIHJlbmRlcmluZy5cbiAqL1xuXG4vKipcbiAqIFRoZSBDYW1lcmEgQ29tcG9uZW50IGVuYWJsZXMgYW4gRW50aXR5IHRvIHJlbmRlciB0aGUgc2NlbmUuIEEgc2NlbmUgcmVxdWlyZXMgYXQgbGVhc3Qgb25lXG4gKiBlbmFibGVkIGNhbWVyYSBjb21wb25lbnQgdG8gYmUgcmVuZGVyZWQuIE5vdGUgdGhhdCBtdWx0aXBsZSBjYW1lcmEgY29tcG9uZW50cyBjYW4gYmUgZW5hYmxlZFxuICogc2ltdWx0YW5lb3VzbHkgKGZvciBzcGxpdC1zY3JlZW4gb3Igb2Zmc2NyZWVuIHJlbmRlcmluZywgZm9yIGV4YW1wbGUpLlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIEFkZCBhIHBjLkNhbWVyYUNvbXBvbmVudCB0byBhbiBlbnRpdHlcbiAqIHZhciBlbnRpdHkgPSBuZXcgcGMuRW50aXR5KCk7XG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KCdjYW1lcmEnLCB7XG4gKiAgICAgbmVhckNsaXA6IDEsXG4gKiAgICAgZmFyQ2xpcDogMTAwLFxuICogICAgIGZvdjogNTVcbiAqIH0pO1xuICpcbiAqIC8vIEdldCB0aGUgcGMuQ2FtZXJhQ29tcG9uZW50IG9uIGFuIGVudGl0eVxuICogdmFyIGNhbWVyYUNvbXBvbmVudCA9IGVudGl0eS5jYW1lcmE7XG4gKlxuICogLy8gVXBkYXRlIGEgcHJvcGVydHkgb24gYSBjYW1lcmEgY29tcG9uZW50XG4gKiBlbnRpdHkuY2FtZXJhLm5lYXJDbGlwID0gMjtcbiAqIGBgYFxuICpcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwcm9qZWN0aW9uIFRoZSB0eXBlIG9mIHByb2plY3Rpb24gdXNlZCB0byByZW5kZXIgdGhlIGNhbWVyYS4gQ2FuIGJlOlxuICpcbiAqIC0ge0BsaW5rIFBST0pFQ1RJT05fUEVSU1BFQ1RJVkV9OiBBIHBlcnNwZWN0aXZlIHByb2plY3Rpb24uIFRoZSBjYW1lcmEgZnJ1c3R1bVxuICogcmVzZW1ibGVzIGEgdHJ1bmNhdGVkIHB5cmFtaWQuXG4gKiAtIHtAbGluayBQUk9KRUNUSU9OX09SVEhPR1JBUEhJQ306IEFuIG9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uLiBUaGUgY2FtZXJhXG4gKiBmcnVzdHVtIGlzIGEgY3Vib2lkLlxuICpcbiAqIERlZmF1bHRzIHRvIHtAbGluayBQUk9KRUNUSU9OX1BFUlNQRUNUSVZFfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBhc3BlY3RSYXRpbyBUaGUgYXNwZWN0IHJhdGlvICh3aWR0aCBkaXZpZGVkIGJ5IGhlaWdodCkgb2YgdGhlIGNhbWVyYS4gSWZcbiAqIGFzcGVjdFJhdGlvTW9kZSBpcyB7QGxpbmsgQVNQRUNUX0FVVE99LCB0aGVuIHRoaXMgdmFsdWUgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGNhbGN1bGF0ZWQgZXZlcnlcbiAqIGZyYW1lLCBhbmQgeW91IGNhbiBvbmx5IHJlYWQgaXQuIElmIGl0J3MgQVNQRUNUX01BTlVBTCwgeW91IGNhbiBzZXQgdGhlIHZhbHVlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGFzcGVjdFJhdGlvTW9kZSBUaGUgYXNwZWN0IHJhdGlvIG1vZGUgb2YgdGhlIGNhbWVyYS4gQ2FuIGJlOlxuICpcbiAqIC0ge0BsaW5rIEFTUEVDVF9BVVRPfTogYXNwZWN0IHJhdGlvIHdpbGwgYmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBjdXJyZW50IHJlbmRlclxuICogdGFyZ2V0J3Mgd2lkdGggZGl2aWRlZCBieSBoZWlnaHQuXG4gKiAtIHtAbGluayBBU1BFQ1RfTUFOVUFMfTogdXNlIHRoZSBhc3BlY3RSYXRpbyB2YWx1ZS5cbiAqXG4gKiBEZWZhdWx0cyB0byB7QGxpbmsgQVNQRUNUX0FVVE99LlxuICogQHByb3BlcnR5IHtpbXBvcnQoJy4uLy4uLy4uL2NvcmUvbWF0aC9jb2xvci5qcycpLkNvbG9yfSBjbGVhckNvbG9yIFRoZSBjb2xvciB1c2VkIHRvIGNsZWFyIHRoZVxuICogY2FudmFzIHRvIGJlZm9yZSB0aGUgY2FtZXJhIHN0YXJ0cyB0byByZW5kZXIuIERlZmF1bHRzIHRvIFswLjc1LCAwLjc1LCAwLjc1LCAxXS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmYXJDbGlwIFRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgYWZ0ZXIgd2hpY2ggbm8gcmVuZGVyaW5nIHdpbGwgdGFrZVxuICogcGxhY2UuIERlZmF1bHRzIHRvIDEwMDAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZm92IFRoZSBmaWVsZCBvZiB2aWV3IG9mIHRoZSBjYW1lcmEgaW4gZGVncmVlcy4gVXN1YWxseSB0aGlzIGlzIHRoZSBZLWF4aXNcbiAqIGZpZWxkIG9mIHZpZXcsIHNlZSB7QGxpbmsgQ2FtZXJhQ29tcG9uZW50I2hvcml6b250YWxGb3Z9LiBVc2VkIGZvclxuICoge0BsaW5rIFBST0pFQ1RJT05fUEVSU1BFQ1RJVkV9IGNhbWVyYXMgb25seS4gRGVmYXVsdHMgdG8gNDUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhvcml6b250YWxGb3YgU2V0IHdoaWNoIGF4aXMgdG8gdXNlIGZvciB0aGUgRmllbGQgb2YgVmlldyBjYWxjdWxhdGlvbi5cbiAqIERlZmF1bHRzIHRvIGZhbHNlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG5lYXJDbGlwIFRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgYmVmb3JlIHdoaWNoIG5vIHJlbmRlcmluZyB3aWxsIHRha2VcbiAqIHBsYWNlLiBEZWZhdWx0cyB0byAwLjEuXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3J0aG9IZWlnaHQgVGhlIGhhbGYtaGVpZ2h0IG9mIHRoZSBvcnRob2dyYXBoaWMgdmlldyB3aW5kb3cgKGluIHRoZSBZLWF4aXMpLlxuICogVXNlZCBmb3Ige0BsaW5rIFBST0pFQ1RJT05fT1JUSE9HUkFQSElDfSBjYW1lcmFzIG9ubHkuIERlZmF1bHRzIHRvIDEwLlxuICogQHByb3BlcnR5IHtpbXBvcnQoJy4uLy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJykuVmVjNH19IHNjaXNzb3JSZWN0IENsaXBzIGFsbCBwaXhlbHMgd2hpY2ggYXJlXG4gKiBub3QgaW4gdGhlIHJlY3RhbmdsZS4gVGhlIG9yZGVyIG9mIHRoZSB2YWx1ZXMgaXMgW3gsIHksIHdpZHRoLCBoZWlnaHRdLiBEZWZhdWx0cyB0byBbMCwgMCwgMSwgMV0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGZydXN0dW1DdWxsaW5nIENvbnRyb2xzIHRoZSBjdWxsaW5nIG9mIG1lc2ggaW5zdGFuY2VzIGFnYWluc3QgdGhlIGNhbWVyYVxuICogZnJ1c3R1bSwgaS5lLiBpZiBvYmplY3RzIG91dHNpZGUgb2YgY2FtZXJhIHNob3VsZCBiZSBvbWl0dGVkIGZyb20gcmVuZGVyaW5nLiBJZiBmYWxzZSwgYWxsIG1lc2hcbiAqIGluc3RhbmNlcyBpbiB0aGUgc2NlbmUgYXJlIHJlbmRlcmVkIGJ5IHRoZSBjYW1lcmEsIHJlZ2FyZGxlc3Mgb2YgdmlzaWJpbGl0eS4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gKiBAcHJvcGVydHkge0NhbGN1bGF0ZU1hdHJpeENhbGxiYWNrfSBjYWxjdWxhdGVUcmFuc2Zvcm0gQ3VzdG9tIGZ1bmN0aW9uIHlvdSBjYW4gcHJvdmlkZSB0b1xuICogY2FsY3VsYXRlIHRoZSBjYW1lcmEgdHJhbnNmb3JtYXRpb24gbWF0cml4IG1hbnVhbGx5LiBDYW4gYmUgdXNlZCBmb3IgY29tcGxleCBlZmZlY3RzIGxpa2VcbiAqIHJlZmxlY3Rpb25zLiBGdW5jdGlvbiBpcyBjYWxsZWQgdXNpbmcgY29tcG9uZW50J3Mgc2NvcGUuIEFyZ3VtZW50czpcbiAqXG4gKiAtIHtAbGluayBNYXQ0fSB0cmFuc2Zvcm1NYXRyaXg6IG91dHB1dCBvZiB0aGUgZnVuY3Rpb24uXG4gKiAtIHZpZXc6IFR5cGUgb2Ygdmlldy4gQ2FuIGJlIHtAbGluayBWSUVXX0NFTlRFUn0sIHtAbGluayBWSUVXX0xFRlR9IG9yIHtAbGluayBWSUVXX1JJR0hUfS5cbiAqXG4gKiBMZWZ0IGFuZCByaWdodCBhcmUgb25seSB1c2VkIGluIHN0ZXJlbyByZW5kZXJpbmcuXG4gKiBAcHJvcGVydHkge0NhbGN1bGF0ZU1hdHJpeENhbGxiYWNrfSBjYWxjdWxhdGVQcm9qZWN0aW9uIEN1c3RvbSBmdW5jdGlvbiB5b3UgY2FuIHByb3ZpZGUgdG9cbiAqIGNhbGN1bGF0ZSB0aGUgY2FtZXJhIHByb2plY3Rpb24gbWF0cml4IG1hbnVhbGx5LiBDYW4gYmUgdXNlZCBmb3IgY29tcGxleCBlZmZlY3RzIGxpa2UgZG9pbmdcbiAqIG9ibGlxdWUgcHJvamVjdGlvbi4gRnVuY3Rpb24gaXMgY2FsbGVkIHVzaW5nIGNvbXBvbmVudCdzIHNjb3BlLiBBcmd1bWVudHM6XG4gKlxuICogLSB7QGxpbmsgTWF0NH0gdHJhbnNmb3JtTWF0cml4OiBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uXG4gKiAtIHZpZXc6IFR5cGUgb2Ygdmlldy4gQ2FuIGJlIHtAbGluayBWSUVXX0NFTlRFUn0sIHtAbGluayBWSUVXX0xFRlR9IG9yIHtAbGluayBWSUVXX1JJR0hUfS5cbiAqXG4gKiBMZWZ0IGFuZCByaWdodCBhcmUgb25seSB1c2VkIGluIHN0ZXJlbyByZW5kZXJpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGN1bGxGYWNlcyBJZiB0cnVlIHRoZSBjYW1lcmEgd2lsbCB0YWtlIG1hdGVyaWFsLmN1bGwgaW50byBhY2NvdW50LiBPdGhlcndpc2VcbiAqIGJvdGggZnJvbnQgYW5kIGJhY2sgZmFjZXMgd2lsbCBiZSByZW5kZXJlZC4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZmxpcEZhY2VzIElmIHRydWUgdGhlIGNhbWVyYSB3aWxsIGludmVydCBmcm9udCBhbmQgYmFjayBmYWNlcy4gQ2FuIGJlIHVzZWZ1bFxuICogZm9yIHJlZmxlY3Rpb24gcmVuZGVyaW5nLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAqIEBhdWdtZW50cyBDb21wb25lbnRcbiAqL1xuY2xhc3MgQ2FtZXJhQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBDdXN0b20gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBwb3N0cHJvY2Vzc2luZyBzaG91bGQgZXhlY3V0ZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgb25Qb3N0cHJvY2Vzc2luZyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b20gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgYmVmb3JlIHRoZSBjYW1lcmEgcmVuZGVycyB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25QcmVSZW5kZXIgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGFmdGVyIHRoZSBjYW1lcmEgcmVuZGVycyB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25Qb3N0UmVuZGVyID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEEgY291bnRlciBvZiByZXF1ZXN0cyBvZiBkZXB0aCBtYXAgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9yZW5kZXJTY2VuZURlcHRoTWFwID0gMDtcblxuICAgIC8qKlxuICAgICAqIEEgY291bnRlciBvZiByZXF1ZXN0cyBvZiBjb2xvciBtYXAgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9yZW5kZXJTY2VuZUNvbG9yTWFwID0gMDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDYW1lcmFDb21wb25lbnQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi9zeXN0ZW0uanMnKS5DYW1lcmFDb21wb25lbnRTeXN0ZW19IHN5c3RlbSAtIFRoZSBDb21wb25lbnRTeXN0ZW0gdGhhdFxuICAgICAqIGNyZWF0ZWQgdGhpcyBDb21wb25lbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL2VudGl0eS5qcycpLkVudGl0eX0gZW50aXR5IC0gVGhlIEVudGl0eSB0aGF0IHRoaXMgQ29tcG9uZW50IGlzXG4gICAgICogYXR0YWNoZWQgdG8uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3lzdGVtLCBlbnRpdHkpIHtcbiAgICAgICAgc3VwZXIoc3lzdGVtLCBlbnRpdHkpO1xuXG4gICAgICAgIHRoaXMuX2NhbWVyYSA9IG5ldyBDYW1lcmEoKTtcbiAgICAgICAgdGhpcy5fY2FtZXJhLm5vZGUgPSBlbnRpdHk7XG5cbiAgICAgICAgdGhpcy5fcHJpb3JpdHkgPSAwO1xuXG4gICAgICAgIC8vIGxheWVyIGlkIGF0IHdoaWNoIHRoZSBwb3N0cHJvY2Vzc2luZyBzdG9wcyBmb3IgdGhlIGNhbWVyYVxuICAgICAgICB0aGlzLl9kaXNhYmxlUG9zdEVmZmVjdHNMYXllciA9IExBWUVSSURfVUk7XG5cbiAgICAgICAgLy8gcG9zdHByb2Nlc3NpbmcgbWFuYWdlbWVudFxuICAgICAgICB0aGlzLl9wb3N0RWZmZWN0cyA9IG5ldyBQb3N0RWZmZWN0UXVldWUoc3lzdGVtLmFwcCwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5fc2NlbmVEZXB0aE1hcFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zY2VuZUNvbG9yTWFwUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUXVlcmllcyB0aGUgY2FtZXJhIGNvbXBvbmVudCdzIHVuZGVybHlpbmcgQ2FtZXJhIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHR5cGUge0NhbWVyYX1cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgZ2V0IGNhbWVyYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlIHRoZSBjYW1lcmEgd2lsbCBjbGVhciB0aGUgY29sb3IgYnVmZmVyIHRvIHRoZSBjb2xvciBzZXQgaW4gY2xlYXJDb2xvci4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCBjbGVhckNvbG9yQnVmZmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5jbGVhckNvbG9yQnVmZmVyID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZGlydHlMYXllckNvbXBvc2l0aW9uQ2FtZXJhcygpO1xuICAgIH1cblxuICAgIGdldCBjbGVhckNvbG9yQnVmZmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLmNsZWFyQ29sb3JCdWZmZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSB0aGUgY2FtZXJhIHdpbGwgY2xlYXIgdGhlIGRlcHRoIGJ1ZmZlci4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCBjbGVhckRlcHRoQnVmZmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5jbGVhckRlcHRoQnVmZmVyID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZGlydHlMYXllckNvbXBvc2l0aW9uQ2FtZXJhcygpO1xuICAgIH1cblxuICAgIGdldCBjbGVhckRlcHRoQnVmZmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLmNsZWFyRGVwdGhCdWZmZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSB0aGUgY2FtZXJhIHdpbGwgY2xlYXIgdGhlIHN0ZW5jaWwgYnVmZmVyLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgc2V0IGNsZWFyU3RlbmNpbEJ1ZmZlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jYW1lcmEuY2xlYXJTdGVuY2lsQnVmZmVyID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZGlydHlMYXllckNvbXBvc2l0aW9uQ2FtZXJhcygpO1xuICAgIH1cblxuICAgIGdldCBjbGVhclN0ZW5jaWxCdWZmZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEuY2xlYXJTdGVuY2lsQnVmZmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExheWVyIElEIG9mIGEgbGF5ZXIgb24gd2hpY2ggdGhlIHBvc3Rwcm9jZXNzaW5nIG9mIHRoZSBjYW1lcmEgc3RvcHMgYmVpbmcgYXBwbGllZCB0by5cbiAgICAgKiBEZWZhdWx0cyB0byBMQVlFUklEX1VJLCB3aGljaCBjYXVzZXMgcG9zdCBwcm9jZXNzaW5nIHRvIG5vdCBiZSBhcHBsaWVkIHRvIFVJIGxheWVyIGFuZCBhbnlcbiAgICAgKiBmb2xsb3dpbmcgbGF5ZXJzIGZvciB0aGUgY2FtZXJhLiBTZXQgdG8gdW5kZWZpbmVkIGZvciBwb3N0LXByb2Nlc3NpbmcgdG8gYmUgYXBwbGllZCB0byBhbGxcbiAgICAgKiBsYXllcnMgb2YgdGhlIGNhbWVyYS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IGRpc2FibGVQb3N0RWZmZWN0c0xheWVyKGxheWVyKSB7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVQb3N0RWZmZWN0c0xheWVyID0gbGF5ZXI7XG4gICAgICAgIHRoaXMuZGlydHlMYXllckNvbXBvc2l0aW9uQ2FtZXJhcygpO1xuICAgIH1cblxuICAgIGdldCBkaXNhYmxlUG9zdEVmZmVjdHNMYXllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVQb3N0RWZmZWN0c0xheWVyO1xuICAgIH1cblxuICAgIC8vIGJhc2VkIG9uIHRoZSB2YWx1ZSwgdGhlIGRlcHRoIGxheWVyJ3MgZW5hYmxlIGNvdW50ZXIgaXMgaW5jcmVtZW50ZWQgb3IgZGVjcmVtZW50ZWRcbiAgICBfZW5hYmxlRGVwdGhMYXllcih2YWx1ZSkge1xuICAgICAgICBjb25zdCBoYXNEZXB0aExheWVyID0gdGhpcy5sYXllcnMuZmluZChsYXllcklkID0+IGxheWVySWQgPT09IExBWUVSSURfREVQVEgpO1xuICAgICAgICBpZiAoaGFzRGVwdGhMYXllcikge1xuXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydCgnLi4vLi4vLi4vc2NlbmUvbGF5ZXIuanMnKS5MYXllcn0gKi9cbiAgICAgICAgICAgIGNvbnN0IGRlcHRoTGF5ZXIgPSB0aGlzLnN5c3RlbS5hcHAuc2NlbmUubGF5ZXJzLmdldExheWVyQnlJZChMQVlFUklEX0RFUFRIKTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZGVwdGhMYXllcj8uaW5jcmVtZW50Q291bnRlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXB0aExheWVyPy5kZWNyZW1lbnRDb3VudGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcXVlc3QgdGhlIHNjZW5lIHRvIGdlbmVyYXRlIGEgdGV4dHVyZSBjb250YWluaW5nIHRoZSBzY2VuZSBjb2xvciBtYXAuIE5vdGUgdGhhdCB0aGlzIGNhbGxcbiAgICAgKiBpcyBhY2N1bW11bGF0aXZlLCBhbmQgZm9yIGVhY2ggZW5hYmxlIHJlcXVlc3QsIGEgZGlzYWJsZSByZXF1ZXN0IG5lZWQgdG8gYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIC0gVHJ1ZSB0byByZXF1ZXN0IHRoZSBnZW5lcmF0aW9uLCBmYWxzZSB0byBkaXNhYmxlIGl0LlxuICAgICAqL1xuICAgIHJlcXVlc3RTY2VuZUNvbG9yTWFwKGVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyU2NlbmVDb2xvck1hcCArPSBlbmFibGVkID8gMSA6IC0xO1xuICAgICAgICBEZWJ1Zy5hc3NlcnQodGhpcy5fcmVuZGVyU2NlbmVDb2xvck1hcCA+PSAwKTtcbiAgICAgICAgY29uc3Qgb2sgPSB0aGlzLl9lbmFibGVEZXB0aExheWVyKGVuYWJsZWQpO1xuICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICBEZWJ1Zy53YXJuT25jZSgnQ2FtZXJhQ29tcG9uZW50LnJlcXVlc3RTY2VuZUNvbG9yTWFwIHdhcyBjYWxsZWQsIGJ1dCB0aGUgY2FtZXJhIGRvZXMgbm90IGhhdmUgYSBEZXB0aCBsYXllciwgaWdub3JpbmcuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXQgcmVuZGVyU2NlbmVDb2xvck1hcCh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgJiYgIXRoaXMuX3NjZW5lQ29sb3JNYXBSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFNjZW5lQ29sb3JNYXAodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZUNvbG9yTWFwUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9zY2VuZUNvbG9yTWFwUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RTY2VuZUNvbG9yTWFwKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lQ29sb3JNYXBSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCByZW5kZXJTY2VuZUNvbG9yTWFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyU2NlbmVDb2xvck1hcCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVxdWVzdCB0aGUgc2NlbmUgdG8gZ2VuZXJhdGUgYSB0ZXh0dXJlIGNvbnRhaW5pbmcgdGhlIHNjZW5lIGRlcHRoIG1hcC4gTm90ZSB0aGF0IHRoaXMgY2FsbFxuICAgICAqIGlzIGFjY3VtbXVsYXRpdmUsIGFuZCBmb3IgZWFjaCBlbmFibGUgcmVxdWVzdCwgYSBkaXNhYmxlIHJlcXVlc3QgbmVlZCB0byBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgLSBUcnVlIHRvIHJlcXVlc3QgdGhlIGdlbmVyYXRpb24sIGZhbHNlIHRvIGRpc2FibGUgaXQuXG4gICAgICovXG4gICAgcmVxdWVzdFNjZW5lRGVwdGhNYXAoZW5hYmxlZCkge1xuICAgICAgICB0aGlzLl9yZW5kZXJTY2VuZURlcHRoTWFwICs9IGVuYWJsZWQgPyAxIDogLTE7XG4gICAgICAgIERlYnVnLmFzc2VydCh0aGlzLl9yZW5kZXJTY2VuZURlcHRoTWFwID49IDApO1xuICAgICAgICBjb25zdCBvayA9IHRoaXMuX2VuYWJsZURlcHRoTGF5ZXIoZW5hYmxlZCk7XG4gICAgICAgIGlmICghb2spIHtcbiAgICAgICAgICAgIERlYnVnLndhcm5PbmNlKCdDYW1lcmFDb21wb25lbnQucmVxdWVzdFNjZW5lRGVwdGhNYXAgd2FzIGNhbGxlZCwgYnV0IHRoZSBjYW1lcmEgZG9lcyBub3QgaGF2ZSBhIERlcHRoIGxheWVyLCBpZ25vcmluZy4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldCByZW5kZXJTY2VuZURlcHRoTWFwKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiAhdGhpcy5fc2NlbmVEZXB0aE1hcFJlcXVlc3RlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0U2NlbmVEZXB0aE1hcCh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lRGVwdGhNYXBSZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3NjZW5lRGVwdGhNYXBSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFNjZW5lRGVwdGhNYXAoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5fc2NlbmVEZXB0aE1hcFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHJlbmRlclNjZW5lRGVwdGhNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJTY2VuZURlcHRoTWFwID4gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWVyaWVzIHRoZSBjYW1lcmEncyBmcnVzdHVtIHNoYXBlLlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi4vLi4vLi4vY29yZS9zaGFwZS9mcnVzdHVtLmpzJykuRnJ1c3R1bX1cbiAgICAgKi9cbiAgICBnZXQgZnJ1c3R1bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5mcnVzdHVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuIGFycmF5IG9mIGxheWVyIElEcyAoe0BsaW5rIExheWVyI2lkfSkgdG8gd2hpY2ggdGhpcyBjYW1lcmEgc2hvdWxkIGJlbG9uZy4gRG9uJ3QgcHVzaCxcbiAgICAgKiBwb3AsIHNwbGljZSBvciBtb2RpZnkgdGhpcyBhcnJheSwgaWYgeW91IHdhbnQgdG8gY2hhbmdlIGl0LCBzZXQgYSBuZXcgb25lIGluc3RlYWQuIERlZmF1bHRzXG4gICAgICogdG8gW0xBWUVSSURfV09STEQsIExBWUVSSURfREVQVEgsIExBWUVSSURfU0tZQk9YLCBMQVlFUklEX1VJLCBMQVlFUklEX0lNTUVESUFURV0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyW119XG4gICAgICovXG4gICAgc2V0IGxheWVycyhuZXdWYWx1ZSkge1xuICAgICAgICBjb25zdCBsYXllcnMgPSB0aGlzLl9jYW1lcmEubGF5ZXJzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnN5c3RlbS5hcHAuc2NlbmUubGF5ZXJzLmdldExheWVyQnlJZChsYXllcnNbaV0pO1xuICAgICAgICAgICAgaWYgKCFsYXllcikgY29udGludWU7XG4gICAgICAgICAgICBsYXllci5yZW1vdmVDYW1lcmEodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jYW1lcmEubGF5ZXJzID0gbmV3VmFsdWU7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgIXRoaXMuZW50aXR5LmVuYWJsZWQpIHJldHVybjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1ZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuc3lzdGVtLmFwcC5zY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeUlkKG5ld1ZhbHVlW2ldKTtcbiAgICAgICAgICAgIGlmICghbGF5ZXIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGF5ZXIuYWRkQ2FtZXJhKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGxheWVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5sYXllcnM7XG4gICAgfVxuXG4gICAgZ2V0IGxheWVyc1NldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5sYXllcnNTZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHBvc3QgZWZmZWN0cyBxdWV1ZSBmb3IgdGhpcyBjYW1lcmEuIFVzZSB0aGlzIHRvIGFkZCBvciByZW1vdmUgcG9zdCBlZmZlY3RzIGZyb20gdGhlIGNhbWVyYS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtQb3N0RWZmZWN0UXVldWV9XG4gICAgICovXG4gICAgZ2V0IHBvc3RFZmZlY3RzRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc3RFZmZlY3RzLmVuYWJsZWQ7XG4gICAgfVxuXG4gICAgZ2V0IHBvc3RFZmZlY3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zdEVmZmVjdHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIG9yZGVyIGluIHdoaWNoIGNhbWVyYXMgYXJlIHJlbmRlcmVkLiBDYW1lcmFzIHdpdGggc21hbGxlciB2YWx1ZXMgZm9yIHByaW9yaXR5XG4gICAgICogYXJlIHJlbmRlcmVkIGZpcnN0LiBEZWZhdWx0cyB0byAwLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgcHJpb3JpdHkobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcHJpb3JpdHkgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5kaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCk7XG4gICAgfVxuXG4gICAgZ2V0IHByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJpb3JpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUXVlcmllcyB0aGUgY2FtZXJhJ3MgcHJvamVjdGlvbiBtYXRyaXguXG4gICAgICpcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvbWF0NC5qcycpLk1hdDR9XG4gICAgICovXG4gICAgZ2V0IHByb2plY3Rpb25NYXRyaXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEucHJvamVjdGlvbk1hdHJpeDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FtZXJhIGFwZXJ0dXJlIGluIGYtc3RvcHMsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIDE2LjAuIEhpZ2hlciB2YWx1ZSBtZWFucyBsZXNzIGV4cG9zdXJlLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgYXBlcnR1cmUobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY2FtZXJhLmFwZXJ0dXJlID0gbmV3VmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGFwZXJ0dXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLmFwZXJ0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjYW1lcmEgc2Vuc2l0aXZpdHkgaW4gSVNPLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyAxMDAwLiBIaWdoZXIgdmFsdWUgbWVhbnMgbW9yZSBleHBvc3VyZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHNlbnNpdGl2aXR5KG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5zZW5zaXRpdml0eSA9IG5ld1ZhbHVlO1xuICAgIH1cblxuICAgIGdldCBzZW5zaXRpdml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5zZW5zaXRpdml0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FtZXJhIHNodXR0ZXIgc3BlZWQgaW4gc2Vjb25kcywgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMS8xMDAwcy4gTG9uZ2VyIHNodXR0ZXIgbWVhbnMgbW9yZSBleHBvc3VyZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHNodXR0ZXIobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY2FtZXJhLnNodXR0ZXIgPSBuZXdWYWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgc2h1dHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5zaHV0dGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHdoZXJlIG9uIHRoZSBzY3JlZW4gdGhlIGNhbWVyYSB3aWxsIGJlIHJlbmRlcmVkIGluIG5vcm1hbGl6ZWQgc2NyZWVuIGNvb3JkaW5hdGVzLlxuICAgICAqIERlZmF1bHRzIHRvIFswLCAwLCAxLCAxXS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoJy4uLy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJykuVmVjNH1cbiAgICAgKi9cbiAgICBzZXQgcmVjdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jYW1lcmEucmVjdCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmZpcmUoJ3NldDpyZWN0JywgdGhpcy5fY2FtZXJhLnJlY3QpO1xuICAgIH1cblxuICAgIGdldCByZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLnJlY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRhcmdldCB0byB3aGljaCByZW5kZXJpbmcgb2YgdGhlIGNhbWVyYXMgaXMgcGVyZm9ybWVkLiBJZiBub3Qgc2V0LCBpdCB3aWxsIHJlbmRlclxuICAgICAqIHNpbXBseSB0byB0aGUgc2NyZWVuLlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvcmVuZGVyLXRhcmdldC5qcycpLlJlbmRlclRhcmdldH1cbiAgICAgKi9cbiAgICBzZXQgcmVuZGVyVGFyZ2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5yZW5kZXJUYXJnZXQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5kaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCk7XG4gICAgfVxuXG4gICAgZ2V0IHJlbmRlclRhcmdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5yZW5kZXJUYXJnZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUXVlcmllcyB0aGUgY2FtZXJhJ3MgdmlldyBtYXRyaXguXG4gICAgICpcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvbWF0NC5qcycpLk1hdDR9XG4gICAgICovXG4gICAgZ2V0IHZpZXdNYXRyaXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEudmlld01hdHJpeDtcbiAgICB9XG5cbiAgICBkaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCkge1xuICAgICAgICAvLyBsYXllciBjb21wb3NpdGlvbiBuZWVkcyB0byB1cGRhdGUgb3JkZXJcbiAgICAgICAgY29uc3QgbGF5ZXJDb21wID0gdGhpcy5zeXN0ZW0uYXBwLnNjZW5lLmxheWVycztcbiAgICAgICAgbGF5ZXJDb21wLl9kaXJ0eUNhbWVyYXMgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgYSBwb2ludCBmcm9tIDJEIHNjcmVlbiBzcGFjZSB0byAzRCB3b3JsZCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY3JlZW54IC0gWCBjb29yZGluYXRlIG9uIFBsYXlDYW52YXMnIGNhbnZhcyBlbGVtZW50LiBTaG91bGQgYmUgaW4gdGhlIHJhbmdlXG4gICAgICogMCB0byBgY2FudmFzLm9mZnNldFdpZHRoYCBvZiB0aGUgYXBwbGljYXRpb24ncyBjYW52YXMgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NyZWVueSAtIFkgY29vcmRpbmF0ZSBvbiBQbGF5Q2FudmFzJyBjYW52YXMgZWxlbWVudC4gU2hvdWxkIGJlIGluIHRoZSByYW5nZVxuICAgICAqIDAgdG8gYGNhbnZhcy5vZmZzZXRIZWlnaHRgIG9mIHRoZSBhcHBsaWNhdGlvbidzIGNhbnZhcyBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjYW1lcmF6IC0gVGhlIGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSBpbiB3b3JsZCBzcGFjZSB0byBjcmVhdGUgdGhlIG5ld1xuICAgICAqIHBvaW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvdmVjMy5qcycpLlZlYzN9IFt3b3JsZENvb3JkXSAtIDNEIHZlY3RvciB0byByZWNlaXZlIHdvcmxkXG4gICAgICogY29vcmRpbmF0ZSByZXN1bHQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBHZXQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIG9mIGEgM0QgcmF5IGZpcmVkIGZyb20gYSBzY3JlZW4gY2xpY2sgcG9zaXRpb25cbiAgICAgKiB2YXIgc3RhcnQgPSBlbnRpdHkuY2FtZXJhLnNjcmVlblRvV29ybGQoY2xpY2tYLCBjbGlja1ksIGVudGl0eS5jYW1lcmEubmVhckNsaXApO1xuICAgICAqIHZhciBlbmQgPSBlbnRpdHkuY2FtZXJhLnNjcmVlblRvV29ybGQoY2xpY2tYLCBjbGlja1ksIGVudGl0eS5jYW1lcmEuZmFyQ2xpcCk7XG4gICAgICpcbiAgICAgKiAvLyBVc2UgdGhlIHJheSBjb29yZGluYXRlcyB0byBwZXJmb3JtIGEgcmF5Y2FzdFxuICAgICAqIGFwcC5zeXN0ZW1zLnJpZ2lkYm9keS5yYXljYXN0Rmlyc3Qoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIkVudGl0eSBcIiArIHJlc3VsdC5lbnRpdHkubmFtZSArIFwiIHdhcyBzZWxlY3RlZFwiKTtcbiAgICAgKiB9KTtcbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvdmVjMy5qcycpLlZlYzN9IFRoZSB3b3JsZCBzcGFjZSBjb29yZGluYXRlLlxuICAgICAqL1xuICAgIHNjcmVlblRvV29ybGQoc2NyZWVueCwgc2NyZWVueSwgY2FtZXJheiwgd29ybGRDb29yZCkge1xuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLnN5c3RlbS5hcHAuZ3JhcGhpY3NEZXZpY2U7XG4gICAgICAgIGNvbnN0IHcgPSBkZXZpY2UuY2xpZW50UmVjdC53aWR0aDtcbiAgICAgICAgY29uc3QgaCA9IGRldmljZS5jbGllbnRSZWN0LmhlaWdodDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5zY3JlZW5Ub1dvcmxkKHNjcmVlbngsIHNjcmVlbnksIGNhbWVyYXosIHcsIGgsIHdvcmxkQ29vcmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgYSBwb2ludCBmcm9tIDNEIHdvcmxkIHNwYWNlIHRvIDJEIHNjcmVlbiBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvdmVjMy5qcycpLlZlYzN9IHdvcmxkQ29vcmQgLSBUaGUgd29ybGQgc3BhY2UgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vLi4vY29yZS9tYXRoL3ZlYzMuanMnKS5WZWMzfSBbc2NyZWVuQ29vcmRdIC0gM0QgdmVjdG9yIHRvIHJlY2VpdmVcbiAgICAgKiBzY3JlZW4gY29vcmRpbmF0ZSByZXN1bHQuXG4gICAgICogQHJldHVybnMge2ltcG9ydCgnLi4vLi4vLi4vY29yZS9tYXRoL3ZlYzMuanMnKS5WZWMzfSBUaGUgc2NyZWVuIHNwYWNlIGNvb3JkaW5hdGUuXG4gICAgICovXG4gICAgd29ybGRUb1NjcmVlbih3b3JsZENvb3JkLCBzY3JlZW5Db29yZCkge1xuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLnN5c3RlbS5hcHAuZ3JhcGhpY3NEZXZpY2U7XG4gICAgICAgIGNvbnN0IHcgPSBkZXZpY2UuY2xpZW50UmVjdC53aWR0aDtcbiAgICAgICAgY29uc3QgaCA9IGRldmljZS5jbGllbnRSZWN0LmhlaWdodDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS53b3JsZFRvU2NyZWVuKHdvcmxkQ29vcmQsIHcsIGgsIHNjcmVlbkNvb3JkKTtcbiAgICB9XG5cbiAgICAvLyBjYWxsZWQgYmVmb3JlIGFwcGxpY2F0aW9uIHJlbmRlcnMgdGhlIHNjZW5lXG4gICAgb25BcHBQcmVyZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5fdmlld01hdERpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fY2FtZXJhLl92aWV3UHJvak1hdERpcnR5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBhZGRDYW1lcmFUb0xheWVycygpIHtcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gdGhpcy5sYXllcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuc3lzdGVtLmFwcC5zY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeUlkKGxheWVyc1tpXSk7XG4gICAgICAgICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBsYXllci5hZGRDYW1lcmEodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVDYW1lcmFGcm9tTGF5ZXJzKCkge1xuICAgICAgICBjb25zdCBsYXllcnMgPSB0aGlzLmxheWVycztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5zeXN0ZW0uYXBwLnNjZW5lLmxheWVycy5nZXRMYXllckJ5SWQobGF5ZXJzW2ldKTtcbiAgICAgICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgICAgIGxheWVyLnJlbW92ZUNhbWVyYSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTGF5ZXJzQ2hhbmdlZChvbGRDb21wLCBuZXdDb21wKSB7XG4gICAgICAgIHRoaXMuYWRkQ2FtZXJhVG9MYXllcnMoKTtcbiAgICAgICAgb2xkQ29tcC5vZmYoJ2FkZCcsIHRoaXMub25MYXllckFkZGVkLCB0aGlzKTtcbiAgICAgICAgb2xkQ29tcC5vZmYoJ3JlbW92ZScsIHRoaXMub25MYXllclJlbW92ZWQsIHRoaXMpO1xuICAgICAgICBuZXdDb21wLm9uKCdhZGQnLCB0aGlzLm9uTGF5ZXJBZGRlZCwgdGhpcyk7XG4gICAgICAgIG5ld0NvbXAub24oJ3JlbW92ZScsIHRoaXMub25MYXllclJlbW92ZWQsIHRoaXMpO1xuICAgIH1cblxuICAgIG9uTGF5ZXJBZGRlZChsYXllcikge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMubGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuICAgICAgICBpZiAoaW5kZXggPCAwKSByZXR1cm47XG4gICAgICAgIGxheWVyLmFkZENhbWVyYSh0aGlzKTtcbiAgICB9XG5cbiAgICBvbkxheWVyUmVtb3ZlZChsYXllcikge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMubGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuICAgICAgICBpZiAoaW5kZXggPCAwKSByZXR1cm47XG4gICAgICAgIGxheWVyLnJlbW92ZUNhbWVyYSh0aGlzKTtcbiAgICB9XG5cbiAgICBvbkVuYWJsZSgpIHtcbiAgICAgICAgY29uc3Qgc3lzdGVtID0gdGhpcy5zeXN0ZW07XG4gICAgICAgIGNvbnN0IHNjZW5lID0gc3lzdGVtLmFwcC5zY2VuZTtcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gc2NlbmUubGF5ZXJzO1xuXG4gICAgICAgIHN5c3RlbS5hZGRDYW1lcmEodGhpcyk7XG5cbiAgICAgICAgc2NlbmUub24oJ3NldDpsYXllcnMnLCB0aGlzLm9uTGF5ZXJzQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIGlmIChsYXllcnMpIHtcbiAgICAgICAgICAgIGxheWVycy5vbignYWRkJywgdGhpcy5vbkxheWVyQWRkZWQsIHRoaXMpO1xuICAgICAgICAgICAgbGF5ZXJzLm9uKCdyZW1vdmUnLCB0aGlzLm9uTGF5ZXJSZW1vdmVkLCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQgJiYgdGhpcy5lbnRpdHkuZW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5hZGRDYW1lcmFUb0xheWVycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wb3N0RWZmZWN0cy5lbmFibGUoKTtcbiAgICB9XG5cbiAgICBvbkRpc2FibGUoKSB7XG4gICAgICAgIGNvbnN0IHN5c3RlbSA9IHRoaXMuc3lzdGVtO1xuICAgICAgICBjb25zdCBzY2VuZSA9IHN5c3RlbS5hcHAuc2NlbmU7XG4gICAgICAgIGNvbnN0IGxheWVycyA9IHNjZW5lLmxheWVycztcblxuICAgICAgICB0aGlzLnBvc3RFZmZlY3RzLmRpc2FibGUoKTtcblxuICAgICAgICB0aGlzLnJlbW92ZUNhbWVyYUZyb21MYXllcnMoKTtcblxuICAgICAgICBzY2VuZS5vZmYoJ3NldDpsYXllcnMnLCB0aGlzLm9uTGF5ZXJzQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIGlmIChsYXllcnMpIHtcbiAgICAgICAgICAgIGxheWVycy5vZmYoJ2FkZCcsIHRoaXMub25MYXllckFkZGVkLCB0aGlzKTtcbiAgICAgICAgICAgIGxheWVycy5vZmYoJ3JlbW92ZScsIHRoaXMub25MYXllclJlbW92ZWQsIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3lzdGVtLnJlbW92ZUNhbWVyYSh0aGlzKTtcbiAgICB9XG5cbiAgICBvblJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5vbkRpc2FibGUoKTtcbiAgICAgICAgdGhpcy5vZmYoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIGFzcGVjdCByYXRpbyB2YWx1ZSBmb3IgYSBnaXZlbiByZW5kZXIgdGFyZ2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3JlbmRlci10YXJnZXQuanMnKS5SZW5kZXJUYXJnZXR9IFtydF0gLSBPcHRpb25hbFxuICAgICAqIHJlbmRlciB0YXJnZXQuIElmIHVuc3BlY2lmaWVkLCB0aGUgYmFja2J1ZmZlciBpcyB1c2VkLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBhc3BlY3QgcmF0aW8gb2YgdGhlIHJlbmRlciB0YXJnZXQgKG9yIGJhY2tidWZmZXIpLlxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUFzcGVjdFJhdGlvKHJ0KSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuc3lzdGVtLmFwcC5ncmFwaGljc0RldmljZTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBydCA/IHJ0LndpZHRoIDogZGV2aWNlLndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBydCA/IHJ0LmhlaWdodCA6IGRldmljZS5oZWlnaHQ7XG4gICAgICAgIHJldHVybiAod2lkdGggKiB0aGlzLnJlY3QueikgLyAoaGVpZ2h0ICogdGhpcy5yZWN0LncpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByZXBhcmUgdGhlIGNhbWVyYSBmb3IgZnJhbWUgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3JlbmRlci10YXJnZXQuanMnKS5SZW5kZXJUYXJnZXR9IHJ0IC0gUmVuZGVyXG4gICAgICogdGFyZ2V0IHRvIHdoaWNoIHJlbmRlcmluZyB3aWxsIGJlIHBlcmZvcm1lZC4gV2lsbCBhZmZlY3QgY2FtZXJhJ3MgYXNwZWN0IHJhdGlvLCBpZlxuICAgICAqIGFzcGVjdFJhdGlvTW9kZSBpcyB7QGxpbmsgQVNQRUNUX0FVVE99LlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBmcmFtZVVwZGF0ZShydCkge1xuICAgICAgICBpZiAodGhpcy5hc3BlY3RSYXRpb01vZGUgPT09IEFTUEVDVF9BVVRPKSB7XG4gICAgICAgICAgICB0aGlzLmFzcGVjdFJhdGlvID0gdGhpcy5jYWxjdWxhdGVBc3BlY3RSYXRpbyhydCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IFhSIHNlc3Npb24gd2l0aCB0aGlzIGNhbWVyYS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIHR5cGUgb2Ygc2Vzc2lvbi4gQ2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuICAgICAqXG4gICAgICogLSB7QGxpbmsgWFJUWVBFX0lOTElORX06IElubGluZSAtIGFsd2F5cyBhdmFpbGFibGUgdHlwZSBvZiBzZXNzaW9uLiBJdCBoYXMgbGltaXRlZCBmZWF0dXJlXG4gICAgICogYXZhaWxhYmlsaXR5IGFuZCBpcyByZW5kZXJlZCBpbnRvIEhUTUwgZWxlbWVudC5cbiAgICAgKiAtIHtAbGluayBYUlRZUEVfVlJ9OiBJbW1lcnNpdmUgVlIgLSBzZXNzaW9uIHRoYXQgcHJvdmlkZXMgZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgVlIgZGV2aWNlXG4gICAgICogd2l0aCB0aGUgYmVzdCBhdmFpbGFibGUgdHJhY2tpbmcgZmVhdHVyZXMuXG4gICAgICogLSB7QGxpbmsgWFJUWVBFX0FSfTogSW1tZXJzaXZlIEFSIC0gc2Vzc2lvbiB0aGF0IHByb3ZpZGVzIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIFZSL0FSXG4gICAgICogZGV2aWNlIHRoYXQgaXMgaW50ZW5kZWQgdG8gYmUgYmxlbmRlZCB3aXRoIHRoZSByZWFsLXdvcmxkIGVudmlyb25tZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNwYWNlVHlwZSAtIFJlZmVyZW5jZSBzcGFjZSB0eXBlLiBDYW4gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmc6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBYUlNQQUNFX1ZJRVdFUn06IFZpZXdlciAtIGFsd2F5cyBzdXBwb3J0ZWQgc3BhY2Ugd2l0aCBzb21lIGJhc2ljIHRyYWNraW5nXG4gICAgICogY2FwYWJpbGl0aWVzLlxuICAgICAqIC0ge0BsaW5rIFhSU1BBQ0VfTE9DQUx9OiBMb2NhbCAtIHJlcHJlc2VudHMgYSB0cmFja2luZyBzcGFjZSB3aXRoIGEgbmF0aXZlIG9yaWdpbiBuZWFyIHRoZVxuICAgICAqIHZpZXdlciBhdCB0aGUgdGltZSBvZiBjcmVhdGlvbi4gSXQgaXMgbWVhbnQgZm9yIHNlYXRlZCBvciBiYXNpYyBsb2NhbCBYUiBzZXNzaW9ucy5cbiAgICAgKiAtIHtAbGluayBYUlNQQUNFX0xPQ0FMRkxPT1J9OiBMb2NhbCBGbG9vciAtIHJlcHJlc2VudHMgYSB0cmFja2luZyBzcGFjZSB3aXRoIGEgbmF0aXZlIG9yaWdpblxuICAgICAqIGF0IHRoZSBmbG9vciBpbiBhIHNhZmUgcG9zaXRpb24gZm9yIHRoZSB1c2VyIHRvIHN0YW5kLiBUaGUgeS1heGlzIGVxdWFscyAwIGF0IGZsb29yIGxldmVsLlxuICAgICAqIEZsb29yIGxldmVsIHZhbHVlIG1pZ2h0IGJlIGVzdGltYXRlZCBieSB0aGUgdW5kZXJseWluZyBwbGF0Zm9ybS4gSXQgaXMgbWVhbnQgZm9yIHNlYXRlZCBvclxuICAgICAqIGJhc2ljIGxvY2FsIFhSIHNlc3Npb25zLlxuICAgICAqIC0ge0BsaW5rIFhSU1BBQ0VfQk9VTkRFREZMT09SfTogQm91bmRlZCBGbG9vciAtIHJlcHJlc2VudHMgYSB0cmFja2luZyBzcGFjZSB3aXRoIGl0cyBuYXRpdmVcbiAgICAgKiBvcmlnaW4gYXQgdGhlIGZsb29yLCB3aGVyZSB0aGUgdXNlciBpcyBleHBlY3RlZCB0byBtb3ZlIHdpdGhpbiBhIHByZS1lc3RhYmxpc2hlZCBib3VuZGFyeS5cbiAgICAgKiAtIHtAbGluayBYUlNQQUNFX1VOQk9VTkRFRH06IFVuYm91bmRlZCAtIHJlcHJlc2VudHMgYSB0cmFja2luZyBzcGFjZSB3aGVyZSB0aGUgdXNlciBpc1xuICAgICAqIGV4cGVjdGVkIHRvIG1vdmUgZnJlZWx5IGFyb3VuZCB0aGVpciBlbnZpcm9ubWVudCwgcG90ZW50aWFsbHkgbG9uZyBkaXN0YW5jZXMgZnJvbSB0aGVpclxuICAgICAqIHN0YXJ0aW5nIHBvaW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIE9iamVjdCB3aXRoIG9wdGlvbnMgZm9yIFhSIHNlc3Npb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gW29wdGlvbnMub3B0aW9uYWxGZWF0dXJlc10gLSBPcHRpb25hbCBmZWF0dXJlcyBmb3IgWFJTZXNzaW9uIHN0YXJ0LiBJdCBpc1xuICAgICAqIHVzZWQgZm9yIGdldHRpbmcgYWNjZXNzIHRvIGFkZGl0aW9uYWwgV2ViWFIgc3BlYyBleHRlbnNpb25zLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaW1hZ2VUcmFja2luZ10gLSBTZXQgdG8gdHJ1ZSB0byBhdHRlbXB0IHRvIGVuYWJsZSB7QGxpbmsgWHJJbWFnZVRyYWNraW5nfS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnBsYW5lRGV0ZWN0aW9uXSAtIFNldCB0byB0cnVlIHRvIGF0dGVtcHQgdG8gZW5hYmxlIHtAbGluayBYclBsYW5lRGV0ZWN0aW9ufS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4veHIveHItbWFuYWdlci5qcycpLlhyRXJyb3JDYWxsYmFja30gW29wdGlvbnMuY2FsbGJhY2tdIC0gT3B0aW9uYWxcbiAgICAgKiBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgb25jZSB0aGUgc2Vzc2lvbiBpcyBzdGFydGVkLiBUaGUgY2FsbGJhY2sgaGFzIG9uZSBhcmd1bWVudCBFcnJvciAtXG4gICAgICogaXQgaXMgbnVsbCBpZiB0aGUgWFIgc2Vzc2lvbiBzdGFydGVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuZGVwdGhTZW5zaW5nXSAtIE9wdGlvbmFsIG9iamVjdCB3aXRoIGRlcHRoIHNlbnNpbmcgcGFyYW1ldGVycyB0b1xuICAgICAqIGF0dGVtcHQgdG8gZW5hYmxlIHtAbGluayBYckRlcHRoU2Vuc2luZ30uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmRlcHRoU2Vuc2luZy51c2FnZVByZWZlcmVuY2VdIC0gT3B0aW9uYWwgdXNhZ2UgcHJlZmVyZW5jZSBmb3IgZGVwdGhcbiAgICAgKiBzZW5zaW5nLCBjYW4gYmUgJ2NwdS1vcHRpbWl6ZWQnIG9yICdncHUtb3B0aW1pemVkJyAoWFJERVBUSFNFTlNJTkdVU0FHRV8qKSwgZGVmYXVsdHMgdG9cbiAgICAgKiAnY3B1LW9wdGltaXplZCcuIE1vc3QgcHJlZmVycmVkIGFuZCBzdXBwb3J0ZWQgd2lsbCBiZSBjaG9zZW4gYnkgdGhlIHVuZGVybHlpbmcgZGVwdGggc2Vuc2luZ1xuICAgICAqIHN5c3RlbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZGVwdGhTZW5zaW5nLmRhdGFGb3JtYXRQcmVmZXJlbmNlXSAtIE9wdGlvbmFsIGRhdGEgZm9ybWF0XG4gICAgICogcHJlZmVyZW5jZSBmb3IgZGVwdGggc2Vuc2luZy4gQ2FuIGJlICdsdW1pbmFuY2UtYWxwaGEnIG9yICdmbG9hdDMyJyAoWFJERVBUSFNFTlNJTkdGT1JNQVRfKiksXG4gICAgICogZGVmYXVsdHMgdG8gJ2x1bWluYW5jZS1hbHBoYScuIE1vc3QgcHJlZmVycmVkIGFuZCBzdXBwb3J0ZWQgd2lsbCBiZSBjaG9zZW4gYnkgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBkZXB0aCBzZW5zaW5nIHN5c3RlbS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIE9uIGFuIGVudGl0eSB3aXRoIGEgY2FtZXJhIGNvbXBvbmVudFxuICAgICAqIHRoaXMuZW50aXR5LmNhbWVyYS5zdGFydFhyKHBjLlhSVFlQRV9WUiwgcGMuWFJTUEFDRV9MT0NBTCwge1xuICAgICAqICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGVycikge1xuICAgICAqICAgICAgICAgaWYgKGVycikge1xuICAgICAqICAgICAgICAgICAgIC8vIGZhaWxlZCB0byBzdGFydCBYUiBzZXNzaW9uXG4gICAgICogICAgICAgICB9IGVsc2Uge1xuICAgICAqICAgICAgICAgICAgIC8vIGluIFhSXG4gICAgICogICAgICAgICB9XG4gICAgICogICAgIH1cbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBzdGFydFhyKHR5cGUsIHNwYWNlVHlwZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnN5c3RlbS5hcHAueHIuc3RhcnQodGhpcywgdHlwZSwgc3BhY2VUeXBlLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIGVuZCBYUiBzZXNzaW9uIG9mIHRoaXMgY2FtZXJhLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL3hyL3hyLW1hbmFnZXIuanMnKS5YckVycm9yQ2FsbGJhY2t9IFtjYWxsYmFja10gLSBPcHRpb25hbCBjYWxsYmFja1xuICAgICAqIGZ1bmN0aW9uIGNhbGxlZCBvbmNlIHNlc3Npb24gaXMgZW5kZWQuIFRoZSBjYWxsYmFjayBoYXMgb25lIGFyZ3VtZW50IEVycm9yIC0gaXQgaXMgbnVsbCBpZlxuICAgICAqIHN1Y2Nlc3NmdWxseSBlbmRlZCBYUiBzZXNzaW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gT24gYW4gZW50aXR5IHdpdGggYSBjYW1lcmEgY29tcG9uZW50XG4gICAgICogdGhpcy5lbnRpdHkuY2FtZXJhLmVuZFhyKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgKiAgICAgLy8gbm90IGFueW1vcmUgaW4gWFJcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBlbmRYcihjYWxsYmFjaykge1xuICAgICAgICBpZiAoIXRoaXMuX2NhbWVyYS54cikge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhuZXcgRXJyb3IoJ0NhbWVyYSBpcyBub3QgaW4gWFInKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jYW1lcmEueHIuZW5kKGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvLyBmdW5jdGlvbiB0byBjb3B5IHByb3BlcnRpZXMgZnJvbSB0aGUgc291cmNlIENhbWVyYUNvbXBvbmVudC5cbiAgICAvLyBwcm9wZXJ0aWVzIG5vdCBjb3BpZWQ6IHBvc3RFZmZlY3RzXG4gICAgLy8gaW5oZXJpdGVkIHByb3BlcnRpZXMgbm90IGNvcGllZCAoYWxsKTogc3lzdGVtLCBlbnRpdHksIGVuYWJsZWQpXG4gICAgY29weShzb3VyY2UpIHtcblxuICAgICAgICAvLyBjb3B5IGRhdGEgZHJpdmVuIHByb3BlcnRpZXNcbiAgICAgICAgcHJvcGVydGllcy5mb3JFYWNoKChwcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFwcm9wZXJ0eS5yZWFkb25seSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBwcm9wZXJ0eS5uYW1lO1xuICAgICAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBzb3VyY2VbbmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIG90aGVyIHByb3BlcnRpZXNcbiAgICAgICAgdGhpcy5jbGVhckNvbG9yQnVmZmVyID0gc291cmNlLmNsZWFyQ29sb3JCdWZmZXI7XG4gICAgICAgIHRoaXMuY2xlYXJEZXB0aEJ1ZmZlciA9IHNvdXJjZS5jbGVhckRlcHRoQnVmZmVyO1xuICAgICAgICB0aGlzLmNsZWFyU3RlbmNpbEJ1ZmZlciA9IHNvdXJjZS5jbGVhclN0ZW5jaWxCdWZmZXI7XG4gICAgICAgIHRoaXMuZGlzYWJsZVBvc3RFZmZlY3RzTGF5ZXIgPSBzb3VyY2UuZGlzYWJsZVBvc3RFZmZlY3RzTGF5ZXI7XG4gICAgICAgIHRoaXMubGF5ZXJzID0gc291cmNlLmxheWVycztcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHNvdXJjZS5wcmlvcml0eTtcbiAgICAgICAgdGhpcy5yZW5kZXJUYXJnZXQgPSBzb3VyY2UucmVuZGVyVGFyZ2V0O1xuICAgICAgICB0aGlzLnJlY3QgPSBzb3VyY2UucmVjdDtcbiAgICAgICAgdGhpcy5hcGVydHVyZSA9IHNvdXJjZS5hcGVydHVyZTtcbiAgICAgICAgdGhpcy5zZW5zaXRpdml0eSA9IHNvdXJjZS5zZW5zaXRpdml0eTtcbiAgICAgICAgdGhpcy5zaHV0dGVyID0gc291cmNlLnNodXR0ZXI7XG4gICAgfVxufVxuXG4vLyBmb3IgY29tbW9uIHByb3BlcnRpZXMsIGNyZWF0ZSBnZXR0ZXJzIGFuZCBzZXR0ZXJzIHdoaWNoIHVzZSB0aGlzLl9jYW1lcmEgYXMgYSBzdG9yYWdlIGZvciB0aGVpciB2YWx1ZXNcbnByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICBjb25zdCBuYW1lID0gcHJvcGVydHkubmFtZTtcbiAgICBjb25zdCBvcHRpb25zID0ge307XG5cbiAgICAvLyBnZXR0ZXJcbiAgICBvcHRpb25zLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYVtuYW1lXTtcbiAgICB9O1xuXG4gICAgLy8gc2V0dGVyXG4gICAgaWYgKCFwcm9wZXJ0eS5yZWFkb25seSkge1xuICAgICAgICBvcHRpb25zLnNldCA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FtZXJhW25hbWVdID0gbmV3VmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhbWVyYUNvbXBvbmVudC5wcm90b3R5cGUsIG5hbWUsIG9wdGlvbnMpO1xufSk7XG5cbmV4cG9ydCB7IENhbWVyYUNvbXBvbmVudCB9O1xuIl0sIm5hbWVzIjpbInByb3BlcnRpZXMiLCJuYW1lIiwicmVhZG9ubHkiLCJDYW1lcmFDb21wb25lbnQiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInN5c3RlbSIsImVudGl0eSIsIm9uUG9zdHByb2Nlc3NpbmciLCJvblByZVJlbmRlciIsIm9uUG9zdFJlbmRlciIsIl9yZW5kZXJTY2VuZURlcHRoTWFwIiwiX3JlbmRlclNjZW5lQ29sb3JNYXAiLCJfY2FtZXJhIiwiQ2FtZXJhIiwibm9kZSIsIl9wcmlvcml0eSIsIl9kaXNhYmxlUG9zdEVmZmVjdHNMYXllciIsIkxBWUVSSURfVUkiLCJfcG9zdEVmZmVjdHMiLCJQb3N0RWZmZWN0UXVldWUiLCJhcHAiLCJfc2NlbmVEZXB0aE1hcFJlcXVlc3RlZCIsIl9zY2VuZUNvbG9yTWFwUmVxdWVzdGVkIiwiY2FtZXJhIiwiY2xlYXJDb2xvckJ1ZmZlciIsInZhbHVlIiwiZGlydHlMYXllckNvbXBvc2l0aW9uQ2FtZXJhcyIsImNsZWFyRGVwdGhCdWZmZXIiLCJjbGVhclN0ZW5jaWxCdWZmZXIiLCJkaXNhYmxlUG9zdEVmZmVjdHNMYXllciIsImxheWVyIiwiX2VuYWJsZURlcHRoTGF5ZXIiLCJoYXNEZXB0aExheWVyIiwibGF5ZXJzIiwiZmluZCIsImxheWVySWQiLCJMQVlFUklEX0RFUFRIIiwiZGVwdGhMYXllciIsInNjZW5lIiwiZ2V0TGF5ZXJCeUlkIiwiaW5jcmVtZW50Q291bnRlciIsImRlY3JlbWVudENvdW50ZXIiLCJyZXF1ZXN0U2NlbmVDb2xvck1hcCIsImVuYWJsZWQiLCJEZWJ1ZyIsImFzc2VydCIsIm9rIiwid2Fybk9uY2UiLCJyZW5kZXJTY2VuZUNvbG9yTWFwIiwicmVxdWVzdFNjZW5lRGVwdGhNYXAiLCJyZW5kZXJTY2VuZURlcHRoTWFwIiwiZnJ1c3R1bSIsIm5ld1ZhbHVlIiwiaSIsImxlbmd0aCIsInJlbW92ZUNhbWVyYSIsImFkZENhbWVyYSIsImxheWVyc1NldCIsInBvc3RFZmZlY3RzRW5hYmxlZCIsInBvc3RFZmZlY3RzIiwicHJpb3JpdHkiLCJwcm9qZWN0aW9uTWF0cml4IiwiYXBlcnR1cmUiLCJzZW5zaXRpdml0eSIsInNodXR0ZXIiLCJyZWN0IiwiZmlyZSIsInJlbmRlclRhcmdldCIsInZpZXdNYXRyaXgiLCJsYXllckNvbXAiLCJfZGlydHlDYW1lcmFzIiwic2NyZWVuVG9Xb3JsZCIsInNjcmVlbngiLCJzY3JlZW55IiwiY2FtZXJheiIsIndvcmxkQ29vcmQiLCJkZXZpY2UiLCJncmFwaGljc0RldmljZSIsInciLCJjbGllbnRSZWN0Iiwid2lkdGgiLCJoIiwiaGVpZ2h0Iiwid29ybGRUb1NjcmVlbiIsInNjcmVlbkNvb3JkIiwib25BcHBQcmVyZW5kZXIiLCJfdmlld01hdERpcnR5IiwiX3ZpZXdQcm9qTWF0RGlydHkiLCJhZGRDYW1lcmFUb0xheWVycyIsInJlbW92ZUNhbWVyYUZyb21MYXllcnMiLCJvbkxheWVyc0NoYW5nZWQiLCJvbGRDb21wIiwibmV3Q29tcCIsIm9mZiIsIm9uTGF5ZXJBZGRlZCIsIm9uTGF5ZXJSZW1vdmVkIiwib24iLCJpbmRleCIsImluZGV4T2YiLCJpZCIsIm9uRW5hYmxlIiwiZW5hYmxlIiwib25EaXNhYmxlIiwiZGlzYWJsZSIsIm9uUmVtb3ZlIiwiY2FsY3VsYXRlQXNwZWN0UmF0aW8iLCJydCIsInoiLCJmcmFtZVVwZGF0ZSIsImFzcGVjdFJhdGlvTW9kZSIsIkFTUEVDVF9BVVRPIiwiYXNwZWN0UmF0aW8iLCJzdGFydFhyIiwidHlwZSIsInNwYWNlVHlwZSIsIm9wdGlvbnMiLCJ4ciIsInN0YXJ0IiwiZW5kWHIiLCJjYWxsYmFjayIsIkVycm9yIiwiZW5kIiwiY29weSIsInNvdXJjZSIsImZvckVhY2giLCJwcm9wZXJ0eSIsImdldCIsInNldCIs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
