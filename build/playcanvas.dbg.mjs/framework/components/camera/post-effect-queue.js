/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { FILTER_NEAREST, ADDRESS_CLAMP_TO_EDGE, PIXELFORMAT_RGBA8 } from '../../../platform/graphics/constants.js';
import { DebugGraphics } from '../../../platform/graphics/debug-graphics.js';
import { RenderTarget } from '../../../platform/graphics/render-target.js';
import { Texture } from '../../../platform/graphics/texture.js';
import { LAYERID_DEPTH } from '../../../scene/constants.js';

class PostEffect {
  constructor(effect, inputTarget) {
    this.effect = effect;
    this.inputTarget = inputTarget;
    this.outputTarget = null;
    this.name = effect.constructor.name;
  }
}

class PostEffectQueue {
  constructor(app, camera) {
    this.app = app;
    this.camera = camera;

    this.destinationRenderTarget = null;

    this.effects = [];

    this.enabled = false;

    this.depthTarget = null;
    camera.on('set:rect', this.onCameraRectChanged, this);
  }

  _allocateColorBuffer(format, name) {
    const rect = this.camera.rect;
    const width = Math.floor(rect.z * this.app.graphicsDevice.width);
    const height = Math.floor(rect.w * this.app.graphicsDevice.height);
    const colorBuffer = new Texture(this.app.graphicsDevice, {
      name: name,
      format: format,
      width: width,
      height: height,
      mipmaps: false,
      minFilter: FILTER_NEAREST,
      magFilter: FILTER_NEAREST,
      addressU: ADDRESS_CLAMP_TO_EDGE,
      addressV: ADDRESS_CLAMP_TO_EDGE
    });
    return colorBuffer;
  }

  _createOffscreenTarget(useDepth, hdr) {
    const device = this.app.graphicsDevice;
    const format = hdr && device.getHdrFormat(false, true, false, false) || PIXELFORMAT_RGBA8;
    const name = this.camera.entity.name + '-posteffect-' + this.effects.length;
    const colorBuffer = this._allocateColorBuffer(format, name);
    return new RenderTarget({
      colorBuffer: colorBuffer,
      depth: useDepth,
      stencil: useDepth && this.app.graphicsDevice.supportsStencil,
      samples: useDepth ? device.samples : 1
    });
  }
  _resizeOffscreenTarget(rt) {
    const format = rt.colorBuffer.format;
    const name = rt.colorBuffer.name;
    rt.destroyFrameBuffers();
    rt.destroyTextureBuffers();
    rt._colorBuffer = this._allocateColorBuffer(format, name);
  }
  _destroyOffscreenTarget(rt) {
    rt.destroyTextureBuffers();
    rt.destroy();
  }

  addEffect(effect) {
    const effects = this.effects;
    const isFirstEffect = effects.length === 0;
    const inputTarget = this._createOffscreenTarget(isFirstEffect, effect.hdr);
    const newEntry = new PostEffect(effect, inputTarget);
    effects.push(newEntry);
    this._sourceTarget = newEntry.inputTarget;

    if (effects.length > 1) {
      effects[effects.length - 2].outputTarget = newEntry.inputTarget;
    }

    this._newPostEffect = effect;
    if (effect.needsDepthBuffer) {
      this._requestDepthMap();
    }
    this.enable();
    this._newPostEffect = undefined;
  }

  removeEffect(effect) {
    let index = -1;
    for (let i = 0, len = this.effects.length; i < len; i++) {
      if (this.effects[i].effect === effect) {
        index = i;
        break;
      }
    }
    if (index >= 0) {
      if (index > 0) {
        this.effects[index - 1].outputTarget = index + 1 < this.effects.length ? this.effects[index + 1].inputTarget : null;
      } else {
        if (this.effects.length > 1) {
          if (!this.effects[1].inputTarget._depth) {
            this._destroyOffscreenTarget(this.effects[1].inputTarget);
            this.effects[1].inputTarget = this._createOffscreenTarget(true, this.effects[1].hdr);
            this._sourceTarget = this.effects[1].inputTarget;
          }
          this.camera.renderTarget = this.effects[1].inputTarget;
        }
      }

      this._destroyOffscreenTarget(this.effects[index].inputTarget);
      this.effects.splice(index, 1);
    }
    if (this.enabled) {
      if (effect.needsDepthBuffer) {
        this._releaseDepthMap();
      }
    }
    if (this.effects.length === 0) {
      this.disable();
    }
  }
  _requestDepthMaps() {
    for (let i = 0, len = this.effects.length; i < len; i++) {
      const effect = this.effects[i].effect;
      if (this._newPostEffect === effect) continue;
      if (effect.needsDepthBuffer) {
        this._requestDepthMap();
      }
    }
  }
  _releaseDepthMaps() {
    for (let i = 0, len = this.effects.length; i < len; i++) {
      const effect = this.effects[i].effect;
      if (effect.needsDepthBuffer) {
        this._releaseDepthMap();
      }
    }
  }
  _requestDepthMap() {
    const depthLayer = this.app.scene.layers.getLayerById(LAYERID_DEPTH);
    if (depthLayer) {
      depthLayer.incrementCounter();
      this.camera.requestSceneDepthMap(true);
    }
  }
  _releaseDepthMap() {
    const depthLayer = this.app.scene.layers.getLayerById(LAYERID_DEPTH);
    if (depthLayer) {
      depthLayer.decrementCounter();
      this.camera.requestSceneDepthMap(false);
    }
  }

  destroy() {
    for (let i = 0, len = this.effects.length; i < len; i++) {
      this.effects[i].inputTarget.destroy();
    }
    this.effects.length = 0;
    this.disable();
  }

  enable() {
    if (!this.enabled && this.effects.length) {
      this.enabled = true;
      this._requestDepthMaps();
      this.app.graphicsDevice.on('resizecanvas', this._onCanvasResized, this);

      this.destinationRenderTarget = this.camera.renderTarget;

      this.camera.renderTarget = this.effects[0].inputTarget;

      this.camera.onPostprocessing = () => {
        if (this.enabled) {
          let rect = null;
          const len = this.effects.length;
          if (len) {
            for (let i = 0; i < len; i++) {
              const fx = this.effects[i];
              let destTarget = fx.outputTarget;

              if (i === len - 1) {
                rect = this.camera.rect;

                if (this.destinationRenderTarget) {
                  destTarget = this.destinationRenderTarget;
                }
              }
              DebugGraphics.pushGpuMarker(this.app.graphicsDevice, fx.name);
              fx.effect.render(fx.inputTarget, destTarget, rect);
              DebugGraphics.popGpuMarker(this.app.graphicsDevice);
            }
          }
        }
      };
    }
  }

  disable() {
    if (this.enabled) {
      this.enabled = false;
      this.app.graphicsDevice.off('resizecanvas', this._onCanvasResized, this);
      this._releaseDepthMaps();
      this._destroyOffscreenTarget(this._sourceTarget);
      this.camera.renderTarget = null;
      this.camera.onPostprocessing = null;
    }
  }

  _onCanvasResized(width, height) {
    const rect = this.camera.rect;
    const device = this.app.graphicsDevice;
    this.camera.camera.aspectRatio = device.width * rect.z / (device.height * rect.w);
    this.resizeRenderTargets();
  }
  resizeRenderTargets() {
    const rect = this.camera.rect;
    const desiredWidth = Math.floor(rect.z * this.app.graphicsDevice.width);
    const desiredHeight = Math.floor(rect.w * this.app.graphicsDevice.height);
    const effects = this.effects;
    for (let i = 0, len = effects.length; i < len; i++) {
      const fx = effects[i];
      if (fx.inputTarget.width !== desiredWidth || fx.inputTarget.height !== desiredHeight) {
        this._resizeOffscreenTarget(fx.inputTarget);
      }
    }
  }
  onCameraRectChanged(name, oldValue, newValue) {
    if (this.enabled) {
      this.resizeRenderTargets();
    }
  }
}

export { PostEffectQueue };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zdC1lZmZlY3QtcXVldWUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50cy9jYW1lcmEvcG9zdC1lZmZlY3QtcXVldWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUREUkVTU19DTEFNUF9UT19FREdFLCBGSUxURVJfTkVBUkVTVCwgUElYRUxGT1JNQVRfUkdCQTggfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgRGVidWdHcmFwaGljcyB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2RlYnVnLWdyYXBoaWNzLmpzJztcbmltcG9ydCB7IFJlbmRlclRhcmdldCB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3JlbmRlci10YXJnZXQuanMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3RleHR1cmUuanMnO1xuXG5pbXBvcnQgeyBMQVlFUklEX0RFUFRIIH0gZnJvbSAnLi4vLi4vLi4vc2NlbmUvY29uc3RhbnRzLmpzJztcblxuY2xhc3MgUG9zdEVmZmVjdCB7XG4gICAgY29uc3RydWN0b3IoZWZmZWN0LCBpbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmVmZmVjdCA9IGVmZmVjdDtcbiAgICAgICAgdGhpcy5pbnB1dFRhcmdldCA9IGlucHV0VGFyZ2V0O1xuICAgICAgICB0aGlzLm91dHB1dFRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMubmFtZSA9IGVmZmVjdC5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBVc2VkIHRvIG1hbmFnZSBtdWx0aXBsZSBwb3N0IGVmZmVjdHMgZm9yIGEgY2FtZXJhLlxuICovXG5jbGFzcyBQb3N0RWZmZWN0UXVldWUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBQb3N0RWZmZWN0UXVldWUgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vYXBwLWJhc2UuanMnKS5BcHBCYXNlfSBhcHAgLSBUaGUgYXBwbGljYXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vY29tcG9uZW50LmpzJykuQ2FtZXJhQ29tcG9uZW50fSBjYW1lcmEgLSBUaGUgY2FtZXJhIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHAsIGNhbWVyYSkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciB0YXJnZXQgd2hlcmUgdGhlIHBvc3Rwcm9jZXNzZWQgaW1hZ2UgbmVlZHMgdG8gYmUgcmVuZGVyZWQgdG8uIERlZmF1bHRzIHRvIG51bGxcbiAgICAgICAgICogd2hpY2ggaXMgbWFpbiBmcmFtZWJ1ZmZlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge1JlbmRlclRhcmdldH1cbiAgICAgICAgICogQGlnbm9yZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvblJlbmRlclRhcmdldCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbCBvZiB0aGUgcG9zdCBlZmZlY3RzIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge1Bvc3RFZmZlY3RbXX1cbiAgICAgICAgICogQGlnbm9yZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lZmZlY3RzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSBxdWV1ZSBpcyBlbmFibGVkIGl0IHdpbGwgcmVuZGVyIGFsbCBvZiBpdHMgZWZmZWN0cywgb3RoZXJ3aXNlIGl0IHdpbGwgbm90IHJlbmRlclxuICAgICAgICAgKiBhbnl0aGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBpZ25vcmVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGxlZ2FjeVxuICAgICAgICB0aGlzLmRlcHRoVGFyZ2V0ID0gbnVsbDtcblxuICAgICAgICBjYW1lcmEub24oJ3NldDpyZWN0JywgdGhpcy5vbkNhbWVyYVJlY3RDaGFuZ2VkLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBhIGNvbG9yIGJ1ZmZlciB0ZXh0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZvcm1hdCAtIFRoZSBmb3JtYXQgb2YgdGhlIGNvbG9yIGJ1ZmZlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjb2xvciBidWZmZXIuXG4gICAgICogQHJldHVybnMge1RleHR1cmV9IFRoZSBjb2xvciBidWZmZXIgdGV4dHVyZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9hbGxvY2F0ZUNvbG9yQnVmZmVyKGZvcm1hdCwgbmFtZSkge1xuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW1lcmEucmVjdDtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLmZsb29yKHJlY3QueiAqIHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLndpZHRoKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5mbG9vcihyZWN0LncgKiB0aGlzLmFwcC5ncmFwaGljc0RldmljZS5oZWlnaHQpO1xuXG4gICAgICAgIGNvbnN0IGNvbG9yQnVmZmVyID0gbmV3IFRleHR1cmUodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgbWlwbWFwczogZmFsc2UsXG4gICAgICAgICAgICBtaW5GaWx0ZXI6IEZJTFRFUl9ORUFSRVNULFxuICAgICAgICAgICAgbWFnRmlsdGVyOiBGSUxURVJfTkVBUkVTVCxcbiAgICAgICAgICAgIGFkZHJlc3NVOiBBRERSRVNTX0NMQU1QX1RPX0VER0UsXG4gICAgICAgICAgICBhZGRyZXNzVjogQUREUkVTU19DTEFNUF9UT19FREdFXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb2xvckJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVuZGVyIHRhcmdldCB3aXRoIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMsIHdpdGggYW4gb3B0aW9uYWwgZGVwdGggYnVmZmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1c2VEZXB0aCAtIFNldCB0byB0cnVlIHRvIGNyZWF0ZSBhIHJlbmRlciB0YXJnZXQgd2l0aCBhIGRlcHRoIGJ1ZmZlci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhkciAtIFVzZSBIRFIgcmVuZGVyIHRhcmdldCBmb3JtYXQuXG4gICAgICogQHJldHVybnMge1JlbmRlclRhcmdldH0gVGhlIHJlbmRlciB0YXJnZXQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY3JlYXRlT2Zmc2NyZWVuVGFyZ2V0KHVzZURlcHRoLCBoZHIpIHtcblxuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLmFwcC5ncmFwaGljc0RldmljZTtcbiAgICAgICAgY29uc3QgZm9ybWF0ID0gaGRyICYmIGRldmljZS5nZXRIZHJGb3JtYXQoZmFsc2UsIHRydWUsIGZhbHNlLCBmYWxzZSkgfHwgUElYRUxGT1JNQVRfUkdCQTg7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNhbWVyYS5lbnRpdHkubmFtZSArICctcG9zdGVmZmVjdC0nICsgdGhpcy5lZmZlY3RzLmxlbmd0aDtcblxuICAgICAgICBjb25zdCBjb2xvckJ1ZmZlciA9IHRoaXMuX2FsbG9jYXRlQ29sb3JCdWZmZXIoZm9ybWF0LCBuYW1lKTtcblxuICAgICAgICByZXR1cm4gbmV3IFJlbmRlclRhcmdldCh7XG4gICAgICAgICAgICBjb2xvckJ1ZmZlcjogY29sb3JCdWZmZXIsXG4gICAgICAgICAgICBkZXB0aDogdXNlRGVwdGgsXG4gICAgICAgICAgICBzdGVuY2lsOiB1c2VEZXB0aCAmJiB0aGlzLmFwcC5ncmFwaGljc0RldmljZS5zdXBwb3J0c1N0ZW5jaWwsXG4gICAgICAgICAgICBzYW1wbGVzOiB1c2VEZXB0aCA/IGRldmljZS5zYW1wbGVzIDogMVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfcmVzaXplT2Zmc2NyZWVuVGFyZ2V0KHJ0KSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHJ0LmNvbG9yQnVmZmVyLmZvcm1hdDtcbiAgICAgICAgY29uc3QgbmFtZSA9IHJ0LmNvbG9yQnVmZmVyLm5hbWU7XG5cbiAgICAgICAgcnQuZGVzdHJveUZyYW1lQnVmZmVycygpO1xuICAgICAgICBydC5kZXN0cm95VGV4dHVyZUJ1ZmZlcnMoKTtcbiAgICAgICAgcnQuX2NvbG9yQnVmZmVyID0gdGhpcy5fYWxsb2NhdGVDb2xvckJ1ZmZlcihmb3JtYXQsIG5hbWUpO1xuICAgIH1cblxuICAgIF9kZXN0cm95T2Zmc2NyZWVuVGFyZ2V0KHJ0KSB7XG4gICAgICAgIHJ0LmRlc3Ryb3lUZXh0dXJlQnVmZmVycygpO1xuICAgICAgICBydC5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBvc3QgZWZmZWN0IHRvIHRoZSBxdWV1ZS4gSWYgdGhlIHF1ZXVlIGlzIGRpc2FibGVkIGFkZGluZyBhIHBvc3QgZWZmZWN0IHdpbGxcbiAgICAgKiBhdXRvbWF0aWNhbGx5IGVuYWJsZSB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Bvc3RFZmZlY3R9IGVmZmVjdCAtIFRoZSBwb3N0IGVmZmVjdCB0byBhZGQgdG8gdGhlIHF1ZXVlLlxuICAgICAqL1xuICAgIGFkZEVmZmVjdChlZmZlY3QpIHtcbiAgICAgICAgLy8gZmlyc3QgcmVuZGVyaW5nIG9mIHRoZSBzY2VuZSByZXF1aXJlcyBkZXB0aCBidWZmZXJcbiAgICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuZWZmZWN0cztcbiAgICAgICAgY29uc3QgaXNGaXJzdEVmZmVjdCA9IGVmZmVjdHMubGVuZ3RoID09PSAwO1xuXG4gICAgICAgIGNvbnN0IGlucHV0VGFyZ2V0ID0gdGhpcy5fY3JlYXRlT2Zmc2NyZWVuVGFyZ2V0KGlzRmlyc3RFZmZlY3QsIGVmZmVjdC5oZHIpO1xuICAgICAgICBjb25zdCBuZXdFbnRyeSA9IG5ldyBQb3N0RWZmZWN0KGVmZmVjdCwgaW5wdXRUYXJnZXQpO1xuICAgICAgICBlZmZlY3RzLnB1c2gobmV3RW50cnkpO1xuXG4gICAgICAgIHRoaXMuX3NvdXJjZVRhcmdldCA9IG5ld0VudHJ5LmlucHV0VGFyZ2V0O1xuXG4gICAgICAgIC8vIGNvbm5lY3QgdGhlIGVmZmVjdCB3aXRoIHRoZSBwcmV2aW91cyBlZmZlY3QgaWYgb25lIGV4aXN0c1xuICAgICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBlZmZlY3RzW2VmZmVjdHMubGVuZ3RoIC0gMl0ub3V0cHV0VGFyZ2V0ID0gbmV3RW50cnkuaW5wdXRUYXJnZXQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXF1ZXN0IGRlcHRobWFwIGlmIG5lZWRlZFxuICAgICAgICB0aGlzLl9uZXdQb3N0RWZmZWN0ID0gZWZmZWN0O1xuICAgICAgICBpZiAoZWZmZWN0Lm5lZWRzRGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3REZXB0aE1hcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbmFibGUoKTtcbiAgICAgICAgdGhpcy5fbmV3UG9zdEVmZmVjdCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcG9zdCBlZmZlY3QgZnJvbSB0aGUgcXVldWUuIElmIHRoZSBxdWV1ZSBiZWNvbWVzIGVtcHR5IGl0IHdpbGwgYmUgZGlzYWJsZWRcbiAgICAgKiBhdXRvbWF0aWNhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQb3N0RWZmZWN0fSBlZmZlY3QgLSBUaGUgcG9zdCBlZmZlY3QgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZUVmZmVjdChlZmZlY3QpIHtcblxuICAgICAgICAvLyBmaW5kIGluZGV4IG9mIGVmZmVjdFxuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMuZWZmZWN0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWZmZWN0c1tpXS5lZmZlY3QgPT09IGVmZmVjdCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAwKSAge1xuICAgICAgICAgICAgICAgIC8vIGNvbm5lY3QgdGhlIHByZXZpb3VzIGVmZmVjdCB3aXRoIHRoZSBlZmZlY3QgYWZ0ZXIgdGhlIG9uZSB3ZSdyZSBhYm91dCB0byByZW1vdmVcbiAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdHNbaW5kZXggLSAxXS5vdXRwdXRUYXJnZXQgPSAoaW5kZXggKyAxKSA8IHRoaXMuZWZmZWN0cy5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdHNbaW5kZXggKyAxXS5pbnB1dFRhcmdldCA6XG4gICAgICAgICAgICAgICAgICAgIG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVmZmVjdHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSByZW1vdmVkIHRoZSBmaXJzdCBlZmZlY3QgdGhlbiBtYWtlIHN1cmUgdGhhdFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaW5wdXQgcmVuZGVyIHRhcmdldCBvZiB0aGUgZWZmZWN0IHRoYXQgd2lsbCBub3cgYmVjb21lIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFzIGEgZGVwdGggYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5lZmZlY3RzWzFdLmlucHV0VGFyZ2V0Ll9kZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveU9mZnNjcmVlblRhcmdldCh0aGlzLmVmZmVjdHNbMV0uaW5wdXRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZmZlY3RzWzFdLmlucHV0VGFyZ2V0ID0gdGhpcy5fY3JlYXRlT2Zmc2NyZWVuVGFyZ2V0KHRydWUsIHRoaXMuZWZmZWN0c1sxXS5oZHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc291cmNlVGFyZ2V0ID0gdGhpcy5lZmZlY3RzWzFdLmlucHV0VGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEucmVuZGVyVGFyZ2V0ID0gdGhpcy5lZmZlY3RzWzFdLmlucHV0VGFyZ2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVsZWFzZSBtZW1vcnkgZm9yIHJlbW92ZWQgZWZmZWN0XG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95T2Zmc2NyZWVuVGFyZ2V0KHRoaXMuZWZmZWN0c1tpbmRleF0uaW5wdXRUYXJnZXQpO1xuXG4gICAgICAgICAgICB0aGlzLmVmZmVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QubmVlZHNEZXB0aEJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VEZXB0aE1hcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZWZmZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3JlcXVlc3REZXB0aE1hcHMoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuZWZmZWN0c1tpXS5lZmZlY3Q7XG4gICAgICAgICAgICBpZiAodGhpcy5fbmV3UG9zdEVmZmVjdCA9PT0gZWZmZWN0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAoZWZmZWN0Lm5lZWRzRGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0RGVwdGhNYXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9yZWxlYXNlRGVwdGhNYXBzKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5lZmZlY3RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBlZmZlY3QgPSB0aGlzLmVmZmVjdHNbaV0uZWZmZWN0O1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5uZWVkc0RlcHRoQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVsZWFzZURlcHRoTWFwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVxdWVzdERlcHRoTWFwKCkge1xuICAgICAgICBjb25zdCBkZXB0aExheWVyID0gdGhpcy5hcHAuc2NlbmUubGF5ZXJzLmdldExheWVyQnlJZChMQVlFUklEX0RFUFRIKTtcbiAgICAgICAgaWYgKGRlcHRoTGF5ZXIpIHtcbiAgICAgICAgICAgIGRlcHRoTGF5ZXIuaW5jcmVtZW50Q291bnRlcigpO1xuICAgICAgICAgICAgdGhpcy5jYW1lcmEucmVxdWVzdFNjZW5lRGVwdGhNYXAodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVsZWFzZURlcHRoTWFwKCkge1xuICAgICAgICBjb25zdCBkZXB0aExheWVyID0gdGhpcy5hcHAuc2NlbmUubGF5ZXJzLmdldExheWVyQnlJZChMQVlFUklEX0RFUFRIKTtcbiAgICAgICAgaWYgKGRlcHRoTGF5ZXIpIHtcbiAgICAgICAgICAgIGRlcHRoTGF5ZXIuZGVjcmVtZW50Q291bnRlcigpO1xuICAgICAgICAgICAgdGhpcy5jYW1lcmEucmVxdWVzdFNjZW5lRGVwdGhNYXAoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgdGhlIGVmZmVjdHMgZnJvbSB0aGUgcXVldWUgYW5kIGRpc2FibGVzIGl0LlxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIHJlbGVhc2UgbWVtb3J5IGZvciBhbGwgZWZmZWN0c1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5lZmZlY3RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmVmZmVjdHNbaV0uaW5wdXRUYXJnZXQuZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lZmZlY3RzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyB0aGUgcXVldWUgYW5kIGFsbCBvZiBpdHMgZWZmZWN0cy4gSWYgdGhlcmUgYXJlIG5vIGVmZmVjdHMgdGhlbiB0aGUgcXVldWUgd2lsbCBub3QgYmVcbiAgICAgKiBlbmFibGVkLlxuICAgICAqL1xuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgJiYgdGhpcy5lZmZlY3RzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdERlcHRoTWFwcygpO1xuXG4gICAgICAgICAgICB0aGlzLmFwcC5ncmFwaGljc0RldmljZS5vbigncmVzaXplY2FudmFzJywgdGhpcy5fb25DYW52YXNSZXNpemVkLCB0aGlzKTtcblxuICAgICAgICAgICAgLy8gb3JpZ2luYWwgY2FtZXJhJ3MgcmVuZGVyIHRhcmdldCBpcyB3aGVyZSB0aGUgZmluYWwgb3V0cHV0IG5lZWRzIHRvIGdvXG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uUmVuZGVyVGFyZ2V0ID0gdGhpcy5jYW1lcmEucmVuZGVyVGFyZ2V0O1xuXG4gICAgICAgICAgICAvLyBjYW1lcmEgcmVuZGVycyB0byB0aGUgZmlyc3QgZWZmZWN0J3MgcmVuZGVyIHRhcmdldFxuICAgICAgICAgICAgdGhpcy5jYW1lcmEucmVuZGVyVGFyZ2V0ID0gdGhpcy5lZmZlY3RzWzBdLmlucHV0VGFyZ2V0O1xuXG4gICAgICAgICAgICAvLyBjYWxsYmFjayB3aGVuIHBvc3Rwcm9jZXNzaW5nIHRha2VzIHBsYWNlXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5vblBvc3Rwcm9jZXNzaW5nID0gKCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbiA9IHRoaXMuZWZmZWN0cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZW4pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ4ID0gdGhpcy5lZmZlY3RzW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlc3RUYXJnZXQgPSBmeC5vdXRwdXRUYXJnZXQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsYXN0IGVmZmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBsZW4gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLmNhbWVyYS5yZWN0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNhbWVyYSBvcmlnaW5hbGx5IHJlbmRlcmVkIHRvIGEgcmVuZGVyIHRhcmdldCwgcmVuZGVyIGxhc3QgZWZmZWN0IHRvIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlc3RpbmF0aW9uUmVuZGVyVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0VGFyZ2V0ID0gdGhpcy5kZXN0aW5hdGlvblJlbmRlclRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcih0aGlzLmFwcC5ncmFwaGljc0RldmljZSwgZngubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnguZWZmZWN0LnJlbmRlcihmeC5pbnB1dFRhcmdldCwgZGVzdFRhcmdldCwgcmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2FibGVzIHRoZSBxdWV1ZSBhbmQgYWxsIG9mIGl0cyBlZmZlY3RzLlxuICAgICAqL1xuICAgIGRpc2FibGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLmFwcC5ncmFwaGljc0RldmljZS5vZmYoJ3Jlc2l6ZWNhbnZhcycsIHRoaXMuX29uQ2FudmFzUmVzaXplZCwgdGhpcyk7XG5cbiAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VEZXB0aE1hcHMoKTtcblxuICAgICAgICAgICAgdGhpcy5fZGVzdHJveU9mZnNjcmVlblRhcmdldCh0aGlzLl9zb3VyY2VUYXJnZXQpO1xuXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5yZW5kZXJUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jYW1lcmEub25Qb3N0cHJvY2Vzc2luZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVyIGNhbGxlZCB3aGVuIHRoZSBhcHBsaWNhdGlvbidzIGNhbnZhcyBlbGVtZW50IGlzIHJlc2l6ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSBUaGUgbmV3IHdpZHRoIG9mIHRoZSBjYW52YXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFRoZSBuZXcgaGVpZ2h0IG9mIHRoZSBjYW52YXMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfb25DYW52YXNSZXNpemVkKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FtZXJhLnJlY3Q7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlO1xuICAgICAgICB0aGlzLmNhbWVyYS5jYW1lcmEuYXNwZWN0UmF0aW8gPSAoZGV2aWNlLndpZHRoICogcmVjdC56KSAvIChkZXZpY2UuaGVpZ2h0ICogcmVjdC53KTtcblxuICAgICAgICB0aGlzLnJlc2l6ZVJlbmRlclRhcmdldHMoKTtcbiAgICB9XG5cbiAgICByZXNpemVSZW5kZXJUYXJnZXRzKCkge1xuXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbWVyYS5yZWN0O1xuICAgICAgICBjb25zdCBkZXNpcmVkV2lkdGggPSBNYXRoLmZsb29yKHJlY3QueiAqIHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLndpZHRoKTtcbiAgICAgICAgY29uc3QgZGVzaXJlZEhlaWdodCA9IE1hdGguZmxvb3IocmVjdC53ICogdGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UuaGVpZ2h0KTtcblxuICAgICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBlZmZlY3RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmeCA9IGVmZmVjdHNbaV07XG4gICAgICAgICAgICBpZiAoZnguaW5wdXRUYXJnZXQud2lkdGggIT09IGRlc2lyZWRXaWR0aCB8fFxuICAgICAgICAgICAgICAgIGZ4LmlucHV0VGFyZ2V0LmhlaWdodCAhPT0gZGVzaXJlZEhlaWdodCkgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNpemVPZmZzY3JlZW5UYXJnZXQoZnguaW5wdXRUYXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DYW1lcmFSZWN0Q2hhbmdlZChuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVSZW5kZXJUYXJnZXRzKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IFBvc3RFZmZlY3RRdWV1ZSB9O1xuIl0sIm5hbWVzIjpbIlBvc3RFZmZlY3QiLCJjb25zdHJ1Y3RvciIsImVmZmVjdCIsImlucHV0VGFyZ2V0Iiwib3V0cHV0VGFyZ2V0IiwibmFtZSIsIlBvc3RFZmZlY3RRdWV1ZSIsImFwcCIsImNhbWVyYSIsImRlc3RpbmF0aW9uUmVuZGVyVGFyZ2V0IiwiZWZmZWN0cyIsImVuYWJsZWQiLCJkZXB0aFRhcmdldCIsIm9uIiwib25DYW1lcmFSZWN0Q2hhbmdlZCIsIl9hbGxvY2F0ZUNvbG9yQnVmZmVyIiwiZm9ybWF0IiwicmVjdCIsIndpZHRoIiwiTWF0aCIsImZsb29yIiwieiIsImdyYXBoaWNzRGV2aWNlIiwiaGVpZ2h0IiwidyIsImNvbG9yQnVmZmVyIiwiVGV4dHVyZSIsIm1pcG1hcHMiLCJtaW5GaWx0ZXIiLCJGSUxURVJfTkVBUkVTVCIsIm1hZ0ZpbHRlciIsImFkZHJlc3NVIiwiQUREUkVTU19DTEFNUF9UT19FREdFIiwiYWRkcmVzc1YiLCJfY3JlYXRlT2Zmc2NyZWVuVGFyZ2V0IiwidXNlRGVwdGgiLCJoZHIiLCJkZXZpY2UiLCJnZXRIZHJGb3JtYXQiLCJQSVhFTEZPUk1BVF9SR0JBOCIsImVudGl0eSIsImxlbmd0aCIsIlJlbmRlclRhcmdldCIsImRlcHRoIiwic3RlbmNpbCIsInN1cHBvcnRzU3RlbmNpbCIsInNhbXBsZXMiLCJfcmVzaXplT2Zmc2NyZWVuVGFyZ2V0IiwicnQiLCJkZXN0cm95RnJhbWVCdWZmZXJzIiwiZGVzdHJveVRleHR1cmVCdWZmZXJzIiwiX2NvbG9yQnVmZmVyIiwiX2Rlc3Ryb3lPZmZzY3JlZW5UYXJnZXQiLCJkZXN0cm95IiwiYWRkRWZmZWN0IiwiaXNGaXJzdEVmZmVjdCIsIm5ld0VudHJ5IiwicHVzaCIsIl9zb3VyY2VUYXJnZXQiLCJfbmV3UG9zdEVmZmVjdCIsIm5lZWRzRGVwdGhCdWZmZXIiLCJfcmVxdWVzdERlcHRoTWFwIiwiZW5hYmxlIiwidW5kZWZpbmVkIiwicmVtb3ZlRWZmZWN0IiwiaW5kZXgiLCJpIiwibGVuIiwiX2RlcHRoIiwicmVuZGVyVGFyZ2V0Iiwic3BsaWNlIiwiX3JlbGVhc2VEZXB0aE1hcCIsImRpc2FibGUiLCJfcmVxdWVzdERlcHRoTWFwcyIsIl9yZWxlYXNlRGVwdGhNYXBzIiwiZGVwdGhMYXllciIsInNjZW5lIiwibGF5ZXJzIiwiZ2V0TGF5ZXJCeUlkIiwiTEFZRVJJRF9ERVBUSCIsImluY3JlbWVudENvdW50ZXIiLCJyZXF1ZXN0U2NlbmVEZXB0aE1hcCIsImRlY3JlbWVudENvdW50ZXIiLCJfb25DYW52YXNSZXNpemVkIiwib25Qb3N0cHJvY2Vzc2luZyIsImZ4IiwiZGVzdFRhcmdldCIsIkRlYnVnR3JhcGhpY3MiLCJwdXNoR3B1TWFya2VyIiwicmVuZGVyIiwicG9wR3B1TWFya2VyIiwib2ZmIiwiYXNwZWN0UmF0aW8iLCJyZXNpemVSZW5kZXJUYXJnZXRzIiwiZGVzaXJlZFdpZHRoIiwiZGVzaXJlZEhlaWdodCIsIm9sZFZhbHVlIiwibmV3VmFsdWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBT0EsTUFBTUEsVUFBVSxDQUFDO0FBQ2JDLEVBQUFBLFdBQVcsQ0FBQ0MsTUFBTSxFQUFFQyxXQUFXLEVBQUU7SUFDN0IsSUFBSSxDQUFDRCxNQUFNLEdBQUdBLE1BQU0sQ0FBQTtJQUNwQixJQUFJLENBQUNDLFdBQVcsR0FBR0EsV0FBVyxDQUFBO0lBQzlCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUksQ0FBQTtBQUN4QixJQUFBLElBQUksQ0FBQ0MsSUFBSSxHQUFHSCxNQUFNLENBQUNELFdBQVcsQ0FBQ0ksSUFBSSxDQUFBO0FBQ3ZDLEdBQUE7QUFDSixDQUFBOztBQUtBLE1BQU1DLGVBQWUsQ0FBQztBQU9sQkwsRUFBQUEsV0FBVyxDQUFDTSxHQUFHLEVBQUVDLE1BQU0sRUFBRTtJQUNyQixJQUFJLENBQUNELEdBQUcsR0FBR0EsR0FBRyxDQUFBO0lBQ2QsSUFBSSxDQUFDQyxNQUFNLEdBQUdBLE1BQU0sQ0FBQTs7SUFTcEIsSUFBSSxDQUFDQyx1QkFBdUIsR0FBRyxJQUFJLENBQUE7O0lBUW5DLElBQUksQ0FBQ0MsT0FBTyxHQUFHLEVBQUUsQ0FBQTs7SUFTakIsSUFBSSxDQUFDQyxPQUFPLEdBQUcsS0FBSyxDQUFBOztJQUdwQixJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJLENBQUE7SUFFdkJKLE1BQU0sQ0FBQ0ssRUFBRSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ3pELEdBQUE7O0FBVUFDLEVBQUFBLG9CQUFvQixDQUFDQyxNQUFNLEVBQUVYLElBQUksRUFBRTtBQUMvQixJQUFBLE1BQU1ZLElBQUksR0FBRyxJQUFJLENBQUNULE1BQU0sQ0FBQ1MsSUFBSSxDQUFBO0FBQzdCLElBQUEsTUFBTUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0gsSUFBSSxDQUFDSSxDQUFDLEdBQUcsSUFBSSxDQUFDZCxHQUFHLENBQUNlLGNBQWMsQ0FBQ0osS0FBSyxDQUFDLENBQUE7QUFDaEUsSUFBQSxNQUFNSyxNQUFNLEdBQUdKLElBQUksQ0FBQ0MsS0FBSyxDQUFDSCxJQUFJLENBQUNPLENBQUMsR0FBRyxJQUFJLENBQUNqQixHQUFHLENBQUNlLGNBQWMsQ0FBQ0MsTUFBTSxDQUFDLENBQUE7SUFFbEUsTUFBTUUsV0FBVyxHQUFHLElBQUlDLE9BQU8sQ0FBQyxJQUFJLENBQUNuQixHQUFHLENBQUNlLGNBQWMsRUFBRTtBQUNyRGpCLE1BQUFBLElBQUksRUFBRUEsSUFBSTtBQUNWVyxNQUFBQSxNQUFNLEVBQUVBLE1BQU07QUFDZEUsTUFBQUEsS0FBSyxFQUFFQSxLQUFLO0FBQ1pLLE1BQUFBLE1BQU0sRUFBRUEsTUFBTTtBQUNkSSxNQUFBQSxPQUFPLEVBQUUsS0FBSztBQUNkQyxNQUFBQSxTQUFTLEVBQUVDLGNBQWM7QUFDekJDLE1BQUFBLFNBQVMsRUFBRUQsY0FBYztBQUN6QkUsTUFBQUEsUUFBUSxFQUFFQyxxQkFBcUI7QUFDL0JDLE1BQUFBLFFBQVEsRUFBRUQscUJBQUFBO0FBQ2QsS0FBQyxDQUFDLENBQUE7QUFFRixJQUFBLE9BQU9QLFdBQVcsQ0FBQTtBQUN0QixHQUFBOztBQVVBUyxFQUFBQSxzQkFBc0IsQ0FBQ0MsUUFBUSxFQUFFQyxHQUFHLEVBQUU7QUFFbEMsSUFBQSxNQUFNQyxNQUFNLEdBQUcsSUFBSSxDQUFDOUIsR0FBRyxDQUFDZSxjQUFjLENBQUE7QUFDdEMsSUFBQSxNQUFNTixNQUFNLEdBQUdvQixHQUFHLElBQUlDLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxJQUFJQyxpQkFBaUIsQ0FBQTtBQUN6RixJQUFBLE1BQU1sQyxJQUFJLEdBQUcsSUFBSSxDQUFDRyxNQUFNLENBQUNnQyxNQUFNLENBQUNuQyxJQUFJLEdBQUcsY0FBYyxHQUFHLElBQUksQ0FBQ0ssT0FBTyxDQUFDK0IsTUFBTSxDQUFBO0lBRTNFLE1BQU1oQixXQUFXLEdBQUcsSUFBSSxDQUFDVixvQkFBb0IsQ0FBQ0MsTUFBTSxFQUFFWCxJQUFJLENBQUMsQ0FBQTtJQUUzRCxPQUFPLElBQUlxQyxZQUFZLENBQUM7QUFDcEJqQixNQUFBQSxXQUFXLEVBQUVBLFdBQVc7QUFDeEJrQixNQUFBQSxLQUFLLEVBQUVSLFFBQVE7TUFDZlMsT0FBTyxFQUFFVCxRQUFRLElBQUksSUFBSSxDQUFDNUIsR0FBRyxDQUFDZSxjQUFjLENBQUN1QixlQUFlO0FBQzVEQyxNQUFBQSxPQUFPLEVBQUVYLFFBQVEsR0FBR0UsTUFBTSxDQUFDUyxPQUFPLEdBQUcsQ0FBQTtBQUN6QyxLQUFDLENBQUMsQ0FBQTtBQUNOLEdBQUE7RUFFQUMsc0JBQXNCLENBQUNDLEVBQUUsRUFBRTtBQUN2QixJQUFBLE1BQU1oQyxNQUFNLEdBQUdnQyxFQUFFLENBQUN2QixXQUFXLENBQUNULE1BQU0sQ0FBQTtBQUNwQyxJQUFBLE1BQU1YLElBQUksR0FBRzJDLEVBQUUsQ0FBQ3ZCLFdBQVcsQ0FBQ3BCLElBQUksQ0FBQTtJQUVoQzJDLEVBQUUsQ0FBQ0MsbUJBQW1CLEVBQUUsQ0FBQTtJQUN4QkQsRUFBRSxDQUFDRSxxQkFBcUIsRUFBRSxDQUFBO0lBQzFCRixFQUFFLENBQUNHLFlBQVksR0FBRyxJQUFJLENBQUNwQyxvQkFBb0IsQ0FBQ0MsTUFBTSxFQUFFWCxJQUFJLENBQUMsQ0FBQTtBQUM3RCxHQUFBO0VBRUErQyx1QkFBdUIsQ0FBQ0osRUFBRSxFQUFFO0lBQ3hCQSxFQUFFLENBQUNFLHFCQUFxQixFQUFFLENBQUE7SUFDMUJGLEVBQUUsQ0FBQ0ssT0FBTyxFQUFFLENBQUE7QUFDaEIsR0FBQTs7RUFRQUMsU0FBUyxDQUFDcEQsTUFBTSxFQUFFO0FBRWQsSUFBQSxNQUFNUSxPQUFPLEdBQUcsSUFBSSxDQUFDQSxPQUFPLENBQUE7QUFDNUIsSUFBQSxNQUFNNkMsYUFBYSxHQUFHN0MsT0FBTyxDQUFDK0IsTUFBTSxLQUFLLENBQUMsQ0FBQTtJQUUxQyxNQUFNdEMsV0FBVyxHQUFHLElBQUksQ0FBQytCLHNCQUFzQixDQUFDcUIsYUFBYSxFQUFFckQsTUFBTSxDQUFDa0MsR0FBRyxDQUFDLENBQUE7SUFDMUUsTUFBTW9CLFFBQVEsR0FBRyxJQUFJeEQsVUFBVSxDQUFDRSxNQUFNLEVBQUVDLFdBQVcsQ0FBQyxDQUFBO0FBQ3BETyxJQUFBQSxPQUFPLENBQUMrQyxJQUFJLENBQUNELFFBQVEsQ0FBQyxDQUFBO0FBRXRCLElBQUEsSUFBSSxDQUFDRSxhQUFhLEdBQUdGLFFBQVEsQ0FBQ3JELFdBQVcsQ0FBQTs7QUFHekMsSUFBQSxJQUFJTyxPQUFPLENBQUMrQixNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3BCL0IsTUFBQUEsT0FBTyxDQUFDQSxPQUFPLENBQUMrQixNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUNyQyxZQUFZLEdBQUdvRCxRQUFRLENBQUNyRCxXQUFXLENBQUE7QUFDbkUsS0FBQTs7SUFHQSxJQUFJLENBQUN3RCxjQUFjLEdBQUd6RCxNQUFNLENBQUE7SUFDNUIsSUFBSUEsTUFBTSxDQUFDMEQsZ0JBQWdCLEVBQUU7TUFDekIsSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRSxDQUFBO0FBQzNCLEtBQUE7SUFFQSxJQUFJLENBQUNDLE1BQU0sRUFBRSxDQUFBO0lBQ2IsSUFBSSxDQUFDSCxjQUFjLEdBQUdJLFNBQVMsQ0FBQTtBQUNuQyxHQUFBOztFQVFBQyxZQUFZLENBQUM5RCxNQUFNLEVBQUU7SUFHakIsSUFBSStELEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQTtBQUNkLElBQUEsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQyxHQUFHLEdBQUcsSUFBSSxDQUFDekQsT0FBTyxDQUFDK0IsTUFBTSxFQUFFeUIsQ0FBQyxHQUFHQyxHQUFHLEVBQUVELENBQUMsRUFBRSxFQUFFO01BQ3JELElBQUksSUFBSSxDQUFDeEQsT0FBTyxDQUFDd0QsQ0FBQyxDQUFDLENBQUNoRSxNQUFNLEtBQUtBLE1BQU0sRUFBRTtBQUNuQytELFFBQUFBLEtBQUssR0FBR0MsQ0FBQyxDQUFBO0FBQ1QsUUFBQSxNQUFBO0FBQ0osT0FBQTtBQUNKLEtBQUE7SUFFQSxJQUFJRCxLQUFLLElBQUksQ0FBQyxFQUFFO01BQ1osSUFBSUEsS0FBSyxHQUFHLENBQUMsRUFBRztBQUVaLFFBQUEsSUFBSSxDQUFDdkQsT0FBTyxDQUFDdUQsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDN0QsWUFBWSxHQUFJNkQsS0FBSyxHQUFHLENBQUMsR0FBSSxJQUFJLENBQUN2RCxPQUFPLENBQUMrQixNQUFNLEdBQ3BFLElBQUksQ0FBQy9CLE9BQU8sQ0FBQ3VELEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQzlELFdBQVcsR0FDbkMsSUFBSSxDQUFBO0FBQ1osT0FBQyxNQUFNO0FBQ0gsUUFBQSxJQUFJLElBQUksQ0FBQ08sT0FBTyxDQUFDK0IsTUFBTSxHQUFHLENBQUMsRUFBRTtVQUl6QixJQUFJLENBQUMsSUFBSSxDQUFDL0IsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDUCxXQUFXLENBQUNpRSxNQUFNLEVBQUU7WUFDckMsSUFBSSxDQUFDaEIsdUJBQXVCLENBQUMsSUFBSSxDQUFDMUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDUCxXQUFXLENBQUMsQ0FBQTtZQUN6RCxJQUFJLENBQUNPLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ1AsV0FBVyxHQUFHLElBQUksQ0FBQytCLHNCQUFzQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUN4QixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMwQixHQUFHLENBQUMsQ0FBQTtZQUNwRixJQUFJLENBQUNzQixhQUFhLEdBQUcsSUFBSSxDQUFDaEQsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDUCxXQUFXLENBQUE7QUFDcEQsV0FBQTtBQUVBLFVBQUEsSUFBSSxDQUFDSyxNQUFNLENBQUM2RCxZQUFZLEdBQUcsSUFBSSxDQUFDM0QsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDUCxXQUFXLENBQUE7QUFDMUQsU0FBQTtBQUNKLE9BQUE7O01BR0EsSUFBSSxDQUFDaUQsdUJBQXVCLENBQUMsSUFBSSxDQUFDMUMsT0FBTyxDQUFDdUQsS0FBSyxDQUFDLENBQUM5RCxXQUFXLENBQUMsQ0FBQTtNQUU3RCxJQUFJLENBQUNPLE9BQU8sQ0FBQzRELE1BQU0sQ0FBQ0wsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQ2pDLEtBQUE7SUFFQSxJQUFJLElBQUksQ0FBQ3RELE9BQU8sRUFBRTtNQUNkLElBQUlULE1BQU0sQ0FBQzBELGdCQUFnQixFQUFFO1FBQ3pCLElBQUksQ0FBQ1csZ0JBQWdCLEVBQUUsQ0FBQTtBQUMzQixPQUFBO0FBQ0osS0FBQTtBQUVBLElBQUEsSUFBSSxJQUFJLENBQUM3RCxPQUFPLENBQUMrQixNQUFNLEtBQUssQ0FBQyxFQUFFO01BQzNCLElBQUksQ0FBQytCLE9BQU8sRUFBRSxDQUFBO0FBQ2xCLEtBQUE7QUFDSixHQUFBO0FBRUFDLEVBQUFBLGlCQUFpQixHQUFHO0FBQ2hCLElBQUEsS0FBSyxJQUFJUCxDQUFDLEdBQUcsQ0FBQyxFQUFFQyxHQUFHLEdBQUcsSUFBSSxDQUFDekQsT0FBTyxDQUFDK0IsTUFBTSxFQUFFeUIsQ0FBQyxHQUFHQyxHQUFHLEVBQUVELENBQUMsRUFBRSxFQUFFO01BQ3JELE1BQU1oRSxNQUFNLEdBQUcsSUFBSSxDQUFDUSxPQUFPLENBQUN3RCxDQUFDLENBQUMsQ0FBQ2hFLE1BQU0sQ0FBQTtBQUNyQyxNQUFBLElBQUksSUFBSSxDQUFDeUQsY0FBYyxLQUFLekQsTUFBTSxFQUM5QixTQUFBO01BRUosSUFBSUEsTUFBTSxDQUFDMEQsZ0JBQWdCLEVBQUU7UUFDekIsSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRSxDQUFBO0FBQzNCLE9BQUE7QUFDSixLQUFBO0FBQ0osR0FBQTtBQUVBYSxFQUFBQSxpQkFBaUIsR0FBRztBQUNoQixJQUFBLEtBQUssSUFBSVIsQ0FBQyxHQUFHLENBQUMsRUFBRUMsR0FBRyxHQUFHLElBQUksQ0FBQ3pELE9BQU8sQ0FBQytCLE1BQU0sRUFBRXlCLENBQUMsR0FBR0MsR0FBRyxFQUFFRCxDQUFDLEVBQUUsRUFBRTtNQUNyRCxNQUFNaEUsTUFBTSxHQUFHLElBQUksQ0FBQ1EsT0FBTyxDQUFDd0QsQ0FBQyxDQUFDLENBQUNoRSxNQUFNLENBQUE7TUFDckMsSUFBSUEsTUFBTSxDQUFDMEQsZ0JBQWdCLEVBQUU7UUFDekIsSUFBSSxDQUFDVyxnQkFBZ0IsRUFBRSxDQUFBO0FBQzNCLE9BQUE7QUFDSixLQUFBO0FBQ0osR0FBQTtBQUVBVixFQUFBQSxnQkFBZ0IsR0FBRztBQUNmLElBQUEsTUFBTWMsVUFBVSxHQUFHLElBQUksQ0FBQ3BFLEdBQUcsQ0FBQ3FFLEtBQUssQ0FBQ0MsTUFBTSxDQUFDQyxZQUFZLENBQUNDLGFBQWEsQ0FBQyxDQUFBO0FBQ3BFLElBQUEsSUFBSUosVUFBVSxFQUFFO01BQ1pBLFVBQVUsQ0FBQ0ssZ0JBQWdCLEVBQUUsQ0FBQTtBQUM3QixNQUFBLElBQUksQ0FBQ3hFLE1BQU0sQ0FBQ3lFLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFBO0FBQzFDLEtBQUE7QUFDSixHQUFBO0FBRUFWLEVBQUFBLGdCQUFnQixHQUFHO0FBQ2YsSUFBQSxNQUFNSSxVQUFVLEdBQUcsSUFBSSxDQUFDcEUsR0FBRyxDQUFDcUUsS0FBSyxDQUFDQyxNQUFNLENBQUNDLFlBQVksQ0FBQ0MsYUFBYSxDQUFDLENBQUE7QUFDcEUsSUFBQSxJQUFJSixVQUFVLEVBQUU7TUFDWkEsVUFBVSxDQUFDTyxnQkFBZ0IsRUFBRSxDQUFBO0FBQzdCLE1BQUEsSUFBSSxDQUFDMUUsTUFBTSxDQUFDeUUsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDM0MsS0FBQTtBQUNKLEdBQUE7O0FBS0E1QixFQUFBQSxPQUFPLEdBQUc7QUFFTixJQUFBLEtBQUssSUFBSWEsQ0FBQyxHQUFHLENBQUMsRUFBRUMsR0FBRyxHQUFHLElBQUksQ0FBQ3pELE9BQU8sQ0FBQytCLE1BQU0sRUFBRXlCLENBQUMsR0FBR0MsR0FBRyxFQUFFRCxDQUFDLEVBQUUsRUFBRTtNQUNyRCxJQUFJLENBQUN4RCxPQUFPLENBQUN3RCxDQUFDLENBQUMsQ0FBQy9ELFdBQVcsQ0FBQ2tELE9BQU8sRUFBRSxDQUFBO0FBQ3pDLEtBQUE7QUFFQSxJQUFBLElBQUksQ0FBQzNDLE9BQU8sQ0FBQytCLE1BQU0sR0FBRyxDQUFDLENBQUE7SUFFdkIsSUFBSSxDQUFDK0IsT0FBTyxFQUFFLENBQUE7QUFDbEIsR0FBQTs7QUFNQVYsRUFBQUEsTUFBTSxHQUFHO0lBQ0wsSUFBSSxDQUFDLElBQUksQ0FBQ25ELE9BQU8sSUFBSSxJQUFJLENBQUNELE9BQU8sQ0FBQytCLE1BQU0sRUFBRTtNQUN0QyxJQUFJLENBQUM5QixPQUFPLEdBQUcsSUFBSSxDQUFBO01BRW5CLElBQUksQ0FBQzhELGlCQUFpQixFQUFFLENBQUE7QUFFeEIsTUFBQSxJQUFJLENBQUNsRSxHQUFHLENBQUNlLGNBQWMsQ0FBQ1QsRUFBRSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUNzRSxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQTs7QUFHdkUsTUFBQSxJQUFJLENBQUMxRSx1QkFBdUIsR0FBRyxJQUFJLENBQUNELE1BQU0sQ0FBQzZELFlBQVksQ0FBQTs7QUFHdkQsTUFBQSxJQUFJLENBQUM3RCxNQUFNLENBQUM2RCxZQUFZLEdBQUcsSUFBSSxDQUFDM0QsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDUCxXQUFXLENBQUE7O0FBR3RELE1BQUEsSUFBSSxDQUFDSyxNQUFNLENBQUM0RSxnQkFBZ0IsR0FBRyxNQUFNO1FBRWpDLElBQUksSUFBSSxDQUFDekUsT0FBTyxFQUFFO1VBQ2QsSUFBSU0sSUFBSSxHQUFHLElBQUksQ0FBQTtBQUNmLFVBQUEsTUFBTWtELEdBQUcsR0FBRyxJQUFJLENBQUN6RCxPQUFPLENBQUMrQixNQUFNLENBQUE7QUFDL0IsVUFBQSxJQUFJMEIsR0FBRyxFQUFFO1lBRUwsS0FBSyxJQUFJRCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdDLEdBQUcsRUFBRUQsQ0FBQyxFQUFFLEVBQUU7QUFDMUIsY0FBQSxNQUFNbUIsRUFBRSxHQUFHLElBQUksQ0FBQzNFLE9BQU8sQ0FBQ3dELENBQUMsQ0FBQyxDQUFBO0FBRTFCLGNBQUEsSUFBSW9CLFVBQVUsR0FBR0QsRUFBRSxDQUFDakYsWUFBWSxDQUFBOztBQUdoQyxjQUFBLElBQUk4RCxDQUFDLEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUU7QUFDZmxELGdCQUFBQSxJQUFJLEdBQUcsSUFBSSxDQUFDVCxNQUFNLENBQUNTLElBQUksQ0FBQTs7Z0JBR3ZCLElBQUksSUFBSSxDQUFDUix1QkFBdUIsRUFBRTtrQkFDOUI2RSxVQUFVLEdBQUcsSUFBSSxDQUFDN0UsdUJBQXVCLENBQUE7QUFDN0MsaUJBQUE7QUFDSixlQUFBO0FBRUE4RSxjQUFBQSxhQUFhLENBQUNDLGFBQWEsQ0FBQyxJQUFJLENBQUNqRixHQUFHLENBQUNlLGNBQWMsRUFBRStELEVBQUUsQ0FBQ2hGLElBQUksQ0FBQyxDQUFBO0FBQzdEZ0YsY0FBQUEsRUFBRSxDQUFDbkYsTUFBTSxDQUFDdUYsTUFBTSxDQUFDSixFQUFFLENBQUNsRixXQUFXLEVBQUVtRixVQUFVLEVBQUVyRSxJQUFJLENBQUMsQ0FBQTtjQUNsRHNFLGFBQWEsQ0FBQ0csWUFBWSxDQUFDLElBQUksQ0FBQ25GLEdBQUcsQ0FBQ2UsY0FBYyxDQUFDLENBQUE7QUFDdkQsYUFBQTtBQUNKLFdBQUE7QUFDSixTQUFBO09BQ0gsQ0FBQTtBQUNMLEtBQUE7QUFDSixHQUFBOztBQUtBa0QsRUFBQUEsT0FBTyxHQUFHO0lBQ04sSUFBSSxJQUFJLENBQUM3RCxPQUFPLEVBQUU7TUFDZCxJQUFJLENBQUNBLE9BQU8sR0FBRyxLQUFLLENBQUE7QUFFcEIsTUFBQSxJQUFJLENBQUNKLEdBQUcsQ0FBQ2UsY0FBYyxDQUFDcUUsR0FBRyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUNSLGdCQUFnQixFQUFFLElBQUksQ0FBQyxDQUFBO01BRXhFLElBQUksQ0FBQ1QsaUJBQWlCLEVBQUUsQ0FBQTtBQUV4QixNQUFBLElBQUksQ0FBQ3RCLHVCQUF1QixDQUFDLElBQUksQ0FBQ00sYUFBYSxDQUFDLENBQUE7QUFFaEQsTUFBQSxJQUFJLENBQUNsRCxNQUFNLENBQUM2RCxZQUFZLEdBQUcsSUFBSSxDQUFBO0FBQy9CLE1BQUEsSUFBSSxDQUFDN0QsTUFBTSxDQUFDNEUsZ0JBQWdCLEdBQUcsSUFBSSxDQUFBO0FBQ3ZDLEtBQUE7QUFDSixHQUFBOztBQVNBRCxFQUFBQSxnQkFBZ0IsQ0FBQ2pFLEtBQUssRUFBRUssTUFBTSxFQUFFO0FBQzVCLElBQUEsTUFBTU4sSUFBSSxHQUFHLElBQUksQ0FBQ1QsTUFBTSxDQUFDUyxJQUFJLENBQUE7QUFDN0IsSUFBQSxNQUFNb0IsTUFBTSxHQUFHLElBQUksQ0FBQzlCLEdBQUcsQ0FBQ2UsY0FBYyxDQUFBO0lBQ3RDLElBQUksQ0FBQ2QsTUFBTSxDQUFDQSxNQUFNLENBQUNvRixXQUFXLEdBQUl2RCxNQUFNLENBQUNuQixLQUFLLEdBQUdELElBQUksQ0FBQ0ksQ0FBQyxJQUFLZ0IsTUFBTSxDQUFDZCxNQUFNLEdBQUdOLElBQUksQ0FBQ08sQ0FBQyxDQUFDLENBQUE7SUFFbkYsSUFBSSxDQUFDcUUsbUJBQW1CLEVBQUUsQ0FBQTtBQUM5QixHQUFBO0FBRUFBLEVBQUFBLG1CQUFtQixHQUFHO0FBRWxCLElBQUEsTUFBTTVFLElBQUksR0FBRyxJQUFJLENBQUNULE1BQU0sQ0FBQ1MsSUFBSSxDQUFBO0FBQzdCLElBQUEsTUFBTTZFLFlBQVksR0FBRzNFLElBQUksQ0FBQ0MsS0FBSyxDQUFDSCxJQUFJLENBQUNJLENBQUMsR0FBRyxJQUFJLENBQUNkLEdBQUcsQ0FBQ2UsY0FBYyxDQUFDSixLQUFLLENBQUMsQ0FBQTtBQUN2RSxJQUFBLE1BQU02RSxhQUFhLEdBQUc1RSxJQUFJLENBQUNDLEtBQUssQ0FBQ0gsSUFBSSxDQUFDTyxDQUFDLEdBQUcsSUFBSSxDQUFDakIsR0FBRyxDQUFDZSxjQUFjLENBQUNDLE1BQU0sQ0FBQyxDQUFBO0FBRXpFLElBQUEsTUFBTWIsT0FBTyxHQUFHLElBQUksQ0FBQ0EsT0FBTyxDQUFBO0FBRTVCLElBQUEsS0FBSyxJQUFJd0QsQ0FBQyxHQUFHLENBQUMsRUFBRUMsR0FBRyxHQUFHekQsT0FBTyxDQUFDK0IsTUFBTSxFQUFFeUIsQ0FBQyxHQUFHQyxHQUFHLEVBQUVELENBQUMsRUFBRSxFQUFFO0FBQ2hELE1BQUEsTUFBTW1CLEVBQUUsR0FBRzNFLE9BQU8sQ0FBQ3dELENBQUMsQ0FBQyxDQUFBO0FBQ3JCLE1BQUEsSUFBSW1CLEVBQUUsQ0FBQ2xGLFdBQVcsQ0FBQ2UsS0FBSyxLQUFLNEUsWUFBWSxJQUNyQ1QsRUFBRSxDQUFDbEYsV0FBVyxDQUFDb0IsTUFBTSxLQUFLd0UsYUFBYSxFQUFHO0FBQzFDLFFBQUEsSUFBSSxDQUFDaEQsc0JBQXNCLENBQUNzQyxFQUFFLENBQUNsRixXQUFXLENBQUMsQ0FBQTtBQUMvQyxPQUFBO0FBQ0osS0FBQTtBQUNKLEdBQUE7QUFFQVcsRUFBQUEsbUJBQW1CLENBQUNULElBQUksRUFBRTJGLFFBQVEsRUFBRUMsUUFBUSxFQUFFO0lBQzFDLElBQUksSUFBSSxDQUFDdEYsT0FBTyxFQUFFO01BQ2QsSUFBSSxDQUFDa0YsbUJBQW1CLEVBQUUsQ0FBQTtBQUM5QixLQUFBO0FBQ0osR0FBQTtBQUNKOzs7OyJ9
