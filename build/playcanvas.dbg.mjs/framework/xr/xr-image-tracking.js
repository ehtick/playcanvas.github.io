/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { EventHandler } from '../../core/event-handler.js';
import { platform } from '../../core/platform.js';
import { XrTrackedImage } from './xr-tracked-image.js';

class XrImageTracking extends EventHandler {

  constructor(manager) {
    super();
    this._manager = void 0;
    this._supported = platform.browser && !!window.XRImageTrackingResult;
    this._available = false;
    this._images = [];
    this._manager = manager;
    if (this._supported) {
      this._manager.on('start', this._onSessionStart, this);
      this._manager.on('end', this._onSessionEnd, this);
    }
  }

  add(image, width) {
    if (!this._supported || this._manager.active) return null;
    const trackedImage = new XrTrackedImage(image, width);
    this._images.push(trackedImage);
    return trackedImage;
  }

  remove(trackedImage) {
    if (this._manager.active) return;
    const ind = this._images.indexOf(trackedImage);
    if (ind !== -1) {
      trackedImage.destroy();
      this._images.splice(ind, 1);
    }
  }

  _onSessionStart() {
    this._manager.session.getTrackedImageScores().then(images => {
      this._available = true;
      for (let i = 0; i < images.length; i++) {
        this._images[i]._trackable = images[i] === 'trackable';
      }
    }).catch(err => {
      this._available = false;
      this.fire('error', err);
    });
  }

  _onSessionEnd() {
    this._available = false;
    for (let i = 0; i < this._images.length; i++) {
      const image = this._images[i];
      image._pose = null;
      image._measuredWidth = 0;
      if (image._tracking) {
        image._tracking = false;
        image.fire('untracked');
      }
    }
  }

  prepareImages(callback) {
    if (this._images.length) {
      Promise.all(this._images.map(function (trackedImage) {
        return trackedImage.prepare();
      })).then(function (bitmaps) {
        callback(null, bitmaps);
      }).catch(function (err) {
        callback(err, null);
      });
    } else {
      callback(null, null);
    }
  }

  update(frame) {
    if (!this._available) return;
    const results = frame.getImageTrackingResults();
    const index = {};
    for (let i = 0; i < results.length; i++) {
      index[results[i].index] = results[i];
      const trackedImage = this._images[results[i].index];
      trackedImage._emulated = results[i].trackingState === 'emulated';
      trackedImage._measuredWidth = results[i].measuredWidthInMeters;
      trackedImage._pose = frame.getPose(results[i].imageSpace, this._manager._referenceSpace);
    }
    for (let i = 0; i < this._images.length; i++) {
      if (this._images[i]._tracking && !index[i]) {
        this._images[i]._tracking = false;
        this._images[i].fire('untracked');
      } else if (!this._images[i]._tracking && index[i]) {
        this._images[i]._tracking = true;
        this._images[i].fire('tracked');
      }
    }
  }

  get supported() {
    return this._supported;
  }

  get available() {
    return this._available;
  }

  get images() {
    return this._images;
  }
}

export { XrImageTracking };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieHItaW1hZ2UtdHJhY2tpbmcuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsveHIveHItaW1hZ2UtdHJhY2tpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vY29yZS9ldmVudC1oYW5kbGVyLmpzJztcbmltcG9ydCB7IHBsYXRmb3JtIH0gZnJvbSAnLi4vLi4vY29yZS9wbGF0Zm9ybS5qcyc7XG5cbmltcG9ydCB7IFhyVHJhY2tlZEltYWdlIH0gZnJvbSAnLi94ci10cmFja2VkLWltYWdlLmpzJztcblxuLyoqXG4gKiBJbWFnZSBUcmFja2luZyBwcm92aWRlcyB0aGUgYWJpbGl0eSB0byB0cmFjayByZWFsIHdvcmxkIGltYWdlcyBieSBwcm92aWRlZCBpbWFnZSBzYW1wbGVzIGFuZFxuICogdGhlaXIgZXN0aW1hdGVkIHNpemVzLlxuICpcbiAqIEBhdWdtZW50cyBFdmVudEhhbmRsZXJcbiAqL1xuY2xhc3MgWHJJbWFnZVRyYWNraW5nIGV4dGVuZHMgRXZlbnRIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuL3hyLW1hbmFnZXIuanMnKS5Yck1hbmFnZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFuYWdlcjtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3N1cHBvcnRlZCA9IHBsYXRmb3JtLmJyb3dzZXIgJiYgISF3aW5kb3cuWFJJbWFnZVRyYWNraW5nUmVzdWx0O1xuXG4gICAgIC8qKlxuICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICogQHByaXZhdGVcbiAgICAgICovXG4gICAgX2F2YWlsYWJsZSA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge1hyVHJhY2tlZEltYWdlW119XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaW1hZ2VzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBJbWFnZSBUcmFja2luZyBwcm92aWRlcyB0aGUgYWJpbGl0eSB0byB0cmFjayByZWFsIHdvcmxkIGltYWdlcyBieSBwcm92aWRlZCBpbWFnZSBzYW1wbGVzIGFuZFxuICAgICAqIHRoZWlyIGVzdGltYXRlIHNpemVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4veHItbWFuYWdlci5qcycpLlhyTWFuYWdlcn0gbWFuYWdlciAtIFdlYlhSIE1hbmFnZXIuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLl9tYW5hZ2VyID0gbWFuYWdlcjtcblxuICAgICAgICBpZiAodGhpcy5fc3VwcG9ydGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9tYW5hZ2VyLm9uKCdzdGFydCcsIHRoaXMuX29uU2Vzc2lvblN0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX21hbmFnZXIub24oJ2VuZCcsIHRoaXMuX29uU2Vzc2lvbkVuZCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBYUiBzZXNzaW9uIGlzIHN0YXJ0ZWQsIGJ1dCBpbWFnZSB0cmFja2luZyBmYWlsZWQgdG8gcHJvY2VzcyB0aGUgcHJvdmlkZWRcbiAgICAgKiBpbWFnZXMuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgWHJJbWFnZVRyYWNraW5nI2Vycm9yXG4gICAgICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgLSBFcnJvciBvYmplY3QgcmVsYXRlZCB0byBhIGZhaWx1cmUgb2YgaW1hZ2UgdHJhY2tpbmcuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gaW1hZ2UgZm9yIGltYWdlIHRyYWNraW5nLiBBIHdpZHRoIGNhbiBhbHNvIGJlIHByb3ZpZGVkIHRvIGhlbHAgdGhlIHVuZGVybHlpbmcgc3lzdGVtXG4gICAgICogZXN0aW1hdGUgdGhlIGFwcHJvcHJpYXRlIHRyYW5zZm9ybWF0aW9uLiBNb2RpZnlpbmcgdGhlIHRyYWNrZWQgaW1hZ2VzIGxpc3QgaXMgb25seSBwb3NzaWJsZVxuICAgICAqIGJlZm9yZSBhbiBBUiBzZXNzaW9uIGlzIHN0YXJ0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8U1ZHSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8QmxvYnxJbWFnZURhdGF8SW1hZ2VCaXRtYXB9IGltYWdlIC0gSW1hZ2VcbiAgICAgKiB0aGF0IGlzIG1hdGNoaW5nIHJlYWwgd29ybGQgaW1hZ2UgYXMgY2xvc2UgYXMgcG9zc2libGUuIFJlc29sdXRpb24gb2YgaW1hZ2VzIHNob3VsZCBiZSBhdFxuICAgICAqIGxlYXN0IDMwMHgzMDAuIEhpZ2ggcmVzb2x1dGlvbiBkb2VzIE5PVCBpbXByb3ZlIHRyYWNraW5nIHBlcmZvcm1hbmNlLiBDb2xvciBvZiBpbWFnZSBpc1xuICAgICAqIGlycmVsZXZhbnQsIHNvIGdyYXlzY2FsZSBpbWFnZXMgY2FuIGJlIHVzZWQuIEltYWdlcyB3aXRoIHRvbyBtYW55IGdlb21ldHJpYyBmZWF0dXJlcyBvclxuICAgICAqIHJlcGVhdGluZyBwYXR0ZXJucyB3aWxsIHJlZHVjZSB0cmFja2luZyBzdGFiaWxpdHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIC0gV2lkdGggKGluIG1ldGVycykgb2YgaW1hZ2UgaW4gdGhlIHJlYWwgd29ybGQuIFByb3ZpZGluZyB0aGlzIHZhbHVlXG4gICAgICogYXMgY2xvc2UgdG8gdGhlIHJlYWwgdmFsdWUgd2lsbCBpbXByb3ZlIHRyYWNraW5nIHF1YWxpdHkuXG4gICAgICogQHJldHVybnMge1hyVHJhY2tlZEltYWdlfG51bGx9IFRyYWNrZWQgaW1hZ2Ugb2JqZWN0IHRoYXQgd2lsbCBjb250YWluIHRyYWNraW5nIGluZm9ybWF0aW9uLlxuICAgICAqIFJldHVybnMgbnVsbCBpZiBpbWFnZSB0cmFja2luZyBpcyBub3Qgc3VwcG9ydGVkIG9yIGlmIHRoZSBYUiBtYW5hZ2VyIGlzIG5vdCBhY3RpdmUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBpbWFnZSB3aXRoIHdpZHRoIG9mIDIwY20gKDAuMm0pXG4gICAgICogYXBwLnhyLmltYWdlVHJhY2tpbmcuYWRkKGJvb2tDb3ZlckltZywgMC4yKTtcbiAgICAgKi9cbiAgICBhZGQoaW1hZ2UsIHdpZHRoKSB7XG4gICAgICAgIGlmICghdGhpcy5fc3VwcG9ydGVkIHx8IHRoaXMuX21hbmFnZXIuYWN0aXZlKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCB0cmFja2VkSW1hZ2UgPSBuZXcgWHJUcmFja2VkSW1hZ2UoaW1hZ2UsIHdpZHRoKTtcbiAgICAgICAgdGhpcy5faW1hZ2VzLnB1c2godHJhY2tlZEltYWdlKTtcbiAgICAgICAgcmV0dXJuIHRyYWNrZWRJbWFnZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW4gaW1hZ2UgZnJvbSBpbWFnZSB0cmFja2luZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WHJUcmFja2VkSW1hZ2V9IHRyYWNrZWRJbWFnZSAtIFRyYWNrZWQgaW1hZ2UgdG8gYmUgcmVtb3ZlZC4gTW9kaWZ5aW5nIHRoZSB0cmFja2VkXG4gICAgICogaW1hZ2VzIGxpc3QgaXMgb25seSBwb3NzaWJsZSBiZWZvcmUgYW4gQVIgc2Vzc2lvbiBpcyBzdGFydGVkLlxuICAgICAqL1xuICAgIHJlbW92ZSh0cmFja2VkSW1hZ2UpIHtcbiAgICAgICAgaWYgKHRoaXMuX21hbmFnZXIuYWN0aXZlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaW5kID0gdGhpcy5faW1hZ2VzLmluZGV4T2YodHJhY2tlZEltYWdlKTtcbiAgICAgICAgaWYgKGluZCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRyYWNrZWRJbWFnZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9pbWFnZXMuc3BsaWNlKGluZCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfb25TZXNzaW9uU3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX21hbmFnZXIuc2Vzc2lvbi5nZXRUcmFja2VkSW1hZ2VTY29yZXMoKS50aGVuKChpbWFnZXMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2F2YWlsYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW1hZ2VzW2ldLl90cmFja2FibGUgPSBpbWFnZXNbaV0gPT09ICd0cmFja2FibGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9hdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmlyZSgnZXJyb3InLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfb25TZXNzaW9uRW5kKCkge1xuICAgICAgICB0aGlzLl9hdmFpbGFibGUgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2ltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9pbWFnZXNbaV07XG4gICAgICAgICAgICBpbWFnZS5fcG9zZSA9IG51bGw7XG4gICAgICAgICAgICBpbWFnZS5fbWVhc3VyZWRXaWR0aCA9IDA7XG5cbiAgICAgICAgICAgIGlmIChpbWFnZS5fdHJhY2tpbmcpIHtcbiAgICAgICAgICAgICAgICBpbWFnZS5fdHJhY2tpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpbWFnZS5maXJlKCd1bnRyYWNrZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIGFsbCBpbWFnZXMgaGF2ZSBiZWVuIHByZXBhcmVkIGFzIGltYWdlXG4gICAgICogYml0bWFwcy5cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgcHJlcGFyZUltYWdlcyhjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5faW1hZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5faW1hZ2VzLm1hcChmdW5jdGlvbiAodHJhY2tlZEltYWdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrZWRJbWFnZS5wcmVwYXJlKCk7XG4gICAgICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAoYml0bWFwcykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJpdG1hcHMpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHsqfSBmcmFtZSAtIFhSRnJhbWUgZnJvbSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgY2FsbGJhY2suXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHVwZGF0ZShmcmFtZSkge1xuICAgICAgICBpZiAoIXRoaXMuX2F2YWlsYWJsZSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBmcmFtZS5nZXRJbWFnZVRyYWNraW5nUmVzdWx0cygpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHsgfTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGluZGV4W3Jlc3VsdHNbaV0uaW5kZXhdID0gcmVzdWx0c1tpXTtcblxuICAgICAgICAgICAgY29uc3QgdHJhY2tlZEltYWdlID0gdGhpcy5faW1hZ2VzW3Jlc3VsdHNbaV0uaW5kZXhdO1xuICAgICAgICAgICAgdHJhY2tlZEltYWdlLl9lbXVsYXRlZCA9IHJlc3VsdHNbaV0udHJhY2tpbmdTdGF0ZSA9PT0gJ2VtdWxhdGVkJztcbiAgICAgICAgICAgIHRyYWNrZWRJbWFnZS5fbWVhc3VyZWRXaWR0aCA9IHJlc3VsdHNbaV0ubWVhc3VyZWRXaWR0aEluTWV0ZXJzO1xuICAgICAgICAgICAgdHJhY2tlZEltYWdlLl9wb3NlID0gZnJhbWUuZ2V0UG9zZShyZXN1bHRzW2ldLmltYWdlU3BhY2UsIHRoaXMuX21hbmFnZXIuX3JlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5faW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faW1hZ2VzW2ldLl90cmFja2luZyAmJiAhaW5kZXhbaV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbWFnZXNbaV0uX3RyYWNraW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5faW1hZ2VzW2ldLmZpcmUoJ3VudHJhY2tlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faW1hZ2VzW2ldLl90cmFja2luZyAmJiBpbmRleFtpXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ltYWdlc1tpXS5fdHJhY2tpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX2ltYWdlc1tpXS5maXJlKCd0cmFja2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIEltYWdlIFRyYWNraW5nIGlzIHN1cHBvcnRlZC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBzdXBwb3J0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiBJbWFnZSBUcmFja2luZyBpcyBhdmFpbGFibGUuIFRoaXMgcHJvcGVydHkgd2lsbCBiZSBmYWxzZSBpZiBubyBpbWFnZXMgd2VyZSBwcm92aWRlZFxuICAgICAqIGZvciB0aGUgQVIgc2Vzc2lvbiBvciB0aGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgcHJvdmlkZWQgaW1hZ2VzLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGF2YWlsYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F2YWlsYWJsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIHtAbGluayBYclRyYWNrZWRJbWFnZX0gdGhhdCBjb250YWluIHRyYWNraW5nIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge1hyVHJhY2tlZEltYWdlW119XG4gICAgICovXG4gICAgZ2V0IGltYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcztcbiAgICB9XG59XG5cbmV4cG9ydCB7IFhySW1hZ2VUcmFja2luZyB9O1xuIl0sIm5hbWVzIjpbIlhySW1hZ2VUcmFja2luZyIsIkV2ZW50SGFuZGxlciIsImNvbnN0cnVjdG9yIiwibWFuYWdlciIsIl9tYW5hZ2VyIiwiX3N1cHBvcnRlZCIsInBsYXRmb3JtIiwiYnJvd3NlciIsIndpbmRvdyIsIlhSSW1hZ2VUcmFja2luZ1Jlc3VsdCIsIl9hdmFpbGFibGUiLCJfaW1hZ2VzIiwib24iLCJfb25TZXNzaW9uU3RhcnQiLCJfb25TZXNzaW9uRW5kIiwiYWRkIiwiaW1hZ2UiLCJ3aWR0aCIsImFjdGl2ZSIsInRyYWNrZWRJbWFnZSIsIlhyVHJhY2tlZEltYWdlIiwicHVzaCIsInJlbW92ZSIsImluZCIsImluZGV4T2YiLCJkZXN0cm95Iiwic3BsaWNlIiwic2Vzc2lvbiIsImdldFRyYWNrZWRJbWFnZVNjb3JlcyIsInRoZW4iLCJpbWFnZXMiLCJpIiwibGVuZ3RoIiwiX3RyYWNrYWJsZSIsImNhdGNoIiwiZXJyIiwiZmlyZSIsIl9wb3NlIiwiX21lYXN1cmVkV2lkdGgiLCJfdHJhY2tpbmciLCJwcmVwYXJlSW1hZ2VzIiwiY2FsbGJhY2siLCJQcm9taXNlIiwiYWxsIiwibWFwIiwicHJlcGFyZSIsImJpdG1hcHMiLCJ1cGRhdGUiLCJmcmFtZSIsInJlc3VsdHMiLCJnZXRJbWFnZVRyYWNraW5nUmVzdWx0cyIsImluZGV4IiwiX2VtdWxhdGVkIiwidHJhY2tpbmdTdGF0ZSIsIm1lYXN1cmVkV2lkdGhJbk1ldGVycyIsImdldFBvc2UiLCJpbWFnZVNwYWNlIiwiX3JlZmVyZW5jZVNwYWNlIiwic3VwcG9ydGVkIiwiYXZhaWxhYmxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFXQSxNQUFNQSxlQUFlLFNBQVNDLFlBQVksQ0FBQzs7RUFnQ3ZDQyxXQUFXLENBQUNDLE9BQU8sRUFBRTtBQUNqQixJQUFBLEtBQUssRUFBRSxDQUFBO0FBQUMsSUFBQSxJQUFBLENBNUJaQyxRQUFRLEdBQUEsS0FBQSxDQUFBLENBQUE7SUFBQSxJQU1SQyxDQUFBQSxVQUFVLEdBQUdDLFFBQVEsQ0FBQ0MsT0FBTyxJQUFJLENBQUMsQ0FBQ0MsTUFBTSxDQUFDQyxxQkFBcUIsQ0FBQTtJQUFBLElBTS9EQyxDQUFBQSxVQUFVLEdBQUcsS0FBSyxDQUFBO0lBQUEsSUFNbEJDLENBQUFBLE9BQU8sR0FBRyxFQUFFLENBQUE7SUFZUixJQUFJLENBQUNQLFFBQVEsR0FBR0QsT0FBTyxDQUFBO0lBRXZCLElBQUksSUFBSSxDQUFDRSxVQUFVLEVBQUU7QUFDakIsTUFBQSxJQUFJLENBQUNELFFBQVEsQ0FBQ1EsRUFBRSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUNDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUNyRCxNQUFBLElBQUksQ0FBQ1QsUUFBUSxDQUFDUSxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQ0UsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ3JELEtBQUE7QUFDSixHQUFBOztBQTRCQUMsRUFBQUEsR0FBRyxDQUFDQyxLQUFLLEVBQUVDLEtBQUssRUFBRTtBQUNkLElBQUEsSUFBSSxDQUFDLElBQUksQ0FBQ1osVUFBVSxJQUFJLElBQUksQ0FBQ0QsUUFBUSxDQUFDYyxNQUFNLEVBQUUsT0FBTyxJQUFJLENBQUE7SUFFekQsTUFBTUMsWUFBWSxHQUFHLElBQUlDLGNBQWMsQ0FBQ0osS0FBSyxFQUFFQyxLQUFLLENBQUMsQ0FBQTtBQUNyRCxJQUFBLElBQUksQ0FBQ04sT0FBTyxDQUFDVSxJQUFJLENBQUNGLFlBQVksQ0FBQyxDQUFBO0FBQy9CLElBQUEsT0FBT0EsWUFBWSxDQUFBO0FBQ3ZCLEdBQUE7O0VBUUFHLE1BQU0sQ0FBQ0gsWUFBWSxFQUFFO0FBQ2pCLElBQUEsSUFBSSxJQUFJLENBQUNmLFFBQVEsQ0FBQ2MsTUFBTSxFQUFFLE9BQUE7SUFFMUIsTUFBTUssR0FBRyxHQUFHLElBQUksQ0FBQ1osT0FBTyxDQUFDYSxPQUFPLENBQUNMLFlBQVksQ0FBQyxDQUFBO0FBQzlDLElBQUEsSUFBSUksR0FBRyxLQUFLLENBQUMsQ0FBQyxFQUFFO01BQ1pKLFlBQVksQ0FBQ00sT0FBTyxFQUFFLENBQUE7TUFDdEIsSUFBSSxDQUFDZCxPQUFPLENBQUNlLE1BQU0sQ0FBQ0gsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQy9CLEtBQUE7QUFDSixHQUFBOztBQUdBVixFQUFBQSxlQUFlLEdBQUc7SUFDZCxJQUFJLENBQUNULFFBQVEsQ0FBQ3VCLE9BQU8sQ0FBQ0MscUJBQXFCLEVBQUUsQ0FBQ0MsSUFBSSxDQUFFQyxNQUFNLElBQUs7TUFDM0QsSUFBSSxDQUFDcEIsVUFBVSxHQUFHLElBQUksQ0FBQTtBQUV0QixNQUFBLEtBQUssSUFBSXFCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0QsTUFBTSxDQUFDRSxNQUFNLEVBQUVELENBQUMsRUFBRSxFQUFFO0FBQ3BDLFFBQUEsSUFBSSxDQUFDcEIsT0FBTyxDQUFDb0IsQ0FBQyxDQUFDLENBQUNFLFVBQVUsR0FBR0gsTUFBTSxDQUFDQyxDQUFDLENBQUMsS0FBSyxXQUFXLENBQUE7QUFDMUQsT0FBQTtBQUNKLEtBQUMsQ0FBQyxDQUFDRyxLQUFLLENBQUVDLEdBQUcsSUFBSztNQUNkLElBQUksQ0FBQ3pCLFVBQVUsR0FBRyxLQUFLLENBQUE7QUFDdkIsTUFBQSxJQUFJLENBQUMwQixJQUFJLENBQUMsT0FBTyxFQUFFRCxHQUFHLENBQUMsQ0FBQTtBQUMzQixLQUFDLENBQUMsQ0FBQTtBQUNOLEdBQUE7O0FBR0FyQixFQUFBQSxhQUFhLEdBQUc7SUFDWixJQUFJLENBQUNKLFVBQVUsR0FBRyxLQUFLLENBQUE7QUFFdkIsSUFBQSxLQUFLLElBQUlxQixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDcEIsT0FBTyxDQUFDcUIsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtBQUMxQyxNQUFBLE1BQU1mLEtBQUssR0FBRyxJQUFJLENBQUNMLE9BQU8sQ0FBQ29CLENBQUMsQ0FBQyxDQUFBO01BQzdCZixLQUFLLENBQUNxQixLQUFLLEdBQUcsSUFBSSxDQUFBO01BQ2xCckIsS0FBSyxDQUFDc0IsY0FBYyxHQUFHLENBQUMsQ0FBQTtNQUV4QixJQUFJdEIsS0FBSyxDQUFDdUIsU0FBUyxFQUFFO1FBQ2pCdkIsS0FBSyxDQUFDdUIsU0FBUyxHQUFHLEtBQUssQ0FBQTtBQUN2QnZCLFFBQUFBLEtBQUssQ0FBQ29CLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtBQUMzQixPQUFBO0FBQ0osS0FBQTtBQUNKLEdBQUE7O0VBT0FJLGFBQWEsQ0FBQ0MsUUFBUSxFQUFFO0FBQ3BCLElBQUEsSUFBSSxJQUFJLENBQUM5QixPQUFPLENBQUNxQixNQUFNLEVBQUU7TUFDckJVLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLElBQUksQ0FBQ2hDLE9BQU8sQ0FBQ2lDLEdBQUcsQ0FBQyxVQUFVekIsWUFBWSxFQUFFO1FBQ2pELE9BQU9BLFlBQVksQ0FBQzBCLE9BQU8sRUFBRSxDQUFBO0FBQ2pDLE9BQUMsQ0FBQyxDQUFDLENBQUNoQixJQUFJLENBQUMsVUFBVWlCLE9BQU8sRUFBRTtBQUN4QkwsUUFBQUEsUUFBUSxDQUFDLElBQUksRUFBRUssT0FBTyxDQUFDLENBQUE7QUFDM0IsT0FBQyxDQUFDLENBQUNaLEtBQUssQ0FBQyxVQUFVQyxHQUFHLEVBQUU7QUFDcEJNLFFBQUFBLFFBQVEsQ0FBQ04sR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ3ZCLE9BQUMsQ0FBQyxDQUFBO0FBQ04sS0FBQyxNQUFNO0FBQ0hNLE1BQUFBLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDeEIsS0FBQTtBQUNKLEdBQUE7O0VBTUFNLE1BQU0sQ0FBQ0MsS0FBSyxFQUFFO0FBQ1YsSUFBQSxJQUFJLENBQUMsSUFBSSxDQUFDdEMsVUFBVSxFQUFFLE9BQUE7QUFFdEIsSUFBQSxNQUFNdUMsT0FBTyxHQUFHRCxLQUFLLENBQUNFLHVCQUF1QixFQUFFLENBQUE7SUFDL0MsTUFBTUMsS0FBSyxHQUFHLEVBQUcsQ0FBQTtBQUVqQixJQUFBLEtBQUssSUFBSXBCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR2tCLE9BQU8sQ0FBQ2pCLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7QUFDckNvQixNQUFBQSxLQUFLLENBQUNGLE9BQU8sQ0FBQ2xCLENBQUMsQ0FBQyxDQUFDb0IsS0FBSyxDQUFDLEdBQUdGLE9BQU8sQ0FBQ2xCLENBQUMsQ0FBQyxDQUFBO0FBRXBDLE1BQUEsTUFBTVosWUFBWSxHQUFHLElBQUksQ0FBQ1IsT0FBTyxDQUFDc0MsT0FBTyxDQUFDbEIsQ0FBQyxDQUFDLENBQUNvQixLQUFLLENBQUMsQ0FBQTtNQUNuRGhDLFlBQVksQ0FBQ2lDLFNBQVMsR0FBR0gsT0FBTyxDQUFDbEIsQ0FBQyxDQUFDLENBQUNzQixhQUFhLEtBQUssVUFBVSxDQUFBO01BQ2hFbEMsWUFBWSxDQUFDbUIsY0FBYyxHQUFHVyxPQUFPLENBQUNsQixDQUFDLENBQUMsQ0FBQ3VCLHFCQUFxQixDQUFBO0FBQzlEbkMsTUFBQUEsWUFBWSxDQUFDa0IsS0FBSyxHQUFHVyxLQUFLLENBQUNPLE9BQU8sQ0FBQ04sT0FBTyxDQUFDbEIsQ0FBQyxDQUFDLENBQUN5QixVQUFVLEVBQUUsSUFBSSxDQUFDcEQsUUFBUSxDQUFDcUQsZUFBZSxDQUFDLENBQUE7QUFDNUYsS0FBQTtBQUVBLElBQUEsS0FBSyxJQUFJMUIsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ3BCLE9BQU8sQ0FBQ3FCLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7QUFDMUMsTUFBQSxJQUFJLElBQUksQ0FBQ3BCLE9BQU8sQ0FBQ29CLENBQUMsQ0FBQyxDQUFDUSxTQUFTLElBQUksQ0FBQ1ksS0FBSyxDQUFDcEIsQ0FBQyxDQUFDLEVBQUU7UUFDeEMsSUFBSSxDQUFDcEIsT0FBTyxDQUFDb0IsQ0FBQyxDQUFDLENBQUNRLFNBQVMsR0FBRyxLQUFLLENBQUE7UUFDakMsSUFBSSxDQUFDNUIsT0FBTyxDQUFDb0IsQ0FBQyxDQUFDLENBQUNLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtBQUNyQyxPQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQ3pCLE9BQU8sQ0FBQ29CLENBQUMsQ0FBQyxDQUFDUSxTQUFTLElBQUlZLEtBQUssQ0FBQ3BCLENBQUMsQ0FBQyxFQUFFO1FBQy9DLElBQUksQ0FBQ3BCLE9BQU8sQ0FBQ29CLENBQUMsQ0FBQyxDQUFDUSxTQUFTLEdBQUcsSUFBSSxDQUFBO1FBQ2hDLElBQUksQ0FBQzVCLE9BQU8sQ0FBQ29CLENBQUMsQ0FBQyxDQUFDSyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7QUFDbkMsT0FBQTtBQUNKLEtBQUE7QUFDSixHQUFBOztBQU9BLEVBQUEsSUFBSXNCLFNBQVMsR0FBRztJQUNaLE9BQU8sSUFBSSxDQUFDckQsVUFBVSxDQUFBO0FBQzFCLEdBQUE7O0FBUUEsRUFBQSxJQUFJc0QsU0FBUyxHQUFHO0lBQ1osT0FBTyxJQUFJLENBQUNqRCxVQUFVLENBQUE7QUFDMUIsR0FBQTs7QUFPQSxFQUFBLElBQUlvQixNQUFNLEdBQUc7SUFDVCxPQUFPLElBQUksQ0FBQ25CLE9BQU8sQ0FBQTtBQUN2QixHQUFBO0FBQ0o7Ozs7In0=
