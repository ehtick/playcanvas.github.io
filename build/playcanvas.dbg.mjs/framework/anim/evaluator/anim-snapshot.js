/**
 * @license
 * PlayCanvas Engine v1.63.0-dev revision 9f3635a4e (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { AnimCache } from './anim-cache.js';

/**
 * AnimSnapshot stores the state of an animation track at a particular time.
 *
 * @ignore
 */
class AnimSnapshot {
  /**
   * Create a new animation snapshot.
   *
   * @param {import('./anim-track.js').AnimTrack} animTrack - The source track.
   */
  constructor(animTrack) {
    this._name = animTrack.name + 'Snapshot';
    this._time = -1;

    // per-curve input cache
    this._cache = [];

    // per-curve evaluation results
    this._results = [];

    // pre-allocate input caches
    for (let i = 0; i < animTrack._inputs.length; ++i) {
      this._cache[i] = new AnimCache();
    }

    // pre-allocate storage for evaluation results
    const curves = animTrack._curves;
    const outputs = animTrack._outputs;
    for (let i = 0; i < curves.length; ++i) {
      const curve = curves[i];
      const output = outputs[curve._output];
      const storage = [];
      for (let j = 0; j < output._components; ++j) {
        storage[j] = 0;
      }
      this._results[i] = storage;
    }
  }
}

export { AnimSnapshot };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbS1zbmFwc2hvdC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2ZyYW1ld29yay9hbmltL2V2YWx1YXRvci9hbmltLXNuYXBzaG90LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFuaW1DYWNoZSB9IGZyb20gJy4vYW5pbS1jYWNoZS5qcyc7XG5cbi8qKlxuICogQW5pbVNuYXBzaG90IHN0b3JlcyB0aGUgc3RhdGUgb2YgYW4gYW5pbWF0aW9uIHRyYWNrIGF0IGEgcGFydGljdWxhciB0aW1lLlxuICpcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgQW5pbVNuYXBzaG90IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgYW5pbWF0aW9uIHNuYXBzaG90LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vYW5pbS10cmFjay5qcycpLkFuaW1UcmFja30gYW5pbVRyYWNrIC0gVGhlIHNvdXJjZSB0cmFjay5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhbmltVHJhY2spIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGFuaW1UcmFjay5uYW1lICsgJ1NuYXBzaG90JztcbiAgICAgICAgdGhpcy5fdGltZSA9IC0xO1xuXG4gICAgICAgIC8vIHBlci1jdXJ2ZSBpbnB1dCBjYWNoZVxuICAgICAgICB0aGlzLl9jYWNoZSA9IFtdO1xuXG4gICAgICAgIC8vIHBlci1jdXJ2ZSBldmFsdWF0aW9uIHJlc3VsdHNcbiAgICAgICAgdGhpcy5fcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgIC8vIHByZS1hbGxvY2F0ZSBpbnB1dCBjYWNoZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmltVHJhY2suX2lucHV0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVbaV0gPSBuZXcgQW5pbUNhY2hlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwcmUtYWxsb2NhdGUgc3RvcmFnZSBmb3IgZXZhbHVhdGlvbiByZXN1bHRzXG4gICAgICAgIGNvbnN0IGN1cnZlcyA9IGFuaW1UcmFjay5fY3VydmVzO1xuICAgICAgICBjb25zdCBvdXRwdXRzID0gYW5pbVRyYWNrLl9vdXRwdXRzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnZlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgY3VydmUgPSBjdXJ2ZXNbaV07XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBvdXRwdXRzW2N1cnZlLl9vdXRwdXRdO1xuICAgICAgICAgICAgY29uc3Qgc3RvcmFnZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvdXRwdXQuX2NvbXBvbmVudHM7ICsraikge1xuICAgICAgICAgICAgICAgIHN0b3JhZ2Vbal0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVzdWx0c1tpXSA9IHN0b3JhZ2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IEFuaW1TbmFwc2hvdCB9O1xuIl0sIm5hbWVzIjpbIkFuaW1TbmFwc2hvdCIsImNvbnN0cnVjdG9yIiwiYW5pbVRyYWNrIiwiX25hbWUiLCJuYW1lIiwiX3RpbWUiLCJfY2FjaGUiLCJfcmVzdWx0cyIsImkiLCJfaW5wdXRzIiwibGVuZ3RoIiwiQW5pbUNhY2hlIiwiY3VydmVzIiwiX2N1cnZlcyIsIm91dHB1dHMiLCJfb3V0cHV0cyIsImN1cnZlIiwib3V0cHV0IiwiX291dHB1dCIsInN0b3JhZ2UiLCJqIiwiX2NvbXBvbmVudHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsWUFBWSxDQUFDO0FBQ2Y7QUFDSjtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxXQUFXQSxDQUFDQyxTQUFTLEVBQUU7QUFDbkIsSUFBQSxJQUFJLENBQUNDLEtBQUssR0FBR0QsU0FBUyxDQUFDRSxJQUFJLEdBQUcsVUFBVSxDQUFBO0FBQ3hDLElBQUEsSUFBSSxDQUFDQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUE7O0FBRWY7SUFDQSxJQUFJLENBQUNDLE1BQU0sR0FBRyxFQUFFLENBQUE7O0FBRWhCO0lBQ0EsSUFBSSxDQUFDQyxRQUFRLEdBQUcsRUFBRSxDQUFBOztBQUVsQjtBQUNBLElBQUEsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdOLFNBQVMsQ0FBQ08sT0FBTyxDQUFDQyxNQUFNLEVBQUUsRUFBRUYsQ0FBQyxFQUFFO01BQy9DLElBQUksQ0FBQ0YsTUFBTSxDQUFDRSxDQUFDLENBQUMsR0FBRyxJQUFJRyxTQUFTLEVBQUUsQ0FBQTtBQUNwQyxLQUFBOztBQUVBO0FBQ0EsSUFBQSxNQUFNQyxNQUFNLEdBQUdWLFNBQVMsQ0FBQ1csT0FBTyxDQUFBO0FBQ2hDLElBQUEsTUFBTUMsT0FBTyxHQUFHWixTQUFTLENBQUNhLFFBQVEsQ0FBQTtBQUNsQyxJQUFBLEtBQUssSUFBSVAsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSSxNQUFNLENBQUNGLE1BQU0sRUFBRSxFQUFFRixDQUFDLEVBQUU7QUFDcEMsTUFBQSxNQUFNUSxLQUFLLEdBQUdKLE1BQU0sQ0FBQ0osQ0FBQyxDQUFDLENBQUE7QUFDdkIsTUFBQSxNQUFNUyxNQUFNLEdBQUdILE9BQU8sQ0FBQ0UsS0FBSyxDQUFDRSxPQUFPLENBQUMsQ0FBQTtNQUNyQyxNQUFNQyxPQUFPLEdBQUcsRUFBRSxDQUFBO0FBQ2xCLE1BQUEsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdILE1BQU0sQ0FBQ0ksV0FBVyxFQUFFLEVBQUVELENBQUMsRUFBRTtBQUN6Q0QsUUFBQUEsT0FBTyxDQUFDQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDbEIsT0FBQTtBQUNBLE1BQUEsSUFBSSxDQUFDYixRQUFRLENBQUNDLENBQUMsQ0FBQyxHQUFHVyxPQUFPLENBQUE7QUFDOUIsS0FBQTtBQUNKLEdBQUE7QUFDSjs7OzsifQ==
