/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../core/debug.js';
import { guid } from '../core/guid.js';
import { GraphNode } from '../scene/graph-node.js';
import { getApplication } from './globals.js';

const _enableList = [];

class Entity extends GraphNode {

  constructor(name, app = getApplication()) {
    super(name);
    this.anim = void 0;
    this.animation = void 0;
    this.audiolistener = void 0;
    this.button = void 0;
    this.camera = void 0;
    this.collision = void 0;
    this.element = void 0;
    this.layoutchild = void 0;
    this.layoutgroup = void 0;
    this.light = void 0;
    this.model = void 0;
    this.particlesystem = void 0;
    this.render = void 0;
    this.rigidbody = void 0;
    this.screen = void 0;
    this.script = void 0;
    this.scrollbar = void 0;
    this.scrollview = void 0;
    this.sound = void 0;
    this.sprite = void 0;
    this.c = {};
    this._app = void 0;
    this._destroying = false;
    this._guid = null;
    this._template = false;
    Debug.assert(app, 'Could not find current application');
    this._app = app;
  }

  addComponent(type, data) {
    const system = this._app.systems[type];
    if (!system) {
      Debug.error(`addComponent: System '${type}' doesn't exist`);
      return null;
    }
    if (this.c[type]) {
      Debug.warn(`addComponent: Entity already has '${type}' component`);
      return null;
    }
    return system.addComponent(this, data);
  }

  removeComponent(type) {
    const system = this._app.systems[type];
    if (!system) {
      Debug.error(`addComponent: System '${type}' doesn't exist`);
      return;
    }
    if (!this.c[type]) {
      Debug.warn(`removeComponent: Entity doesn't have '${type}' component`);
      return;
    }
    system.removeComponent(this);
  }

  findComponent(type) {
    const entity = this.findOne(function (node) {
      return node.c && node.c[type];
    });
    return entity && entity.c[type];
  }

  findComponents(type) {
    const entities = this.find(function (node) {
      return node.c && node.c[type];
    });
    return entities.map(function (entity) {
      return entity.c[type];
    });
  }

  getGuid() {
    if (!this._guid) {
      this.setGuid(guid.create());
    }
    return this._guid;
  }

  setGuid(guid) {
    const index = this._app._entityIndex;
    if (this._guid) {
      delete index[this._guid];
    }

    this._guid = guid;
    index[this._guid] = this;
  }

  _notifyHierarchyStateChanged(node, enabled) {
    let enableFirst = false;
    if (node === this && _enableList.length === 0) enableFirst = true;
    node._beingEnabled = true;
    node._onHierarchyStateChanged(enabled);
    if (node._onHierarchyStatePostChanged) _enableList.push(node);
    const c = node._children;
    for (let i = 0, len = c.length; i < len; i++) {
      if (c[i]._enabled) this._notifyHierarchyStateChanged(c[i], enabled);
    }
    node._beingEnabled = false;
    if (enableFirst) {
      for (let i = 0; i < _enableList.length; i++) {
        _enableList[i]._onHierarchyStatePostChanged();
      }
      _enableList.length = 0;
    }
  }

  _onHierarchyStateChanged(enabled) {
    super._onHierarchyStateChanged(enabled);

    const components = this.c;
    for (const type in components) {
      if (components.hasOwnProperty(type)) {
        const component = components[type];
        if (component.enabled) {
          if (enabled) {
            component.onEnable();
          } else {
            component.onDisable();
          }
        }
      }
    }
  }

  _onHierarchyStatePostChanged() {
    const components = this.c;
    for (const type in components) {
      if (components.hasOwnProperty(type)) components[type].onPostStateChange();
    }
  }

  findByGuid(guid) {
    if (this._guid === guid) return this;
    const e = this._app._entityIndex[guid];
    if (e && (e === this || e.isDescendantOf(this))) {
      return e;
    }
    return null;
  }

  destroy() {
    this._destroying = true;

    for (const name in this.c) {
      this.c[name].enabled = false;
    }

    for (const name in this.c) {
      this.c[name].system.removeComponent(this);
    }

    if (this._parent) this._parent.removeChild(this);

    const children = this._children;
    while (children.length) {
      const child = children.pop();
      child._parent = null;
      if (child instanceof Entity) {
        child.destroy();
      }
    }

    this.fire('destroy', this);

    this.off();

    if (this._guid) {
      delete this._app._entityIndex[this._guid];
    }
    this._destroying = false;
  }

  clone() {
    const duplicatedIdsMap = {};
    const clone = this._cloneRecursively(duplicatedIdsMap);
    duplicatedIdsMap[this.getGuid()] = clone;
    resolveDuplicatedEntityReferenceProperties(this, this, clone, duplicatedIdsMap);
    return clone;
  }

  _cloneRecursively(duplicatedIdsMap) {
    const clone = new this.constructor(undefined, this._app);
    super._cloneInternal(clone);
    for (const type in this.c) {
      const component = this.c[type];
      component.system.cloneComponent(this, clone);
    }
    for (let i = 0; i < this._children.length; i++) {
      const oldChild = this._children[i];
      if (oldChild instanceof Entity) {
        const newChild = oldChild._cloneRecursively(duplicatedIdsMap);
        clone.addChild(newChild);
        duplicatedIdsMap[oldChild.getGuid()] = newChild;
      }
    }
    return clone;
  }
}

function resolveDuplicatedEntityReferenceProperties(oldSubtreeRoot, oldEntity, newEntity, duplicatedIdsMap) {
  if (oldEntity instanceof Entity) {
    const components = oldEntity.c;

    for (const componentName in components) {
      const component = components[componentName];
      const entityProperties = component.system.getPropertiesOfType('entity');
      for (let i = 0, len = entityProperties.length; i < len; i++) {
        const propertyDescriptor = entityProperties[i];
        const propertyName = propertyDescriptor.name;
        const oldEntityReferenceId = component[propertyName];
        const entityIsWithinOldSubtree = !!oldSubtreeRoot.findByGuid(oldEntityReferenceId);
        if (entityIsWithinOldSubtree) {
          const newEntityReferenceId = duplicatedIdsMap[oldEntityReferenceId].getGuid();
          if (newEntityReferenceId) {
            newEntity.c[componentName][propertyName] = newEntityReferenceId;
          } else {
            Debug.warn('Could not find corresponding entity id when resolving duplicated entity references');
          }
        }
      }
    }

    if (components.script && !newEntity._app.useLegacyScriptAttributeCloning) {
      newEntity.script.resolveDuplicatedEntityReferenceProperties(components.script, duplicatedIdsMap);
    }

    if (components.render) {
      newEntity.render.resolveDuplicatedEntityReferenceProperties(components.render, duplicatedIdsMap);
    }

    if (components.anim) {
      newEntity.anim.resolveDuplicatedEntityReferenceProperties(components.anim, duplicatedIdsMap);
    }

    const _old = oldEntity.children.filter(function (e) {
      return e instanceof Entity;
    });
    const _new = newEntity.children.filter(function (e) {
      return e instanceof Entity;
    });
    for (let i = 0, len = _old.length; i < len; i++) {
      resolveDuplicatedEntityReferenceProperties(oldSubtreeRoot, _old[i], _new[i], duplicatedIdsMap);
    }
  }
}

export { Entity };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXR5LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2VudGl0eS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZyB9IGZyb20gJy4uL2NvcmUvZGVidWcuanMnO1xuaW1wb3J0IHsgZ3VpZCB9IGZyb20gJy4uL2NvcmUvZ3VpZC5qcyc7XG5cbmltcG9ydCB7IEdyYXBoTm9kZSB9IGZyb20gJy4uL3NjZW5lL2dyYXBoLW5vZGUuanMnO1xuXG5pbXBvcnQgeyBnZXRBcHBsaWNhdGlvbiB9IGZyb20gJy4vZ2xvYmFscy5qcyc7XG5cbi8qKlxuICogQHR5cGUge0dyYXBoTm9kZVtdfVxuICogQGlnbm9yZVxuICovXG5jb25zdCBfZW5hYmxlTGlzdCA9IFtdO1xuXG4vKipcbiAqIFRoZSBFbnRpdHkgaXMgdGhlIGNvcmUgcHJpbWl0aXZlIG9mIGEgUGxheUNhbnZhcyBnYW1lLiBHZW5lcmFsbHkgc3BlYWtpbmcgYW4gb2JqZWN0IGluIHlvdXIgZ2FtZVxuICogd2lsbCBjb25zaXN0IG9mIGFuIHtAbGluayBFbnRpdHl9LCBhbmQgYSBzZXQgb2Yge0BsaW5rIENvbXBvbmVudH1zIHdoaWNoIGFyZSBtYW5hZ2VkIGJ5IHRoZWlyXG4gKiByZXNwZWN0aXZlIHtAbGluayBDb21wb25lbnRTeXN0ZW19cy4gT25lIG9mIHRob3NlIGNvbXBvbmVudHMgbWF5YmUgYSB7QGxpbmsgU2NyaXB0Q29tcG9uZW50fVxuICogd2hpY2ggYWxsb3dzIHlvdSB0byB3cml0ZSBjdXN0b20gY29kZSB0byBhdHRhY2ggdG8geW91ciBFbnRpdHkuXG4gKlxuICogVGhlIEVudGl0eSB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBvYmplY3QgYW5kIGFsc28gcHJvdmlkZXMgYSB0cmFuc2Zvcm0gZm9yIHBvc2l0aW9uIGFuZFxuICogb3JpZW50YXRpb24gd2hpY2ggaXQgaW5oZXJpdHMgZnJvbSB7QGxpbmsgR3JhcGhOb2RlfSBzbyBjYW4gYmUgYWRkZWQgaW50byB0aGUgc2NlbmUgZ3JhcGguIFRoZVxuICogQ29tcG9uZW50IGFuZCBDb21wb25lbnRTeXN0ZW0gcHJvdmlkZSB0aGUgbG9naWMgdG8gZ2l2ZSBhbiBFbnRpdHkgYSBzcGVjaWZpYyB0eXBlIG9mIGJlaGF2aW9yLlxuICogZS5nLiB0aGUgYWJpbGl0eSB0byByZW5kZXIgYSBtb2RlbCBvciBwbGF5IGEgc291bmQuIENvbXBvbmVudHMgYXJlIHNwZWNpZmljIHRvIGFuIGluc3RhbmNlIG9mIGFuXG4gKiBFbnRpdHkgYW5kIGFyZSBhdHRhY2hlZCAoZS5nLiBgdGhpcy5lbnRpdHkubW9kZWxgKSBDb21wb25lbnRTeXN0ZW1zIGFsbG93IGFjY2VzcyB0byBhbGwgRW50aXRpZXNcbiAqIGFuZCBDb21wb25lbnRzIGFuZCBhcmUgYXR0YWNoZWQgdG8gdGhlIHtAbGluayBBcHBCYXNlfS5cbiAqXG4gKiBAYXVnbWVudHMgR3JhcGhOb2RlXG4gKi9cbmNsYXNzIEVudGl0eSBleHRlbmRzIEdyYXBoTm9kZSB7XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIEFuaW1Db21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL2FuaW0vY29tcG9uZW50LmpzJykuQW5pbUNvbXBvbmVudHx1bmRlZmluZWR9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgYW5pbTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL2FuaW1hdGlvbi9jb21wb25lbnQuanMnKS5BbmltYXRpb25Db21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGFuaW1hdGlvbjtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBBdWRpb0xpc3RlbmVyQ29tcG9uZW50fSBhdHRhY2hlZCB0byB0aGlzIGVudGl0eS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoJy4vY29tcG9uZW50cy9hdWRpby1saXN0ZW5lci9jb21wb25lbnQuanMnKS5BdWRpb0xpc3RlbmVyQ29tcG9uZW50fHVuZGVmaW5lZH1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBhdWRpb2xpc3RlbmVyO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIEJ1dHRvbkNvbXBvbmVudH0gYXR0YWNoZWQgdG8gdGhpcyBlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuL2NvbXBvbmVudHMvYnV0dG9uL2NvbXBvbmVudC5qcycpLkJ1dHRvbkNvbXBvbmVudHx1bmRlZmluZWR9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgYnV0dG9uO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIENhbWVyYUNvbXBvbmVudH19IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL2NhbWVyYS9jb21wb25lbnQuanMnKS5DYW1lcmFDb21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGNhbWVyYTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBDb2xsaXNpb25Db21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL2NvbGxpc2lvbi9jb21wb25lbnQuanMnKS5Db2xsaXNpb25Db21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGNvbGxpc2lvbjtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBFbGVtZW50Q29tcG9uZW50fSBhdHRhY2hlZCB0byB0aGlzIGVudGl0eS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoJy4vY29tcG9uZW50cy9lbGVtZW50L2NvbXBvbmVudC5qcycpLkVsZW1lbnRDb21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB7QGxpbmsgTGF5b3V0Q2hpbGRDb21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL2xheW91dC1jaGlsZC9jb21wb25lbnQuanMnKS5MYXlvdXRDaGlsZENvbXBvbmVudHx1bmRlZmluZWR9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgbGF5b3V0Y2hpbGQ7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB7QGxpbmsgTGF5b3V0R3JvdXBDb21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL2xheW91dC1ncm91cC9jb21wb25lbnQuanMnKS5MYXlvdXRHcm91cENvbXBvbmVudHx1bmRlZmluZWR9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgbGF5b3V0Z3JvdXA7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB7QGxpbmsgTGlnaHRDb21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL2xpZ2h0L2NvbXBvbmVudC5qcycpLkxpZ2h0Q29tcG9uZW50fHVuZGVmaW5lZH1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBsaWdodDtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBNb2RlbENvbXBvbmVudH0gYXR0YWNoZWQgdG8gdGhpcyBlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuL2NvbXBvbmVudHMvbW9kZWwvY29tcG9uZW50LmpzJykuTW9kZWxDb21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIG1vZGVsO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIFBhcnRpY2xlU3lzdGVtQ29tcG9uZW50fSBhdHRhY2hlZCB0byB0aGlzIGVudGl0eS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoJy4vY29tcG9uZW50cy9wYXJ0aWNsZS1zeXN0ZW0vY29tcG9uZW50LmpzJykuUGFydGljbGVTeXN0ZW1Db21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHBhcnRpY2xlc3lzdGVtO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIFJlbmRlckNvbXBvbmVudH0gYXR0YWNoZWQgdG8gdGhpcyBlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuL2NvbXBvbmVudHMvcmVuZGVyL2NvbXBvbmVudC5qcycpLlJlbmRlckNvbXBvbmVudHx1bmRlZmluZWR9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgcmVuZGVyO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIFJpZ2lkQm9keUNvbXBvbmVudH0gYXR0YWNoZWQgdG8gdGhpcyBlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuL2NvbXBvbmVudHMvcmlnaWQtYm9keS9jb21wb25lbnQuanMnKS5SaWdpZEJvZHlDb21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHJpZ2lkYm9keTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBTY3JlZW5Db21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL3NjcmVlbi9jb21wb25lbnQuanMnKS5TY3JlZW5Db21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHNjcmVlbjtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBTY3JpcHRDb21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL3NjcmlwdC9jb21wb25lbnQuanMnKS5TY3JpcHRDb21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHNjcmlwdDtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBTY3JvbGxiYXJDb21wb25lbnR9IGF0dGFjaGVkIHRvIHRoaXMgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9jb21wb25lbnRzL3Njcm9sbGJhci9jb21wb25lbnQuanMnKS5TY3JvbGxiYXJDb21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHNjcm9sbGJhcjtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHtAbGluayBTY3JvbGxWaWV3Q29tcG9uZW50fSBhdHRhY2hlZCB0byB0aGlzIGVudGl0eS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoJy4vY29tcG9uZW50cy9zY3JvbGwtdmlldy9jb21wb25lbnQuanMnKS5TY3JvbGxWaWV3Q29tcG9uZW50fHVuZGVmaW5lZH1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBzY3JvbGx2aWV3O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIFNvdW5kQ29tcG9uZW50fSBhdHRhY2hlZCB0byB0aGlzIGVudGl0eS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoJy4vY29tcG9uZW50cy9zb3VuZC9jb21wb25lbnQuanMnKS5Tb3VuZENvbXBvbmVudHx1bmRlZmluZWR9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgc291bmQ7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB7QGxpbmsgU3ByaXRlQ29tcG9uZW50fSBhdHRhY2hlZCB0byB0aGlzIGVudGl0eS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoJy4vY29tcG9uZW50cy9zcHJpdGUvY29tcG9uZW50LmpzJykuU3ByaXRlQ29tcG9uZW50fHVuZGVmaW5lZH1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBzcHJpdGU7XG5cbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgc3RvcmFnZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoJy4vY29tcG9uZW50cy9jb21wb25lbnQuanMnKS5Db21wb25lbnQ+fVxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBjID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuL2FwcC1iYXNlLmpzJykuQXBwQmFzZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9hcHA7XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGJ5IGNvbXBvbmVudCBzeXN0ZW1zIHRvIHNwZWVkIHVwIGRlc3RydWN0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIF9kZXN0cm95aW5nID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ3VpZCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiB0aGUgZW50aXRpZXMgb2YgYSB0ZW1wbGF0ZSByb290IGluc3RhbmNlLCB3aGljaCBoYXZlIGl0IHNldCB0b1xuICAgICAqIHRydWUsIGFuZCB0aGUgY2xvbmVkIGluc3RhbmNlIGVudGl0aWVzIChzZXQgdG8gZmFsc2UpLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIF90ZW1wbGF0ZSA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEVudGl0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV0gLSBUaGUgbm9uLXVuaXF1ZSBuYW1lIG9mIHRoZSBlbnRpdHksIGRlZmF1bHQgaXMgXCJVbnRpdGxlZFwiLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gW2FwcF0gLSBUaGUgYXBwbGljYXRpb24gdGhlIGVudGl0eSBiZWxvbmdzIHRvLFxuICAgICAqIGRlZmF1bHQgaXMgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiB2YXIgZW50aXR5ID0gbmV3IHBjLkVudGl0eSgpO1xuICAgICAqXG4gICAgICogLy8gQWRkIGEgQ29tcG9uZW50IHRvIHRoZSBFbnRpdHlcbiAgICAgKiBlbnRpdHkuYWRkQ29tcG9uZW50KFwiY2FtZXJhXCIsIHtcbiAgICAgKiAgICAgZm92OiA0NSxcbiAgICAgKiAgICAgbmVhckNsaXA6IDEsXG4gICAgICogICAgIGZhckNsaXA6IDEwMDAwXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgdGhlIEVudGl0eSBpbnRvIHRoZSBzY2VuZSBncmFwaFxuICAgICAqIGFwcC5yb290LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICpcbiAgICAgKiAvLyBNb3ZlIHRoZSBlbnRpdHlcbiAgICAgKiBlbnRpdHkudHJhbnNsYXRlKDEwLCAwLCAwKTtcbiAgICAgKlxuICAgICAqIC8vIE9yIHRyYW5zbGF0ZSBpdCBieSBzZXR0aW5nIGl0cyBwb3NpdGlvbiBkaXJlY3RseVxuICAgICAqIHZhciBwID0gZW50aXR5LmdldFBvc2l0aW9uKCk7XG4gICAgICogZW50aXR5LnNldFBvc2l0aW9uKHAueCArIDEwLCBwLnksIHAueik7XG4gICAgICpcbiAgICAgKiAvLyBDaGFuZ2UgdGhlIGVudGl0eSdzIHJvdGF0aW9uIGluIGxvY2FsIHNwYWNlXG4gICAgICogdmFyIGUgPSBlbnRpdHkuZ2V0TG9jYWxFdWxlckFuZ2xlcygpO1xuICAgICAqIGVudGl0eS5zZXRMb2NhbEV1bGVyQW5nbGVzKGUueCwgZS55ICsgOTAsIGUueik7XG4gICAgICpcbiAgICAgKiAvLyBPciB1c2Ugcm90YXRlTG9jYWxcbiAgICAgKiBlbnRpdHkucm90YXRlTG9jYWwoMCwgOTAsIDApO1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGFwcCA9IGdldEFwcGxpY2F0aW9uKCkpIHtcbiAgICAgICAgc3VwZXIobmFtZSk7XG5cbiAgICAgICAgRGVidWcuYXNzZXJ0KGFwcCwgJ0NvdWxkIG5vdCBmaW5kIGN1cnJlbnQgYXBwbGljYXRpb24nKTtcbiAgICAgICAgdGhpcy5fYXBwID0gYXBwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBjb21wb25lbnQgYW5kIGFkZCBpdCB0byB0aGUgZW50aXR5LiBVc2UgdGhpcyB0byBhZGQgZnVuY3Rpb25hbGl0eSB0byB0aGUgZW50aXR5XG4gICAgICogbGlrZSByZW5kZXJpbmcgYSBtb2RlbCwgcGxheWluZyBzb3VuZHMgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgbmFtZSBvZiB0aGUgY29tcG9uZW50IHRvIGFkZC4gVmFsaWQgc3RyaW5ncyBhcmU6XG4gICAgICpcbiAgICAgKiAtIFwiYW5pbVwiIC0gc2VlIHtAbGluayBBbmltQ29tcG9uZW50fVxuICAgICAqIC0gXCJhbmltYXRpb25cIiAtIHNlZSB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50fVxuICAgICAqIC0gXCJhdWRpb2xpc3RlbmVyXCIgLSBzZWUge0BsaW5rIEF1ZGlvTGlzdGVuZXJDb21wb25lbnR9XG4gICAgICogLSBcImJ1dHRvblwiIC0gc2VlIHtAbGluayBCdXR0b25Db21wb25lbnR9XG4gICAgICogLSBcImNhbWVyYVwiIC0gc2VlIHtAbGluayBDYW1lcmFDb21wb25lbnR9XG4gICAgICogLSBcImNvbGxpc2lvblwiIC0gc2VlIHtAbGluayBDb2xsaXNpb25Db21wb25lbnR9XG4gICAgICogLSBcImVsZW1lbnRcIiAtIHNlZSB7QGxpbmsgRWxlbWVudENvbXBvbmVudH1cbiAgICAgKiAtIFwibGF5b3V0Y2hpbGRcIiAtIHNlZSB7QGxpbmsgTGF5b3V0Q2hpbGRDb21wb25lbnR9XG4gICAgICogLSBcImxheW91dGdyb3VwXCIgLSBzZWUge0BsaW5rIExheW91dEdyb3VwQ29tcG9uZW50fVxuICAgICAqIC0gXCJsaWdodFwiIC0gc2VlIHtAbGluayBMaWdodENvbXBvbmVudH1cbiAgICAgKiAtIFwibW9kZWxcIiAtIHNlZSB7QGxpbmsgTW9kZWxDb21wb25lbnR9XG4gICAgICogLSBcInBhcnRpY2xlc3lzdGVtXCIgLSBzZWUge0BsaW5rIFBhcnRpY2xlU3lzdGVtQ29tcG9uZW50fVxuICAgICAqIC0gXCJyZW5kZXJcIiAtIHNlZSB7QGxpbmsgUmVuZGVyQ29tcG9uZW50fVxuICAgICAqIC0gXCJyaWdpZGJvZHlcIiAtIHNlZSB7QGxpbmsgUmlnaWRCb2R5Q29tcG9uZW50fVxuICAgICAqIC0gXCJzY3JlZW5cIiAtIHNlZSB7QGxpbmsgU2NyZWVuQ29tcG9uZW50fVxuICAgICAqIC0gXCJzY3JpcHRcIiAtIHNlZSB7QGxpbmsgU2NyaXB0Q29tcG9uZW50fVxuICAgICAqIC0gXCJzY3JvbGxiYXJcIiAtIHNlZSB7QGxpbmsgU2Nyb2xsYmFyQ29tcG9uZW50fVxuICAgICAqIC0gXCJzY3JvbGx2aWV3XCIgLSBzZWUge0BsaW5rIFNjcm9sbFZpZXdDb21wb25lbnR9XG4gICAgICogLSBcInNvdW5kXCIgLSBzZWUge0BsaW5rIFNvdW5kQ29tcG9uZW50fVxuICAgICAqIC0gXCJzcHJpdGVcIiAtIHNlZSB7QGxpbmsgU3ByaXRlQ29tcG9uZW50fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtkYXRhXSAtIFRoZSBpbml0aWFsaXphdGlvbiBkYXRhIGZvciB0aGUgc3BlY2lmaWMgY29tcG9uZW50IHR5cGUuIFJlZmVyIHRvXG4gICAgICogZWFjaCBzcGVjaWZpYyBjb21wb25lbnQncyBBUEkgcmVmZXJlbmNlIHBhZ2UgZm9yIGRldGFpbHMgb24gdmFsaWQgdmFsdWVzIGZvciB0aGlzIHBhcmFtZXRlci5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KCcuL2NvbXBvbmVudHMvY29tcG9uZW50LmpzJykuQ29tcG9uZW50fG51bGx9IFRoZSBuZXcgQ29tcG9uZW50IHRoYXQgd2FzXG4gICAgICogYXR0YWNoZWQgdG8gdGhlIGVudGl0eSBvciBudWxsIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHZhciBlbnRpdHkgPSBuZXcgcGMuRW50aXR5KCk7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgYSBsaWdodCBjb21wb25lbnQgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXNcbiAgICAgKiBlbnRpdHkuYWRkQ29tcG9uZW50KFwibGlnaHRcIik7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgYSBjYW1lcmEgY29tcG9uZW50IHdpdGggc29tZSBzcGVjaWZpZWQgcHJvcGVydGllc1xuICAgICAqIGVudGl0eS5hZGRDb21wb25lbnQoXCJjYW1lcmFcIiwge1xuICAgICAqICAgICBmb3Y6IDQ1LFxuICAgICAqICAgICBjbGVhckNvbG9yOiBuZXcgcGMuQ29sb3IoMSwgMCwgMClcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBhZGRDb21wb25lbnQodHlwZSwgZGF0YSkge1xuICAgICAgICBjb25zdCBzeXN0ZW0gPSB0aGlzLl9hcHAuc3lzdGVtc1t0eXBlXTtcbiAgICAgICAgaWYgKCFzeXN0ZW0pIHtcbiAgICAgICAgICAgIERlYnVnLmVycm9yKGBhZGRDb21wb25lbnQ6IFN5c3RlbSAnJHt0eXBlfScgZG9lc24ndCBleGlzdGApO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY1t0eXBlXSkge1xuICAgICAgICAgICAgRGVidWcud2FybihgYWRkQ29tcG9uZW50OiBFbnRpdHkgYWxyZWFkeSBoYXMgJyR7dHlwZX0nIGNvbXBvbmVudGApO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN5c3RlbS5hZGRDb21wb25lbnQodGhpcywgZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY29tcG9uZW50IGZyb20gdGhlIEVudGl0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIG5hbWUgb2YgdGhlIENvbXBvbmVudCB0eXBlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIGVudGl0eSA9IG5ldyBwYy5FbnRpdHkoKTtcbiAgICAgKiBlbnRpdHkuYWRkQ29tcG9uZW50KFwibGlnaHRcIik7IC8vIGFkZCBuZXcgbGlnaHQgY29tcG9uZW50XG4gICAgICpcbiAgICAgKiBlbnRpdHkucmVtb3ZlQ29tcG9uZW50KFwibGlnaHRcIik7IC8vIHJlbW92ZSBsaWdodCBjb21wb25lbnRcbiAgICAgKi9cbiAgICByZW1vdmVDb21wb25lbnQodHlwZSkge1xuICAgICAgICBjb25zdCBzeXN0ZW0gPSB0aGlzLl9hcHAuc3lzdGVtc1t0eXBlXTtcbiAgICAgICAgaWYgKCFzeXN0ZW0pIHtcbiAgICAgICAgICAgIERlYnVnLmVycm9yKGBhZGRDb21wb25lbnQ6IFN5c3RlbSAnJHt0eXBlfScgZG9lc24ndCBleGlzdGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jW3R5cGVdKSB7XG4gICAgICAgICAgICBEZWJ1Zy53YXJuKGByZW1vdmVDb21wb25lbnQ6IEVudGl0eSBkb2Vzbid0IGhhdmUgJyR7dHlwZX0nIGNvbXBvbmVudGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN5c3RlbS5yZW1vdmVDb21wb25lbnQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIHRoZSBlbnRpdHkgYW5kIGFsbCBvZiBpdHMgZGVzY2VuZGFudHMgZm9yIHRoZSBmaXJzdCBjb21wb25lbnQgb2Ygc3BlY2lmaWVkIHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQgdHlwZSB0byByZXRyaWV2ZS5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KCcuL2NvbXBvbmVudHMvY29tcG9uZW50LmpzJykuQ29tcG9uZW50fSBBIGNvbXBvbmVudCBvZiBzcGVjaWZpZWQgdHlwZSwgaWZcbiAgICAgKiB0aGUgZW50aXR5IG9yIGFueSBvZiBpdHMgZGVzY2VuZGFudHMgaGFzIG9uZS4gUmV0dXJucyB1bmRlZmluZWQgb3RoZXJ3aXNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gR2V0IHRoZSBmaXJzdCBmb3VuZCBsaWdodCBjb21wb25lbnQgaW4gdGhlIGhpZXJhcmNoeSB0cmVlIHRoYXQgc3RhcnRzIHdpdGggdGhpcyBlbnRpdHlcbiAgICAgKiB2YXIgbGlnaHQgPSBlbnRpdHkuZmluZENvbXBvbmVudChcImxpZ2h0XCIpO1xuICAgICAqL1xuICAgIGZpbmRDb21wb25lbnQodHlwZSkge1xuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmZpbmRPbmUoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmMgJiYgbm9kZS5jW3R5cGVdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGVudGl0eSAmJiBlbnRpdHkuY1t0eXBlXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggdGhlIGVudGl0eSBhbmQgYWxsIG9mIGl0cyBkZXNjZW5kYW50cyBmb3IgYWxsIGNvbXBvbmVudHMgb2Ygc3BlY2lmaWVkIHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQgdHlwZSB0byByZXRyaWV2ZS5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KCcuL2NvbXBvbmVudHMvY29tcG9uZW50LmpzJykuQ29tcG9uZW50W119IEFsbCBjb21wb25lbnRzIG9mIHNwZWNpZmllZCB0eXBlXG4gICAgICogaW4gdGhlIGVudGl0eSBvciBhbnkgb2YgaXRzIGRlc2NlbmRhbnRzLiBSZXR1cm5zIGVtcHR5IGFycmF5IGlmIG5vbmUgZm91bmQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBHZXQgYWxsIGxpZ2h0IGNvbXBvbmVudHMgaW4gdGhlIGhpZXJhcmNoeSB0cmVlIHRoYXQgc3RhcnRzIHdpdGggdGhpcyBlbnRpdHlcbiAgICAgKiB2YXIgbGlnaHRzID0gZW50aXR5LmZpbmRDb21wb25lbnRzKFwibGlnaHRcIik7XG4gICAgICovXG4gICAgZmluZENvbXBvbmVudHModHlwZSkge1xuICAgICAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMuZmluZChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuYyAmJiBub2RlLmNbdHlwZV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZW50aXRpZXMubWFwKGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHkuY1t0eXBlXTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBHVUlEIHZhbHVlIGZvciB0aGlzIEVudGl0eS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBHVUlEIG9mIHRoZSBFbnRpdHkuXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGdldEd1aWQoKSB7XG4gICAgICAgIC8vIGlmIHRoZSBndWlkIGhhc24ndCBiZWVuIHNldCB5ZXQgdGhlbiBzZXQgaXQgbm93IGJlZm9yZSByZXR1cm5pbmcgaXRcbiAgICAgICAgaWYgKCF0aGlzLl9ndWlkKSB7XG4gICAgICAgICAgICB0aGlzLnNldEd1aWQoZ3VpZC5jcmVhdGUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fZ3VpZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIEdVSUQgdmFsdWUgZm9yIHRoaXMgRW50aXR5LiBOb3RlIHRoYXQgaXQgaXMgdW5saWtlbHkgdGhhdCB5b3Ugc2hvdWxkIG5lZWQgdG8gY2hhbmdlXG4gICAgICogdGhlIEdVSUQgdmFsdWUgb2YgYW4gRW50aXR5IGF0IHJ1bi10aW1lLiBEb2luZyBzbyB3aWxsIGNvcnJ1cHQgdGhlIGdyYXBoIHRoaXMgRW50aXR5IGlzIGluLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGd1aWQgLSBUaGUgR1VJRCB0byBhc3NpZ24gdG8gdGhlIEVudGl0eS5cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgc2V0R3VpZChndWlkKSB7XG4gICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IGd1aWQgZnJvbSBlbnRpdHlJbmRleFxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2FwcC5fZW50aXR5SW5kZXg7XG4gICAgICAgIGlmICh0aGlzLl9ndWlkKSB7XG4gICAgICAgICAgICBkZWxldGUgaW5kZXhbdGhpcy5fZ3VpZF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgbmV3IGd1aWQgdG8gZW50aXR5SW5kZXhcbiAgICAgICAgdGhpcy5fZ3VpZCA9IGd1aWQ7XG4gICAgICAgIGluZGV4W3RoaXMuX2d1aWRdID0gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dyYXBoTm9kZX0gbm9kZSAtIFRoZSBub2RlIHRvIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgLSBFbmFibGUgb3IgZGlzYWJsZSB0aGUgbm9kZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9ub3RpZnlIaWVyYXJjaHlTdGF0ZUNoYW5nZWQobm9kZSwgZW5hYmxlZCkge1xuICAgICAgICBsZXQgZW5hYmxlRmlyc3QgPSBmYWxzZTtcbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMgJiYgX2VuYWJsZUxpc3QubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgZW5hYmxlRmlyc3QgPSB0cnVlO1xuXG4gICAgICAgIG5vZGUuX2JlaW5nRW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgbm9kZS5fb25IaWVyYXJjaHlTdGF0ZUNoYW5nZWQoZW5hYmxlZCk7XG5cbiAgICAgICAgaWYgKG5vZGUuX29uSGllcmFyY2h5U3RhdGVQb3N0Q2hhbmdlZClcbiAgICAgICAgICAgIF9lbmFibGVMaXN0LnB1c2gobm9kZSk7XG5cbiAgICAgICAgY29uc3QgYyA9IG5vZGUuX2NoaWxkcmVuO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGNbaV0uX2VuYWJsZWQpXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5SGllcmFyY2h5U3RhdGVDaGFuZ2VkKGNbaV0sIGVuYWJsZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5fYmVpbmdFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGVuYWJsZUZpcnN0KSB7XG4gICAgICAgICAgICAvLyBkbyBub3QgY2FjaGUgdGhlIGxlbmd0aCBoZXJlLCBhcyBlbmFibGVMaXN0IG1heSBiZSBhZGRlZCB0byBkdXJpbmcgbG9vcFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBfZW5hYmxlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIF9lbmFibGVMaXN0W2ldLl9vbkhpZXJhcmNoeVN0YXRlUG9zdENoYW5nZWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX2VuYWJsZUxpc3QubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCAtIEVuYWJsZSBvciBkaXNhYmxlIHRoZSBub2RlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX29uSGllcmFyY2h5U3RhdGVDaGFuZ2VkKGVuYWJsZWQpIHtcbiAgICAgICAgc3VwZXIuX29uSGllcmFyY2h5U3RhdGVDaGFuZ2VkKGVuYWJsZWQpO1xuXG4gICAgICAgIC8vIGVuYWJsZSAvIGRpc2FibGUgYWxsIHRoZSBjb21wb25lbnRzXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB0aGlzLmM7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBpbiBjb21wb25lbnRzKSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbdHlwZV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQub25FbmFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5vbkRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9vbkhpZXJhcmNoeVN0YXRlUG9zdENoYW5nZWQoKSB7XG4gICAgICAgIC8vIHBvc3QgZW5hYmxlIGFsbCB0aGUgY29tcG9uZW50c1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5jO1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgaWYgKGNvbXBvbmVudHMuaGFzT3duUHJvcGVydHkodHlwZSkpXG4gICAgICAgICAgICAgICAgY29tcG9uZW50c1t0eXBlXS5vblBvc3RTdGF0ZUNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCBhIGRlc2NlbmRhbnQgb2YgdGhpcyBlbnRpdHkgd2l0aCB0aGUgR1VJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBndWlkIC0gVGhlIEdVSUQgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyB7RW50aXR5fG51bGx9IFRoZSBlbnRpdHkgd2l0aCB0aGUgbWF0Y2hpbmcgR1VJRCBvciBudWxsIGlmIG5vIGVudGl0eSBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBmaW5kQnlHdWlkKGd1aWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2d1aWQgPT09IGd1aWQpIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9hcHAuX2VudGl0eUluZGV4W2d1aWRdO1xuICAgICAgICBpZiAoZSAmJiAoZSA9PT0gdGhpcyB8fCBlLmlzRGVzY2VuZGFudE9mKHRoaXMpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGNvbXBvbmVudHMgZnJvbSB0aGUgRW50aXR5IGFuZCBkZXRhY2ggaXQgZnJvbSB0aGUgRW50aXR5IGhpZXJhcmNoeS4gVGhlblxuICAgICAqIHJlY3Vyc2l2ZWx5IGRlc3Ryb3kgYWxsIGFuY2VzdG9yIEVudGl0aWVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiB2YXIgZmlyc3RDaGlsZCA9IHRoaXMuZW50aXR5LmNoaWxkcmVuWzBdO1xuICAgICAqIGZpcnN0Q2hpbGQuZGVzdHJveSgpOyAvLyBkZWxldGUgY2hpbGQsIGFsbCBjb21wb25lbnRzIGFuZCByZW1vdmUgZnJvbSBoaWVyYXJjaHlcbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9kZXN0cm95aW5nID0gdHJ1ZTtcblxuICAgICAgICAvLyBEaXNhYmxlIGFsbCBlbmFibGVkIGNvbXBvbmVudHMgZmlyc3RcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuYykge1xuICAgICAgICAgICAgdGhpcy5jW25hbWVdLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgY29tcG9uZW50c1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5jKSB7XG4gICAgICAgICAgICB0aGlzLmNbbmFtZV0uc3lzdGVtLnJlbW92ZUNvbXBvbmVudCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERldGFjaCBmcm9tIHBhcmVudFxuICAgICAgICBpZiAodGhpcy5fcGFyZW50KVxuICAgICAgICAgICAgdGhpcy5fcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuXG4gICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGRlc3Ryb3kgYWxsIGNoaWxkcmVuXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG4gICAgICAgIHdoaWxlIChjaGlsZHJlbi5sZW5ndGgpIHtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIGEgY2hpbGQgZnJvbSB0aGUgYXJyYXkgYW5kIGRpc2Nvbm5lY3QgaXQgZnJvbSB0aGUgcGFyZW50XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuLnBvcCgpO1xuICAgICAgICAgICAgY2hpbGQuX3BhcmVudCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIEVudGl0eSkge1xuICAgICAgICAgICAgICAgIGNoaWxkLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpcmUgZGVzdHJveSBldmVudFxuICAgICAgICB0aGlzLmZpcmUoJ2Rlc3Ryb3knLCB0aGlzKTtcblxuICAgICAgICAvLyBjbGVhciBhbGwgZXZlbnRzXG4gICAgICAgIHRoaXMub2ZmKCk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGZyb20gZW50aXR5IGluZGV4XG4gICAgICAgIGlmICh0aGlzLl9ndWlkKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fYXBwLl9lbnRpdHlJbmRleFt0aGlzLl9ndWlkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkZWVwIGNvcHkgb2YgdGhlIEVudGl0eS4gRHVwbGljYXRlIHRoZSBmdWxsIEVudGl0eSBoaWVyYXJjaHksIHdpdGggYWxsIENvbXBvbmVudHNcbiAgICAgKiBhbmQgYWxsIGRlc2NlbmRhbnRzLiBOb3RlLCB0aGlzIEVudGl0eSBpcyBub3QgaW4gdGhlIGhpZXJhcmNoeSBhbmQgbXVzdCBiZSBhZGRlZCBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt0aGlzfSBBIG5ldyBFbnRpdHkgd2hpY2ggaXMgYSBkZWVwIGNvcHkgb2YgdGhlIG9yaWdpbmFsLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIGUgPSB0aGlzLmVudGl0eS5jbG9uZSgpO1xuICAgICAqXG4gICAgICogLy8gQWRkIGNsb25lIGFzIGEgc2libGluZyB0byB0aGUgb3JpZ2luYWxcbiAgICAgKiB0aGlzLmVudGl0eS5wYXJlbnQuYWRkQ2hpbGQoZSk7XG4gICAgICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZWRJZHNNYXAgPSB7fTtcbiAgICAgICAgY29uc3QgY2xvbmUgPSB0aGlzLl9jbG9uZVJlY3Vyc2l2ZWx5KGR1cGxpY2F0ZWRJZHNNYXApO1xuICAgICAgICBkdXBsaWNhdGVkSWRzTWFwW3RoaXMuZ2V0R3VpZCgpXSA9IGNsb25lO1xuXG4gICAgICAgIHJlc29sdmVEdXBsaWNhdGVkRW50aXR5UmVmZXJlbmNlUHJvcGVydGllcyh0aGlzLCB0aGlzLCBjbG9uZSwgZHVwbGljYXRlZElkc01hcCk7XG5cbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgRW50aXR5Pn0gZHVwbGljYXRlZElkc01hcCAtIEEgbWFwIG9mIG9yaWdpbmFsIGVudGl0eSBHVUlEcyB0byBjbG9uZWRcbiAgICAgKiBlbnRpdGllcy5cbiAgICAgKiBAcmV0dXJucyB7dGhpc30gQSBuZXcgRW50aXR5IHdoaWNoIGlzIGEgZGVlcCBjb3B5IG9mIHRoZSBvcmlnaW5hbC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jbG9uZVJlY3Vyc2l2ZWx5KGR1cGxpY2F0ZWRJZHNNYXApIHtcbiAgICAgICAgLyoqIEB0eXBlIHt0aGlzfSAqL1xuICAgICAgICBjb25zdCBjbG9uZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHVuZGVmaW5lZCwgdGhpcy5fYXBwKTtcbiAgICAgICAgc3VwZXIuX2Nsb25lSW50ZXJuYWwoY2xvbmUpO1xuXG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBpbiB0aGlzLmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuY1t0eXBlXTtcbiAgICAgICAgICAgIGNvbXBvbmVudC5zeXN0ZW0uY2xvbmVDb21wb25lbnQodGhpcywgY2xvbmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgb2xkQ2hpbGQgPSB0aGlzLl9jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChvbGRDaGlsZCBpbnN0YW5jZW9mIEVudGl0eSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0gb2xkQ2hpbGQuX2Nsb25lUmVjdXJzaXZlbHkoZHVwbGljYXRlZElkc01hcCk7XG4gICAgICAgICAgICAgICAgY2xvbmUuYWRkQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgICAgIGR1cGxpY2F0ZWRJZHNNYXBbb2xkQ2hpbGQuZ2V0R3VpZCgpXSA9IG5ld0NoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbn1cblxuLy8gV2hlbiBhbiBlbnRpdHkgdGhhdCBoYXMgcHJvcGVydGllcyB0aGF0IGNvbnRhaW4gcmVmZXJlbmNlcyB0byBvdGhlclxuLy8gZW50aXRpZXMgd2l0aGluIGl0cyBzdWJ0cmVlIGlzIGR1cGxpY2F0ZWQsIHRoZSBleHBlY3RhdGlvbiBvZiB0aGVcbi8vIHVzZXIgaXMgbGlrZWx5IHRoYXQgdGhvc2UgcHJvcGVydGllcyB3aWxsIGJlIHVwZGF0ZWQgdG8gcG9pbnQgdG9cbi8vIHRoZSBjb3JyZXNwb25kaW5nIGVudGl0aWVzIHdpdGhpbiB0aGUgbmV3bHktY3JlYXRlZCBkdXBsaWNhdGUgc3VidHJlZS5cbi8vXG4vLyBUbyBoYW5kbGUgdGhpcywgd2UgbmVlZCB0byBzZWFyY2ggZm9yIHByb3BlcnRpZXMgdGhhdCByZWZlciB0byBlbnRpdGllc1xuLy8gd2l0aGluIHRoZSBvbGQgZHVwbGljYXRlZCBzdHJ1Y3R1cmUsIGZpbmQgdGhlaXIgbmV3bHktY2xvbmVkIHBhcnRuZXJzXG4vLyB3aXRoaW4gdGhlIG5ldyBzdHJ1Y3R1cmUsIGFuZCB1cGRhdGUgdGhlIHJlZmVyZW5jZXMgYWNjb3JkaW5nbHkuIFRoaXNcbi8vIGZ1bmN0aW9uIGltcGxlbWVudHMgdGhhdCByZXF1aXJlbWVudC5cbmZ1bmN0aW9uIHJlc29sdmVEdXBsaWNhdGVkRW50aXR5UmVmZXJlbmNlUHJvcGVydGllcyhvbGRTdWJ0cmVlUm9vdCwgb2xkRW50aXR5LCBuZXdFbnRpdHksIGR1cGxpY2F0ZWRJZHNNYXApIHtcbiAgICBpZiAob2xkRW50aXR5IGluc3RhbmNlb2YgRW50aXR5KSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBvbGRFbnRpdHkuYztcblxuICAgICAgICAvLyBIYW5kbGUgY29tcG9uZW50IHByb3BlcnRpZXNcbiAgICAgICAgZm9yIChjb25zdCBjb21wb25lbnROYW1lIGluIGNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbY29tcG9uZW50TmFtZV07XG4gICAgICAgICAgICBjb25zdCBlbnRpdHlQcm9wZXJ0aWVzID0gY29tcG9uZW50LnN5c3RlbS5nZXRQcm9wZXJ0aWVzT2ZUeXBlKCdlbnRpdHknKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGVudGl0eVByb3BlcnRpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eURlc2NyaXB0b3IgPSBlbnRpdHlQcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IHByb3BlcnR5RGVzY3JpcHRvci5uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZEVudGl0eVJlZmVyZW5jZUlkID0gY29tcG9uZW50W3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICAgICAgY29uc3QgZW50aXR5SXNXaXRoaW5PbGRTdWJ0cmVlID0gISFvbGRTdWJ0cmVlUm9vdC5maW5kQnlHdWlkKG9sZEVudGl0eVJlZmVyZW5jZUlkKTtcblxuICAgICAgICAgICAgICAgIGlmIChlbnRpdHlJc1dpdGhpbk9sZFN1YnRyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RW50aXR5UmVmZXJlbmNlSWQgPSBkdXBsaWNhdGVkSWRzTWFwW29sZEVudGl0eVJlZmVyZW5jZUlkXS5nZXRHdWlkKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0VudGl0eVJlZmVyZW5jZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdFbnRpdHkuY1tjb21wb25lbnROYW1lXVtwcm9wZXJ0eU5hbWVdID0gbmV3RW50aXR5UmVmZXJlbmNlSWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBEZWJ1Zy53YXJuKCdDb3VsZCBub3QgZmluZCBjb3JyZXNwb25kaW5nIGVudGl0eSBpZCB3aGVuIHJlc29sdmluZyBkdXBsaWNhdGVkIGVudGl0eSByZWZlcmVuY2VzJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgZW50aXR5IHNjcmlwdCBhdHRyaWJ1dGVzXG4gICAgICAgIGlmIChjb21wb25lbnRzLnNjcmlwdCAmJiAhbmV3RW50aXR5Ll9hcHAudXNlTGVnYWN5U2NyaXB0QXR0cmlidXRlQ2xvbmluZykge1xuICAgICAgICAgICAgbmV3RW50aXR5LnNjcmlwdC5yZXNvbHZlRHVwbGljYXRlZEVudGl0eVJlZmVyZW5jZVByb3BlcnRpZXMoY29tcG9uZW50cy5zY3JpcHQsIGR1cGxpY2F0ZWRJZHNNYXApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIGVudGl0eSByZW5kZXIgYXR0cmlidXRlc1xuICAgICAgICBpZiAoY29tcG9uZW50cy5yZW5kZXIpIHtcbiAgICAgICAgICAgIG5ld0VudGl0eS5yZW5kZXIucmVzb2x2ZUR1cGxpY2F0ZWRFbnRpdHlSZWZlcmVuY2VQcm9wZXJ0aWVzKGNvbXBvbmVudHMucmVuZGVyLCBkdXBsaWNhdGVkSWRzTWFwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBlbnRpdHkgYW5pbSBhdHRyaWJ1dGVzXG4gICAgICAgIGlmIChjb21wb25lbnRzLmFuaW0pIHtcbiAgICAgICAgICAgIG5ld0VudGl0eS5hbmltLnJlc29sdmVEdXBsaWNhdGVkRW50aXR5UmVmZXJlbmNlUHJvcGVydGllcyhjb21wb25lbnRzLmFuaW0sIGR1cGxpY2F0ZWRJZHNNYXApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVjdXJzZSBpbnRvIGNoaWxkcmVuLiBOb3RlIHRoYXQgd2UgY29udGludWUgdG8gcGFzcyBpbiB0aGUgc2FtZSBgb2xkU3VidHJlZVJvb3RgLFxuICAgICAgICAvLyBpbiBvcmRlciB0byBjb3JyZWN0bHkgaGFuZGxlIGNhc2VzIHdoZXJlIGEgY2hpbGQgaGFzIGFuIGVudGl0eSByZWZlcmVuY2VcbiAgICAgICAgLy8gZmllbGQgdGhhdCBwb2ludHMgdG8gYSBwYXJlbnQgb3Igb3RoZXIgYW5jZXN0b3IgdGhhdCBpcyBzdGlsbCB3aXRoaW4gdGhlXG4gICAgICAgIC8vIGR1cGxpY2F0ZWQgc3VidHJlZS5cbiAgICAgICAgY29uc3QgX29sZCA9IG9sZEVudGl0eS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAoZSBpbnN0YW5jZW9mIEVudGl0eSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBfbmV3ID0gbmV3RW50aXR5LmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIChlIGluc3RhbmNlb2YgRW50aXR5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IF9vbGQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHJlc29sdmVEdXBsaWNhdGVkRW50aXR5UmVmZXJlbmNlUHJvcGVydGllcyhvbGRTdWJ0cmVlUm9vdCwgX29sZFtpXSwgX25ld1tpXSwgZHVwbGljYXRlZElkc01hcCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogRmlyZWQgYWZ0ZXIgdGhlIGVudGl0eSBpcyBkZXN0cm95ZWQuXG4gKlxuICogQGV2ZW50IEVudGl0eSNkZXN0cm95XG4gKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IC0gVGhlIGVudGl0eSB0aGF0IHdhcyBkZXN0cm95ZWQuXG4gKiBAZXhhbXBsZVxuICogZW50aXR5Lm9uKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoZSkge1xuICogICAgIGNvbnNvbGUubG9nKCdlbnRpdHkgJyArIGUubmFtZSArICcgaGFzIGJlZW4gZGVzdHJveWVkJyk7XG4gKiB9KTtcbiAqL1xuXG5leHBvcnQgeyBFbnRpdHkgfTtcbiJdLCJuYW1lcyI6WyJfZW5hYmxlTGlzdCIsIkVudGl0eSIsIkdyYXBoTm9kZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsImFwcCIsImdldEFwcGxpY2F0aW9uIiwiYW5pbSIsImFuaW1hdGlvbiIsImF1ZGlvbGlzdGVuZXIiLCJidXR0b24iLCJjYW1lcmEiLCJjb2xsaXNpb24iLCJlbGVtZW50IiwibGF5b3V0Y2hpbGQiLCJsYXlvdXRncm91cCIsImxpZ2h0IiwibW9kZWwiLCJwYXJ0aWNsZXN5c3RlbSIsInJlbmRlciIsInJpZ2lkYm9keSIsInNjcmVlbiIsInNjcmlwdCIsInNjcm9sbGJhciIsInNjcm9sbHZpZXciLCJzb3VuZCIsInNwcml0ZSIsImMiLCJfYXBwIiwiX2Rlc3Ryb3lpbmciLCJfZ3VpZCIsIl90ZW1wbGF0ZSIsIkRlYnVnIiwiYXNzZXJ0IiwiYWRkQ29tcG9uZW50IiwidHlwZSIsImRhdGEiLCJzeXN0ZW0iLCJzeXN0ZW1zIiwiZXJyb3IiLCJ3YXJuIiwicmVtb3ZlQ29tcG9uZW50IiwiZmluZENvbXBvbmVudCIsImVudGl0eSIsImZpbmRPbmUiLCJub2RlIiwiZmluZENvbXBvbmVudHMiLCJlbnRpdGllcyIsImZpbmQiLCJtYXAiLCJnZXRHdWlkIiwic2V0R3VpZCIsImd1aWQiLCJjcmVhdGUiLCJpbmRleCIsIl9lbnRpdHlJbmRleCIsIl9ub3RpZnlIaWVyYXJjaHlTdGF0ZUNoYW5nZWQiLCJlbmFibGVkIiwiZW5hYmxlRmlyc3QiLCJsZW5ndGgiLCJfYmVpbmdFbmFibGVkIiwiX29uSGllcmFyY2h5U3RhdGVDaGFuZ2VkIiwiX29uSGllcmFyY2h5U3RhdGVQb3N0Q2hhbmdlZCIsInB1c2giLCJfY2hpbGRyZW4iLCJpIiwibGVuIiwiX2VuYWJsZWQiLCJjb21wb25lbnRzIiwiaGFzT3duUHJvcGVydHkiLCJjb21wb25lbnQiLCJvbkVuYWJsZSIsIm9uRGlzYWJsZSIsIm9uUG9zdFN0YXRlQ2hhbmdlIiwiZmluZEJ5R3VpZCIsImUiLCJpc0Rlc2NlbmRhbnRPZiIsImRlc3Ryb3kiLCJfcGFyZW50IiwicmVtb3ZlQ2hpbGQiLCJjaGlsZHJlbiIsImNoaWxkIiwicG9wIiwiZmlyZSIsIm9mZiIsImNsb25lIiwiZHVwbGljYXRlZElkc01hcCIsIl9jbG9uZVJlY3Vyc2l2ZWx5IiwicmVzb2x2ZUR1cGxpY2F0ZWRFbnRpdHlSZWZlcmVuY2VQcm9wZXJ0aWVzIiwidW5kZWZpbmVkIiwiX2Nsb25lSW50ZXJuYWwiLCJjbG9uZUNvbXBvbmVudCIsIm9sZENoaWxkIiwibmV3Q2hpbGQiLCJhZGRDaGlsZCIsIm9sZFN1YnRyZWVSb290Iiwib2xkRW50aXR5IiwibmV3RW50aXR5IiwiY29tcG9uZW50TmFtZSIsImVudGl0eVByb3BlcnRpZXMiLCJnZXRQcm9wZXJ0aWVzT2ZUeXBlIiwicHJvcGVydHlEZXNjcmlwdG9yIiwicHJvcGVydHlOYW1lIiwib2xkRW50aXR5UmVmZXJlbmNlSWQiLCJlbnRpdHlJc1dpdGhpbk9sZFN1YnRyZWUiLCJuZXdFbnRpdHlSZWZlcmVuY2VJZCIsInVzZUxlZ2FjeVNjcmlwdEF0dHJpYnV0ZUNsb25pbmciLCJfb2xkIiwiZmlsdGVyIiwiX25ldyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQVdBLE1BQU1BLFdBQVcsR0FBRyxFQUFFLENBQUE7O0FBaUJ0QixNQUFNQyxNQUFNLFNBQVNDLFNBQVMsQ0FBQzs7QUF1TzNCQyxFQUFBQSxXQUFXLENBQUNDLElBQUksRUFBRUMsR0FBRyxHQUFHQyxjQUFjLEVBQUUsRUFBRTtJQUN0QyxLQUFLLENBQUNGLElBQUksQ0FBQyxDQUFBO0FBQUMsSUFBQSxJQUFBLENBak9oQkcsSUFBSSxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBUUpDLFNBQVMsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQVFUQyxhQUFhLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FRYkMsTUFBTSxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBUU5DLE1BQU0sR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQVFOQyxTQUFTLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FRVEMsT0FBTyxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBUVBDLFdBQVcsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQVFYQyxXQUFXLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FRWEMsS0FBSyxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBUUxDLEtBQUssR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQVFMQyxjQUFjLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FRZEMsTUFBTSxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBUU5DLFNBQVMsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQVFUQyxNQUFNLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FRTkMsTUFBTSxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBUU5DLFNBQVMsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQVFUQyxVQUFVLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FRVkMsS0FBSyxHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBUUxDLE1BQU0sR0FBQSxL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
