/**
 * @license
 * PlayCanvas Engine v1.63.0-dev revision 9f3635a4e (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { path } from '../../core/path.js';
import { Quat } from '../../core/math/quat.js';
import { Vec3 } from '../../core/math/vec3.js';
import { Http, http } from '../../platform/net/http.js';
import { Animation, Node, Key } from '../../scene/animation/animation.js';
import { AnimEvents } from '../anim/evaluator/anim-events.js';
import { GlbParser } from '../parsers/glb-parser.js';

/** @typedef {import('./handler.js').ResourceHandler} ResourceHandler */

/**
 * Resource handler used for loading {@link Animation} resources.
 *
 * @implements {ResourceHandler}
 */
class AnimationHandler {
  /**
   * Type of the resource the handler handles.
   *
   * @type {string}
   */

  /** @hideconstructor */
  constructor(app) {
    this.handlerType = "animation";
    this.maxRetries = 0;
  }
  load(url, callback, asset) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }

    // we need to specify JSON for blob URLs
    const options = {
      retry: this.maxRetries > 0,
      maxRetries: this.maxRetries
    };
    if (url.load.startsWith('blob:') || url.load.startsWith('data:')) {
      if (path.getExtension(url.original).toLowerCase() === '.glb') {
        options.responseType = Http.ResponseType.ARRAY_BUFFER;
      } else {
        options.responseType = Http.ResponseType.JSON;
      }
    }
    http.get(url.load, options, (err, response) => {
      if (err) {
        callback(`Error loading animation resource: ${url.original} [${err}]`);
      } else {
        // parse the result immediately (this used to happen during open)
        if (path.getExtension(url.original).toLowerCase() === '.glb') {
          GlbParser.parse('filename.glb', response, null, null, (err, parseResult) => {
            if (err) {
              callback(err);
            } else {
              var _asset$data;
              const animations = parseResult.animations;
              if (asset != null && (_asset$data = asset.data) != null && _asset$data.events) {
                for (let i = 0; i < animations.length; i++) {
                  animations[i].events = new AnimEvents(Object.values(asset.data.events));
                }
              }
              parseResult.destroy();
              callback(null, animations);
            }
          });
        } else {
          callback(null, this['_parseAnimationV' + response.animation.version](response));
        }
      }
    });
  }
  open(url, data, asset) {
    return data;
  }
  patch(asset, assets) {}
  _parseAnimationV3(data) {
    const animData = data.animation;
    const anim = new Animation();
    anim.name = animData.name;
    anim.duration = animData.duration;
    for (let i = 0; i < animData.nodes.length; i++) {
      const node = new Node();
      const n = animData.nodes[i];
      node._name = n.name;
      for (let j = 0; j < n.keys.length; j++) {
        const k = n.keys[j];
        const t = k.time;
        const p = k.pos;
        const r = k.rot;
        const s = k.scale;
        const pos = new Vec3(p[0], p[1], p[2]);
        const rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);
        const scl = new Vec3(s[0], s[1], s[2]);
        const key = new Key(t, pos, rot, scl);
        node._keys.push(key);
      }
      anim.addNode(node);
    }
    return anim;
  }
  _parseAnimationV4(data) {
    const animData = data.animation;
    const anim = new Animation();
    anim.name = animData.name;
    anim.duration = animData.duration;
    for (let i = 0; i < animData.nodes.length; i++) {
      const node = new Node();
      const n = animData.nodes[i];
      node._name = n.name;
      const defPos = n.defaults.p;
      const defRot = n.defaults.r;
      const defScl = n.defaults.s;
      for (let j = 0; j < n.keys.length; j++) {
        const k = n.keys[j];
        const t = k.t;
        const p = defPos ? defPos : k.p;
        const r = defRot ? defRot : k.r;
        const s = defScl ? defScl : k.s;
        const pos = new Vec3(p[0], p[1], p[2]);
        const rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);
        const scl = new Vec3(s[0], s[1], s[2]);
        const key = new Key(t, pos, rot, scl);
        node._keys.push(key);
      }
      anim.addNode(node);
    }
    return anim;
  }
}

export { AnimationHandler };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbWF0aW9uLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2hhbmRsZXJzL2FuaW1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXRoIH0gZnJvbSAnLi4vLi4vY29yZS9wYXRoLmpzJztcblxuaW1wb3J0IHsgUXVhdCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9xdWF0LmpzJztcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvdmVjMy5qcyc7XG5cbmltcG9ydCB7IGh0dHAsIEh0dHAgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9uZXQvaHR0cC5qcyc7XG5cbmltcG9ydCB7IEFuaW1hdGlvbiwgS2V5LCBOb2RlIH0gZnJvbSAnLi4vLi4vc2NlbmUvYW5pbWF0aW9uL2FuaW1hdGlvbi5qcyc7XG5pbXBvcnQgeyBBbmltRXZlbnRzIH0gZnJvbSAnLi4vYW5pbS9ldmFsdWF0b3IvYW5pbS1ldmVudHMuanMnO1xuXG5pbXBvcnQgeyBHbGJQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXJzL2dsYi1wYXJzZXIuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9oYW5kbGVyLmpzJykuUmVzb3VyY2VIYW5kbGVyfSBSZXNvdXJjZUhhbmRsZXIgKi9cblxuLyoqXG4gKiBSZXNvdXJjZSBoYW5kbGVyIHVzZWQgZm9yIGxvYWRpbmcge0BsaW5rIEFuaW1hdGlvbn0gcmVzb3VyY2VzLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtSZXNvdXJjZUhhbmRsZXJ9XG4gKi9cbmNsYXNzIEFuaW1hdGlvbkhhbmRsZXIge1xuICAgIC8qKlxuICAgICAqIFR5cGUgb2YgdGhlIHJlc291cmNlIHRoZSBoYW5kbGVyIGhhbmRsZXMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGhhbmRsZXJUeXBlID0gXCJhbmltYXRpb25cIjtcblxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMubWF4UmV0cmllcyA9IDA7XG4gICAgfVxuXG4gICAgbG9hZCh1cmwsIGNhbGxiYWNrLCBhc3NldCkge1xuICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHVybCA9IHtcbiAgICAgICAgICAgICAgICBsb2FkOiB1cmwsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWw6IHVybFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc3BlY2lmeSBKU09OIGZvciBibG9iIFVSTHNcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHJldHJ5OiB0aGlzLm1heFJldHJpZXMgPiAwLFxuICAgICAgICAgICAgbWF4UmV0cmllczogdGhpcy5tYXhSZXRyaWVzXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHVybC5sb2FkLnN0YXJ0c1dpdGgoJ2Jsb2I6JykgfHwgdXJsLmxvYWQuc3RhcnRzV2l0aCgnZGF0YTonKSkge1xuICAgICAgICAgICAgaWYgKHBhdGguZ2V0RXh0ZW5zaW9uKHVybC5vcmlnaW5hbCkudG9Mb3dlckNhc2UoKSA9PT0gJy5nbGInKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yZXNwb25zZVR5cGUgPSBIdHRwLlJlc3BvbnNlVHlwZS5BUlJBWV9CVUZGRVI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzcG9uc2VUeXBlID0gSHR0cC5SZXNwb25zZVR5cGUuSlNPTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGh0dHAuZ2V0KHVybC5sb2FkLCBvcHRpb25zLCAoZXJyLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGBFcnJvciBsb2FkaW5nIGFuaW1hdGlvbiByZXNvdXJjZTogJHt1cmwub3JpZ2luYWx9IFske2Vycn1dYCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHBhcnNlIHRoZSByZXN1bHQgaW1tZWRpYXRlbHkgKHRoaXMgdXNlZCB0byBoYXBwZW4gZHVyaW5nIG9wZW4pXG4gICAgICAgICAgICAgICAgaWYgKHBhdGguZ2V0RXh0ZW5zaW9uKHVybC5vcmlnaW5hbCkudG9Mb3dlckNhc2UoKSA9PT0gJy5nbGInKSB7XG4gICAgICAgICAgICAgICAgICAgIEdsYlBhcnNlci5wYXJzZSgnZmlsZW5hbWUuZ2xiJywgcmVzcG9uc2UsIG51bGwsIG51bGwsIChlcnIsIHBhcnNlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9ucyA9IHBhcnNlUmVzdWx0LmFuaW1hdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0Py5kYXRhPy5ldmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmltYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25zW2ldLmV2ZW50cyA9IG5ldyBBbmltRXZlbnRzKE9iamVjdC52YWx1ZXMoYXNzZXQuZGF0YS5ldmVudHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVJlc3VsdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgYW5pbWF0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHRoaXNbJ19wYXJzZUFuaW1hdGlvblYnICsgcmVzcG9uc2UuYW5pbWF0aW9uLnZlcnNpb25dKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuKHVybCwgZGF0YSwgYXNzZXQpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgcGF0Y2goYXNzZXQsIGFzc2V0cykge1xuICAgIH1cblxuICAgIF9wYXJzZUFuaW1hdGlvblYzKGRhdGEpIHtcbiAgICAgICAgY29uc3QgYW5pbURhdGEgPSBkYXRhLmFuaW1hdGlvbjtcblxuICAgICAgICBjb25zdCBhbmltID0gbmV3IEFuaW1hdGlvbigpO1xuICAgICAgICBhbmltLm5hbWUgPSBhbmltRGF0YS5uYW1lO1xuICAgICAgICBhbmltLmR1cmF0aW9uID0gYW5pbURhdGEuZHVyYXRpb247XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmltRGF0YS5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5ldyBOb2RlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBhbmltRGF0YS5ub2Rlc1tpXTtcbiAgICAgICAgICAgIG5vZGUuX25hbWUgPSBuLm5hbWU7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbi5rZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgayA9IG4ua2V5c1tqXTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBrLnRpbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGsucG9zO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBrLnJvdDtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gay5zY2FsZTtcbiAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgVmVjMyhwWzBdLCBwWzFdLCBwWzJdKTtcbiAgICAgICAgICAgICAgICBjb25zdCByb3QgPSBuZXcgUXVhdCgpLnNldEZyb21FdWxlckFuZ2xlcyhyWzBdLCByWzFdLCByWzJdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2wgPSBuZXcgVmVjMyhzWzBdLCBzWzFdLCBzWzJdKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IG5ldyBLZXkodCwgcG9zLCByb3QsIHNjbCk7XG5cbiAgICAgICAgICAgICAgICBub2RlLl9rZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYW5pbS5hZGROb2RlKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFuaW07XG4gICAgfVxuXG4gICAgX3BhcnNlQW5pbWF0aW9uVjQoZGF0YSkge1xuICAgICAgICBjb25zdCBhbmltRGF0YSA9IGRhdGEuYW5pbWF0aW9uO1xuXG4gICAgICAgIGNvbnN0IGFuaW0gPSBuZXcgQW5pbWF0aW9uKCk7XG4gICAgICAgIGFuaW0ubmFtZSA9IGFuaW1EYXRhLm5hbWU7XG4gICAgICAgIGFuaW0uZHVyYXRpb24gPSBhbmltRGF0YS5kdXJhdGlvbjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1EYXRhLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbmV3IE5vZGUoKTtcblxuICAgICAgICAgICAgY29uc3QgbiA9IGFuaW1EYXRhLm5vZGVzW2ldO1xuICAgICAgICAgICAgbm9kZS5fbmFtZSA9IG4ubmFtZTtcblxuICAgICAgICAgICAgY29uc3QgZGVmUG9zID0gbi5kZWZhdWx0cy5wO1xuICAgICAgICAgICAgY29uc3QgZGVmUm90ID0gbi5kZWZhdWx0cy5yO1xuICAgICAgICAgICAgY29uc3QgZGVmU2NsID0gbi5kZWZhdWx0cy5zO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG4ua2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBuLmtleXNbal07XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gay50O1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBkZWZQb3MgPyBkZWZQb3MgOiBrLnA7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGRlZlJvdCA/IGRlZlJvdCA6IGsucjtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZGVmU2NsID8gZGVmU2NsIDogay5zO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IG5ldyBWZWMzKHBbMF0sIHBbMV0sIHBbMl0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdCA9IG5ldyBRdWF0KCkuc2V0RnJvbUV1bGVyQW5nbGVzKHJbMF0sIHJbMV0sIHJbMl0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjbCA9IG5ldyBWZWMzKHNbMF0sIHNbMV0sIHNbMl0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbmV3IEtleSh0LCBwb3MsIHJvdCwgc2NsKTtcblxuICAgICAgICAgICAgICAgIG5vZGUuX2tleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbmltLmFkZE5vZGUobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYW5pbTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEFuaW1hdGlvbkhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6WyJBbmltYXRpb25IYW5kbGVyIiwiY29uc3RydWN0b3IiLCJhcHAiLCJoYW5kbGVyVHlwZSIsIm1heFJldHJpZXMiLCJsb2FkIiwidXJsIiwiY2FsbGJhY2siLCJhc3NldCIsIm9yaWdpbmFsIiwib3B0aW9ucyIsInJldHJ5Iiwic3RhcnRzV2l0aCIsInBhdGgiLCJnZXRFeHRlbnNpb24iLCJ0b0xvd2VyQ2FzZSIsInJlc3BvbnNlVHlwZSIsIkh0dHAiLCJSZXNwb25zZVR5cGUiLCJBUlJBWV9CVUZGRVIiLCJKU09OIiwiaHR0cCIsImdldCIsImVyciIsInJlc3BvbnNlIiwiR2xiUGFyc2VyIiwicGFyc2UiLCJwYXJzZVJlc3VsdCIsIl9hc3NldCRkYXRhIiwiYW5pbWF0aW9ucyIsImRhdGEiLCJldmVudHMiLCJpIiwibGVuZ3RoIiwiQW5pbUV2ZW50cyIsIk9iamVjdCIsInZhbHVlcyIsImRlc3Ryb3kiLCJhbmltYXRpb24iLCJ2ZXJzaW9uIiwib3BlbiIsInBhdGNoIiwiYXNzZXRzIiwiX3BhcnNlQW5pbWF0aW9uVjMiLCJhbmltRGF0YSIsImFuaW0iLCJBbmltYXRpb24iLCJuYW1lIiwiZHVyYXRpb24iLCJub2RlcyIsIm5vZGUiLCJOb2RlIiwibiIsIl9uYW1lIiwiaiIsImtleXMiLCJrIiwidCIsInRpbWUiLCJwIiwicG9zIiwiciIsInJvdCIsInMiLCJzY2FsZSIsIlZlYzMiLCJRdWF0Iiwic2V0RnJvbUV1bGVyQW5nbGVzIiwic2NsIiwia2V5IiwiS2V5IiwiX2tleXMiLCJwdXNoIiwiYWRkTm9kZSIsIl9wYXJzZUFuaW1hdGlvblY0IiwiZGVmUG9zIiwiZGVmYXVsdHMiLCJkZWZSb3QiLCJkZWZTY2wiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFZQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsZ0JBQWdCLENBQUM7QUFDbkI7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFHSTtFQUNBQyxXQUFXQSxDQUFDQyxHQUFHLEVBQUU7SUFBQSxJQUhqQkMsQ0FBQUEsV0FBVyxHQUFHLFdBQVcsQ0FBQTtJQUlyQixJQUFJLENBQUNDLFVBQVUsR0FBRyxDQUFDLENBQUE7QUFDdkIsR0FBQTtBQUVBQyxFQUFBQSxJQUFJQSxDQUFDQyxHQUFHLEVBQUVDLFFBQVEsRUFBRUMsS0FBSyxFQUFFO0FBQ3ZCLElBQUEsSUFBSSxPQUFPRixHQUFHLEtBQUssUUFBUSxFQUFFO0FBQ3pCQSxNQUFBQSxHQUFHLEdBQUc7QUFDRkQsUUFBQUEsSUFBSSxFQUFFQyxHQUFHO0FBQ1RHLFFBQUFBLFFBQVEsRUFBRUgsR0FBQUE7T0FDYixDQUFBO0FBQ0wsS0FBQTs7QUFFQTtBQUNBLElBQUEsTUFBTUksT0FBTyxHQUFHO0FBQ1pDLE1BQUFBLEtBQUssRUFBRSxJQUFJLENBQUNQLFVBQVUsR0FBRyxDQUFDO01BQzFCQSxVQUFVLEVBQUUsSUFBSSxDQUFDQSxVQUFBQTtLQUNwQixDQUFBO0FBRUQsSUFBQSxJQUFJRSxHQUFHLENBQUNELElBQUksQ0FBQ08sVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJTixHQUFHLENBQUNELElBQUksQ0FBQ08sVUFBVSxDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQzlELE1BQUEsSUFBSUMsSUFBSSxDQUFDQyxZQUFZLENBQUNSLEdBQUcsQ0FBQ0csUUFBUSxDQUFDLENBQUNNLFdBQVcsRUFBRSxLQUFLLE1BQU0sRUFBRTtBQUMxREwsUUFBQUEsT0FBTyxDQUFDTSxZQUFZLEdBQUdDLElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxZQUFZLENBQUE7QUFDekQsT0FBQyxNQUFNO0FBQ0hULFFBQUFBLE9BQU8sQ0FBQ00sWUFBWSxHQUFHQyxJQUFJLENBQUNDLFlBQVksQ0FBQ0UsSUFBSSxDQUFBO0FBQ2pELE9BQUE7QUFDSixLQUFBO0FBRUFDLElBQUFBLElBQUksQ0FBQ0MsR0FBRyxDQUFDaEIsR0FBRyxDQUFDRCxJQUFJLEVBQUVLLE9BQU8sRUFBRSxDQUFDYSxHQUFHLEVBQUVDLFFBQVEsS0FBSztBQUMzQyxNQUFBLElBQUlELEdBQUcsRUFBRTtRQUNMaEIsUUFBUSxDQUFFLHFDQUFvQ0QsR0FBRyxDQUFDRyxRQUFTLENBQUljLEVBQUFBLEVBQUFBLEdBQUksR0FBRSxDQUFDLENBQUE7QUFDMUUsT0FBQyxNQUFNO0FBQ0g7QUFDQSxRQUFBLElBQUlWLElBQUksQ0FBQ0MsWUFBWSxDQUFDUixHQUFHLENBQUNHLFFBQVEsQ0FBQyxDQUFDTSxXQUFXLEVBQUUsS0FBSyxNQUFNLEVBQUU7QUFDMURVLFVBQUFBLFNBQVMsQ0FBQ0MsS0FBSyxDQUFDLGNBQWMsRUFBRUYsUUFBUSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQ0QsR0FBRyxFQUFFSSxXQUFXLEtBQUs7QUFDeEUsWUFBQSxJQUFJSixHQUFHLEVBQUU7Y0FDTGhCLFFBQVEsQ0FBQ2dCLEdBQUcsQ0FBQyxDQUFBO0FBQ2pCLGFBQUMsTUFBTTtBQUFBLGNBQUEsSUFBQUssV0FBQSxDQUFBO0FBQ0gsY0FBQSxNQUFNQyxVQUFVLEdBQUdGLFdBQVcsQ0FBQ0UsVUFBVSxDQUFBO2NBQ3pDLElBQUlyQixLQUFLLElBQUFvQixJQUFBQSxJQUFBQSxDQUFBQSxXQUFBLEdBQUxwQixLQUFLLENBQUVzQixJQUFJLEtBQVhGLElBQUFBLElBQUFBLFdBQUEsQ0FBYUcsTUFBTSxFQUFFO0FBQ3JCLGdCQUFBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSCxVQUFVLENBQUNJLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7QUFDeENILGtCQUFBQSxVQUFVLENBQUNHLENBQUMsQ0FBQyxDQUFDRCxNQUFNLEdBQUcsSUFBSUcsVUFBVSxDQUFDQyxNQUFNLENBQUNDLE1BQU0sQ0FBQzVCLEtBQUssQ0FBQ3NCLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQTtBQUMzRSxpQkFBQTtBQUNKLGVBQUE7Y0FDQUosV0FBVyxDQUFDVSxPQUFPLEVBQUUsQ0FBQTtBQUNyQjlCLGNBQUFBLFFBQVEsQ0FBQyxJQUFJLEVBQUVzQixVQUFVLENBQUMsQ0FBQTtBQUM5QixhQUFBO0FBQ0osV0FBQyxDQUFDLENBQUE7QUFDTixTQUFDLE1BQU07QUFDSHRCLFVBQUFBLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixHQUFHaUIsUUFBUSxDQUFDYyxTQUFTLENBQUNDLE9BQU8sQ0FBQyxDQUFDZixRQUFRLENBQUMsQ0FBQyxDQUFBO0FBQ25GLFNBQUE7QUFDSixPQUFBO0FBQ0osS0FBQyxDQUFDLENBQUE7QUFDTixHQUFBO0FBRUFnQixFQUFBQSxJQUFJQSxDQUFDbEMsR0FBRyxFQUFFd0IsSUFBSSxFQUFFdEIsS0FBSyxFQUFFO0FBQ25CLElBQUEsT0FBT3NCLElBQUksQ0FBQTtBQUNmLEdBQUE7QUFFQVcsRUFBQUEsS0FBS0EsQ0FBQ2pDLEtBQUssRUFBRWtDLE1BQU0sRUFBRSxFQUNyQjtFQUVBQyxpQkFBaUJBLENBQUNiLElBQUksRUFBRTtBQUNwQixJQUFBLE1BQU1jLFFBQVEsR0FBR2QsSUFBSSxDQUFDUSxTQUFTLENBQUE7QUFFL0IsSUFBQSxNQUFNTyxJQUFJLEdBQUcsSUFBSUMsU0FBUyxFQUFFLENBQUE7QUFDNUJELElBQUFBLElBQUksQ0FBQ0UsSUFBSSxHQUFHSCxRQUFRLENBQUNHLElBQUksQ0FBQTtBQUN6QkYsSUFBQUEsSUFBSSxDQUFDRyxRQUFRLEdBQUdKLFFBQVEsQ0FBQ0ksUUFBUSxDQUFBO0FBRWpDLElBQUEsS0FBSyxJQUFJaEIsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHWSxRQUFRLENBQUNLLEtBQUssQ0FBQ2hCLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7QUFDNUMsTUFBQSxNQUFNa0IsSUFBSSxHQUFHLElBQUlDLElBQUksRUFBRSxDQUFBO0FBRXZCLE1BQUEsTUFBTUMsQ0FBQyxHQUFHUixRQUFRLENBQUNLLEtBQUssQ0FBQ2pCLENBQUMsQ0FBQyxDQUFBO0FBQzNCa0IsTUFBQUEsSUFBSSxDQUFDRyxLQUFLLEdBQUdELENBQUMsQ0FBQ0wsSUFBSSxDQUFBO0FBRW5CLE1BQUEsS0FBSyxJQUFJTyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdGLENBQUMsQ0FBQ0csSUFBSSxDQUFDdEIsTUFBTSxFQUFFcUIsQ0FBQyxFQUFFLEVBQUU7QUFDcEMsUUFBQSxNQUFNRSxDQUFDLEdBQUdKLENBQUMsQ0FBQ0csSUFBSSxDQUFDRCxDQUFDLENBQUMsQ0FBQTtBQUVuQixRQUFBLE1BQU1HLENBQUMsR0FBR0QsQ0FBQyxDQUFDRSxJQUFJLENBQUE7QUFDaEIsUUFBQSxNQUFNQyxDQUFDLEdBQUdILENBQUMsQ0FBQ0ksR0FBRyxDQUFBO0FBQ2YsUUFBQSxNQUFNQyxDQUFDLEdBQUdMLENBQUMsQ0FBQ00sR0FBRyxDQUFBO0FBQ2YsUUFBQSxNQUFNQyxDQUFDLEdBQUdQLENBQUMsQ0FBQ1EsS0FBSyxDQUFBO0FBQ2pCLFFBQUEsTUFBTUosR0FBRyxHQUFHLElBQUlLLElBQUksQ0FBQ04sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFQSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUVBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3RDLE1BQU1HLEdBQUcsR0FBRyxJQUFJSSxJQUFJLEVBQUUsQ0FBQ0Msa0JBQWtCLENBQUNOLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMzRCxRQUFBLE1BQU1PLEdBQUcsR0FBRyxJQUFJSCxJQUFJLENBQUNGLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUV0QyxRQUFBLE1BQU1NLEdBQUcsR0FBRyxJQUFJQyxHQUFHLENBQUNiLENBQUMsRUFBRUcsR0FBRyxFQUFFRSxHQUFHLEVBQUVNLEdBQUcsQ0FBQyxDQUFBO0FBRXJDbEIsUUFBQUEsSUFBSSxDQUFDcUIsS0FBSyxDQUFDQyxJQUFJLENBQUNILEdBQUcsQ0FBQyxDQUFBO0FBQ3hCLE9BQUE7QUFFQXhCLE1BQUFBLElBQUksQ0FBQzRCLE9BQU8sQ0FBQ3ZCLElBQUksQ0FBQyxDQUFBO0FBQ3RCLEtBQUE7QUFFQSxJQUFBLE9BQU9MLElBQUksQ0FBQTtBQUNmLEdBQUE7RUFFQTZCLGlCQUFpQkEsQ0FBQzVDLElBQUksRUFBRTtBQUNwQixJQUFBLE1BQU1jLFFBQVEsR0FBR2QsSUFBSSxDQUFDUSxTQUFTLENBQUE7QUFFL0IsSUFBQSxNQUFNTyxJQUFJLEdBQUcsSUFBSUMsU0FBUyxFQUFFLENBQUE7QUFDNUJELElBQUFBLElBQUksQ0FBQ0UsSUFBSSxHQUFHSCxRQUFRLENBQUNHLElBQUksQ0FBQTtBQUN6QkYsSUFBQUEsSUFBSSxDQUFDRyxRQUFRLEdBQUdKLFFBQVEsQ0FBQ0ksUUFBUSxDQUFBO0FBRWpDLElBQUEsS0FBSyxJQUFJaEIsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHWSxRQUFRLENBQUNLLEtBQUssQ0FBQ2hCLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7QUFDNUMsTUFBQSxNQUFNa0IsSUFBSSxHQUFHLElBQUlDLElBQUksRUFBRSxDQUFBO0FBRXZCLE1BQUEsTUFBTUMsQ0FBQyxHQUFHUixRQUFRLENBQUNLLEtBQUssQ0FBQ2pCLENBQUMsQ0FBQyxDQUFBO0FBQzNCa0IsTUFBQUEsSUFBSSxDQUFDRyxLQUFLLEdBQUdELENBQUMsQ0FBQ0wsSUFBSSxDQUFBO0FBRW5CLE1BQUEsTUFBTTRCLE1BQU0sR0FBR3ZCLENBQUMsQ0FBQ3dCLFFBQVEsQ0FBQ2pCLENBQUMsQ0FBQTtBQUMzQixNQUFBLE1BQU1rQixNQUFNLEdBQUd6QixDQUFDLENBQUN3QixRQUFRLENBQUNmLENBQUMsQ0FBQTtBQUMzQixNQUFBLE1BQU1pQixNQUFNLEdBQUcxQixDQUFDLENBQUN3QixRQUFRLENBQUNiLENBQUMsQ0FBQTtBQUUzQixNQUFBLEtBQUssSUFBSVQsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHRixDQUFDLENBQUNHLElBQUksQ0FBQ3RCLE1BQU0sRUFBRXFCLENBQUMsRUFBRSxFQUFFO0FBQ3BDLFFBQUEsTUFBTUUsQ0FBQyxHQUFHSixDQUFDLENBQUNHLElBQUksQ0FBQ0QsQ0FBQyxDQUFDLENBQUE7QUFFbkIsUUFBQSxNQUFNRyxDQUFDLEdBQUdELENBQUMsQ0FBQ0MsQ0FBQyxDQUFBO1FBQ2IsTUFBTUUsQ0FBQyxHQUFHZ0IsTUFBTSxHQUFHQSxNQUFNLEdBQUduQixDQUFDLENBQUNHLENBQUMsQ0FBQTtRQUMvQixNQUFNRSxDQUFDLEdBQUdnQixNQUFNLEdBQUdBLE1BQU0sR0FBR3JCLENBQUMsQ0FBQ0ssQ0FBQyxDQUFBO1FBQy9CLE1BQU1FLENBQUMsR0FBR2UsTUFBTSxHQUFHQSxNQUFNLEdBQUd0QixDQUFDLENBQUNPLENBQUMsQ0FBQTtBQUMvQixRQUFBLE1BQU1ILEdBQUcsR0FBRyxJQUFJSyxJQUFJLENBQUNOLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN0QyxNQUFNRyxHQUFHLEdBQUcsSUFBSUksSUFBSSxFQUFFLENBQUNDLGtCQUFrQixDQUFDTixDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUVBLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDM0QsUUFBQSxNQUFNTyxHQUFHLEdBQUcsSUFBSUgsSUFBSSxDQUFDRixDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUVBLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFFdEMsUUFBQSxNQUFNTSxHQUFHLEdBQUcsSUFBSUMsR0FBRyxDQUFDYixDQUFDLEVBQUVHLEdBQUcsRUFBRUUsR0FBRyxFQUFFTSxHQUFHLENBQUMsQ0FBQTtBQUVyQ2xCLFFBQUFBLElBQUksQ0FBQ3FCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDSCxHQUFHLENBQUMsQ0FBQTtBQUN4QixPQUFBO0FBRUF4QixNQUFBQSxJQUFJLENBQUM0QixPQUFPLENBQUN2QixJQUFJLENBQUMsQ0FBQTtBQUN0QixLQUFBO0FBRUEsSUFBQSxPQUFPTCxJQUFJLENBQUE7QUFDZixHQUFBO0FBQ0o7Ozs7In0=
