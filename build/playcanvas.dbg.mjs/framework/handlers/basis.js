/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../core/debug.js';
import { PIXELFORMAT_RGB565, PIXELFORMAT_RGBA4 } from '../../platform/graphics/constants.js';
import { BasisWorker } from './basis-worker.js';
import { http } from '../../platform/net/http.js';

const getCompressionFormats = device => {
  return {
    astc: !!device.extCompressedTextureASTC,
    atc: !!device.extCompressedTextureATC,
    dxt: !!device.extCompressedTextureS3TC,
    etc1: !!device.extCompressedTextureETC1,
    etc2: !!device.extCompressedTextureETC,
    pvr: !!device.extCompressedTexturePVRTC
  };
};

const prepareWorkerModules = (config, callback) => {
  const getWorkerBlob = () => {
    const code = '(' + BasisWorker.toString() + ')()\n\n';
    return new Blob([code], {
      type: 'application/javascript'
    });
  };
  const wasmSupported = () => {
    try {
      if (typeof WebAssembly === 'object' && typeof WebAssembly.instantiate === 'function') {
        const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));
        if (module instanceof WebAssembly.Module) return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;
      }
    } catch (e) {}
    return false;
  };
  const sendResponse = (basisCode, module) => {
    callback(null, {
      workerUrl: URL.createObjectURL(getWorkerBlob()),
      basisUrl: URL.createObjectURL(basisCode),
      module: module,
      rgbPriority: config.rgbPriority,
      rgbaPriority: config.rgbaPriority
    });
  };
  const options = {
    responseType: 'blob',
    retry: config.maxRetries > 0,
    maxRetries: config.maxRetries
  };
  if (config.glueUrl && config.wasmUrl && wasmSupported()) {
    let basisCode = null;
    let module = null;

    http.get(config.glueUrl, options, (err, response) => {
      if (err) {
        callback(err);
      } else {
        if (module) {
          sendResponse(response, module);
        } else {
          basisCode = response;
        }
      }
    });
    const fetchPromise = fetch(config.wasmUrl);
    const compileManual = () => {
      fetchPromise.then(result => result.arrayBuffer()).then(buffer => WebAssembly.compile(buffer)).then(module_ => {
        if (basisCode) {
          sendResponse(basisCode, module_);
        } else {
          module = module_;
        }
      }).catch(err => {
        callback(err, null);
      });
    };

    if (WebAssembly.compileStreaming) {
      WebAssembly.compileStreaming(fetchPromise).then(module_ => {
        if (basisCode) {
          sendResponse(basisCode, module_);
        } else {
          module = module_;
        }
      }).catch(err => {
        Debug.warn(`compileStreaming() failed for ${config.wasmUrl} (${err}), falling back to arraybuffer download.`);
        compileManual();
      });
    } else {
      compileManual();
    }
  } else {
    http.get(config.fallbackUrl, options, (err, response) => {
      if (err) {
        callback(err, null);
      } else {
        sendResponse(response, null);
      }
    });
  }
};

class BasisQueue {
  constructor() {
    this.callbacks = {};
    this.queue = [];
    this.clients = [];
  }
  enqueueJob(url, data, callback, options) {
    if (this.callbacks.hasOwnProperty(url)) {
      this.callbacks[url].push(callback);
    } else {
      this.callbacks[url] = [callback];
      const job = {
        url: url,
        data: data,
        options: options
      };
      if (this.clients.length > 0) {
        this.clients.shift().run(job);
      } else {
        this.queue.push(job);
      }
    }
  }
  enqueueClient(client) {
    if (this.queue.length > 0) {
      client.run(this.queue.shift());
    } else {
      this.clients.push(client);
    }
  }
  handleResponse(url, err, data) {
    const callback = this.callbacks[url];
    if (err) {
      for (let i = 0; i < callback.length; ++i) {
        callback[i](err);
      }
    } else {
      if (data.format === PIXELFORMAT_RGB565 || data.format === PIXELFORMAT_RGBA4) {
        data.levels = data.levels.map(function (v) {
          return new Uint16Array(v);
        });
      } else {
        data.levels = data.levels.map(function (v) {
          return new Uint8Array(v);
        });
      }
      for (let i = 0; i < callback.length; ++i) {
        callback[i](null, data);
      }
    }
    delete this.callbacks[url];
  }
}

class BasisClient {
  constructor(queue, config, eager) {
    this.queue = queue;
    this.worker = new Worker(config.workerUrl);
    this.worker.addEventListener('message', message => {
      const data = message.data;
      this.queue.handleResponse(data.url, data.err, data.data);
      if (!this.eager) {
        this.queue.enqueueClient(this);
      }
    });
    this.worker.postMessage({
      type: 'init',
      config: config
    });

    this.eager = eager;
  }
  run(job) {
    const transfer = [];
    if (job.data instanceof ArrayBuffer) {
      transfer.push(job.data);
    }
    this.worker.postMessage({
      type: 'transcode',
      url: job.url,
      format: job.format,
      data: job.data,
      options: job.options
    }, transfer);
    if (this.eager) {
      this.queue.enqueueClient(this);
    }
  }
}

const defaultNumWorkers = 1;
const defaultRgbPriority = ['etc1', 'etc2', 'astc', 'dxt', 'pvr', 'atc'];
const defaultRgbaPriority = ['astc', 'dxt', 'etc2', 'pvr', 'atc'];
const defaultMaxRetries = 5;

const queue = new BasisQueue();
let lazyConfig = null;
let initializing = false;

function basisInitialize(config) {
  if (initializing) {
    return;
  }
  if (!config) {
    config = lazyConfig || {};
  } else if (config.lazyInit) {
    lazyConfig = config;
    return;
  }

  if (!config.glueUrl || !config.wasmUrl || !config.fallbackUrl) {
    const modules = (window.config ? window.config.wasmModules : window.PRELOAD_MODULES) || [];
    const wasmModule = modules.find(function (m) {
      return m.moduleName === 'BASIS';
    });
    if (wasmModule) {
      const urlBase = window.ASSET_PREFIX || '';
      if (!config.glueUrl) {
        config.glueUrl = urlBase + wasmModule.glueUrl;
      }
      if (!config.wasmUrl) {
        config.wasmUrl = urlBase + wasmModule.wasmUrl;
      }
      if (!config.fallbackUrl) {
        config.fallbackUrl = urlBase + wasmModule.fallbackUrl;
      }
    }
  }
  if (config.glueUrl || config.wasmUrl || config.fallbackUrl) {
    initializing = true;
    const numWorkers = Math.max(1, Math.min(16, config.numWorkers || defaultNumWorkers));
    const eagerWorkers = config.numWorkers === 1 || (config.hasOwnProperty('eagerWorkers') ? config.eagerWorkers : true);
    config.rgbPriority = config.rgbPriority || defaultRgbPriority;
    config.rgbaPriority = config.rgbaPriority || defaultRgbaPriority;
    config.maxRetries = config.hasOwnProperty('maxRetries') ? config.maxRetries : defaultMaxRetries;
    prepareWorkerModules(config, (err, clientConfig) => {
      if (err) {
        console.error(`failed to initialize basis worker: ${err}`);
      } else {
        for (let i = 0; i < numWorkers; ++i) {
          queue.enqueueClient(new BasisClient(queue, clientConfig, eagerWorkers));
        }
      }
    });
  }
}
let deviceDetails = null;

function basisTranscode(device, url, data, callback, options) {
  basisInitialize();
  if (!deviceDetails) {
    deviceDetails = {
      webgl2: device.webgl2,
      formats: getCompressionFormats(device)
    };
  }
  queue.enqueueJob(url, data, callback, {
    deviceDetails: deviceDetails,
    isGGGR: !!(options != null && options.isGGGR),
    isKTX2: !!(options != null && options.isKTX2)
  });
  return initializing;
}

export { basisInitialize, basisTranscode };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaXMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvaGFuZGxlcnMvYmFzaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IFBJWEVMRk9STUFUX1JHQjU2NSwgUElYRUxGT1JNQVRfUkdCQTQgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgQmFzaXNXb3JrZXIgfSBmcm9tICcuL2Jhc2lzLXdvcmtlci5qcyc7XG5pbXBvcnQgeyBodHRwIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vbmV0L2h0dHAuanMnO1xuXG4vLyBnZXQgdGhlIGxpc3Qgb2YgdGhlIGRldmljZSdzIHN1cHBvcnRlZCBjb21wcmVzc2lvbiBmb3JtYXRzXG5jb25zdCBnZXRDb21wcmVzc2lvbkZvcm1hdHMgPSAoZGV2aWNlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXN0YzogISFkZXZpY2UuZXh0Q29tcHJlc3NlZFRleHR1cmVBU1RDLFxuICAgICAgICBhdGM6ICEhZGV2aWNlLmV4dENvbXByZXNzZWRUZXh0dXJlQVRDLFxuICAgICAgICBkeHQ6ICEhZGV2aWNlLmV4dENvbXByZXNzZWRUZXh0dXJlUzNUQyxcbiAgICAgICAgZXRjMTogISFkZXZpY2UuZXh0Q29tcHJlc3NlZFRleHR1cmVFVEMxLFxuICAgICAgICBldGMyOiAhIWRldmljZS5leHRDb21wcmVzc2VkVGV4dHVyZUVUQyxcbiAgICAgICAgcHZyOiAhIWRldmljZS5leHRDb21wcmVzc2VkVGV4dHVyZVBWUlRDXG4gICAgfTtcbn07XG5cbi8vIGRvd25sb2FkIGJhc2lzIGNvZGUgYW5kIGNvbXBpbGUgdGhlIHdhc20gbW9kdWxlIGZvciB1c2UgaW4gd29ya2Vyc1xuY29uc3QgcHJlcGFyZVdvcmtlck1vZHVsZXMgPSAoY29uZmlnLCBjYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IGdldFdvcmtlckJsb2IgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSAnKCcgKyBCYXNpc1dvcmtlci50b1N0cmluZygpICsgJykoKVxcblxcbic7XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbY29kZV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCB3YXNtU3VwcG9ydGVkID0gKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBXZWJBc3NlbWJseSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kdWxlID0gbmV3IFdlYkFzc2VtYmx5Lk1vZHVsZShVaW50OEFycmF5Lm9mKDB4MCwgMHg2MSwgMHg3MywgMHg2ZCwgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCkpO1xuICAgICAgICAgICAgICAgIGlmIChtb2R1bGUgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5Nb2R1bGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgV2ViQXNzZW1ibHkuSW5zdGFuY2UobW9kdWxlKSBpbnN0YW5jZW9mIFdlYkFzc2VtYmx5Lkluc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7IH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCBzZW5kUmVzcG9uc2UgPSAoYmFzaXNDb2RlLCBtb2R1bGUpID0+IHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwge1xuICAgICAgICAgICAgd29ya2VyVXJsOiBVUkwuY3JlYXRlT2JqZWN0VVJMKGdldFdvcmtlckJsb2IoKSksXG4gICAgICAgICAgICBiYXNpc1VybDogVVJMLmNyZWF0ZU9iamVjdFVSTChiYXNpc0NvZGUpLFxuICAgICAgICAgICAgbW9kdWxlOiBtb2R1bGUsXG4gICAgICAgICAgICByZ2JQcmlvcml0eTogY29uZmlnLnJnYlByaW9yaXR5LFxuICAgICAgICAgICAgcmdiYVByaW9yaXR5OiBjb25maWcucmdiYVByaW9yaXR5XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJyxcbiAgICAgICAgcmV0cnk6IGNvbmZpZy5tYXhSZXRyaWVzID4gMCxcbiAgICAgICAgbWF4UmV0cmllczogY29uZmlnLm1heFJldHJpZXNcbiAgICB9O1xuXG4gICAgaWYgKGNvbmZpZy5nbHVlVXJsICYmIGNvbmZpZy53YXNtVXJsICYmIHdhc21TdXBwb3J0ZWQoKSkge1xuICAgICAgICBsZXQgYmFzaXNDb2RlID0gbnVsbDtcbiAgICAgICAgbGV0IG1vZHVsZSA9IG51bGw7XG5cbiAgICAgICAgLy8gZG93bmxvYWQgZ2x1ZSBzY3JpcHRcbiAgICAgICAgaHR0cC5nZXQoY29uZmlnLmdsdWVVcmwsIG9wdGlvbnMsIChlcnIsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UocmVzcG9uc2UsIG1vZHVsZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzaXNDb2RlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmZXRjaFByb21pc2UgPSBmZXRjaChjb25maWcud2FzbVVybCk7XG5cbiAgICAgICAgY29uc3QgY29tcGlsZU1hbnVhbCA9ICgpID0+IHtcbiAgICAgICAgICAgIGZldGNoUHJvbWlzZVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiByZXN1bHQuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgICAgICAgICAudGhlbihidWZmZXIgPT4gV2ViQXNzZW1ibHkuY29tcGlsZShidWZmZXIpKVxuICAgICAgICAgICAgICAgIC50aGVuKChtb2R1bGVfKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNpc0NvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShiYXNpc0NvZGUsIG1vZHVsZV8pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlID0gbW9kdWxlXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBkb3dubG9hZCBhbmQgY29tcGlsZSB3YXNtIG1vZHVsZVxuICAgICAgICBpZiAoV2ViQXNzZW1ibHkuY29tcGlsZVN0cmVhbWluZykge1xuICAgICAgICAgICAgV2ViQXNzZW1ibHkuY29tcGlsZVN0cmVhbWluZyhmZXRjaFByb21pc2UpXG4gICAgICAgICAgICAgICAgLnRoZW4oKG1vZHVsZV8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2lzQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKGJhc2lzQ29kZSwgbW9kdWxlXyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUgPSBtb2R1bGVfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBEZWJ1Zy53YXJuKGBjb21waWxlU3RyZWFtaW5nKCkgZmFpbGVkIGZvciAke2NvbmZpZy53YXNtVXJsfSAoJHtlcnJ9KSwgZmFsbGluZyBiYWNrIHRvIGFycmF5YnVmZmVyIGRvd25sb2FkLmApO1xuICAgICAgICAgICAgICAgICAgICBjb21waWxlTWFudWFsKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21waWxlTWFudWFsKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBodHRwLmdldChjb25maWcuZmFsbGJhY2tVcmwsIG9wdGlvbnMsIChlcnIsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHJlc3BvbnNlLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuLy8gcXVldWUgb2YgdHJhbnNjb2RlIGpvYnMgYW5kIGNsaWVudHMgcmVhZHkgdG8gcnVuIHRoZW1cbmNsYXNzIEJhc2lzUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIHRoaXMuY2xpZW50cyA9IFtdO1xuICAgIH1cblxuICAgIGVucXVldWVKb2IodXJsLCBkYXRhLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja3MuaGFzT3duUHJvcGVydHkodXJsKSkge1xuICAgICAgICAgICAgLy8gZHVwbGljYXRlIFVSTCByZXF1ZXN0XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1t1cmxdLnB1c2goY2FsbGJhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gbmV3IFVSTCByZXF1ZXN0XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1t1cmxdID0gW2NhbGxiYWNrXTtcblxuICAgICAgICAgICAgY29uc3Qgam9iID0ge1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRzLnNoaWZ0KCkucnVuKGpvYik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaChqb2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZW5xdWV1ZUNsaWVudChjbGllbnQpIHtcbiAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2xpZW50LnJ1bih0aGlzLnF1ZXVlLnNoaWZ0KCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGllbnRzLnB1c2goY2xpZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVJlc3BvbnNlKHVybCwgZXJyLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5jYWxsYmFja3NbdXJsXTtcblxuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxiYWNrLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgKGNhbGxiYWNrW2ldKShlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gKHJlKWNyZWF0ZSB0eXBlZCBhcnJheSBmcm9tIHRoZSByZXR1cm5lZCBhcnJheSBidWZmZXJzXG4gICAgICAgICAgICBpZiAoZGF0YS5mb3JtYXQgPT09IFBJWEVMRk9STUFUX1JHQjU2NSB8fCBkYXRhLmZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUkdCQTQpIHtcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgMTYgYml0IGZvcm1hdHNcbiAgICAgICAgICAgICAgICBkYXRhLmxldmVscyA9IGRhdGEubGV2ZWxzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHYpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhbGwgb3RoZXJcbiAgICAgICAgICAgICAgICBkYXRhLmxldmVscyA9IGRhdGEubGV2ZWxzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbGJhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAoY2FsbGJhY2tbaV0pKG51bGwsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhbGxiYWNrc1t1cmxdO1xuICAgIH1cbn1cblxuLy8gY2xpZW50IGludGVyZmFjZSB0byBhIGJhc2lzIHRyYW5zY29kZXIgaW5zdGFuY2UgcnVubmluZyBvbiBhIHdlYiB3b3JrZXJcbmNsYXNzIEJhc2lzQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihxdWV1ZSwgY29uZmlnLCBlYWdlcikge1xuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XG4gICAgICAgIHRoaXMud29ya2VyID0gbmV3IFdvcmtlcihjb25maWcud29ya2VyVXJsKTtcbiAgICAgICAgdGhpcy53b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5oYW5kbGVSZXNwb25zZShkYXRhLnVybCwgZGF0YS5lcnIsIGRhdGEuZGF0YSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZWFnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLmVucXVldWVDbGllbnQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7IHR5cGU6ICdpbml0JywgY29uZmlnOiBjb25maWcgfSk7XG5cbiAgICAgICAgLy8gYW4gZWFnZXIgY2xpZW50IHdpbGwgZW5xdWV1ZSBpdHNlbGYgd2hpbGUgYSBqb2IgaXMgcnVubmluZy4gYVxuICAgICAgICAvLyBub24tZWFnZXIgY2xpZW50IHdpbGwgb25seSBlbnF1ZXVlIGl0c2VsZiBvbmNlIHRoZSBjdXJyZW50IGpvYlxuICAgICAgICAvLyBoYXMgZmluaXNoZWQgcnVubmluZy5cbiAgICAgICAgdGhpcy5lYWdlciA9IGVhZ2VyO1xuICAgIH1cblxuICAgIHJ1bihqb2IpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmZXIgPSBbXTtcbiAgICAgICAgaWYgKGpvYi5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHRyYW5zZmVyLnB1c2goam9iLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NvZGUnLFxuICAgICAgICAgICAgdXJsOiBqb2IudXJsLFxuICAgICAgICAgICAgZm9ybWF0OiBqb2IuZm9ybWF0LFxuICAgICAgICAgICAgZGF0YTogam9iLmRhdGEsXG4gICAgICAgICAgICBvcHRpb25zOiBqb2Iub3B0aW9uc1xuICAgICAgICB9LCB0cmFuc2Zlcik7XG4gICAgICAgIGlmICh0aGlzLmVhZ2VyKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmVucXVldWVDbGllbnQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIGRlZmF1bHRzXG5jb25zdCBkZWZhdWx0TnVtV29ya2VycyA9IDE7XG5jb25zdCBkZWZhdWx0UmdiUHJpb3JpdHkgPSBbJ2V0YzEnLCAnZXRjMicsICdhc3RjJywgJ2R4dCcsICdwdnInLCAnYXRjJ107XG5jb25zdCBkZWZhdWx0UmdiYVByaW9yaXR5ID0gWydhc3RjJywgJ2R4dCcsICdldGMyJywgJ3B2cicsICdhdGMnXTtcbmNvbnN0IGRlZmF1bHRNYXhSZXRyaWVzID0gNTtcblxuLy8gZ2xvYmFsIHN0YXRlXG5jb25zdCBxdWV1ZSA9IG5ldyBCYXNpc1F1ZXVlKCk7XG5sZXQgbGF6eUNvbmZpZyA9IG51bGw7XG5sZXQgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgQmFzaXMgdHJhbnNjb2RlIHdvcmtlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gW2NvbmZpZ10gLSBUaGUgQmFzaXMgY29uZmlndXJhdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmdsdWVVcmxdIC0gVVJMIG9mIGdsdWUgc2NyaXB0LlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcud2FzbVVybF0gLSBVUkwgb2YgdGhlIHdhc20gbW9kdWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcuZmFsbGJhY2tVcmxdIC0gVVJMIG9mIHRoZSBmYWxsYmFjayBzY3JpcHQgdG8gdXNlIHdoZW4gd2FzbSBtb2R1bGVzXG4gKiBhcmVuJ3Qgc3VwcG9ydGVkLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmxhenlJbml0XSAtIFdhaXQgZm9yIGZpcnN0IHRyYW5zY29kZSByZXF1ZXN0IGJlZm9yZSBpbml0aWFsaXppbmcgQmFzaXNcbiAqIChkZWZhdWx0IGlzIGZhbHNlKS4gT3RoZXJ3aXNlIGluaXRpYWxpemUgQmFzaXMgaW1tZWRpYXRlbHkuXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5udW1Xb3JrZXJzXSAtIE51bWJlciBvZiB3b3JrZXJzIHRvIHVzZSBmb3IgdHJhbnNjb2RpbmcgKGRlZmF1bHQgaXMgMSkuXG4gKiBXaGlsZSBpdCBpcyBwb3NzaWJsZSB0byBpbXByb3ZlIHRyYW5zY29kZSBwZXJmb3JtYW5jZSB1c2luZyBtdWx0aXBsZSB3b3JrZXJzLCB0aGlzIHdpbGwgbGlrZWx5XG4gKiBkZXBlbmQgb24gdGhlIHJ1bnRpbWUgcGxhdGZvcm0uIEZvciBleGFtcGxlLCBkZXNrdG9wIHdpbGwgbGlrZWx5IGJlbmVmaXQgZnJvbSBtb3JlIHdvcmtlcnNcbiAqIGNvbXBhcmVkIHRvIG1vYmlsZS4gQWxzbyBrZWVwIGluIG1pbmQgdGhhdCBpdCB0YWtlcyB0aW1lIHRvIGluaXRpYWxpemUgd29ya2VycyBhbmQgaW5jcmVhc2luZ1xuICogdGhpcyB2YWx1ZSBjb3VsZCBpbXBhY3QgYXBwbGljYXRpb24gc3RhcnR1cCB0aW1lLiBNYWtlIHN1cmUgdG8gdGVzdCB5b3VyIGFwcGxpY2F0aW9uIHBlcmZvcm1hbmNlXG4gKiBvbiBhbGwgdGFyZ2V0IHBsYXRmb3JtcyB3aGVuIGNoYW5naW5nIHRoaXMgcGFyYW1ldGVyLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmVhZ2VyV29ya2Vyc10gLSBVc2UgZWFnZXIgd29ya2VycyAoZGVmYXVsdCBpcyB0cnVlKS4gV2hlbiBlbmFibGVkLCBqb2JzXG4gKiBhcmUgYXNzaWduZWQgdG8gd29ya2VycyBpbW1lZGlhdGVseSwgaW5kZXBlbmRlbnQgb2YgdGhlaXIgd29yayBsb2FkLiBUaGlzIGNhbiByZXN1bHQgaW5cbiAqIHVuYmFsYW5jZWQgd29ya2xvYWRzLCBob3dldmVyIHRoZXJlIGlzIG5vIGRlbGF5IGJldHdlZW4gam9icy4gSWYgZGlzYWJsZWQsIG5ldyBqb2JzIGFyZSBhc3NpZ25lZFxuICogdG8gd29ya2VycyBvbmx5IHdoZW4gdGhlaXIgcHJldmlvdXMgam9iIGhhcyBjb21wbGV0ZWQuIFRoaXMgd2lsbCByZXN1bHQgaW4gYmFsYW5jZWQgd29ya2xvYWRzXG4gKiBhY3Jvc3Mgd29ya2VycywgaG93ZXZlciB3b3JrZXJzIGNhbiBiZSBpZGxlIGZvciBhIHNob3J0IHRpbWUgYmV0d2VlbiBqb2JzLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gW2NvbmZpZy5yZ2JQcmlvcml0eV0gLSBBcnJheSBvZiB0ZXh0dXJlIGNvbXByZXNzaW9uIGZvcm1hdHMgaW4gcHJpb3JpdHkgb3JkZXJcbiAqIGZvciB0ZXh0dXJlcyB3aXRob3V0IGFscGhhLiBUaGUgc3VwcG9ydGVkIGNvbXByZXNzZWQgZm9ybWF0cyBhcmU6ICdhc3RjJywgJ2F0YycsICdkeHQnLCAnZXRjMScsXG4gKiAnZXRjMicsICdwdnInLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gW2NvbmZpZy5yZ2JhUHJpb3JpdHldIC0gQXJyYXkgb2YgdGV4dHVyZSBjb21wcmVzc2lvbiBmb3JtYXRzIGluIHByaW9yaXR5IG9yZGVyXG4gKiBmb3IgdGV4dHVyZXMgd2l0aCBhbHBoYS4gVGhlIHN1cHBvcnRlZCBjb21wcmVzc2VkIGZvcm1hdHMgYXJlOiAnYXN0YycsICdhdGMnLCAnZHh0JywgJ2V0YzEnLFxuICogJ2V0YzInLCAncHZyJy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLm1heFJldHJpZXNdIC0gTnVtYmVyIG9mIGh0dHAgbG9hZCByZXRyeSBhdHRlbXB0cy4gRGVmYXVsdHMgdG8gNS5cbiAqL1xuZnVuY3Rpb24gYmFzaXNJbml0aWFsaXplKGNvbmZpZykge1xuICAgIGlmIChpbml0aWFsaXppbmcpIHtcbiAgICAgICAgLy8gYWxyZWFkeSBpbml0aWFsaXppbmdcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZyA9IGxhenlDb25maWcgfHwge307XG4gICAgfSBlbHNlIGlmIChjb25maWcubGF6eUluaXQpIHtcbiAgICAgICAgbGF6eUNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIGFueSBVUkxzIGFyZSBub3Qgc3BlY2lmaWVkIGluIHRoZSBjb25maWcsIHRha2UgdGhlbSBmcm9tIHRoZSBnbG9iYWwgUEMgY29uZmlnIHN0cnVjdHVyZVxuICAgIGlmICghY29uZmlnLmdsdWVVcmwgfHwgIWNvbmZpZy53YXNtVXJsIHx8ICFjb25maWcuZmFsbGJhY2tVcmwpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlcyA9ICh3aW5kb3cuY29uZmlnID8gd2luZG93LmNvbmZpZy53YXNtTW9kdWxlcyA6IHdpbmRvdy5QUkVMT0FEX01PRFVMRVMpIHx8IFtdO1xuICAgICAgICBjb25zdCB3YXNtTW9kdWxlID0gbW9kdWxlcy5maW5kKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gbS5tb2R1bGVOYW1lID09PSAnQkFTSVMnO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHdhc21Nb2R1bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHVybEJhc2UgPSB3aW5kb3cuQVNTRVRfUFJFRklYIHx8ICcnO1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZ2x1ZVVybCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5nbHVlVXJsID0gdXJsQmFzZSArIHdhc21Nb2R1bGUuZ2x1ZVVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29uZmlnLndhc21VcmwpIHtcbiAgICAgICAgICAgICAgICBjb25maWcud2FzbVVybCA9IHVybEJhc2UgKyB3YXNtTW9kdWxlLndhc21Vcmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5mYWxsYmFja1VybCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5mYWxsYmFja1VybCA9IHVybEJhc2UgKyB3YXNtTW9kdWxlLmZhbGxiYWNrVXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5nbHVlVXJsIHx8IGNvbmZpZy53YXNtVXJsIHx8IGNvbmZpZy5mYWxsYmFja1VybCkge1xuICAgICAgICBpbml0aWFsaXppbmcgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IG51bVdvcmtlcnMgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigxNiwgY29uZmlnLm51bVdvcmtlcnMgfHwgZGVmYXVsdE51bVdvcmtlcnMpKTtcbiAgICAgICAgY29uc3QgZWFnZXJXb3JrZXJzID0gKGNvbmZpZy5udW1Xb3JrZXJzID09PSAxKSB8fCAoY29uZmlnLmhhc093blByb3BlcnR5KCdlYWdlcldvcmtlcnMnKSA/IGNvbmZpZy5lYWdlcldvcmtlcnMgOiB0cnVlKTtcblxuICAgICAgICBjb25maWcucmdiUHJpb3JpdHkgPSBjb25maWcucmdiUHJpb3JpdHkgfHwgZGVmYXVsdFJnYlByaW9yaXR5O1xuICAgICAgICBjb25maWcucmdiYVByaW9yaXR5ID0gY29uZmlnLnJnYmFQcmlvcml0eSB8fCBkZWZhdWx0UmdiYVByaW9yaXR5O1xuICAgICAgICBjb25maWcubWF4UmV0cmllcyA9IGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnbWF4UmV0cmllcycpID8gY29uZmlnLm1heFJldHJpZXMgOiBkZWZhdWx0TWF4UmV0cmllcztcblxuICAgICAgICBwcmVwYXJlV29ya2VyTW9kdWxlcyhjb25maWcsIChlcnIsIGNsaWVudENvbmZpZykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYGZhaWxlZCB0byBpbml0aWFsaXplIGJhc2lzIHdvcmtlcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV29ya2VyczsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLmVucXVldWVDbGllbnQobmV3IEJhc2lzQ2xpZW50KHF1ZXVlLCBjbGllbnRDb25maWcsIGVhZ2VyV29ya2VycykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5sZXQgZGV2aWNlRGV0YWlscyA9IG51bGw7XG5cbi8qKlxuICogRW5xdWV1ZSBhIGJsb2Igb2YgYmFzaXMgZGF0YSBmb3IgdHJhbnNjb2RpbmcuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBUaGVcbiAqIGdyYXBoaWNzIGRldmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgb2YgdGhlIGJhc2lzIGZpbGUuXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIFRoZSBmaWxlIGRhdGEgdG8gdHJhbnNjb2RlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIHRyYW5zY29kZSByZXN1bHQuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBzdHJ1Y3R1cmVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaXNHR0dSXSAtIEluZGljYXRlcyB0aGlzIGlzIGEgR0dHUiBzd2l6emxlZCB0ZXh0dXJlLiBVbmRlciBzb21lXG4gKiBjaXJjdW1zdGFuY2VzIHRoZSB0ZXh0dXJlIHdpbGwgYmUgdW5zd2l6emxlZCBkdXJpbmcgdHJhbnNjb2RpbmcuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmlzS1RYMl0gLSBJbmRpY2F0ZXMgdGhlIGltYWdlIGlzIEtUWDIgZm9ybWF0LiBPdGhlcndpc2VcbiAqIGJhc2lzIGZvcm1hdCBpcyBhc3N1bWVkLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJhc2lzIHdvcmtlciB3YXMgaW5pdGlhbGl6ZWQgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gYmFzaXNUcmFuc2NvZGUoZGV2aWNlLCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgYmFzaXNJbml0aWFsaXplKCk7XG5cbiAgICBpZiAoIWRldmljZURldGFpbHMpIHtcbiAgICAgICAgZGV2aWNlRGV0YWlscyA9IHtcbiAgICAgICAgICAgIHdlYmdsMjogZGV2aWNlLndlYmdsMixcbiAgICAgICAgICAgIGZvcm1hdHM6IGdldENvbXByZXNzaW9uRm9ybWF0cyhkZXZpY2UpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcXVldWUuZW5xdWV1ZUpvYih1cmwsIGRhdGEsIGNhbGxiYWNrLCB7XG4gICAgICAgIGRldmljZURldGFpbHM6IGRldmljZURldGFpbHMsXG4gICAgICAgIGlzR0dHUjogISFvcHRpb25zPy5pc0dHR1IsXG4gICAgICAgIGlzS1RYMjogISFvcHRpb25zPy5pc0tUWDJcbiAgICB9KTtcblxuICAgIHJldHVybiBpbml0aWFsaXppbmc7XG59XG5cbmV4cG9ydCB7XG4gICAgYmFzaXNJbml0aWFsaXplLFxuICAgIGJhc2lzVHJhbnNjb2RlXG59O1xuIl0sIm5hbWVzIjpbImdldENvbXByZXNzaW9uRm9ybWF0cyIsImRldmljZSIsImFzdGMiLCJleHRDb21wcmVzc2VkVGV4dHVyZUFTVEMiLCJhdGMiLCJleHRDb21wcmVzc2VkVGV4dHVyZUFUQyIsImR4dCIsImV4dENvbXByZXNzZWRUZXh0dXJlUzNUQyIsImV0YzEiLCJleHRDb21wcmVzc2VkVGV4dHVyZUVUQzEiLCJldGMyIiwiZXh0Q29tcHJlc3NlZFRleHR1cmVFVEMiLCJwdnIiLCJleHRDb21wcmVzc2VkVGV4dHVyZVBWUlRDIiwicHJlcGFyZVdvcmtlck1vZHVsZXMiLCJjb25maWciLCJjYWxsYmFjayIsImdldFdvcmtlckJsb2IiLCJjb2RlIiwiQmFzaXNXb3JrZXIiLCJ0b1N0cmluZyIsIkJsb2IiLCJ0eXBlIiwid2FzbVN1cHBvcnRlZCIsIldlYkFzc2VtYmx5IiwiaW5zdGFudGlhdGUiLCJtb2R1bGUiLCJNb2R1bGUiLCJVaW50OEFycmF5Iiwib2YiLCJJbnN0YW5jZSIsImUiLCJzZW5kUmVzcG9uc2UiLCJiYXNpc0NvZGUiLCJ3b3JrZXJVcmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJiYXNpc1VybCIsInJnYlByaW9yaXR5IiwicmdiYVByaW9yaXR5Iiwib3B0aW9ucyIsInJlc3BvbnNlVHlwZSIsInJldHJ5IiwibWF4UmV0cmllcyIsImdsdWVVcmwiLCJ3YXNtVXJsIiwiaHR0cCIsImdldCIsImVyciIsInJlc3BvbnNlIiwiZmV0Y2hQcm9taXNlIiwiZmV0Y2giLCJjb21waWxlTWFudWFsIiwidGhlbiIsInJlc3VsdCIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiY29tcGlsZSIsIm1vZHVsZV8iLCJjYXRjaCIsImNvbXBpbGVTdHJlYW1pbmciLCJEZWJ1ZyIsIndhcm4iLCJmYWxsYmFja1VybCIsIkJhc2lzUXVldWUiLCJjb25zdHJ1Y3RvciIsImNhbGxiYWNrcyIsInF1ZXVlIiwiY2xpZW50cyIsImVucXVldWVKb2IiLCJ1cmwiLCJkYXRhIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwiam9iIiwibGVuZ3RoIiwic2hpZnQiLCJydW4iLCJlbnF1ZXVlQ2xpZW50IiwiY2xpZW50IiwiaGFuZGxlUmVzcG9uc2UiLCJpIiwiZm9ybWF0IiwiUElYRUxGT1JNQVRfUkdCNTY1IiwiUElYRUxGT1JNQVRfUkdCQTQiLCJsZXZlbHMiLCJtYXAiLCJ2IiwiVWludDE2QXJyYXkiLCJCYXNpc0NsaWVudCIsImVhZ2VyIiwid29ya2VyIiwiV29ya2VyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1lc3NhZ2UiLCJwb3N0TWVzc2FnZSIsInRyYW5zZmVyIiwiQXJyYXlCdWZmZXIiLCJkZWZhdWx0TnVtV29ya2VycyIsImRlZmF1bHRSZ2JQcmlvcml0eSIsImRlZmF1bHRSZ2JhUHJpb3JpdHkiLCJkZWZhdWx0TWF4UmV0cmllcyIsImxhenlDb25maWciLCJpbml0aWFsaXppbmciLCJiYXNpc0luaXRpYWxpemUiLCJsYXp5SW5pdCIsIm1vZHVsZXMiLCJ3aW5kb3ciLCJ3YXNtTW9kdWxlcyIsIlBSRUxPQURfTU9EVUxFUyIsIndhc21Nb2R1bGUiLCJmaW5kIiwibSIsIm1vZHVsZU5hbWUiLCJ1cmxCYXNlIiwiQVNTRVRfUFJFRklYIiwibnVtV29ya2VycyIsIk1hdGgiLCJtYXgiLCJtaW4iLCJlYWdlcldvcmtlcnMiLCJjbGllbnRDb25maWciLCJjb25zb2xlIiwiZXJyb3IiLCJkZXZpY2VEZXRhaWxzIiwiYmFzaXNUcmFuc2NvZGUiLCJ3ZWJnbDIiLCJmb3JtYXRzIiwiaXNHR0dSIiwiaXNLVFgyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBTUEsTUFBTUEscUJBQXFCLEdBQUlDLE1BQU0sSUFBSztFQUN0QyxPQUFPO0FBQ0hDLElBQUFBLElBQUksRUFBRSxDQUFDLENBQUNELE1BQU0sQ0FBQ0Usd0JBQXdCO0FBQ3ZDQyxJQUFBQSxHQUFHLEVBQUUsQ0FBQyxDQUFDSCxNQUFNLENBQUNJLHVCQUF1QjtBQUNyQ0MsSUFBQUEsR0FBRyxFQUFFLENBQUMsQ0FBQ0wsTUFBTSxDQUFDTSx3QkFBd0I7QUFDdENDLElBQUFBLElBQUksRUFBRSxDQUFDLENBQUNQLE1BQU0sQ0FBQ1Esd0JBQXdCO0FBQ3ZDQyxJQUFBQSxJQUFJLEVBQUUsQ0FBQyxDQUFDVCxNQUFNLENBQUNVLHVCQUF1QjtBQUN0Q0MsSUFBQUEsR0FBRyxFQUFFLENBQUMsQ0FBQ1gsTUFBTSxDQUFDWSx5QkFBQUE7R0FDakIsQ0FBQTtBQUNMLENBQUMsQ0FBQTs7QUFHRCxNQUFNQyxvQkFBb0IsR0FBRyxDQUFDQyxNQUFNLEVBQUVDLFFBQVEsS0FBSztFQUMvQyxNQUFNQyxhQUFhLEdBQUcsTUFBTTtJQUN4QixNQUFNQyxJQUFJLEdBQUcsR0FBRyxHQUFHQyxXQUFXLENBQUNDLFFBQVEsRUFBRSxHQUFHLFNBQVMsQ0FBQTtBQUNyRCxJQUFBLE9BQU8sSUFBSUMsSUFBSSxDQUFDLENBQUNILElBQUksQ0FBQyxFQUFFO0FBQUVJLE1BQUFBLElBQUksRUFBRSx3QkFBQTtBQUF5QixLQUFD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
