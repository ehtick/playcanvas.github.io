/**
 * @license
 * PlayCanvas Engine v1.59.0-preview revision 797466563 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { path } from '../../core/path.js';
import { GlbParser } from '../parsers/glb-parser.js';

class ContainerResource {
  instantiateModelEntity(options) {
    return null;
  }

  instantiateRenderEntity(options) {
    return null;
  }

  getMaterialVariants() {
    return null;
  }

  applyMaterialVariant(entity, name) {}

  applyMaterialVariantInstances(instances, name) {}
}

class ContainerHandler {

  constructor(app) {
    this.handlerType = "container";
    this.glbParser = new GlbParser(app.graphicsDevice, app.assets, 0);
    this.parsers = {};
  }
  set maxRetries(value) {
    this.glbParser.maxRetries = value;
    for (const parser in this.parsers) {
      if (this.parsers.hasOwnProperty(parser)) {
        this.parsers[parser].maxRetries = value;
      }
    }
  }
  get maxRetries() {
    return this.glbParser.maxRetries;
  }

  _getUrlWithoutParams(url) {
    return url.indexOf('?') >= 0 ? url.split('?')[0] : url;
  }

  _getParser(url) {
    const ext = url ? path.getExtension(this._getUrlWithoutParams(url)).toLowerCase().replace('.', '') : null;
    return this.parsers[ext] || this.glbParser;
  }

  load(url, callback, asset) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }
    this._getParser(url.original).load(url, callback, asset);
  }

  open(url, data, asset) {
    return this._getParser(url).open(url, data, asset);
  }

  patch(asset, assets) {}
}

export { ContainerHandler, ContainerResource };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGFpbmVyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2hhbmRsZXJzL2NvbnRhaW5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXRoIH0gZnJvbSAnLi4vLi4vY29yZS9wYXRoLmpzJztcblxuaW1wb3J0IHsgR2xiUGFyc2VyIH0gZnJvbSAnLi4vcGFyc2Vycy9nbGItcGFyc2VyLmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vaGFuZGxlci5qcycpLlJlc291cmNlSGFuZGxlcn0gUmVzb3VyY2VIYW5kbGVyICovXG5cbi8qKlxuICogQGludGVyZmFjZVxuICogQG5hbWUgQ29udGFpbmVyUmVzb3VyY2VcbiAqIEBkZXNjcmlwdGlvbiBDb250YWluZXIgZm9yIGEgbGlzdCBvZiBhbmltYXRpb25zLCB0ZXh0dXJlcywgbWF0ZXJpYWxzLCByZW5kZXJzIGFuZCBhIG1vZGVsLlxuICovXG5jbGFzcyBDb250YWluZXJSZXNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGVzIGFuIGVudGl0eSB3aXRoIGEgbW9kZWwgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIFRoZSBpbml0aWFsaXphdGlvbiBkYXRhIGZvciB0aGUgbW9kZWwgY29tcG9uZW50IHR5cGVcbiAgICAgKiB7QGxpbmsgTW9kZWxDb21wb25lbnR9LlxuICAgICAqIEByZXR1cm5zIHtpbXBvcnQoJy4uL2VudGl0eS5qcycpLkVudGl0eX0gQSBzaW5nbGUgZW50aXR5IHdpdGggYSBtb2RlbCBjb21wb25lbnQuIE1vZGVsXG4gICAgICogY29tcG9uZW50IGludGVybmFsbHkgY29udGFpbnMgYSBoaWVyYXJjaHkgYmFzZWQgb24ge0BsaW5rIEdyYXBoTm9kZX0uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBsb2FkIGEgZ2xiIGZpbGUgYW5kIGluc3RhbnRpYXRlIGFuIGVudGl0eSB3aXRoIGEgbW9kZWwgY29tcG9uZW50IGJhc2VkIG9uIGl0XG4gICAgICogYXBwLmFzc2V0cy5sb2FkRnJvbVVybChcInN0YXR1ZS5nbGJcIiwgXCJjb250YWluZXJcIiwgZnVuY3Rpb24gKGVyciwgYXNzZXQpIHtcbiAgICAgKiAgICAgdmFyIGVudGl0eSA9IGFzc2V0LnJlc291cmNlLmluc3RhbnRpYXRlTW9kZWxFbnRpdHkoe1xuICAgICAqICAgICAgICAgY2FzdFNoYWRvd3M6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICogICAgIGFwcC5yb290LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgaW5zdGFudGlhdGVNb2RlbEVudGl0eShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlcyBhbiBlbnRpdHkgd2l0aCBhIHJlbmRlciBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gVGhlIGluaXRpYWxpemF0aW9uIGRhdGEgZm9yIHRoZSByZW5kZXIgY29tcG9uZW50IHR5cGVcbiAgICAgKiB7QGxpbmsgUmVuZGVyQ29tcG9uZW50fS5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KCcuLi9lbnRpdHkuanMnKS5FbnRpdHl9IEEgaGllcmFyY2h5IG9mIGVudGl0aWVzIHdpdGggcmVuZGVyIGNvbXBvbmVudHMgb25cbiAgICAgKiBlbnRpdGllcyBjb250YWluaW5nIHJlbmRlcmFibGUgZ2VvbWV0cnkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBsb2FkIGEgZ2xiIGZpbGUgYW5kIGluc3RhbnRpYXRlIGFuIGVudGl0eSB3aXRoIGEgcmVuZGVyIGNvbXBvbmVudCBiYXNlZCBvbiBpdFxuICAgICAqIGFwcC5hc3NldHMubG9hZEZyb21VcmwoXCJzdGF0dWUuZ2xiXCIsIFwiY29udGFpbmVyXCIsIGZ1bmN0aW9uIChlcnIsIGFzc2V0KSB7XG4gICAgICogICAgIHZhciBlbnRpdHkgPSBhc3NldC5yZXNvdXJjZS5pbnN0YW50aWF0ZVJlbmRlckVudGl0eSh7XG4gICAgICogICAgICAgICBjYXN0U2hhZG93czogdHJ1ZVxuICAgICAqICAgICB9KTtcbiAgICAgKiAgICAgYXBwLnJvb3QuYWRkQ2hpbGQoZW50aXR5KTtcbiAgICAgKlxuICAgICAqICAgICAvLyBmaW5kIGFsbCByZW5kZXIgY29tcG9uZW50cyBjb250YWluaW5nIG1lc2ggaW5zdGFuY2VzLCBhbmQgY2hhbmdlIGJsZW5kIG1vZGUgb24gdGhlaXIgbWF0ZXJpYWxzXG4gICAgICogICAgIHZhciByZW5kZXJzID0gZW50aXR5LmZpbmRDb21wb25lbnRzKFwicmVuZGVyXCIpO1xuICAgICAqICAgICByZW5kZXJzLmZvckVhY2goZnVuY3Rpb24gKHJlbmRlcikge1xuICAgICAqICAgICAgICAgcmVuZGVyLm1lc2hJbnN0YW5jZXMuZm9yRWFjaChmdW5jdGlvbiAobWVzaEluc3RhbmNlKSB7XG4gICAgICogICAgICAgICAgICAgbWVzaEluc3RhbmNlLm1hdGVyaWFsLmJsZW5kVHlwZSA9IHBjLkJMRU5EX01VTFRJUExJQ0FUSVZFO1xuICAgICAqICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tYXRlcmlhbC51cGRhdGUoKTtcbiAgICAgKiAgICAgICAgIH0pO1xuICAgICAqICAgICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBpbnN0YW50aWF0ZVJlbmRlckVudGl0eShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFF1ZXJpZXMgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIG1hdGVyaWFsIHZhcmlhbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3N0cmluZ1tdfSBBbiBhcnJheSBvZiB2YXJpYW50IG5hbWVzLlxuICAgICAqL1xuICAgIGdldE1hdGVyaWFsVmFyaWFudHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBtYXRlcmlhbCB2YXJpYW50IHRvIGFuIGVudGl0eSBoaWVyYXJjaHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vZW50aXR5LmpzJykuRW50aXR5fSBlbnRpdHkgLSBUaGUgZW50aXR5IHJvb3QgdG8gd2hpY2ggbWF0ZXJpYWwgdmFyaWFudHNcbiAgICAgKiB3aWxsIGJlIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lXSAtIFRoZSBuYW1lIG9mIHRoZSB2YXJpYW50LCBhcyBxdWVyaWVkIGZyb20gZ2V0TWF0ZXJpYWxWYXJpYW50cyxcbiAgICAgKiBpZiBudWxsIHRoZSB2YXJpYW50IHdpbGwgYmUgcmVzZXQgdG8gdGhlIGRlZmF1bHQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBsb2FkIGEgZ2xiIGZpbGUgYW5kIGluc3RhbnRpYXRlIGFuIGVudGl0eSB3aXRoIGEgcmVuZGVyIGNvbXBvbmVudCBiYXNlZCBvbiBpdFxuICAgICAqIGFwcC5hc3NldHMubG9hZEZyb21VcmwoXCJzdGF0dWUuZ2xiXCIsIFwiY29udGFpbmVyXCIsIGZ1bmN0aW9uIChlcnIsIGFzc2V0KSB7XG4gICAgICogICAgIHZhciBlbnRpdHkgPSBhc3NldC5yZXNvdXJjZS5pbnN0YW50aWF0ZVJlbmRlckVudGl0eSh7XG4gICAgICogICAgICAgICBjYXN0U2hhZG93czogdHJ1ZVxuICAgICAqICAgICB9KTtcbiAgICAgKiAgICAgYXBwLnJvb3QuYWRkQ2hpbGQoZW50aXR5KTtcbiAgICAgKiAgICAgdmFyIG1hdGVyaWFsVmFyaWFudHMgPSBhc3NldC5yZXNvdXJjZS5nZXRNYXRlcmlhbFZhcmlhbnRzKCk7XG4gICAgICogICAgIGFzc2V0LnJlc291cmNlLmFwcGx5TWF0ZXJpYWxWYXJpYW50KGVudGl0eSwgbWF0ZXJpYWxWYXJpYW50c1swXSk7XG4gICAgICovXG4gICAgYXBwbHlNYXRlcmlhbFZhcmlhbnQoZW50aXR5LCBuYW1lKSB7fVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIG1hdGVyaWFsIHZhcmlhbnQgdG8gYSBzZXQgb2YgbWVzaCBpbnN0YW5jZXMuIENvbXBhcmVkIHRvIHRoZSBhcHBseU1hdGVyaWFsVmFyaWFudCxcbiAgICAgKiB0aGlzIG1ldGhvZCBhbGxvd3MgZm9yIHNldHRpbmcgdGhlIHZhcmlhbnQgb24gYSBzcGVjaWZpYyBzZXQgb2YgbWVzaCBpbnN0YW5jZXMgaW5zdGVhZCBvZiB0aGVcbiAgICAgKiB3aG9sZSBlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vc2NlbmUvbWVzaC1pbnN0YW5jZScpLk1lc2hJbnN0YW5jZVtdfSBpbnN0YW5jZXMgLSBBbiBhcnJheSBvZiBtZXNoXG4gICAgICogaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV0gLSBUaGUgdGhlIG5hbWUgb2YgdGhlIHZhcmlhbnQsIGFzIHF1ZXJlZCBmcm9tIGdldE1hdGVyaWFsVmFyaWFudHMsXG4gICAgICogaWYgbnVsbCB0aGUgdmFyaWFudCB3aWxsIGJlIHJlc2V0IHRvIHRoZSBkZWZhdWx0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBsb2FkIGEgZ2xiIGZpbGUgYW5kIGluc3RhbnRpYXRlIGFuIGVudGl0eSB3aXRoIGEgcmVuZGVyIGNvbXBvbmVudCBiYXNlZCBvbiBpdFxuICAgICAqIGFwcC5hc3NldHMubG9hZEZyb21VcmwoXCJzdGF0dWUuZ2xiXCIsIFwiY29udGFpbmVyXCIsIGZ1bmN0aW9uIChlcnIsIGFzc2V0KSB7XG4gICAgICogICAgIHZhciBlbnRpdHkgPSBhc3NldC5yZXNvdXJjZS5pbnN0YW50aWF0ZVJlbmRlckVudGl0eSh7XG4gICAgICogICAgICAgICBjYXN0U2hhZG93czogdHJ1ZVxuICAgICAqICAgICB9KTtcbiAgICAgKiAgICAgYXBwLnJvb3QuYWRkQ2hpbGQoZW50aXR5KTtcbiAgICAgKiAgICAgdmFyIG1hdGVyaWFsVmFyaWFudHMgPSBhc3NldC5yZXNvdXJjZS5nZXRNYXRlcmlhbFZhcmlhbnRzKCk7XG4gICAgICogICAgIHZhciByZW5kZXJzID0gZW50aXR5LmZpbmRDb21wb25lbnRzKFwicmVuZGVyXCIpO1xuICAgICAqICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbmRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgKiAgICAgICAgIHZhciByZW5kZXJDb21wb25lbnQgPSByZW5kZXJzW2ldO1xuICAgICAqICAgICAgICAgYXNzZXQucmVzb3VyY2UuYXBwbHlNYXRlcmlhbFZhcmlhbnRJbnN0YW5jZXMocmVuZGVyQ29tcG9uZW50Lm1lc2hJbnN0YW5jZXMsIG1hdGVyaWFsVmFyaWFudHNbMF0pO1xuICAgICAqICAgICB9XG4gICAgICovXG4gICAgYXBwbHlNYXRlcmlhbFZhcmlhbnRJbnN0YW5jZXMoaW5zdGFuY2VzLCBuYW1lKSB7fVxufVxuXG4vKipcbiAqIExvYWRzIGZpbGVzIHRoYXQgY29udGFpbiBtdWx0aXBsZSByZXNvdXJjZXMuIEZvciBleGFtcGxlIGdsVEYgZmlsZXMgY2FuIGNvbnRhaW4gdGV4dHVyZXMsIG1vZGVsc1xuICogYW5kIGFuaW1hdGlvbnMuXG4gKlxuICogRm9yIGdsVEYgZmlsZXMsIHRoZSBhc3NldCBvcHRpb25zIG9iamVjdCBjYW4gYmUgdXNlZCB0byBwYXNzIGxvYWQgdGltZSBjYWxsYmFja3MgZm9yIGhhbmRsaW5nXG4gKiB0aGUgdmFyaW91cyByZXNvdXJjZXMgYXQgZGlmZmVyZW50IHN0YWdlcyBvZiBsb2FkaW5nLiBUaGUgdGFibGUgYmVsb3cgbGlzdHMgdGhlIHJlc291cmNlIHR5cGVzXG4gKiBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgc3VwcG9ydGVkIHByb2Nlc3MgZnVuY3Rpb25zLlxuICpcbiAqIGBgYFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgIHJlc291cmNlICAgfCAgcHJlcHJvY2VzcyB8ICAgcHJvY2VzcyAgIHxwcm9jZXNzQXN5bmMgfCBwb3N0cHJvY2VzcyB8XG4gKiB8LS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tfFxuICogfCBnbG9iYWwgICAgICB8ICAgICAgeCAgICAgIHwgICAgICAgICAgICAgfCAgICAgICAgICAgICB8ICAgICAgeCAgICAgIHxcbiAqIHwgbm9kZSAgICAgICAgfCAgICAgIHggICAgICB8ICAgICAgeCAgICAgIHwgICAgICAgICAgICAgfCAgICAgIHggICAgICB8XG4gKiB8IGxpZ2h0ICAgICAgIHwgICAgICB4ICAgICAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICB4ICAgICAgfFxuICogfCBjYW1lcmEgICAgICB8ICAgICAgeCAgICAgIHwgICAgICB4ICAgICAgfCAgICAgICAgICAgICB8ICAgICAgeCAgICAgIHxcbiAqIHwgYW5pbWF0aW9uICAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICAgICAgICAgfCAgICAgIHggICAgICB8XG4gKiB8IG1hdGVyaWFsICAgIHwgICAgICB4ICAgICAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICB4ICAgICAgfFxuICogfCBpbWFnZSAgICAgICB8ICAgICAgeCAgICAgIHwgICAgICAgICAgICAgfCAgICAgIHggICAgICB8ICAgICAgeCAgICAgIHxcbiAqIHwgdGV4dHVyZSAgICAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICB4ICAgICAgfCAgICAgIHggICAgICB8XG4gKiB8IGJ1ZmZlciAgICAgIHwgICAgICB4ICAgICAgfCAgICAgICAgICAgICB8ICAgICAgeCAgICAgIHwgICAgICB4ICAgICAgfFxuICogfCBidWZmZXJWaWV3ICB8ICAgICAgeCAgICAgIHwgICAgICAgICAgICAgfCAgICAgIHggICAgICB8ICAgICAgeCAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiBgYGBcbiAqXG4gKiBBZGRpdGlvbmFsIG9wdGlvbnMgdGhhdCBjYW4gYmUgcGFzc2VkIGZvciBnbFRGIGZpbGVzOlxuICogW29wdGlvbnMubW9ycGhQcmVzZXJ2ZURhdGFdIC0gV2hlbiB0cnVlLCB0aGUgbW9ycGggdGFyZ2V0IGtlZXBzIGl0cyBkYXRhIHBhc3NlZCB1c2luZyB0aGUgb3B0aW9ucyxcbiAqIGFsbG93aW5nIHRoZSBjbG9uZSBvcGVyYXRpb24uXG4gKlxuICogRm9yIGV4YW1wbGUsIHRvIHJlY2VpdmUgYSB0ZXh0dXJlIHByZXByb2Nlc3MgY2FsbGJhY2s6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIGNvbnRhaW5lckFzc2V0ID0gbmV3IHBjLkFzc2V0KGZpbGVuYW1lLCAnY29udGFpbmVyJywgeyB1cmw6IHVybCwgZmlsZW5hbWU6IGZpbGVuYW1lIH0sIG51bGwsIHtcbiAqICAgICB0ZXh0dXJlOiB7XG4gKiAgICAgICAgIHByZXByb2Nlc3MoZ2x0ZlRleHR1cmUpIHsgY29uc29sZS5sb2coXCJ0ZXh0dXJlIHByZXByb2Nlc3NcIik7IH1cbiAqICAgICB9LFxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAaW1wbGVtZW50cyB7UmVzb3VyY2VIYW5kbGVyfVxuICovXG5jbGFzcyBDb250YWluZXJIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBUeXBlIG9mIHRoZSByZXNvdXJjZSB0aGUgaGFuZGxlciBoYW5kbGVzLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBoYW5kbGVyVHlwZSA9IFwiY29udGFpbmVyXCI7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQ29udGFpbmVyUmVzb3VyY2UgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vYXBwLWJhc2UuanMnKS5BcHBCYXNlfSBhcHAgLSBUaGUgcnVubmluZyB7QGxpbmsgQXBwQmFzZX0uXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmdsYlBhcnNlciA9IG5ldyBHbGJQYXJzZXIoYXBwLmdyYXBoaWNzRGV2aWNlLCBhcHAuYXNzZXRzLCAwKTtcbiAgICAgICAgdGhpcy5wYXJzZXJzID0geyB9O1xuICAgIH1cblxuICAgIHNldCBtYXhSZXRyaWVzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZ2xiUGFyc2VyLm1heFJldHJpZXMgPSB2YWx1ZTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJzZXIgaW4gdGhpcy5wYXJzZXJzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJzZXJzLmhhc093blByb3BlcnR5KHBhcnNlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlcnNbcGFyc2VyXS5tYXhSZXRyaWVzID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgbWF4UmV0cmllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xiUGFyc2VyLm1heFJldHJpZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSByZXNvdXJjZSBVUkwuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIFVSTCB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnMgcmVtb3ZlZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRVcmxXaXRob3V0UGFyYW1zKHVybCkge1xuICAgICAgICByZXR1cm4gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gdXJsLnNwbGl0KCc/JylbMF0gOiB1cmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSByZXNvdXJjZSBVUkwuXG4gICAgICogQHJldHVybnMgeyp9IEEgc3VpdGFibGUgcGFyc2VyIHRvIHBhcnNlIHRoZSByZXNvdXJjZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRQYXJzZXIodXJsKSB7XG4gICAgICAgIGNvbnN0IGV4dCA9IHVybCA/IHBhdGguZ2V0RXh0ZW5zaW9uKHRoaXMuX2dldFVybFdpdGhvdXRQYXJhbXModXJsKSkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcuJywgJycpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2Vyc1tleHRdIHx8IHRoaXMuZ2xiUGFyc2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gdXJsIC0gRWl0aGVyIHRoZSBVUkwgb2YgdGhlIHJlc291cmNlIHRvIGxvYWQgb3IgYSBzdHJ1Y3R1cmVcbiAgICAgKiBjb250YWluaW5nIHRoZSBsb2FkIGFuZCBvcmlnaW5hbCBVUkwuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt1cmwubG9hZF0gLSBUaGUgVVJMIHRvIGJlIHVzZWQgZm9yIGxvYWRpbmcgdGhlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXJsLm9yaWdpbmFsXSAtIFRoZSBvcmlnaW5hbCBVUkwgdG8gYmUgdXNlZCBmb3IgaWRlbnRpZnlpbmcgdGhlIHJlc291cmNlXG4gICAgICogZm9ybWF0LiBUaGlzIGlzIG5lY2Vzc2FyeSB3aGVuIGxvYWRpbmcsIGZvciBleGFtcGxlIGZyb20gYmxvYi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi9oYW5kbGVyLmpzJykuUmVzb3VyY2VIYW5kbGVyQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHVzZWQgd2hlblxuICAgICAqIHRoZSByZXNvdXJjZSBpcyBsb2FkZWQgb3IgYW4gZXJyb3Igb2NjdXJzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9hc3NldC9hc3NldC5qcycpLkFzc2V0fSBbYXNzZXRdIC0gT3B0aW9uYWwgYXNzZXQgdGhhdCBpcyBwYXNzZWQgYnlcbiAgICAgKiBSZXNvdXJjZUxvYWRlci5cbiAgICAgKi9cbiAgICBsb2FkKHVybCwgY2FsbGJhY2ssIGFzc2V0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdXJsID0ge1xuICAgICAgICAgICAgICAgIGxvYWQ6IHVybCxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbDogdXJsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZ2V0UGFyc2VyKHVybC5vcmlnaW5hbCkubG9hZCh1cmwsIGNhbGxiYWNrLCBhc3NldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSBVUkwgb2YgdGhlIHJlc291cmNlIHRvIG9wZW4uXG4gICAgICogQHBhcmFtIHsqfSBkYXRhIC0gVGhlIHJhdyByZXNvdXJjZSBkYXRhIHBhc3NlZCBieSBjYWxsYmFjayBmcm9tIHtAbGluayBSZXNvdXJjZUhhbmRsZXIjbG9hZH0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2Fzc2V0L2Fzc2V0LmpzJykuQXNzZXR9IFthc3NldF0gLSBPcHRpb25hbCBhc3NldCB0aGF0IGlzIHBhc3NlZCBieVxuICAgICAqIFJlc291cmNlTG9hZGVyLlxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcGFyc2VkIHJlc291cmNlIGRhdGEuXG4gICAgICovXG4gICAgb3Blbih1cmwsIGRhdGEsIGFzc2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRQYXJzZXIodXJsKS5vcGVuKHVybCwgZGF0YSwgYXNzZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9hc3NldC9hc3NldC5qcycpLkFzc2V0fSBhc3NldCAtIFRoZSBhc3NldCB0byBwYXRjaC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vYXNzZXQvYXNzZXQtcmVnaXN0cnkuanMnKS5Bc3NldFJlZ2lzdHJ5fSBhc3NldHMgLSBUaGUgYXNzZXQgcmVnaXN0cnkuXG4gICAgICovXG4gICAgcGF0Y2goYXNzZXQsIGFzc2V0cykge1xuXG4gICAgfVxufVxuXG5leHBvcnQgeyBDb250YWluZXJSZXNvdXJjZSwgQ29udGFpbmVySGFuZGxlciB9O1xuIl0sIm5hbWVzIjpbIkNvbnRhaW5lclJlc291cmNlIiwiaW5zdGFudGlhdGVNb2RlbEVudGl0eSIsIm9wdGlvbnMiLCJpbnN0YW50aWF0ZVJlbmRlckVudGl0eSIsImdldE1hdGVyaWFsVmFyaWFudHMiLCJhcHBseU1hdGVyaWFsVmFyaWFudCIsImVudGl0eSIsIm5hbWUiLCJhcHBseU1hdGVyaWFsVmFyaWFudEluc3RhbmNlcyIsImluc3RhbmNlcyIsIkNvbnRhaW5lckhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFwcCIsImhhbmRsZXJUeXBlIiwiZ2xiUGFyc2VyIiwiR2xiUGFyc2VyIiwiZ3JhcGhpY3NEZXZpY2UiLCJhc3NldHMiLCJwYXJzZXJzIiwibWF4UmV0cmllcyIsInZhbHVlIiwicGFyc2VyIiwiaGFzT3duUHJvcGVydHkiLCJfZ2V0VXJsV2l0aG91dFBhcmFtcyIsInVybCIsImluZGV4T2YiLCJzcGxpdCIsIl9nZXRQYXJzZXIiLCJleHQiLCJwYXRoIiwiZ2V0RXh0ZW5zaW9uIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwibG9hZCIsImNhbGxiYWNrIiwiYXNzZXQiLCJvcmlnaW5hbCIsIm9wZW4iLCJkYXRhIiwicGF0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBV0EsTUFBTUEsaUJBQWlCLENBQUM7RUFpQnBCQyxzQkFBc0IsQ0FBQ0MsT0FBTyxFQUFFO0FBQzVCLElBQUEsT0FBTyxJQUFJLENBQUE7QUFDZixHQUFBOztFQTJCQUMsdUJBQXVCLENBQUNELE9BQU8sRUFBRTtBQUM3QixJQUFBLE9BQU8sSUFBSSxDQUFBO0FBQ2YsR0FBQTs7QUFPQUUsRUFBQUEsbUJBQW1CLEdBQUc7QUFDbEIsSUFBQSxPQUFPLElBQUksQ0FBQTtBQUNmLEdBQUE7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
