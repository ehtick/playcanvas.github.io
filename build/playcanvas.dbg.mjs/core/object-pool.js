/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
class ObjectPool {
  constructor(constructorFunc, size) {
    this._constructor = constructorFunc;
    this._pool = [];
    this._count = 0;

    this._resize(size);
  }

  _resize(size) {
    if (size > this._pool.length) {
      for (let i = this._pool.length; i < size; i++) {
        this._pool[i] = new this._constructor();
      }
    }
  }

  allocate() {
    if (this._count >= this._pool.length) {
      this._resize(this._pool.length * 2);
    }

    return this._pool[this._count++];
  }

  freeAll() {
    this._count = 0;
  }

}

export { ObjectPool };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2JqZWN0LXBvb2wuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb3JlL29iamVjdC1wb29sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIE9iamVjdFBvb2wge1xuICAgIGNvbnN0cnVjdG9yKGNvbnN0cnVjdG9yRnVuYywgc2l6ZSkge1xuICAgICAgICB0aGlzLl9jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yRnVuYztcbiAgICAgICAgdGhpcy5fcG9vbCA9IFtdO1xuICAgICAgICB0aGlzLl9jb3VudCA9IDA7XG5cbiAgICAgICAgdGhpcy5fcmVzaXplKHNpemUpO1xuICAgIH1cblxuICAgIF9yZXNpemUoc2l6ZSkge1xuICAgICAgICBpZiAoc2l6ZSA+IHRoaXMuX3Bvb2wubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5fcG9vbC5sZW5ndGg7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wb29sW2ldID0gbmV3IHRoaXMuX2NvbnN0cnVjdG9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhbGxvY2F0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvdW50ID49IHRoaXMuX3Bvb2wubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNpemUodGhpcy5fcG9vbC5sZW5ndGggKiAyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcG9vbFt0aGlzLl9jb3VudCsrXTtcbiAgICB9XG5cbiAgICBmcmVlQWxsKCkge1xuICAgICAgICB0aGlzLl9jb3VudCA9IDA7XG4gICAgfVxufVxuXG5leHBvcnQgeyBPYmplY3RQb29sIH07XG4iXSwibmFtZXMiOlsiT2JqZWN0UG9vbCIsImNvbnN0cnVjdG9yIiwiY29uc3RydWN0b3JGdW5jIiwic2l6ZSIsIl9jb25zdHJ1Y3RvciIsIl9wb29sIiwiX2NvdW50IiwiX3Jlc2l6ZSIsImxlbmd0aCIsImkiLCJhbGxvY2F0ZSIsImZyZWVBbGwiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsTUFBTUEsVUFBTixDQUFpQjtBQUNiQyxFQUFBQSxXQUFXLENBQUNDLGVBQUQsRUFBa0JDLElBQWxCLEVBQXdCO0lBQy9CLElBQUtDLENBQUFBLFlBQUwsR0FBb0JGLGVBQXBCLENBQUE7SUFDQSxJQUFLRyxDQUFBQSxLQUFMLEdBQWEsRUFBYixDQUFBO0lBQ0EsSUFBS0MsQ0FBQUEsTUFBTCxHQUFjLENBQWQsQ0FBQTs7SUFFQSxJQUFLQyxDQUFBQSxPQUFMLENBQWFKLElBQWIsQ0FBQSxDQUFBO0FBQ0gsR0FBQTs7RUFFREksT0FBTyxDQUFDSixJQUFELEVBQU87QUFDVixJQUFBLElBQUlBLElBQUksR0FBRyxJQUFBLENBQUtFLEtBQUwsQ0FBV0csTUFBdEIsRUFBOEI7QUFDMUIsTUFBQSxLQUFLLElBQUlDLENBQUMsR0FBRyxJQUFBLENBQUtKLEtBQUwsQ0FBV0csTUFBeEIsRUFBZ0NDLENBQUMsR0FBR04sSUFBcEMsRUFBMENNLENBQUMsRUFBM0MsRUFBK0M7QUFDM0MsUUFBQSxJQUFBLENBQUtKLEtBQUwsQ0FBV0ksQ0FBWCxJQUFnQixJQUFJLElBQUEsQ0FBS0wsWUFBVCxFQUFoQixDQUFBO0FBQ0gsT0FBQTtBQUNKLEtBQUE7QUFDSixHQUFBOztBQUVETSxFQUFBQSxRQUFRLEdBQUc7QUFDUCxJQUFBLElBQUksS0FBS0osTUFBTCxJQUFlLEtBQUtELEtBQUwsQ0FBV0csTUFBOUIsRUFBc0M7QUFDbEMsTUFBQSxJQUFBLENBQUtELE9BQUwsQ0FBYSxJQUFBLENBQUtGLEtBQUwsQ0FBV0csTUFBWCxHQUFvQixDQUFqQyxDQUFBLENBQUE7QUFDSCxLQUFBOztBQUNELElBQUEsT0FBTyxLQUFLSCxLQUFMLENBQVcsSUFBS0MsQ0FBQUEsTUFBTCxFQUFYLENBQVAsQ0FBQTtBQUNILEdBQUE7O0FBRURLLEVBQUFBLE9BQU8sR0FBRztJQUNOLElBQUtMLENBQUFBLE1BQUwsR0FBYyxDQUFkLENBQUE7QUFDSCxHQUFBOztBQTFCWTs7OzsifQ==
